(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[2520,9597,4621,1502],{66399:function(e,t,n){"use strict";var i=n(22107),o=n(94707),r=n(87320),a=n(86325),s=n(85626),c=n(85879),l=n(62618),u=n(68339),d=n(82644),h=n(14168),p=n.n(h),m=n(87363),f=n(36695),v=n(79281),g=n(57487),w=n(6967),Z=function(e){(0,a._)(n,e);var t=(0,s._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,o._)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isModalShow,n=e.memberHashId,i=e.resetHistoryMessages;!t&&n&&i({senderId:n})}},{key:"render",value:function(){var e=this.props,t=e.memberHashId,n=e.isModalShow,i=e.handleCloseModal;return(0,c.tZ)(l.Z,{className:"ChatBoxModal",spread:!0,onClose:i,styles:{content:{padding:"0px"},inner:{overflow:"visible"},root:{width:718}},closeButton:(0,c.tZ)(u.ZP,{preset:"plain",className:"ChatBoxModal-closeButton",onClick:i,"aria-label":"关闭",children:(0,c.tZ)(d.ZP,{className:"ChatBoxModal-closeIcon"})}),children:n&&(0,c.tZ)(g.Z,{senderId:t,entryName:"ChatBoxModal",children:(0,c.tZ)(w.Z,{type:"default",senderId:t,className:"Chat-ChatBox"},t)})})}}]),n}(m.Component);(0,r._)(Z,"propTypes",{memberHashId:p().string,handleCloseModal:p().func,isModalShow:p().bool}),t.Z=(0,f.connect)(null,{resetHistoryMessages:v.$x})(Z)},44144:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(55164),o=n(57477),r=n(71728),a=n(94009),s=n(85879),c=n(87363),l=n(22715),u=n(83215),d=function(e){var t=e.tabIndex,n=e.children,d=(0,r._)(e,["tabIndex","children"]),h=(0,a._)((0,c.useState)(null),2),p=h[0],m=h[1];return(0,s.tZ)(l.HC,(0,o._)((0,i._)({tabIndex:void 0===t?0:t,onRef:m},d),{children:(0,s.tZ)(u.wi,{root:p,children:n})}))}},30226:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(22107),o=n(94707),r=n(87320),a=n(86325),s=n(55164),c=n(71728),l=n(85626),u=n(85879),d=n(87363),h=n(14168),p=n.n(h),m=n(22715),f=n(83215),v=function(e){(0,a._)(n,e);var t=(0,l._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,o._)(n,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,i=(0,c._)(e,["containerClassName","selector"]);return(0,u.tZ)(f.gx,{className:t,selector:n,children:(0,u.tZ)(m.ZP,(0,s._)({},i))})}}]),n}(d.Component);(0,r._)(v,"propTypes",{containerClassName:p().string,selector:p().string}),(0,r._)(v,"defaultProps",{selector:".List-item"});var g=v},54230:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(94009),o=n(85879),r=n(87363),a=n(25628),s=n.n(a),c=n(92525),l=n(26113),u=n(83215),d=n(41402),h=n(16836),p=n(66263),m=n(34390),f=function(e){return"calc(".concat(e,"px + 2em)")},v=function(){var e=(0,m.Z)();return(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xB,{styles:{html:{scrollPaddingTop:f(p.BR),scrollPaddingBottom:56}}}),e&&(0,o.tZ)(h.Z,{children:(0,o.tZ)("div",{id:"_scroll-padding-polyfill_",style:{position:"fixed",top:0,left:0,right:0,pointerEvents:"none",background:"transparent",height:f(p.BR+56)}})})]})},g=n(91850),w=n(65733),Z=n(7835),y=n(69755),_=n(36695),b=function(e){var t=e.children,n=(0,i._)((0,g.Z)(),2),a=n[0],d=n[1],h=(0,i._)((0,g.Z)(),2),m=h[0],f=h[1],b=(0,_.useSelector)(function(e){return e.env.vars.isPageHeaderDisabled}),C=(0,r.useRef)({on:(0,w.Z)(function(){return!b&&f.on()}),off:(0,w.Z)(function(){return!b&&f.off()})}).current,k=(0,y.M)().scrollY,S=(0,i._)((0,r.useState)(),2),A=S[0],N=S[1];return(0,Z.Z)(function(){return k.onChange(function(){k.getPrevious()>k.get()?N("up"):N("down")})}),(0,r.useEffect)(function(){a?C.on():C.off()},[a,C]),(0,r.useEffect)(function(){a&&("down"===A?C.on():"up"===A&&C.off())},[a,A,C]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(v,{}),(0,o.tZ)(u.yW,{input:"/",action:C.off}),(0,o.tZ)(c.Z,{top:p.BR,onStickyChange:function(e){e?d.on():d.off()},children:null}),(0,o.tZ)(l.Z.Inlet,{shown:m,children:(0,o.tZ)("div",{className:s()("PageHeader",{"is-shown":m}),children:t})})]})}},16646:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(87363),o=n(19076),r=(0,i.createContext)({}),a=n(54422),s=(0,o.withRouter)(function(e){var t=e.to,n=e.router,o=(0,i.useContext)(r);return o.url||(o.url=t),(0,i.useEffect)(function(){(0,a.sD)(t)?window.location.replace(t):n.replace(t)},[n,t]),null})},24304:function(e,t,n){"use strict";var i=n(85879),o=n(87641);t.Z=function(e){var t=e.scoreText,n=e.className;return t?(0,i.tZ)(o.Flex,{className:n,justifyContent:"center",alignItems:"center",px:"4px",css:function(e){return{height:"19px",border:"0.5px solid ".concat(e.colors.GBK08A),borderRadius:"4px",marginRight:"12px",fontSize:"12px",color:e.colors.GBL01A,fontWeight:500,position:"relative","&::before":{content:'""',display:"inline-block",width:"5px",height:"5px",transform:"matrix(0.71, -0.72, 0.7, 0.71, 0, 0)",background:e.colors.GBK99A,position:"absolute",right:"-3px",top:"50%",marginTop:"-3px",borderBottom:"0.5px solid ".concat(e.colors.GBK08A),borderRight:"0.5px solid ".concat(e.colors.GBK08A)}}},children:t}):null}},61818:function(e,t,n){"use strict";var i=n(94009),o=n(85879),r=n(3331),a=n(24405),s=n(7835),c=n(75056),l=n(87363),u=n(36695),d=n(87641),h=n(43384),p=n(19958);t.Z=function(e){var t=e.source,n=(0,a.F)(),m=(0,u.useDispatch)(),f=(0,i._)((0,l.useState)({}),2),v=f[0],g=v.domainName,w=v.tips,Z=v.pcDayShow,y=v.pcNightShow,_=f[1];return((0,s.Z)(function(){m((0,p.BP)(t)).then(function(e){var t=e.payload;(null==t?void 0:t.top)&&_(t.top)})}),g&&Z)?(0,o.BX)(h.Wi,{zaModuleId:"field_of_advantage",zaType:"Block",extra:{configMap:{field_name:g}},view:{elementLocation:{page:{pageId:"10012"}}},children:[(0,o.BX)(d.Flex,{fontSize:"13px",lineHeight:"16px",backgroundColor:"GBK99A",alignItems:"center",px:"14px",py:"12px",fontWeight:500,children:[(0,o.tZ)(d.Text,{mr:"5px",css:{whiteSpace:"pre",fontWeight:"400"},dangerouslySetInnerHTML:{__html:n.isDarkMode?y:Z}}),(0,o.tZ)(r.Z,{toggler:(0,o.tZ)("span",{children:(0,o.tZ)(c.ZP,{size:12,center:!0,css:function(e){return{color:e.colors.GBK06A}}})}),arrowed:!0,toggleEvent:"hover",children:(0,o.tZ)(d.Text,{px:"14px",py:"12px",css:{maxWidth:"600px"},children:w})})]}),(0,o.tZ)(d.Box,{height:"8px",backgroundColor:"GBK10A"})]}):null}},87464:function(e,t,n){"use strict";var i=n(55164),o=n(57477),r=n(85879),a=n(80565),s=n(87641),c=n(94307),l={201:{color:"#690000",name:"火爆"},202:{color:"GBL01A",name:"新问"},203:{color:"GRD03A",name:"飙升"}},u=function(e){var t=e.type;if(!l[t])return null;var n=l[t],i=n.color,o=n.name;return(0,r.tZ)(s.Box,{css:function(e){return{display:"inline-block",padding:"3px 4px",marginRight:"8px",border:"1px solid ".concat(i.includes("#")?i:e.colors[i]),background:e.colorMod(i.includes("#")?i:e.colors[i]).alpha(.1),color:i.includes("#")?i:e.colors[i],borderRadius:"3px",fontSize:"12px",fontWeight:"500",lineHeight:"12px"}},children:o})};t.Z=function(e){var t=e.data,n=t.titleLink,s=t.title,l=t.hotLabelType,d=e.className;return(0,r.BX)(c.pl,{className:d,href:n,zaType:"Card",target:"_blank",css:function(e){return(0,o._)((0,i._)({},(0,a.S)(2)),{display:"block",fontSize:"15px",color:e.colors.GBK02A,fontWeight:600,lineHeight:"24px"})},children:[(0,r.tZ)(u,{type:l}),s]})}},71798:function(e,t,n){"use strict";var i=n(85879),o=n(87641);t.Z=function(e){var t=e.labels;return t?(0,i.tZ)(o.Box,{children:t.map(function(e){var t=e.text;return(0,i.tZ)(o.Flex,{ml:"6px",css:function(e){return{border:"1px solid ".concat(e.colors.GBK06A),borderRadius:"4px",padding:"1px 4px",lineHeight:"14px",color:e.colors.GBK06A,fontSize:"10px"}},children:t},t)})}):null}},40489:function(e,t,n){"use strict";n.d(t,{Uk:function(){return c},vO:function(){return s},zU:function(){return l}});var i=n(49899),o=n(93547),r=n(30722),a=function(e){return{name:"description",property:"og:description",content:e}},s=function(e,t){var n=[];if(e&&e.content){var i=(0,o.NJ)(e.content,100);i&&n.push(a(i))}if(t){var r=t.map(function(e){return e.name}).join(",");r&&n.push({name:"keywords",content:r})}return n},c=function(e,t){var n=[];if(e&&e.detail){var r=(0,o.NJ)(e.detail,100);r&&n.push(a(r))}else t&&t.content&&n.push.apply(n,(0,i._)(s(t)));if(e.topics){var c=e.topics.map(function(e){return e.name}).join(",");c&&n.push({name:"keywords",content:c})}return n},l=function(e){if(e){var t=e.headline,n=e.answerCount,i=void 0===n?0:n,o=e.voteupCount,s=void 0===o?0:o;return[a("".concat(void 0===t?"":t," 回答数 ").concat((0,r.uf)(i),"，获得 ").concat((0,r.uf)(s)," 次赞同"))]}return[]}},88197:function(e,t,n){"use strict";n.d(t,{g:function(){return i},v:function(){return o}});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){return setTimeout(t,e)})};function o(e){var t=[];return e.reduce(function(e,n){return e.then(function(){return n().then(function(e){t.push(e)})})},Promise.resolve()).then(function(){return t})}},96485:function(e,t,n){"use strict";n.d(t,{g:function(){return c},k:function(){return s.ks}});var i=n(55164),o=n(85879),r=n(84871),a=n.n(r),s=n(76976),c=function(e){var t=e.scene;return function(e){return a()(function(n){return(0,o.tZ)(s.g_,{scene:t,children:(0,o.tZ)(e,(0,i._)({},n))})},e)}}},34390:function(e,t,n){"use strict";var i=n(94009),o=n(87363);t.Z=function(){var e=(0,i._)((0,o.useState)(!1),2),t=e[0],n=e[1];return(0,o.useEffect)(function(){n(!0)},[]),t}},13901:function(e,t,n){"use strict";n.d(t,{Z:function(){return q}});var i=n(20857),o=n(22107),r=n(94707),a=n(87320),s=n(86325),c=n(85626),l=n(85879),u=n(50220),d=n(25628),h=n.n(d),p=n(14168),m=n.n(p),f=n(87363),v=n(36695),g=n(93206),w=n(38889),Z=n(46829),y=n(96611),_=n(66263),b=n(85576),C=n(67927),k=n(6438),S=n(7522),A=n(69383),N=n(66399),B=function(e){(0,s._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,o._)(this,n),e=t.apply(this,arguments),(0,a._)((0,i._)(e),"state",{modalShown:!1}),(0,a._)((0,i._)(e),"handleSendMessage",function(){var t=e.props,n=t.onModalOpen,o=t.user.allowMessage,r=t.dispatch,a=t.doNotCheckAllowMessageSetting;o||void 0===o&&a?(e.setState({modalShown:!0}),n&&n()):r((0,C.c0)(_.T$.blocked,"red")),A.Z.trackEvent((0,i._)(e),{action:"Message",element:"Button",is_intent:!0})}),(0,a._)((0,i._)(e),"handleCloseModal",function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()}),e}return(0,r._)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,i=e.color,o=e.icon,r=e.label,a=e.className,s=e.tooltip,c=e.tooltipPreset,u=e.authRequired,d=this.state.modalShown,h="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return(0,l.BX)(l.HY,{children:[(0,l.tZ)(w.ZP,{preset:n,color:i,className:a,icon:o,label:r,onClick:u(this.handleSendMessage,h?_.q0.serviceAccountMessage:_.q0.message),"data-tooltip":s,"aria-label":s,"data-tooltip-preset":c}),(0,l.tZ)(N.Z,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:d})]})}}]),n}(f.Component);B.propTypes={onModalOpen:m().func,onModalClose:m().func},B.defaultProps={preset:"outline",color:"grey",icon:S.d,label:"发私信",doNotCheckAllowMessageSetting:!1};var x=(0,g.compose)(b.Z,(0,v.connect)())(B),T=function(e){(0,s._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,o._)(this,n),e=t.apply(this,arguments),(0,a._)((0,i._)(e),"state",{reportModalShown:!1}),(0,a._)((0,i._)(e),"handleShieldUser",function(){var t=e.props,n=t.user.urlToken,i=t.updateUserBlocking,o=t.showNotification;i(n,!1).then(function(){return o("屏蔽已取消")})}),e}return(0,r._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,i=t.user,o=i.urlToken,r=i.isBlocking,a=i.isOrg,s=i.id,c=t.canShowMutualFollowStatus,d=t.className,p=t.buttonClassName,m=t.onModalOpen,f=t.onModalClose,v=t.authRequired,g=this.state.reportModalShown,b=h()("MemberButtonGroup",d);return r?(0,l.BX)("div",{className:b,children:[(0,l.BX)(w.ZP,{className:p,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[(0,l.tZ)(u.l,{center:!0,text:!0})," 已屏蔽"]}),!a&&(0,l.BX)(w.ZP,{className:p,onClick:v(function(){e.setState({reportModalShown:!0}),m&&m()},_.q0.report),children:["举报用户",(0,l.tZ)(y.y,{shown:g,onClose:function(){e.setState({reportModalShown:!1}),f&&f()},type:"member",urlToken:o,memberHashID:s,zaEnabled:!0})]})]}):(0,l.BX)("div",{className:b,children:[(0,l.tZ)(Z.Z,{id:o,type:n.type,gender:n.gender,isFollowing:n.isFollowing,isFollowed:n.isFollowed,canShowMutualFollowStatus:c,className:p,preset:Z.Z.PRESETS.primary}),(0,l.tZ)(x,{user:n,className:p,onModalOpen:m,onModalClose:f})]})}}]),n}(f.Component);(0,a._)(T,"propTypes",{user:m().object.isRequired,buttonClassName:m().string,onModalOpen:m().func,onModalClose:m().func});var q=(0,g.compose)(b.Z,(0,v.connect)(null,{updateUserBlocking:k.cR,showNotification:C.c0}))(T)},4338:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ak}});var i=n(85879),o=n(19076),r=n(20857),a=n(9338),s=n(22107),c=n(94707),l=n(87320),u=n(86325),d=n(55164),h=n(94009),p=n(85626),m=n(30971),f=n(76931),v=n.n(f),g=n(14168),w=n.n(g),Z=n(87363),y=n.n(Z),_=n(39658),b=n(36695),C=n(87641),k=n(93206),S=n(43384),A=n(99447),N=n(44169),B=n(48933),x=n(38267),T=n.p+"assets/placeholder.0682898a.svg",q=function(){return(0,i.tZ)(x.Z,{title:"该内容仅作者可见",subtitle:"",errorImage:T})},E=n(9435),Q=n(3028),M=(0,i.tZ)(_.ql,{meta:[{name:"robots",content:"noindex"}]}),P=(0,k.compose)((0,Q.Z)(null))(function(e){var t=e.entity,n=void 0===t?{}:t,o=n.type,r=n.id,a=n.isCollapsed,s=n.suggestEdit,c=void 0===s?{}:s,l=n.adminClosedComment,u="";"question"===o?u=r:"answer"===o&&(u=n.question.id);var d=(0,b.useSelector)(function(e){return(0,E.Md)(e,{id:u})});if(d){var h=d.status,p=d.adminClosedComment,m=d.isMuted,f=d.visibleOnlyToAuthor;if((null==h?void 0:h.isClose)||(null==h?void 0:h.isSuggest)||(null==h?void 0:h.isEvaluate)||p||m||f)return M}return"question"===o&&d.redirection?(0,i.tZ)("link",{rel:"canonical",href:"https://www.zhihu.com/question/".concat(d.redirection.to.id)}):"answer"===o&&((null==c?void 0:c.status)||a||l)||"article"===o&&((null==c?void 0:c.status)||l)?M:""}),I=n(48710),R=n(79855),z=n(40489),X=n(85576),L=n(96485),D=n(8866),F=n(58909),H=n(67927),U=n(93220),O=n(45471),V=n(57269),W=n(88257),G=n(98852),j=function(e){var t=e.isQAPage,n=e.children,o=(0,b.useSelector)(function(e){return e.env.userAgent.GoogleBot});return void 0!==t&&t&&o?(0,i.tZ)("div",{itemScope:!0,itemType:"https://schema.org/QAPage",children:n}):(0,i.tZ)(i.HY,{children:n})},K=n(76435),Y=n(88729),$=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{time:e.props.seconds}),(0,l._)((0,r._)(e),"handleClearInterval",function(){e.interval&&clearInterval(e.interval)}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){e.setState({time:e.state.time-1},function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/".concat(t)}})},1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,o=this.state.time;return(0,i.tZ)(K.mf,{title:t,subtitle:"".concat(o," 秒后自动跳转至").concat(n),errorImage:Y})}}]),n}(Z.Component);(0,l._)($,"defaultProps",{seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"});var J=function(e){var t=e.title,n=e.id,i=e.topics,o=e.answerCount,r=e.commentCount,a=e.created,s=e.updatedTime,c=e.visitsCount,l=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:i.map(function(e){return e.name}).join(","),answerCount:o,commentCount:r,dateCreated:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*s).toISOString(),"zhihu:visitsCount":c,"zhihu:followerCount":l}};function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClose,n=e.isEvaluate,i=e.isLocked,o=e.isSuggest;return t?"closed":o?"suggested":n?"evaluated":i?"locked":""},en=function(e){return"#draft"===e.hash||"#write"===e.hash||"write"in e.query},ei=n(79065),eo=n(30037),er=n(64137),ea=n(82806),es=n.n(ea),ec=n(25628),el=n.n(ec),eu=n(7621),ed=n(69383),eh=n(21060),ep=n(7453),em=n(38889),ef=n(4757),ev=n(9388),eg=n(63573),ew=n(54230),eZ=n(55698),ey=n(41283),e_=n(53159),eb="SpecialQuestionAuthor";function eC(e){var t=e.author,n=e.className,r=e.isMobile,a=t.avatarUrl,s=t.name,c=t.badge,u=t.badgeV2;return(0,i.tZ)("div",{className:el()("".concat(eb,"-Wrapper"),n),children:(0,i.BX)(o.Link,{className:el()("".concat(eb),(0,l._)({},"ROOT_CLASS--mobile",r)),to:"/".concat(t.isOrg?"org":"people","/").concat(t.urlToken||t.id),children:[(0,i.tZ)(eZ.qE,{size:r?22:28,url:a,alt:s,round:!0}),(0,i.tZ)("span",{className:"".concat(eb,"-Author"),children:t.name}),(0,i.tZ)(ey.Vh,{className:"".concat(eb,"-Badge"),badge:(0,e_.t)(u,c),size:r?16:18}),(0,i.tZ)("span",{className:"".concat(eb,"-Suffix"),children:"的提问"})]})})}eC.propTypes={author:w().object.isRequired,isMobile:w().bool};var ek=n(83821),eS=n(80714),eA=n(59937),eN=n(57477),eB=n(71728),ex=n(88423),eT=n(30722),eq=n(24340),eE=n(94307),eQ=n(66980),eM=Object.assign,eP=function(e){return y().createElement(eQ.Z,eM({width:"99",height:"99",viewBox:"0 0 99 99"},e),y().createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M118.269 98.6a4.063 4.063 0 0 1-2.54-.893L69.501 60.79l-44.83 36.055a4.06 4.06 0 0 1-4.972.1 4.2 4.2 0 0 1-1.419-4.834L29.43 61.626c.801-2.153 3.175-3.234 5.29-2.423 2.12.812 3.191 3.216 2.39 5.366l-5.897 16.387 35.73-28.735a4.053 4.053 0 0 1 5.09-.008l38.454 30.708-13.8-45.548a4.2 4.2 0 0 1 1.421-4.524L129.74 8.185H97.734L51.044 41.93A4.068 4.068 0 0 1 45.31 41c-1.33-1.863-.918-4.466.917-5.815L93.995.648a4.067 4.067 0 0 1 2.408-.79h45.412a4.11 4.11 0 0 1 3.887 2.823 4.2 4.2 0 0 1-1.385 4.64L105.371 37.69l16.82 55.522a4.193 4.193 0 0 1-1.6 4.658 4.066 4.066 0 0 1-2.322.73M16.219 18.143a3.63 3.63 0 0 1-2.935-1.468c-1.16-1.577-.784-3.772.834-4.9L30.328.514c1.62-1.13 3.869-.765 5.028.812 1.16 1.577.785 3.772-.834 4.9L18.314 17.488a3.669 3.669 0 0 1-2.095.655M32.28 29.114a3.46 3.46 0 0 1-2.005-6.277L84.62-15.959a3.45 3.45 0 0 1 4.815.814 3.46 3.46 0 0 1-.812 4.822L34.28 28.474a3.435 3.435 0 0 1-2 .64M3.407 7.171c-1.053 0-2.092-.53-2.757-1.53-1.104-1.655-.764-3.97.757-5.17l2.202-1.737c1.52-1.2 3.648-.831 4.751.823 1.104 1.656.764 3.971-.757 5.171L5.4 6.466a3.204 3.204 0 0 1-1.994.705"}))};function eI(){var e=(0,ei._)(["收录",""," \xb7 ","知友推荐"]);return eI=function(){return e},e}var eR=function(e){var t,n=e.items,o=null==n?void 0:null===(t=n[0])||void 0===t?void 0:t.image;return(0,i.tZ)(C.Box,{css:function(e){return{flex:"0 0 44px",borderRadius:"4px",position:"relative","::after":{content:'""',position:"absolute",top:4,bottom:4,borderRadius:"inherit",right:"-4px",background:"".concat(e.colorMod(e.colors.GBK09A).alpha(.8)),width:"10px",zIndex:0}}},children:(0,i.tZ)(eq.Z,{bg:"GBK09C",ratio:1,css:{zIndex:1},children:o&&(0,i.tZ)(C.Image,{size:"100%",src:(0,ex.imgUrl)(o,"100w"),css:{borderRadius:"inherit",objectFit:"cover"}})})})},ez=function(e){var t=e.items,n=null==t?void 0:t.map(function(e){return e.image});return(0,i.tZ)(C.Box,{css:{flex:"0 0 44px",borderRadius:"4px"},children:(0,i.tZ)(eq.Z,{ratio:1,children:(null==n?void 0:n.length)>0&&n.map(function(e,t){return(0,i.tZ)(C.Box,{css:(0,d._)({borderRadius:"inherit",position:"absolute",bottom:0},[{width:"33px",right:"10px",zIndex:3},{width:"29px",right:"5px",zIndex:2},{width:"24px",right:0,zIndex:1}][t]),children:(0,i.tZ)(eq.Z,{bg:"GBK09C",ratio:3/4,css:{zIndex:1},children:e&&(0,i.tZ)(C.Image,{size:"100%",src:(0,ex.imgUrl)(e,"100w"),css:{borderRadius:"inherit",objectFit:"cover",boxShadow:"0.5px 0 2px 0 rgba(0, 0, 0, 0.1)"}})})},t)})})})},eX=function(e){var t=e.questionId,n=e.isInAnswerPage,o=(0,eB._)(e,["questionId","isInAnswerPage"]),r=(0,b.useSelector)(function(e){return(0,E.y7)(e,t)}),a=(0,b.useDispatch)(),s=(0,h._)((0,ef.Ue)(),3),c=s[0],l=s[1],u=s[2];if((0,Z.useEffect)(function(){r||a((0,E.uj)(t)).catch(u)},[r,t,u,a]),(0,Z.useEffect)(function(){if(r){if("not found"===r.message){u();return}l()}},[r,u,l]),!r||"not found"===r.message||!c)return null;var p=r.name,m=r.num,f=r.upvoteNum,v=r.rankFieldType,g=r.items,w=r.urlToken,y=2===v,_=y?ez:eR;return(0,i.tZ)(A.r,{module:"Content",view:{id:8766,name:n?"answer":"question"},content:{token:w,parent_token:String(t)},trackCardShow:!0,children:(0,i.tZ)(S.eV,{content:{type:"Topic",token:String(w)},children:(0,i.tZ)(S.Wi,{zaText:!0,shouldTrackClick:!0,as:"div","data-za-extra":JSON.stringify({button:{text:p}}),css:{position:"relative",zIndex:0},zaType:"Card",zaAction:"OpenUrl",zaBlock:"blueStar_questionPage_detailCard",zaEventType:"Click",extra:{link:{url:"https://www.zhihu.com/blue-star/ranking/".concat(w,"?origin_from=").concat(n?"answer":"question")}},children:(0,i.BX)(C.Flex,(0,eN._)((0,d._)({as:eE.pl,my:"14px",py:"8px",px:"12px",alignItems:"center",css:function(e){return{backgroundImage:"linear-gradient(to left, ".concat(e.colorMod(e.colors.GBL01A).alpha(.1),", ").concat(e.colorMod(e.colors.GBL01A).alpha(.04),")"),backgroundColor:e.colors.GBK99C,borderRadius:"5px",position:"relative",overflow:"hidden"}},"data-za-detail-view-id":"8767","data-za-detail-view-name":n?"answer":"question","data-za-extra":JSON.stringify({button:{text:p}}),href:"https://www.zhihu.com/blue-star/ranking/".concat(w,"?origin_from=").concat(n?"answer":"question")},o),{children:[(0,i.tZ)(eP,{css:function(e){return{position:"absolute",width:"40.5px",height:"49.5px",top:-5,right:-1,color:e.colors.GBK99A}}}),(0,i.tZ)(_,{items:g}),(0,i.BX)(C.Flex,{ml:"14px",alignItems:"center",children:[(0,i.tZ)(C.Text,{color:"GBK02A",fontWeight:"bold",css:{fontSize:"17px",lineHeight:"18px"},children:"小蓝星 \xb7 ".concat(p)}),(0,i.tZ)(C.Text,{color:"GBK05A",css:{fontSize:"14px",lineHeight:"16px",marginLeft:"10px"},children:y?es()(eI(),(0,eT.Zh)(m),y?"部影视":"个商品",(0,eT.Zh)(f)):"来自知友的真实反馈"})]})]}))})})})},eL=n(28753),eD=n(78160),eF=n(31142),eH=Object.assign,eU=function(e){return y().createElement(eQ.Z,eH({viewBox:"0 0 72 18"},e),y().createElement("g",{fillRule:"evenodd"},y().createElement("rect",{width:"72",height:"18",rx:"2"}),y().createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},y().createElement("tspan",{x:"19",y:"13"},"有奖问答")),y().createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M13.4 5.8H11a.4.4 0 0 1-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 1 1 0-1.5H10zm.8 0h4.3a.8.8 0 0 1 0 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 0 0-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z"})))};function eO(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,r=t.prize,a=r.endTime,s=r.rule,c=r.status;return(0,i.BX)("div",{className:"BrandQuestionPrizes-tips",children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-tip",children:[(0,i.BX)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动时间",!eS.Z.isMobileEntry&&"："]}),eD.Z(new Date(1e3*a),"yyyy-MM-dd HH:mm")," 截止"]}),(0,i.BX)("div",{className:"BrandQuestionPrizes-tip",children:[(0,i.BX)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动规则",!eS.Z.isMobileEntry&&"："]}),s]}),(0,i.BX)("div",{className:"BrandQuestionPrizes-tip",children:[(0,i.BX)("span",{className:"BrandQuestionPrizes-tipTitle",children:["获奖公示",!eS.Z.isMobileEntry&&"："]}),"ongoing"===c&&"获奖名单将在活动结束后公布","finished"===c&&"开奖中，即将公布获奖名单",!eS.Z.isMobileEntry&&"awarded"===c&&(0,i.tZ)(o.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners"),children:"查看获奖名单"}),eS.Z.isMobileEntry&&"awarded"===c&&(0,i.BX)("span",{children:["点击查看"," ",(0,i.tZ)(o.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners"),children:"获奖名单"})]})]}),(0,i.BX)("div",{className:"BrandQuestionPrizes-rule",children:["本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",(0,i.tZ)("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer",children:"《有奖问答活动管理办法》"})]})]})},r=e.handleToggle,a=e.expanded,s=e.question,c=s.id,l=s.prize,u=s.relationship,d=(void 0===u?{}:u).isAuthor,h=s.permission,p=(void 0===h?{}:h).isSuperUser;if(!l||!l.status)return null;var m=l.endTime,f=l.prizes,v=l.status,g=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,i=new Date(n),o=e-Math.floor(i.getTime()/1e3);if(o<0)return null;var r=0;if(o>86400){var a,s,c,l=new Date(1e3*e);a=new Date(i),s=new Date(l),c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),r=Math.floor((Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())-c)/864e5),t="天"}else o>3600?(r=Math.floor(o/3600),t="小时"):o>60?(r=Math.floor(o/60),t="分钟"):(r=o,t="秒");return{quantity:r,unit:t}}(m);return(0,i.BX)("div",{className:el()("BrandQuestionPrizes",{"is-mobile":eS.Z.isMobileEntry}),children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-info",children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-bar",onClick:r,children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-desc",children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-symbol",children:[(0,i.tZ)(eU,{alt:"logo",width:72,height:18,fill:"ongoing"===v?"#ff9607":"#999999"}),"ongoing"===v&&(0,i.BX)("span",{children:["距离结束还有",(0,i.tZ)("em",{children:g.quantity}),g.unit]}),"finished"===v&&"待开奖","awarded"===v&&"已开奖"]}),(0,i.BX)("div",{className:"BrandQuestionPrizes-name",children:["奖品：",f[0].name,f.length>1&&"等"]})]}),(0,i.BX)("div",{className:"BrandQuestionPrizes-images",children:[eS.Z.isMobileEntry&&f[0].imageUrl?(0,i.tZ)("img",{src:f[0].imageUrl,alt:""}):f.map(function(e,t){var n=e.imageUrl;return n&&(0,i.tZ)("img",{src:n,alt:""},"BrandQuestionPrizes-images".concat(t))}),(0,i.tZ)(eL.f,{text:!0,center:!0,fill:"#9fadc7"})]})]}),a&&(0,i.tZ)("div",{className:"BrandQuestionPrizes-detail",children:f.map(function(e,n){var o=e.imageUrl,r=e.name,a=e.value,s=e.quantity;return(0,i.BX)("div",{className:"BrandQuestionPrizes-prize",children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-intro",children:[o&&(0,i.tZ)("img",{className:"BrandQuestionPrizes-prizeImage",src:o,alt:""}),eS.Z.isMobileEntry?(0,i.BX)("div",{className:"BrandQuestionPrizes-prizeInfo",children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-prizeValue",children:[f.length>1&&"".concat(t[n],"等奖 "),"价值 \xa5"," ",a]}),(0,i.tZ)("div",{className:"BrandQuestionPrizes-prizeName",children:r})]}):(0,i.BX)("div",{className:"BrandQuestionPrizes-prizeInfo",children:[(0,i.BX)("div",{className:"BrandQuestionPrizes-prizeName",children:[f.length>1&&"".concat(t[n],"等奖："),r]}),(0,i.BX)("div",{className:"BrandQuestionPrizes-prizeValue",children:["价值 \xa5 ",a]})]})]}),(0,i.BX)("div",{className:"BrandQuestionPrizes-prizeQuantity",children:[s," 份"]})]},"BrandQuestionPrizes-prize".concat(n))})}),a&&eS.Z.isMobileEntry&&n()]}),a&&!eS.Z.isMobileEntry&&n(),!eS.Z.isMobileEntry&&a&&(0,i.tZ)("hr",{className:"BrandQuestionPrizes-split"}),!eS.Z.isMobileEntry&&(p||d)&&(0,i.BX)(eF.Z,{className:"BrandQuestionPrizes-edit",to:"/organization/question/".concat(c,"/setting/").concat("finished"===v?"winners":"prize"),children:["ongoing"===v&&"编辑有奖回答","finished"===v&&"填写获奖名单"]})]})}var eV=n(1733),eW=n(45842),eG=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,o=t.permission,r=void 0===o?{}:o,a=e.router,s=r.isSuperUser,c=r.canBrandAdminEdit,l=r.haveCard;return c||s?(0,i.tZ)(eV.ZP,{className:"BrandQuestionSettingMenu",toggler:(0,i.tZ)(em.ZP,{children:"设置样式"}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(eV.sN,{className:"BrandQuestionSettingMenu-item",onClick:function(){a.push("/organization/question/".concat(n,"/setting/topbanner"))},children:"设置提问头图"}),(0,i.tZ)(eV.sN,{className:"BrandQuestionSettingMenu-item",onClick:function(){a.push("/organization/question/".concat(n,"/setting/prize"))},children:"编辑有奖问答"}),l&&(0,i.tZ)(eV.sN,{className:"BrandQuestionSettingMenu-item",onClick:function(){a.push("/organization/question/".concat(n,"/setting/advanced"))},children:"编辑品牌推荐"})]})}):null}}]),n}(Z.Component),ej=(0,k.compose)(o.withRouter,(0,b.connect)(function(e,t){return{question:e.entities.questions[t.question.id]}}),eW.Z)(eG);function eK(e){var t=e.brand,n=e.noDivider,o=t.name,r=t.logo,a=t.target,s=t.description,c=t.typeDescription,l=a?"a":"div";return(0,i.BX)("div",{className:el()("BrandQuestionSymbol",{"is-mobile":eS.Z.isMobileEntry}),children:[(0,i.BX)(l,(0,eN._)((0,d._)({className:"BrandQuestionSymbol-brandLink"},a&&{href:"/".concat("organization"===a.userType?"org":"people","/").concat(a.urlToken)}),{children:[(0,i.tZ)("img",{role:"presentation",src:r,className:"BrandQuestionSymbol-logo",alt:""}),(0,i.tZ)("span",{className:"BrandQuestionSymbol-name",children:o}),a&&(0,i.tZ)(ey.Vh,{badge:a.badge})]})),(0,i.tZ)("span",{css:{marginLeft:5},children:s}),!!c&&(0,i.tZ)("span",{className:"BrandQuestionSymbol-typeDesc",children:c}),!n&&(0,i.tZ)("div",{className:"BrandQuestionSymbol-divider"})]})}var eY=function(e){var t=Math.floor(e/60);return{hours:Math.floor(t/60),minutes:t%60}},e$=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{remainedTime:null}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,i=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval(function(){e.setState({remainedTime:e.state.remainedTime-5})},5e3)):"function"==typeof i&&i()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return(0,i.BX)(Z.Fragment,{children:["距结束不足 ",(0,i.tZ)("span",{children:"1"})," 分钟"]});var t=eY(e),n=t.hours,o=t.minutes;return 0===n?(0,i.BX)(Z.Fragment,{children:["距结束还有 ",(0,i.tZ)("span",{children:o})," 分钟"]}):(0,i.BX)(Z.Fragment,{children:["距结束还有 ",(0,i.tZ)("span",{children:n})," 小时"," ",o>0&&(0,i.BX)(Z.Fragment,{children:[(0,i.tZ)("span",{children:o})," 分钟"]})]})}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?(0,i.tZ)("div",{className:e,children:"距结束还有"}):(0,i.tZ)("div",{className:e,children:this.renderCountdownTime()})}}]),n}(Z.Component);(0,l._)(e$,"propTypes",{totalCountdownTime:w().number.isRequired,onFinish:w().func});var eJ=Object.assign,e0=function(e){return y().createElement(eQ.Z,eJ({viewBox:"0 0 24 24"},e),y().createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 0 1-.657-.446.731.731 0 0 1 .154-.787l2.812-3.045a2.395 2.395 0 0 1 2.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0 1 17.248 6.5Zm-.114-3.357a.798.798 0 0 0-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 0 0-.808-.821ZM11.286 7.61v2.857H3.429a1.429 1.429 0 0 1 0-2.857h7.857Zm1.428 0h7.857a1.429 1.429 0 0 1 0 2.857h-7.857V7.611Zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 0 1-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056Zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897ZM6.752 6.5a2.431 2.431 0 0 1-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 0 1 2.926.392l2.812 3.045a.731.731 0 0 1 .153.787.711.711 0 0 1-.656.446H6.752Zm.686-3.117a.798.798 0 0 0-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 0 0 .78.608h1.951L7.438 3.383Z"}))},e1="CommercialAnswerRedPacket",e2=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{expanded:!1,bodyHeight:0}),(0,l._)((0,r._)(e),"contentRef",(0,Z.createRef)()),(0,l._)((0,r._)(e),"handleExpand",function(){var t=e.contentRef.current;e.setState({expanded:!0,bodyHeight:"".concat(t.offsetHeight+1,"px")}),ed.Z.trackEvent((0,r._)(e),{id:5036,action:"Expand"})}),(0,l._)((0,r._)(e),"handleCollapse",function(){e.setState({expanded:!1,bodyHeight:0}),ed.Z.trackEvent((0,r._)(e),{id:5037,action:"Fold"})}),(0,l._)((0,r._)(e),"handleClickHeader",function(){e.state.expanded?e.handleCollapse():e.handleExpand()}),(0,l._)((0,r._)(e),"handleCountdownFinish",function(){var t=e.props;(0,t.removeBrandQuestionRedPacket)(t.questionId)}),e}return(0,c._)(n,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,o="".concat(e1,"-countdown");return 2===t?(0,i.tZ)(e$,{className:o,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):(0,i.BX)("div",{className:o,children:["还剩 ",(0,i.tZ)("span",{children:(0,eT.Zh)(n)}),"个红包"]})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.redPacket,o=n.title,r=n.image,a=n.iconText,s=n.content,c=this.state,u=c.expanded,d=c.bodyHeight;return(0,i.tZ)(A.r,{view:{id:5035},trackCardShow:!0,children:(0,i.BX)("div",{className:el()(e1,t,(0,l._)({},"".concat(e1,"--expanded"),u)),children:[(0,i.BX)("div",{className:"".concat(e1,"-header"),role:"button",tabIndex:0,onClick:this.handleClickHeader,children:[(0,i.BX)("div",{className:"".concat(e1,"-main"),children:[(0,i.BX)("div",{className:"".concat(e1,"-subtitle"),children:[(0,i.BX)("div",{className:"".concat(e1,"-badge"),children:[(0,i.tZ)("span",{children:(0,i.tZ)(e0,{size:11})}),(0,i.tZ)("span",{children:a})]}),this.renderCountdown()]}),(0,i.tZ)("div",{className:"".concat(e1,"-title"),children:o})]}),(0,i.tZ)("div",{className:"".concat(e1,"-image"),children:(0,i.tZ)("img",{src:(0,ex.imgUrl)(r,"xl"),alt:""})}),(0,i.tZ)("div",{className:"".concat(e1,"-icon"),children:u?(0,i.tZ)(er.v,{size:20}):(0,i.tZ)(eL.f,{size:20})})]}),(0,i.tZ)("div",{className:"".concat(e1,"-body"),style:{height:d},children:(0,i.tZ)("div",{ref:this.contentRef,className:"".concat(e1,"-content"),dangerouslySetInnerHTML:{__html:s}})})]})})}}]),n}(Z.Component),e3=(0,b.connect)(null,{removeBrandQuestionRedPacket:E.ik})(e2),e5=n(48725),e4=function(e){var t=e.text,n=(0,eB._)(e,["text"]);return(0,i.tZ)(em.ZP,(0,eN._)((0,d._)({preset:"plain"},n),{icon:e5.E,label:t||"修改"}))},e7=n(96925),e6=n(85661),e8=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props.question.author;return(0,i.tZ)("div",{className:"OrgQuestionSymbol",children:(0,i.BX)("div",{className:el()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":eS.Z.isMobileEntry}),children:[(0,i.BX)("div",{className:"OrgQuestionSymbol-main QuestionHeader-main",children:[(0,i.tZ)("div",{className:"OrgQuestionSymbol-avatar",children:(0,i.tZ)(e6.Z,{user:e,avatar:!0,avatarProps:{size:38}})}),(0,i.BX)("div",{className:"OrgQuestionSymbol-name",children:[(0,i.tZ)(e6.Z,{user:e})," 的提问"]})]}),(0,i.tZ)("div",{className:"OrgQuestionSymbol-tip",children:(0,i.tZ)(eF.Z,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank",children:"了解机构提问"})})]})})}}]),n}(Z.Component),e9=(n(27548),n(67516)),te=n.n(e9),tt=n(20072),tn=n(98151),ti=n(12667);function to(e){var t=e.question,n=e.isAuthorCurrentUser,o=e.hasExtraContent,r=t.author,a=(0,h._)((0,Z.useState)(!1),2),s=(a[0],a[1],(0,Z.useRef)(),(0,Z.useRef)());return(0,Z.useEffect)(function(){},[n]),(0,Z.useEffect)(function(){(0,tt.y3)(s.current,function(){ed.Z.trackCardShow(s.current,{id:7064})})},[]),(0,i.BX)("div",{className:el()("QuestionAuthor",{"QuestionAuthor--hasExtraContent":o}),ref:s,children:[(0,i.tZ)(tn.Z,{preset:"plain",author:r,zaId:7063,zaExtra:{link:{url:"//www.zhihu.com/people/".concat(r.urlToken)}},noHeadline:!0}),""]})}var tr=function(e,t,n){var i=(0,b.useSelector)(function(t){var n,i;return null==t?void 0:null===(n=t.question)||void 0===n?void 0:null===(i=n.questionBanners)||void 0===i?void 0:i[e]}),o=(0,b.useDispatch)();return(0,Z.useEffect)(function(){t&&o((0,E.cD)(e))},[t,o,e]),null==i?void 0:i.filter(function(e){return e.position===n})},ta=(0,Q.Z)(null)(function(e){var t,n,o,r=e.id,a=e.question,s=e.position,c=void 0===s?"top":s,l=tr(r,null==a?void 0:a.isBannered,c),u="normal"===a.questionType&&(null==l?void 0:null===(t=l[0])||void 0===t?void 0:null===(n=t.imagePc)||void 0===n?void 0:n[0]),h=null==l?void 0:null===(o=l[0])||void 0===o?void 0:o.verbPc;if((0,Z.useEffect)(function(){u&&ed.Z.trackCardShow(null,{id:7707},{button:{text:h}})},[u,h]),!u)return null;var p=l[0],m=p.targetLinkPc,f=p.entryVerbPc,v=p.imagePc[0].url;return m&&h&&f&&v?(0,i.tZ)(C.Link,{className:"Card",css:(0,d._)({display:"block",fontSize:0,marginBottom:16},"top"===c?{width:654,height:54,borderRadius:4}:{width:296,height:90,borderRadius:"2px 2px 0 0"}),href:m,onClick:function(e){ed.Z.trackEvent(e.target,{id:7708,action:"OpenUrl"},{link:{url:m},button:{text:h}})},target:"_blank",children:(0,i.tZ)(C.Image,{alt:f,src:v,css:{height:"100%",width:"100%",objectFit:"cover"}})}):null}),ts=n(46829),tc=n(258),tl=n(7407),tu=n(2347),td=n(22627),th=n(57730),tp=n(88782),tm=n(37705),tf=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"getRenderProps",function(){var t=e.props,n=t.draft,o=t.question,r=o.id,a=o.relationship,s=(void 0===a?{}:a).myAnswer,c=t.params.answerId,l=t.isMobile;return s?s.isDeleted?{icon:(0,i.tZ)(tu.EE,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:e.handleRestoreAnswer}}:!l&&c&&c===String(s.answerId)?{icon:(0,i.tZ)(td.yP,{size:17,className:"QuestionButton-icon"}),text:"编辑回答",props:{onClick:e.handleEditAnswer}}:{icon:(0,i.tZ)(td.yP,{size:17,className:"QuestionButton-icon"}),text:"查看我的回答",props:{to:"/question/".concat(r,"/answer/").concat(s.answerId),onClick:e.handleFocusAnswer},Wrapper:eF.Z}:{icon:(0,i.tZ)(e5.E,{size:16,center:!0,className:"QuestionButton-icon"}),text:n?"编辑回答":"写回答",props:{onClick:e.handleAddAnswer}}}),(0,l._)((0,r._)(e),"handleFocusAnswer",function(){var t=document.querySelector(".AnswerCard");t&&(t.classList.add("is-focus"),e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(function(){return t.classList.remove("is-focus")},300))}),(0,l._)((0,r._)(e),"handleRestoreAnswer",function(){var t=e.props,n=t.question,i=n.relationship.myAnswer,o=n.id,r=t.restoreAnswer,a=t.showNotification;i.isDeleted&&r(o,i.answerId).then(function(){return a("已撤销删除回答")})}),(0,l._)((0,r._)(e),"handleAddAnswer",e.props.authRequired(function(t){var n=e.props,i=n.draft,o=n.question,a=o.id,s=o.reviewInfo,c=(void 0===s?{}:s).tips,l=n.zaId,u=n.cancelScheduledPublish;if(n.isMobile){window.location.href="/question/".concat(a,"/answers/editor");return}if((0,tp.$$)()){(0,tp.aH)(a);return}var d=t.currentTarget,h=function(){if(c){e.props.showNotification(c,"red");return}l&&ed.Z.trackEvent(null,{id:l}),ed.Z.trackEvent((0,r._)(e),{action:i&&i.editableContent?"Edit":"Answer",is_intent:!0,name:d.textContent}),e.context.startAddAnswer()};i&&i.schedule?th.Z.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then(function(){u(e.props.question.id).then(h)},function(){}):h()})),(0,l._)((0,r._)(e),"handleEditAnswer",e.props.authRequired(function(){var e=document.querySelector(".AnswerItem-editButton");e&&e.click()})),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){(0,tm._)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.size,r=e.preset,a=e.color,s=e.onClick,c=this.getRenderProps(),l=c.icon,u=c.text,h=c.props,p=c.Wrapper,m=void 0===p?em.ZP:p,f=(0,i.BX)(Z.Fragment,{children:[!eS.Z.isMobileEntry&&l,u]});return(0,i.tZ)(S.Wi,{zaType:"Button",zaText:u,as:"a",children:(0,i.tZ)(S.$U,(0,eN._)((0,d._)({as:m,zaType:"Button",zaText:u,zaBlock:u},h,s&&{onClick:s}),{color:void 0===a?"blue":a,size:o,preset:r,className:n,children:t||f}))})}}]),n}(Z.Component);(0,l._)(tf,"contextTypes",{startAddAnswer:w().func});var tv=(0,k.compose)(o.withRouter,X.Z,(0,b.connect)(function(e,t){return{draft:(0,E.x9)(e,{id:t.params.id}),question:(0,E.Md)(e,{id:t.params.id}),isMobile:(0,tl.Hu)(e),currentUser:(0,F.ib)(e)}},{restoreAnswer:D.f0,cancelScheduledPublish:D.JX,showNotification:H.c0}))(tf),tg=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"zaRef",(0,Z.createRef)()),(0,l._)((0,r._)(e),"createOpenInAppHandler",function(t){var n=e.props,i=n.question.id,o=n.isSpecialQuestionOrAnswer,r=n.currentUser;return function(){o?location.href="zhihu://question/".concat(i,"?utm_app_name=zhihu_check&utm_content=").concat(t):(0,tc.Z)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"关注问题",noEnteringSignin:!!r})}}),e}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,o=n.relationship,r=n.relationship.isAuthor,a=n.isNormal,s=n.status,c=(void 0===s?{}:s).isLocked,l=n.questionType,u=n.isMuted,h=n.id,p=e.shouldOia,m=e.inTopBar,f=e.blockStrategies,v=(void 0===f?{}:f).isBlockingFollowQuestion,g="commercial"===l&&u;return(0,i.BX)("div",{className:eS.Z.isMobileEntry?"MobileQuestionButtonGroup":"QuestionButtonGroup",children:[(0,i.tZ)(S.pS,{ref:this.zaRef}),r&&g?(0,i.tZ)(eF.Z,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green",children:"推广问题"}):!v&&(0,i.tZ)(ts.Z,(0,d._)({id:h,zaId:m?3408:3309,type:"question",preset:"primary",isFollowing:(o&&({}).hasOwnProperty.call(o,"isFollowing")?o:t).isFollowing,disabled:g},p&&{onClick:this.createOpenInAppHandler("follow_question")})),a&&!c&&(0,i.tZ)(tv,{color:"blue",zaId:m?3409:3311})]})}}]),n}(Z.Component),tw=(0,k.compose)(o.withRouter,(0,eo.$_)({dataPath:"question"}),eo.OW,(0,b.connect)(function(e,t){var n;return{shouldOia:(0,tl.XE)(e),isSpecialQuestionOrAnswer:(0,tl.hV)(e,{type:"question",id:null===(n=t.question)||void 0===n?void 0:n.id}),currentUser:(0,F.ib)(e)}}))(tg),tZ=n(47842),ty=n(91770),t_=n(48504),tb=n(49899),tC=n(41613),tk=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"load",function(){var t=e.props,n=t.parent.id;(0,t.loadQuestionFollowers)(n)}),e}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,o=e.isDrained,r=e.items,a=e.currentUser;return(0,i.tZ)(tC.Z,{currentUser:a,isFetching:n,isDrained:o,items:r,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),n}(Z.Component),tS=(0,b.connect)(function(e,t){var n=t.parent.id,i=e.entities.users,o=e.question,r=o.followers,a=o.concernedFollowers,s=r[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},c=s.isFetching,l=s.isDrained,u=s.order,d=s.ids,h=(a[n]||{ids:[]}).ids;return{isFetching:c,isDrained:l,order:u,items:(0,tb._)(h).concat((0,tb._)(d.filter(function(e){return!h.includes(e)}))).map(function(e){return i[e]}),currentUser:(0,F.ib)(e)}},{loadQuestionFollowers:E.C3})(tk);function tA(){var e=(0,ei._)(["","也关注了该问题"]);return tA=function(){return e},e}var tN=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{followersShown:!1}),(0,l._)((0,r._)(e),"showFollowers",function(){e.setState({followersShown:!0})}),(0,l._)((0,r._)(e),"closeFollowers",function(){e.setState({followersShown:!1})}),e}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,o=e.concernedFollowers,r=t.followerCount,a=t.visitCount,s=this.state.followersShown;return(0,i.BX)("div",{className:"QuestionFollowStatus",children:[(0,i.BX)(ty.Z,{divider:!0,className:"QuestionFollowStatus-counts",children:[n?(0,i.tZ)(ty.Z.Item,{tag:em.ZP,preset:"plain",onClick:this.showFollowers,name:"关注者",value:r}):(0,i.tZ)(ty.Z.Item,{name:"关注者",value:r}),(0,i.tZ)(ty.Z.Item,{name:"被浏览",value:a})]}),!!(o&&o.length)&&(0,i.BX)(em.ZP,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers,children:[(0,i.tZ)("span",{className:"QuestionFollowStatus-people-tip",children:es()(tA(),1===o.length?o[0].name:"他们")}),o.map(function(e){return(0,i.tZ)(e6.Z,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0},e.id)})]}),(0,i.tZ)(tZ.Z,{size:"fullPage",onClose:this.closeFollowers,children:s&&(0,i.tZ)(tS,{parent:t})})]})}}]),n}(Z.Component),tB=(0,k.compose)(o.withRouter,(0,b.connect)(function(e,t){var n=t.params;return{currentUser:(0,F.ib)(e),concernedFollowers:(0,E.RX)(e,{id:n.id})}},{loadQuestionConcernedFollowers:E.Uw}),(0,t_.Z)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}))(tN),tx=n(82452),tT=n(16e3),tq=n(82038),tE=n(83117),tQ=n(58216),tM=n(74128),tP=n(84069),tI=n(85703),tR=n(96611),tz=n(24794),tX=n(66263),tL=n(57138),tD=n(55347),tF=n(63722),tH=function(e){var t=(0,Z.useRef)(null),n=e.authRequired,o=e.questionId,r=(0,b.useDispatch)(),s=(0,b.useSelector)(function(e){return(0,E.Md)(e,{id:o})}),c=s.relationship,l=c.voting,u=c.isFollowing,d=s.voteupCount,h=s.canVote,p="0"===String(l);(0,Z.useEffect)(function(){ed.Z.trackCardShow(t.current,{name:String(d),id:7228})},[]);var f=function(){if(!u)return r((0,E.XX)(o,p))},v=el()("GoodQuestionAction-commonBtn",{"GoodQuestionAction-highLightBtn":"1"===String(l)}),g=n((0,a._)(function(){var e;return(0,m.__generator)(this,function(n){switch(n.label){case 0:return[4,r((0,E.Is)(o,l))];case 1:return n.sent(),[4,f()];case 2:return n.sent(),e=p?"Upvote":"UnUpvote",ed.Z.trackEvent(t.current,{action:e,name:String(d),id:7229}),[2]}})}));return(0,i.tZ)("div",{className:"GoodQuestionAction",children:h&&(0,i.tZ)(S.$U,{as:em.ZP,zaText:p?"好问题":"取消好问题",zaType:"Button",zaAction:p?"Upvote":"UnUpvote",onRef:function(e){return t.current=e},className:v,preset:"plain",onClick:g,icon:tF.g,zaBlock:p?"好问题":"取消好问题",label:d>0?"好问题 ".concat(d):"好问题"})})},tU=n(37335),tO=n(88197),tV={true:{title:"确定解锁问题编辑？",subtitle:"该问题编辑已锁定，解锁后可被其他用户编辑，要解锁编辑吗？",confirmText:"解锁问题编辑"},false:{title:"确定锁定问题编辑？",subtitle:"锁定后，其他用户将不可编辑你提出的问题",confirmText:"锁定问题编辑"}};function tW(e){var t=e.showModal,n=e.showEncourageAuthorEditLock,o=e.handleConfirmEditLock,r=e.handleEditLockShown,a=n?"编辑已锁定":"锁定编辑",s=(0,Z.useRef)(),c=(0,h._)((0,Z.useState)(!1),2),l=c[0],u=c[1];(0,Z.useEffect)(function(){te().get("question::hasSeenShowEditLockHint")||(0,tO.v)([(0,tO.g)(3e3).then(function(){te().set("question::hasSeenShowEditLockHint",!0),u(!0)}),(0,tO.g)(3e3).then(function(){u(!1)})])},[]),(0,Z.useEffect)(function(){(0,tt.y3)(s.current,function(){ed.Z.trackCardShow(s.current,{id:7666},{button:{text:a}})})},[a]);var p=(0,Z.useCallback)(function(){ed.Z.trackEvent(s.current,{id:7669,action:"Click"},{button:{text:a}}),r()},[r,a]),m=function(e){var t=e?tV[n].confirmText:"取消";ed.Z.trackEvent(null,{id:7678,action:"Select",name:t},{button:{text:a}}),e?o():r()};return(0,i.BX)(i.HY,{children:[(0,i.tZ)(em.ZP,{preset:"plain",onClick:p,label:a,icon:tU.P,onRef:s}),(0,i.tZ)(ti.Z,{className:"QuestionEditLockMenu-Hint",isOpen:l,target:s.current,placement:"top",children:"锁定后问题不可被其他用户编辑"}),(0,i.tZ)(tI.Z,(0,d._)({needCancel:!1,showButtonHorizontal:!0,showConfirmButtonRight:!0,onCancel:function(){return m(!1)},onSubmit:function(){return m(!0)},shown:t},tV[n]))]})}var tG=n(73108),tj=n(57045),tK=n(99830),tY=n(75157),t$=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{commentsShown:!1}),(0,l._)((0,r._)(e),"handleCommentsShow",function(){var t=e.props,n=t.question.reviewInfo.tips,i=t.handleReviewingNotification;if(n){i();return}ed.Z.trackEvent((0,r._)(e),{action:"Comment",element:"Button",is_intent:!0}),e.setState({commentsShown:!0})}),(0,l._)((0,r._)(e),"handleCommentsClose",function(){e.setState({commentsShown:!1})}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,i=n.pathname,o=n.search,r=!!/^\/question\/(\d*)$/.test(i),a=(0,tj.parse)(location.search.slice(1)).answer_deleted_redirect;if(r&&"true"!==a){var s=(0,tY.Y6)(location.hash);this.setState({byComment:s}),s&&(t.replace("".concat(i).concat(o)),this.handleCommentsShow())}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,o=e.isMuteSpecial,r=t.commentCount,a=t.adminClosedComment,s=this.state.commentsShown,c="",l=r&&!a;return c="textNumber"===n?l?"评论 ".concat((0,eT.uf)(r)):"":eS.Z.isMobileEntry?l?(0,eT.uf)(r):"":l?"".concat((0,eT.uf)(r)," 条评论"):"添加评论",(0,i.BX)("div",{className:"QuestionHeader-Comment",children:[(0,i.tZ)(S.$U,{zaText:!0,zaType:"Button",zaBlock:"添加评论",as:em.ZP,preset:"plain",onClick:this.handleCommentsShow,icon:tG.b,label:c,disabled:o}),(0,i.tZ)(tK.Z,{shown:s,type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission,onClose:this.handleCommentsClose})]})}}]),n}(Z.Component);(0,l._)(t$,"propTypes",{question:w().object.isRequired,handleReviewingNotification:w().func.isRequired});var tJ=(0,k.compose)(o.withRouter,(0,b.connect)(function(e,t){return{isMuteSpecial:(0,E.gW)(t.question)}}))(t$),t0=n(89278),t1={invitationShown:!1,reportShown:!1,editLockShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1},t2={COMMENT:[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],OPEN_STATUS:[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}]},t3=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",t1),(0,l._)((0,r._)(e),"handleReviewingNotification",function(){var t=e.props.question.reviewInfo.tips;e.props.showNotification(t,"red")}),(0,l._)((0,r._)(e),"handleInvite",e.props.authRequired(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventId;ed.Z.trackEvent(null,{id:void 0===n?3312:n}),e.handleInvitationShow()},tX.q0.invite)),(0,l._)((0,r._)(e),"handleInvitationShow",function(){return e.setState({invitationShown:!0})}),(0,l._)((0,r._)(e),"handleInvitationHide",function(){return e.setState({invitationShown:!1})}),(0,l._)((0,r._)(e),"handleReport",function(){e.setState({reportShown:!e.state.reportShown})}),(0,l._)((0,r._)(e),"handleEditLockShown",function(){e.setState({editLockShown:!e.state.editLockShown})}),(0,l._)((0,r._)(e),"handleLockClick",function(){return e.props.question.status.isLocked?e.handleUpdateQuestionLocked():e.handleLockTipsShow()}),(0,l._)((0,r._)(e),"handleOpenStatusChange",function(t){var n=e.props;(0,n.updateBrandQuestionOpenStatus)(n.question.id,t)}),(0,l._)((0,r._)(e),"handleUpdateQuestionLocked",function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)}),(0,l._)((0,r._)(e),"handleLockTipsShow",function(){return e.setState({lockTipsShown:!0})}),(0,l._)((0,r._)(e),"handleLockTipsHide",function(){return e.setState({lockTipsShown:!1})}),(0,l._)((0,r._)(e),"handleDelete",function(){return e.setState({deleteShown:!0})}),(0,l._)((0,r._)(e),"handleDeleteModalClose",function(){return e.setState({deleteShown:!1})}),(0,l._)((0,r._)(e),"handleConfirmDelete",function(){e.handleDeleteModalClose();var t=e.props,n=t.question,i=n.id,o=n.questionType,r=t.deleteQuestion,a=t.deleteBrandQuestion;return("commercial"===o?a:r)(i).then(function(){location.href="/"})}),(0,l._)((0,r._)(e),"handleConfirmEditLock",function(){e.handleEditLockShown();var t=e.props;(0,t.toggleQuestionEditLock)(t.question.id)}),(0,l._)((0,r._)(e),"handleRedirectionCreatorShow",function(){if(e.props.question.reviewInfo.tips){e.handleReviewingNotification();return}e.setState({redirectionCreatorShown:!0})}),(0,l._)((0,r._)(e),"handleRedirectionCreatorClose",function(){e.setState({redirectionCreatorShown:!1})}),(0,l._)((0,r._)(e),"handleRedirectionCreated",function(t,n){var i=e.props,o=i.router,r=i.question.id,a=t.id;e.handleRedirectionCreatorClose(),n.then(function(){o.push("/question/".concat(a,"?rf=").concat(r))})}),(0,l._)((0,r._)(e),"handleCommentPermissionChange",function(t){var n=e.props;(0,n.updateQuestionPermission)(n.question.id,t)}),(0,l._)((0,r._)(e),"handleShareMenuTogglerClick",function(){var t=e.props.question.reviewInfo;return!(void 0===t?{}:t).tips||(e.handleReviewingNotification(),!1)}),(0,l._)((0,r._)(e),"toggleAnonymous",function(){var t=e.props,n=t.question.reviewInfo,i=n.tips,o=n.editTips,r=t.isCurrentAnswerCommercialReported;if(i){e.handleReviewingNotification();return}if(o){e.props.showNotification(o,"red");return}if(r){e.props.showNotification("已经进行商业声明的内容不能启用匿名","red");return}e.context.toggleAnonymous()}),(0,l._)((0,r._)(e),"getQuestionStatus",function(){return et(e.props.question.status)}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(t1)}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.props.currentUser;if(e&&!e.isOrg){var t=this.props.question,n=t.questionType;if(t.relationship.isAnonymous||"normal"===n)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,i="commercial"===t;return!i||!!i&&!!n}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,o=n.permission.canBrandAdminEdit,r=n.question,a=r.status,s=(void 0===a?{}:a).isLocked,c=r.commentPermission,l=r.brandOpenStatus,u=r.brand,d=(void 0===u?{}:u).isPuQuestion;if(!o)return null;var h=t2.COMMENT,p=t2.OPEN_STATUS;return(0,i.BX)(Z.Fragment,{children:[h.map(function(n){var o=n.key,r=n.name,a=!c&&"all"===o||c===o;return(0,i.BX)(eV.sN,{className:e,onClick:function(){return t.handleCommentPermissionChange(o)},children:[a&&(0,i.tZ)(tT.Y,{className:"MenuItem-icon",text:!0,center:!0})," ",r]},o)}),(0,i.tZ)("li",{className:"Menu-divider"}),(d&&(p=[{key:"open",name:"开放回答"}]),(0,i.BX)(i.HY,{children:[!s&&p.map(function(n){var o=n.key,r=n.name,a=l===o;return(0,i.BX)(eV.sN,{className:e,onClick:function(){return!a&&t.handleOpenStatusChange(o)},children:[a&&(0,i.tZ)(tT.Y,{className:"MenuItem-icon",text:!0,center:!0})," ",r]},o)}),!d&&(0,i.tZ)(eV.sN,{className:e,onClick:t.handleLockClick,children:s?"开放回答":"关闭回答"}),(0,i.tZ)("li",{className:"Menu-divider"})]}))]})}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,o=t.shouldOia;return e.map(function(e){var t=e.text,r=e.handler;return(0,i.tZ)(eV.sN,{onClick:o?function(){return(0,tx.rH)((0,tL.MN)({type:"question",id:n},{utm_content:"invite"}))}:r,children:t},t)})}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?(0,i.tZ)(eV.sN,{onClick:function(){return(0,tx.rH)((0,tL.MN)({type:"question",id:t}))},children:"查看问题日志"}):(0,i.tZ)(eV.sN,{tag:eF.Z,a:!0,to:"/question/".concat(t,"/log"),children:"查看问题日志"})}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,o=e.editLockShown,r=e.lockTipsShown,a=e.deleteShown,s=e.redirectionCreatorShown,c=this.props,l=c.question,u=c.question,d=u.id,h=u.title,p=u.answerCount,m=u.collapsedAnswerCount,f=u.relationship,v=f.isAuthor,g=f.isAnonymous,w=u.questionType,Z=u.isEditable,y=u.author.urlToken,_=u.showEncourageAuthorEditLock,b=c.isMuteSpecial,C=c.isMuteFreeze,k=c.publicEditPermission,A=(void 0===k?{}:k).isQuestionRedirectEditable,N=c.currentUserUrlToken,B=c.permission.canBrandAdminEdit,x=c.editQuestionButton,T=c.currentUser,q=c.authRequired,E="commercial"===w,Q=E?B:!!(v&&0===p&&0===m),M=[T&&!v&&{text:"举报",icon:tq.i,handler:this.handleReport}].filter(Boolean),P=ee(Z,y===N,A),I=""!==(0,tP.i)(l),R=this.shouldShowAnonymousMenuItem&&!I&&g,z=R||this.shouldShowMenu,X=el()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":E});return(0,i.BX)("div",{className:"QuestionHeaderActions",children:[(0,i.tZ)(S.$U,{as:em.ZP,zaText:!0,zaType:"Button",zaModuleId:"answer_invite_btn",shouldTrackShow:!0,color:"grey",style:{marginRight:16},onClick:this.handleInvite,zaBlock:"邀请回答",label:"邀请回答",icon:tE.g,disabled:b||C}),(0,i.tZ)(tH,{questionId:d,authRequired:q}),(0,i.tZ)(tJ,{question:l,handleReviewingNotification:this.handleReviewingNotification}),!eS.Z.isMobileEntry&&(0,i.tZ)(tz.Z,{id:d,title:h,href:"/question/".concat(d),onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:b||C}),!eS.Z.isMobileEntry&&x,!eS.Z.isMobileEntry&&T&&v&&"boolean"==typeof _&&(0,i.tZ)(tW,{showModal:o,showEncourageAuthorEditLock:_,handleEditLockShown:this.handleEditLockShown,handleConfirmEditLock:this.handleConfirmEditLock}),z&&(0,i.BX)(eV.ZP,{toggler:(0,i.tZ)(em.ZP,{preset:"plain","aria-label":"更多",icon:tQ.AZ}),menuClassName:"QuestionHeader-menu",itemClassName:X,children:[eS.Z.isMobileEntry&&this.renderMobileMenuItems(M),R&&(0,i.tZ)(eV.sN,{onClick:this.toggleAnonymous,children:g?"取消匿名身份":"使用匿名身份"}),E&&this.renderCommercialMenuItems(X),Q&&(0,i.tZ)(eV.sN,{onClick:this.handleDelete,children:"删除问题"}),!eS.Z.isMobileEntry&&P&&!T.isOrg&&"normal"===w&&(0,i.tZ)(eV.sN,{onClick:this.handleRedirectionCreatorShow,children:"问题重定向"}),!E&&this.renderLogMenuItem(),!eS.Z.isMobileEntry&&M.map(function(e){var t=e.text,n=e.handler,o=e.disabled;return(0,i.tZ)(eV.sN,{onClick:n,disabled:o,children:"举报问题"},t)})]}),(0,i.tZ)(tR.y,{type:"question",urlToken:d,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),(0,i.tZ)(tM.Z,{size:"fullPage",onClose:this.handleInvitationHide,children:t&&(0,i.tZ)(tD.Z,{question:l})}),(0,i.tZ)(tI.Z,{title:E?"关闭回答":"锁定问题",subtitle:"".concat(E?"关闭":"锁定","后该问题将无法添加新回答，你确定要").concat(E?"关闭":"锁定","吗？"),shown:r,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),(0,i.tZ)(tM.Z,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose,children:s&&(0,i.tZ)(t0.Z,{question:l,onSubmitted:this.handleRedirectionCreated})}),(0,i.tZ)(tI.Z,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:a})]})}}]),n}(Z.PureComponent);(0,l._)(t3,"contextTypes",{toggleAnonymous:w().func});var t5=(0,k.compose)(o.withRouter,X.Z,(0,b.connect)(function(e,t){return{shouldOia:(0,tl.XE)(e),isMuteSpecial:(0,E.gW)(t.question),isMuteFreeze:(0,E.SZ)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:(0,E.hh)(e),isCurrentAnswerCommercialReported:(0,E.MT)(e,t.question)}},{deleteQuestion:E.Km,deleteBrandQuestion:E.IJ,updateQuestionLocked:E.Rc,toggleQuestionEditLock:E.hm,showNotification:H.c0,updateQuestionPermission:E.g4,updateBrandQuestionOpenStatus:E.vZ}))(t3),t4=n(53910),t7=n(36480),t6=n(26797),t8=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"handleFollow",function(){var t=e.props.pin,n=(void 0===t?{}:t).author.isFollowing?1977:1976;e.handleTrack(n)}),(0,l._)((0,r._)(e),"handleTrack",function(t){var n=e.props.pin,i=(void 0===n?{}:n).author;ed.Z.trackEvent((0,r._)(e),{id:t},{button:{text:i.name}})}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,i=n.type,o=n.id,r=t.getPinContents;"pin"===i&&r(o,{failsafe:!0}).then(function(t){var n=t.payload,i=(void 0===n?{}:n).author,o=(void 0===i?{}:i).name;ed.Z.trackCardShow(e,{id:1969},{button:{text:o}})})}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,o=t.id,r=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),a=n||{},s=a.type,c=a.urlToken,l=a.isFollowing,u="https://www.zhihu.com/pin/".concat(o);return(0,i.BX)("div",{className:"QuestionRelatedCard",children:[(0,i.tZ)("div",{className:"QuestionRelatedCard-title",children:"相关报道"}),(0,i.BX)("div",{className:"QuestionRelatedCard-content",children:[(0,i.tZ)("span",{dangerouslySetInnerHTML:{__html:(0,t7.tK)(r,eS.Z.isMobileEntry?50:110).content}}),u&&(0,i.tZ)("a",{className:"QuestionRelated-jump",href:u,onClick:function(){e.handleTrack(1975)},children:"查看详情"})]}),c&&(0,i.BX)("div",{className:"QuestionRelatedCard-footer",children:[(0,i.BX)("div",{children:["来自",(0,i.tZ)("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/".concat(c),target:"_blank",rel:"noopener noreferrer",onClick:function(){e.handleTrack(1971)},children:n.name})]}),(0,i.tZ)("div",{role:"button",tabIndex:0,onClick:this.handleFollow,children:(0,i.BX)(ts.Z,{className:"QuestionRelatedCard-follow",type:s,id:c,isFollowing:l,children:[(0,i.tZ)(t4.nY,{text:!0,center:!0},"icon"),"关注机构"]})})]})]})}}]),n}(Z.Component);(0,l._)(t8,"propTypes",{target:w().shape({type:w().string,id:w().string}).isRequired});var t9=(0,k.compose)((0,b.connect)(function(e,t){return{pin:(0,t6.bZ)(e,t.target.id)}},{getPinContents:t6.ue}),(0,A.a)(function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}}))(t8),ne=n(79852),nt=n(6715),nn=n(93547),ni=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props.tips;return(0,i.tZ)("div",{className:"QuestionReviewInfo",children:(0,i.tZ)("p",{children:e})})}}]),n}(Z.PureComponent);function no(e){var t,n,o=e.html,r=e.excerpt,a=e.thumbnailInfo,s=e.collapsed,c=e.onExpand,l=e.editable,u=e.onEdit,d=e.hideWatermark,p=e.sourceId,m=e.sourceType,f=r.length<o.length,v=(f||r.length>=75)&&s,g=(0,Z.useMemo)(function(){var e;return null==a?void 0:null===(e=a.thumbnails)||void 0===e?void 0:e.find(function(e){return"video"===e.type})},[a]),w=null==a?void 0:null===(t=a.thumbnails)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.url,y=(0,h._)((0,Z.useState)(null),2),_=y[0],b=y[1];return(0,i.tZ)("div",{css:{minHeight:"10px"},children:(0,i.BX)("div",{className:el()("QuestionRichText",{"QuestionRichText--expandable":f,"QuestionRichText--collapsed":s,"QuestionRichText--video":g&&s}),onClick:function(e){v&&"function"==typeof c&&c(e);var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&b(t)},children:[g&&s&&(0,i.tZ)("div",{className:"QuestionRichText--wrapImgae",children:(0,i.tZ)("img",{src:w,alt:"video",className:"QuestionRichText--image"})}),(0,i.BX)("div",{children:[v?(0,i.tZ)("span",{itemProp:"text",children:(0,nn.$G)(r,75)}):(0,i.tZ)(nt.Z,{itemProp:"text",tag:"span",html:o,hideWatermark:d,sourceId:p,sourceType:m}),v&&(0,i.BX)(em.ZP,{preset:"plain",className:"QuestionRichText-more",children:["显示全部 ",(0,i.tZ)(eL.f,{center:!0})]})]}),l&&!v&&(0,i.tZ)(e4,{onClick:u}),(0,i.tZ)(ne.Z,{img:_,onClose:function(){return b(null)}})]})})}function nr(e){var t=e.reviewInfo,n=e.thumbnailInfo,o=e.html,r=e.excerpt,a=(t||{}).tips,s=(0,Z.useMemo)(function(){var e;return null==n?void 0:null===(e=n.thumbnails)||void 0===e?void 0:e.find(function(e){return"video"===e.type})},[n]);return(0,i.BX)("div",{children:[a&&s&&(0,i.tZ)(ni,{tips:a}),o&&r?(0,i.tZ)(no,(0,d._)({},e)):null]})}(0,l._)(ni,"propsTypes",{tips:w().string});var na=n(22419),ns=n(82644),nc=n(36798),nl=n(87038);function nu(e){var t=e.count,n=e.onEnd,o=(0,na.Z)((0,Z.useRef)(Date.now()+1e3*t).current,{onTick:function(e){e.done&&(null==n||n())}}),r=o.done,a=o.seconds;return(0,i.tZ)("span",{children:r?0:a})}var nd=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1}),(0,l._)((0,r._)(e),"nextQuestion",function(t){var n=t.location.query,i=t.question.id,o=t.fromQuestion,r=t.loadItems,a=t.loadQuestion,s=t.currentUser;clearTimeout(e.timeout),e.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),s&&"guest"!==s.userType&&r(i,"inviters"),n.rf&&/^\d+$/.test(n.rf)&&!o&&(e.setState({redirectionLoading:!0}),a(Number(n.rf)).catch(function(){}).then(function(){e.setState({redirectionLoading:!1})}))}),(0,l._)((0,r._)(e),"redirect",function(){var t=e.props,n=t.router,i=t.location.query,o=t.question,r=o.id,a=o.redirection;a&&a.to&&a.to.id&&"1"!==i.nr&&n.push("/question/".concat(a.to.id,"?rf=").concat(r))}),(0,l._)((0,r._)(e),"handleRedirectionClose",function(){e.setState({redirectionHidden:!0,invitersHidden:!0}),e.timeout=setTimeout(function(){e.setState({invitersHidden:!1})},1e3)}),(0,l._)((0,r._)(e),"handleCloseInviters",function(){e.setState({invitersHidden:!0})}),(0,l._)((0,r._)(e),"handleDeleteInviters",function(t){var n=e.props,i=n.question.id;(0,n.deleteInviters)(i),e.handleCloseInviters(),ed.Z.trackEvent(t.target,{action:"Ignore"})}),(0,l._)((0,r._)(e),"handleCancelAnonymous",function(){(0,e.props.onInvitationTipClose)(),e.context.toggleAnonymous(!1)}),(0,l._)((0,r._)(e),"handleInvite",function(t){e.setState({invitersHidden:!0,invitationModalShown:!0}),ed.Z.trackEvent(t.target,{action:"Invite",is_intent:!0})}),(0,l._)((0,r._)(e),"handleInvitationModalHide",function(){e.setState({invitationModalShown:!1})}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){this.nextQuestion(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,i=t.question.id;(0,t.revokeQuestionRedirection)(e).then(function(){n[e===i?"replace":"push"]("/question/".concat(e))}),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?(0,i.tZ)("div",{className:"QuestionStatus-bar",children:(0,i.BX)("div",{className:"QuestionStatus-bar-inner",children:[(0,i.BX)("div",{className:"QuestionStatus-bar-commercialMuted",children:["该品牌提问尚未激活，无法在社区内流通。请"," ",(0,i.tZ)("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer",children:"前往广告平台"})," ","进行设置。"]}),(0,i.tZ)("p",{children:"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"})]})}):null}},{key:"renderMute",value:function(){var e=this.props,t=e.isMuteSpecial,n=e.isMuteFreeze;return t?(0,i.tZ)("div",{className:"QuestionStatus-bar",children:(0,i.BX)("div",{className:"QuestionStatus-bar-inner",children:[(0,i.tZ)("strong",{children:"问题已解散"}),(0,i.tZ)("p",{children:"当前问题下的回答暂时无法查看。"})]})}):n?(0,i.tZ)("div",{className:"QuestionStatus-bar",style:{display:"none"},children:(0,i.BX)("div",{className:"QuestionStatus-bar-inner",children:[(0,i.tZ)("strong",{children:"问题已冻结"}),(0,i.tZ)("p",{children:"除浏览外不开放其他用户互动功能。"})]})}):null}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&(0,i.tZ)("div",{className:"QuestionStatus-bar",children:(0,i.BX)("div",{className:"QuestionStatus-bar-inner",children:[(0,i.BX)("strong",{children:[e.description,"。"]}),(0,i.BX)("em",{children:["原因：",e.reason,"。"]}),1033!==e.reasonId&&(0,i.tZ)(nl.Z,{html:e.note})]})})}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,o=t.question,r=o.id,a=o.redirection,s=o.relationship,c=(void 0===s?{}:s).myAnswer,l=t.inviters,u=t.fromQuestion,d=t.isAnswerPage,h=this.state,p=h.redirectionLoading,m=h.redirectionHidden,f=h.invitersHidden,v=null,g=null;if(!p){if(a&&a.to&&a.to.id&&!m){var w=a.to,Z=w.id,y=w.title,_="1"!==n.nr&&!d;v=_?"redirect-countdown":"redirect",g=(0,i.BX)("div",{className:"QuestionStatus-notification-inner",children:[(0,i.BX)("div",{className:"QuestionStatus-notification-content",children:[_?(0,i.BX)("span",{children:["此问题将在 ",(0,i.tZ)(nu,{count:5,onEnd:this.redirect})," ","秒后跳转至"]}):(0,i.tZ)("span",{children:"此问题已重定向至"})," ",(0,i.tZ)(eF.Z,{preset:"plain",to:"/question/".concat(Z,"?rf=").concat(r),children:y})]}),(0,i.BX)("div",{className:"QuestionStatus-notification-actions",children:[(0,i.tZ)(em.ZP,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(r)},children:"撤销重定向"}),(0,i.tZ)("div",{className:"QuestionStatus-notification-divider"}),(0,i.tZ)(em.ZP,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else if(u&&u.redirection&&u.redirection.to&&u.redirection.to.id&&u.redirection.to.id===r&&!m){var b=u.id,C=u.title;v="redirect-from",g=(0,i.BX)("div",{className:"QuestionStatus-notification-inner",children:[(0,i.BX)("div",{className:"QuestionStatus-notification-content",children:["从问题"," ",(0,i.tZ)(eF.Z,{preset:"plain",to:"/question/".concat(b,"?nr=1"),children:C})," ","跳转而来"]}),(0,i.BX)("div",{className:"QuestionStatus-notification-actions",children:[(0,i.tZ)(em.ZP,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(b)},children:"撤销重定向"}),(0,i.tZ)("div",{className:"QuestionStatus-notification-divider"}),(0,i.tZ)(em.ZP,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else l&&l.length&&!f&&!c&&(g=(0,i.tZ)(A.r,{module:"InvitationCard",trackCardShow:!0,children:(0,i.BX)("div",{className:"QuestionStatus-notification-inner",children:[(0,i.BX)("div",{className:"QuestionStatus-notification-content",children:[l.map(function(e,t){return(0,i.BX)("span",{children:[0!==t&&"、",(0,i.tZ)(e6.Z,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"})]},e.urlToken)})," ","邀请你回答此问题"]}),(0,i.BX)("div",{className:"QuestionStatus-notification-actions",children:[(0,i.tZ)(em.ZP,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite,children:"邀请别人"}),(0,i.tZ)("div",{className:"QuestionStatus-notification-divider"}),(0,i.tZ)(em.ZP,{preset:"plain",onClick:this.handleDeleteInviters,children:"忽略邀请"})]}),(0,i.tZ)("div",{children:(0,i.tZ)(em.ZP,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters,icon:ns.HN})})]})}))}return(0,i.tZ)(nc.Z,{className:"QuestionStatus-notification",notification:g?{key:v,text:g}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return(0,i.tZ)(nc.Z,{className:"QuestionStatus-notification",notification:t?{text:(0,i.BX)("div",{className:"QuestionStatus-notification-inner",children:[(0,i.tZ)("div",{className:"QuestionStatus-notification-content",children:"在匿名状态下无法邀请他人回答"}),(0,i.BX)("div",{className:"QuestionStatus-notification-actions",children:[(0,i.tZ)(em.ZP,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous,children:"取消匿名"}),(0,i.tZ)("div",{className:"QuestionStatus-notification-divider"}),(0,i.tZ)(em.ZP,{preset:"plain",onClick:n,children:"关闭"})]})]})}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return(0,i.BX)("div",{className:"QuestionStatus",children:[this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),(0,i.tZ)(tM.Z,{size:"fullPage",onClose:this.handleInvitationModalHide,children:t&&(0,i.tZ)(tD.Z,{question:e})})]})}}]),n}(Z.Component);(0,l._)(nd,"contextTypes",{toggleAnonymous:w().func});var nh=(0,k.compose)((0,Q.Z)({replacement:null}),o.withRouter,eW.Z,(0,b.connect)(function(e,t){var n=e.entities.questions,i=e.question.inviters,o=t.location.query,r=t.question.id,a={isMuteSpecial:(0,E.gW)(t.question),isMuteFreeze:(0,E.SZ)(t.question),inviters:i[r]};if(o.rf&&/^\d+$/.test(o.rf)){var s=n[Number(o.rf)];s&&(a.fromQuestion=s)}return a},{loadItems:E.XD,loadQuestion:E.fk,revokeQuestionRedirection:E.gh,deleteInviters:E.T8}))(nd),np=n(68014),nm=n(57177),nf=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props.item;return(0,i.tZ)(np.Z,{className:"QuestionTopic",children:(0,i.tZ)(nm.Z,{noHoverCard:eS.Z.isMobileEntry,topic:e})})}}]),n}(Z.Component),nv=(0,A.a)(function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}})(nf),ng=n(65733),nw=n(83697),nZ=n(72111),ny=n(88329),n_=n.n(ny),nb=n(87804),nC=n(44259),nk=n(41402),nS=n(80565),nA=n(99878);function nN(){var e=(0,ei._)(["\n50% { opacity: 1; transform: scale(2.5); }\nto { transform: scale(0.6); top: -5px; }\n"]);return nN=function(){return e},e}function nB(){var e=(0,ei._)(["\n50% { opacity: 1; transform: scale(2.5); }\nto { transform: scale(0.6); bottom: -5px; }\n"]);return nB=function(){return e},e}function nx(){var e=(0,ei._)(["\nfrom, 70%, to { transform: scale(1); }\n40% { transform: scale(1.2); }\n90% { transform: scale(1.05); }\n"]);return nx=function(){return e},e}function nT(){var e=(0,ei._)(["to { transform: scale(1); }"]);return nT=function(){return e},e}var nq=function(e){var t=(0,nC.wh)();return function(n,i){return t("https://www.zhihu.com/api/v4/topics/".concat(e,"/vote/").concat(n),{method:i})}},nE=function(e,t){return(0,ng.Z)((0,a._)(function(){return(0,m.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return n.sent(),[3,3];case 2:return t(n.sent()),[3,3];case 3:return[2]}})}))},nQ=y().createContext({}),nM=function(){return(0,Z.useContext)(nQ)},nP=function(e){var t,n=e.data,o=e.onVote,r=void 0===o?n_():o,s=e.onVoteError,c=void 0===s?n_():s,l=e.children,u=(0,h._)((0,Z.useState)(n),2),p=u[0],f=u[1],v=(0,h._)((0,Z.useState)(!0),2),g=v[0],w=v[1],y=p.urlToken,_=p.vote,b=nq(y);(0,Z.useEffect)(function(){return f(n)},[n]);var C=(t=(0,a._)(function(e,t){var n,i;return(0,m.__generator)(this,function(o){switch(o.label){case 0:return n=(null==_?void 0:_.totalVotes)||0,((null==_?void 0:_.liked)||(null==_?void 0:_.disliked))&&n--,i=(0,eN._)((0,d._)({},p),{vote:(0,eN._)((0,d._)({},_),{liked:e,disliked:t,totalVotes:n+(e||t?1:0)})}),[4,nb.Z.supportsAction("iOS/hapticFeedback")];case 1:return o.sent()&&nb.Z.dispatch("iOS/hapticFeedback"),f(i),w(!1),[2,i]}})}),function(e,n){return t.apply(this,arguments)}),k=nE((0,a._)(function(){return(0,m.__generator)(this,function(e){switch(e.label){case 0:return[4,b("like","POST")];case 1:return e.sent(),r(C(!0,!1)),[2]}})}),c),S=nE((0,a._)(function(){return(0,m.__generator)(this,function(e){switch(e.label){case 0:return[4,b("like","DELETE")];case 1:return e.sent(),r(C(!1,!1)),[2]}})}),c),A=nE((0,a._)(function(){return(0,m.__generator)(this,function(e){switch(e.label){case 0:return[4,b("dislike","POST")];case 1:return e.sent(),r(C(!1,!0)),[2]}})}),c),N=nE((0,a._)(function(){return(0,m.__generator)(this,function(e){switch(e.label){case 0:return[4,b("dislike","DELETE")];case 1:return e.sent(),r(C(!1,!1)),[2]}})}),c),B=(0,Z.useMemo)(function(){return{data:p,noAnimation:g,recommendVote:k,recommendUnVote:S,againstVote:A,againstUnVote:N}},[N,A,S,k,p,g]);return(0,i.tZ)(nQ.Provider,{value:B,children:l})},nI={square:0,rectangle:1},nR=function(e,t,n){var i=e?"question"===t||"answer"===t?n===nI.rectangle?{width:"48px",height:"66px"}:{width:"66px",height:"66px"}:{width:"48px",height:"66px"}:{width:"36px",height:"54px"};return(0,eN._)((0,d._)({},i),{flex:"0 0 auto",borderRadius:"3px",overflow:"hidden",objectFit:"cover",marginRight:"10px",filter:"brightness(.95)"})},nz=(0,nk.F4)(nN()),nX=(0,nk.F4)(nB()),nL=(0,nk.F4)(nx()),nD=(0,nk.F4)(nT()),nF=function(e){var t=e.colors;return{position:"relative",boxSizing:"content-box",borderRadius:"50%",border:"0.5px solid ".concat(t.GBK09A),cursor:"pointer",transition:"background-color .5s","::before":{content:'""',width:"40px",height:"40px",margin:"-20px",position:"absolute",top:"50%",left:"50%",borderRadius:"50%",background:t.GBK99A,opacity:"0.2",zIndex:0,transform:"scale(0)"},'&[aria-pressed="true"]':{"::before":{animation:"".concat(nD," .5s ease-in-out")},".Icon":{animation:"".concat(nL," .5s ease-in-out"),animationDelay:".5s"},".Sparkle":{"::before":{animation:"".concat(nz," .6s ease-in-out"),animationDelay:".2s"},"::after":{animation:"".concat(nX," .6s ease-in-out"),animationDelay:".2s"}}}}},nH=function(e){return{position:"absolute",top:0,left:0,width:"40px",height:"40px","::before, ::after":{content:'""',position:"absolute",marginLeft:"-1px",left:"50%",width:"2px",height:"2px",backgroundColor:e.colors.GBL01A,borderRadius:"50%",opacity:"0"},"::before":{top:"0"},"::after":{bottom:"0"},":nth-of-type(3)":{transform:"rotate(45deg)"},":nth-of-type(4)":{transform:"rotate(90deg)"},":nth-of-type(5)":{transform:"rotate(135deg)"}}},nU={normal:"知友推荐",less:"评分积累中",close:"暂无评分"},nO=function(e){var t=e.vote,n=(0,nw.n)().Mobile;return!t||t.disable?null:(0,i.BX)(C.Text,{children:["normal"===t.ratioStatus&&(0,i.BX)(C.Text,{as:"span",color:"GBL01A",fontSize:n?"inherit":"17px",fontWeight:"bold",children:[(100*t.score).toFixed(),"%\xa0"]}),nU[t.ratioStatus]]})},nV=function(e){var t=e.vote,n=e.isTitle;return!t||t.disable||"close"===t.ratioStatus?null:(0,i.BX)(C.Text,{children:[n&&(0,i.tZ)(i.HY,{children:"\xa0\xb7\xa0"}),"".concat((0,eT.Zh)(t.totalVotes),"人评价")]})},nW=function(e){var t=e.topic,n=t.title,o=t.vote,r=(0,nw.n)().Mobile;return(0,i.BX)(C.Flex,{alignItems:"baseline",css:function(e){return{color:e.colors.GBK02A,".topicMetaTitle":{display:"inline-block",marginRight:r?0:"11px",fontWeight:"bold",fontSize:r?"15px":"17px"}}},children:[(0,i.tZ)(C.Text,{className:"topicMetaTitle",children:n}),!r&&(0,i.tZ)(nO,{vote:o}),!r&&(0,i.tZ)(nV,{isTitle:!0,vote:o})]})},nG=function(e){var t=e.topic,n=e.lines,o=void 0===n?1:n;return(0,i.tZ)(C.Text,{color:"GBK06A",css:(0,nS.S)(o),children:t.excerpt})},nj=function(e){var t=e.topic,n=e.position,o=t.vote,r=(0,nw.n)().Mobile,a=!o||o.disable;if(!r)return(0,i.tZ)(nG,{topic:t});var s="question"===n;return a?(0,i.tZ)(nG,{topic:t,lines:s?2:1}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(nO,{vote:o}),s&&(0,i.tZ)(nV,{vote:o})]})},nK={recommend:{tip:"推荐",icon:tF.g,color:"GBL01A"},against:{tip:"不推荐",icon:function(e){return(0,i.tZ)(tF.g,(0,d._)({css:{transform:"rotate(180deg)"}},e))},color:"GBK04A"}},nY=[0,1,2,3].map(function(e){return(0,i.tZ)("div",{css:nH,className:"Sparkle"},e)}),n$=function(e){var t=e.className,n=e.checked,o=e.type,r=e.onClick,a=nK[o],s=a.tip,c=a.icon,l=a.color,u=(0,ng.Z)(function(e){e.preventDefault(),e.stopPropagation(),r("".concat(o).concat(n?"UnVote":"Vote"))});return(0,i.BX)(C.Flex,{as:"button",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",p:0,bg:n?l:"GBK99A",color:n?"GBK99A":"GBL05A",css:nF,className:t,"data-tooltip":s,"aria-pressed":n,"aria-label":s,onClick:u,children:[(0,i.tZ)("div",{className:"Icon",children:(0,i.tZ)(c,{size:20,center:!0})}),"recommend"===o&&nY]})},nJ=function(){var e,t,n=nM(),o=n.data,r=(0,eB._)(n,["data"]),a=(0,ng.Z)(function(e){var t;null===(t=r[e])||void 0===t||t.call(r)});return(0,i.BX)(C.Flex,{flex:"0 0 auto",css:{margin:"0 12px"},children:[(0,i.tZ)(n$,{css:{marginRight:"9px"},type:"recommend",checked:null===(e=null==o?void 0:o.vote)||void 0===e?void 0:e.liked,onClick:a}),(0,i.tZ)(n$,{type:"against",checked:null===(t=null==o?void 0:o.vote)||void 0===t?void 0:t.disliked,onClick:a})]})},n0=function(e){var t=e.className,n=e.position,o=e.onClick,r=nM(),a=r.data,s=r.noAnimation,c=a.urlToken,l=a.avatar,u=a.title,h=a.vote,p=a.avatarStyle,m=(0,ng.Z)(function(){null==o||o()}),f=(0,nw.n)().Mobile,v=h&&!h.disable&&h.ratioStatus&&"close"!==h.ratioStatus;return(0,i.BX)(nZ.pl,{as:"a",shouldTrackShow:!0,zaType:"Card",zaText:"头像",view:{elementLocation:{moduleId:"topic_card",content:{type:"Topic",token:String(c)}}},className:t,css:function(e){var t=e.colors;return(0,d._)({alignItems:"center",background:t.GBK10A,padding:"12px",display:"flex",textDecoration:"none",border:f?"":"1px solid ".concat(t.GBK09A),borderRadius:f?"8px":"2px",fontSize:f?"13px":"15px",color:f?t.GBK06A:t.GBK02A},s&&{"*, *::before, *::after":{animation:"none !important"}})},"aria-label":"话题 ".concat(void 0===u?"":u),target:"_blank",href:"https://www.zhihu.com/topic/".concat(c),onClick:m,children:[l&&(0,i.tZ)("img",{alt:"",src:l,css:nR(f,n,p)}),(0,i.BX)(C.Flex,{flexDirection:"column",flex:"1 1 auto",justifyContent:"space-around",children:[(0,i.tZ)(nW,{topic:a}),(0,i.tZ)(nj,{topic:a,position:n})]}),v&&(0,i.tZ)(nJ,{})]})},n1=function(e){var t=e.data,n=e.onVote,o=e.onVoteError,r=(0,eB._)(e,["data","onVote","onVoteError"]);return(null==t?void 0:t.title)?(0,i.tZ)(nP,{data:t,onVote:n,onVoteError:o,children:(0,i.tZ)(n0,(0,d._)({},r))}):null},n2=function(e){var t=e.className,n=e.data,o=n.avatar,r=n.urlToken,a=n.title,s=n.excerpt;return(0,i.BX)(C.Box,{as:"a",display:"block",p:"20px 20px 12px",className:t,css:{textDecoration:"none",outlineOffset:"-1px"},"aria-label":"话题 ".concat(a),target:"_blank",href:"https://www.zhihu.com/topic/".concat(r),children:[(0,i.BX)(C.Flex,{mb:"12px",children:[o&&(0,i.tZ)(C.Image,{flex:"0 0 auto",width:"50px",height:"70px",overflow:"hidden",mr:"12px",css:{objectFit:"cover",borderRadius:"3px",filter:"brightness(.95)"},alt:"",src:o}),(0,i.BX)("div",{children:[(0,i.tZ)(C.Text,{color:"GBK02A",mb:"7px",fontSize:"15px",fontWeight:"bold",css:(0,nS.S)(1),children:a}),(0,i.tZ)(C.Text,{color:"GBK04A",fontSize:"14px",css:(0,nS.S)(2),children:s})]})]}),(0,i.BX)(C.Text,{color:"GBL07A",fontSize:"14px",children:["查看更多",(0,i.tZ)(nA.N,{center:!0,size:22})]})]})},n3=function(e){var t=e.questionId,n=(0,h._)((0,ef.Ue)(),3),o=n[0],r=n[1],a=n[2],s=(0,b.useDispatch)(),c=(0,b.useSelector)(function(e){return(0,E.mG)(e,{id:t})}),l=(0,b.useSelector)(function(e){return(0,E.kR)(e,t)}),u=!!(!(null==c?void 0:c.vote)||c.vote.disable);return((0,Z.useEffect)(function(){t&&void 0===l&&s((0,E.RE)(t))},[t]),(0,Z.useEffect)(function(){if(!1===l){if(u){a();return}r()}},[l,u]),!o||u)?null:(0,i.tZ)(n1,{css:{margin:"14px 0"},data:c,position:"question"})};function n5(){var e=(0,ei._)(["","提问："]);return n5=function(){return e},e}var n4=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{collapsed:!0,editShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1}),(0,l._)((0,r._)(e),"getHandleInvite",function(t){t&&(e.handleInvite=t)}),(0,l._)((0,r._)(e),"handleExpand",function(){e.setState({collapsed:!1}),ed.Z.trackEvent(null,{id:6783,action:"Click"})}),(0,l._)((0,r._)(e),"handleCollapse",function(){e.setState({collapsed:!0,shareMenuPositionStatus:"normal"})}),(0,l._)((0,r._)(e),"handleEditShow",e.props.authRequired(function(){var t=(e.props.question.reviewInfo||{}).editTips;if(t){e.props.showNotification(t,"red");return}e.setState({editShown:!0})})),(0,l._)((0,r._)(e),"handleEditClose",function(){e.setState({editShown:!1})}),(0,l._)((0,r._)(e),"handleInvitationShow",function(){e.setState({invitationModalShown:!0})}),(0,l._)((0,r._)(e),"handleInvitationHide",function(){e.setState({invitationModalShown:!1})}),(0,l._)((0,r._)(e),"handleInvitationTipShow",function(){e.setState({invitationTipShown:!0})}),(0,l._)((0,r._)(e),"handleInvitationTipClose",function(){e.setState({invitationTipShown:!1})}),(0,l._)((0,r._)(e),"handleRedirectionCreatorShow",function(){e.setState({redirectionCreatorShown:!0})}),(0,l._)((0,r._)(e),"handleRedirectionCreatorClose",function(){e.setState({redirectionCreatorShown:!1})}),(0,l._)((0,r._)(e),"handleRedirectionCreated",function(t,n){var i=e.props,o=i.router,r=i.question.id,a=t.id;e.handleRedirectionCreatorClose(),n.then(function(){o.push("/question/".concat(a,"?rf=").concat(r))})}),(0,l._)((0,r._)(e),"handleDelete",function(){var t=e.props,n=t.question.id,i=t.isCommercialQuestion,o=t.deleteQuestion,r=t.deleteBrandQuestion;return i?r(n).then(function(){location.href="/"}):o(n).then(function(){location.href="/"})}),(0,l._)((0,r._)(e),"handleConfirmDelete",function(){e.handleDeleteModalClose(),e.handleDelete()}),(0,l._)((0,r._)(e),"handleDeleteModalShow",function(){e.setState({deleteModalShown:!0})}),(0,l._)((0,r._)(e),"handleDeleteModalClose",function(){e.setState({deleteModalShown:!1})}),(0,l._)((0,r._)(e),"handlePositionStatusChange",function(t){e.setState({shareMenuPositionStatus:t})}),(0,l._)((0,r._)(e),"handleBrandQuestionPrizesToggle",function(){e.setState({brandQuestionPrizesExpanded:!e.state.brandQuestionPrizesExpanded})}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAnswerPage,n=e.question.id,i=e.isCommercialQuestion,o=e.loadBrand,r=e.loadQuestionCommercialBanner,a=e.loadBrandQuestionRedPacket,s=e.loadBrandQuestionPermission,c=e.loadBrandQuestionOpenStatus,l=e.loadBrandQuestionAdvancedStyle,u=e.loadBrandQuestionPrize,d=e.currentUser;if(d&&(0,eA.ZP)("question",n,eA._x),i&&(o(n),r(n),l(n),a(n).then(function(e){e&&e.payload||u(n)}),d&&"guest"!==d.userType&&(s(n),c(n))),t)return}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,i=t.isAnswerPage,o=e.question,r=o.id,a=o.relationship.isAnonymous,s=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),(n!==r||i!==s)&&this.setState({collapsed:!0,invitationTipShown:!1}),a||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,i=t.collapsed;if(n&&!i){var o=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+o-document.documentElement.clientHeight)}}},{key:"hasExtraContentUnderAuthor",get:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,i=e.topicMeta,o=t.relatedCards,r=t.annotationDetail,a=t.redPacket,s=t.prize;return r||(void 0===o?[]:o)[0]||a||(null==s?void 0:s.status)||i.urlToken&&!n}},{key:"renderEditModal",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).permitEditTopics,t=this.props,n=t.question,o=t.brand,r=n.id,a=n.title,s=n.editableDetail,c=n.topics,l=n.questionType,u=n.relationship.isAnonymous,d=this.state.editShown;return(0,i.tZ)(e7.ZP,{id:r,title:a,detail:s,topics:c,questionType:l,isAnonymous:u,show:d,onClose:this.handleEditClose,brand:o,permitEditTopics:e})}},{key:"renderFooter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditQuestion,n=e.permitEditTopics,o=this.props,r=o.question,a=o.isCommercialQuestion,s=o.currentUser,c=this.state.collapsed,l=a&&!eS.Z.isMobileEntry;return(0,i.BX)("div",{className:"QuestionHeader-footer",children:[(0,i.tZ)("div",{className:"QuestionHeader-footer-inner",children:(0,i.BX)("div",{className:"QuestionHeader-main QuestionHeader-footer-main",children:[(0,i.tZ)(tw,{question:r}),l&&(0,i.tZ)(ej,{question:r}),(0,i.tZ)(t5,{question:r,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite,editQuestionButton:t&&(0,i.tZ)(e4,{onClick:this.handleEditShow,text:"修改问题"})}),(0,i.tZ)("div",{className:"QuestionHeader-actions",children:!c&&(0,i.BX)(em.ZP,{preset:"plain",onClick:this.handleCollapse,children:["收起 ",(0,i.tZ)(er.v,{center:!0})]})})]})}),s&&this.renderEditModal({permitEditTopics:n})]})}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return(0,i.BX)(Z.Fragment,{children:[(0,i.tZ)(eC,{className:"QuestionHeader-specialQuestionAuthor",author:e}),(0,i.tZ)("div",{className:"QuestionHeader-topicDivider"})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,o=t.question,r=t.isAnswerPage,a=t.isCommercialQuestion,s=t.isOrgQuestion,c=t.isAuthorCurrentUser,l=t.brand,u=t.publicEditPermission,d=t.permission.canBrandAdminEdit,h=t.currentUser,p=t.blockStrategies,m=(void 0===p?{}:p).isBlockingBindTopic,f=o.title,v=o.detail,g=o.topics,w=void 0===g?[]:g,Z=o.author,y=o.showAuthor,_=o.showEncourageAuthor,b=o.excerpt,k=o.thumbnailInfo,N=o.isEditable,B=o.id,x=o.type,T=o.reviewInfo,q=o.relatedCards,E=void 0===q?[]:q,Q=o.annotationDetail,M=o.redPacket,P=o.relationship.isAuthor,I=this.state,R=I.collapsed,z=I.invitationTipShown,X=I.brandQuestionPrizesExpanded,L=w.map(function(e){return{name:e.name,id:e.id}}),D=u||{},F=D.isQuestionEditable,H=D.isQuestionTopicEditable,U=ee(N,c,F),O=ee(N,c,H),V=this.renderFooter({permitEditQuestion:U||d,permitEditTopics:O||d}),W=h&&"guest"!==h.userType,G=(0,i.tZ)(ew.Z,{children:(0,i.BX)("div",{className:el()("QuestionHeader-content",{isLogin:W}),children:[(0,i.tZ)("div",{className:"QuestionHeader-main",children:(0,i.tZ)("h1",{className:"QuestionHeader-title",onClick:function(){(0,eu.X5)(window,{top:0,behavior:"smooth"})},children:f})}),(0,i.tZ)(S.eV,{block:"Toolbar",children:(0,i.tZ)(A.r,{module:"ToolBar",card:{content:{type:"Question",token:String(B)}},children:(0,i.tZ)("div",{className:"QuestionHeader-side",children:(0,i.tZ)(tw,{question:o,inTopBar:!0})})})}),(0,i.tZ)("div",{className:"QuestionHeader-profile",children:(0,i.tZ)(ev.Z,{currentUser:h})})]})});return(0,i.BX)("div",{"data-zop-question":JSON.stringify({title:f,topics:L,id:B,isEditable:N}),children:[(0,i.tZ)(ek.Z,{children:(0,i.tZ)(nh,{question:o,location:n,invitationTipShown:z,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:r})}),a&&(!R||!r)&&(0,i.tZ)(ep.Z,{type:o.type,id:o.id}),(0,i.tZ)(A.r,{module:"QuestionDescription",card:{content:{type:"Question",token:String(B)}},children:(0,i.tZ)("div",{children:(0,i.BX)("div",{className:"QuestionHeader",ref:function(t){e.container=t},children:[(0,i.BX)("div",{className:"QuestionHeader-content",children:[(0,i.BX)("div",{className:"QuestionHeader-main",children:[(0,i.tZ)(ta,{id:B,question:o}),(0,i.BX)("div",{className:"QuestionHeader-tags",children:[a&&(0,i.tZ)(eK,{brand:l}),!m&&(0,i.BX)("div",{className:"QuestionHeader-topics",children:[!!(y&&!(a&&(null==l?void 0:l.name)))&&this.renderSpecialQuestionAuthor(),w.map(function(e){return(0,i.tZ)(nv,{item:e},e.id)})]})]}),(0,i.BX)("h1",{className:"QuestionHeader-title",children:[s&&es()(n5(),Z.name),f]}),G,(0,i.tZ)("div",{css:{height:1}}),!!(!y&&!s&&!a&&_)&&(0,i.tZ)(to,{question:o,isAuthorCurrentUser:c,hasExtraContent:this.hasExtraContentUnderAuthor}),(0,i.tZ)(C.Flex,{children:(0,i.tZ)(eg.Z,{item:o,annotationProps:Q&&{annotationDetail:Q}})}),E[0]&&(0,i.tZ)(t9,{target:E[0]}),M&&(0,i.tZ)(e3,{questionId:B,redPacket:M}),(0,i.tZ)(eO,{question:o,expanded:X,handleToggle:this.handleBrandQuestionPrizesToggle}),(0,i.BX)(ef.ZP,{children:[!a&&(0,i.tZ)(n3,{questionId:B}),(0,i.tZ)(eX,{questionId:B,isInAnswerPage:r})]}),(0,i.tZ)(nr,{html:v,reviewInfo:T,excerpt:b,thumbnailInfo:k,collapsed:R,onExpand:this.handleExpand,onEdit:this.handleEditShow,isAuthor:P,hideWatermark:null==l?void 0:l.noWatermark,sourceId:B,sourceType:x})]}),(0,i.tZ)("div",{className:"QuestionHeader-side",children:(0,i.tZ)("div",{className:"QuestionHeader-follow-status",children:(0,i.tZ)(tB,{question:o})})})]}),R?V:(0,i.tZ)(eh.Z,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange,children:V}),s&&(0,i.tZ)(e8,{question:o})]})})})]})}}]),n}(Z.PureComponent);(0,l._)(n4,"propTypes",{question:w().object,location:w().object,isAnswerPage:w().bool});var n7=(0,k.compose)(o.withRouter,X.Z,(0,eo.$_)({dataPath:"question"}),eo.OW,(0,b.connect)(function(e,t){var n=e.question.brand,i=e.publicEditPermission,o=e.currentUser,r=t.question,a=r.questionType,s=r.author;return{brand:n,publicEditPermission:i,currentUserUrlToken:o,permission:(0,E.hh)(e),isCommercialQuestion:"commercial"===a,isOrgQuestion:"org"===a,isAuthorCurrentUser:(0,F.pG)(e,s)}},{loadBrand:E.Od,updateQuestionLocked:E.Rc,deleteQuestion:E.Km,deleteBrandQuestion:E.IJ,showNotification:H.c0,loadQuestionCommercialBanner:E.Mg,loadBrandQuestionRedPacket:E.w_,loadBrandQuestionPermission:E.md,loadBrandQuestionOpenStatus:E.u1,loadBrandQuestionAdvancedStyle:E.wU,loadBrandQuestionPrize:E.qc}))(n4);function n6(e){var t=e.toString();return 1===t.length?"0".concat(t):t}var n8=function(e){var t=(0,N.hA)(e);return t?"".concat(t.getFullYear(),"-").concat(n6(t.getMonth()+1),"-").concat(n6(t.getDate()),"T").concat(n6(t.getHours()),":").concat(n6(t.getMinutes()),":").concat(n6(t.getSeconds())):""};function n9(){var e=document.querySelector("#js-answerAddCard .Editable-content");e?e.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var ie=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{anonymousConfirmShown:!1,answering:!1,hideIsMutedCover:!1,signFlowModalShown:!1}),(0,l._)((0,r._)(e),"editableStatscReporter",(0,B.ZP)("AnswerPage",function(){return e.props.currentUserUrlToken})),(0,l._)((0,r._)(e),"getPublicEditPermission",function(){var t=e.props,n=t.question,i=t.currentUserUrlToken,o=t.getPublicEditPermission,r=v()(n,"author.urlToken","");v()(n,"isEditable",!1)&&i&&r!==i&&o()}),(0,l._)((0,r._)(e),"handleToggleAnonymous",function(){var t=e.props,n=t.showNotification,i=t.reward.question,o=void 0===i?{}:i,r=t.id;if(r&&o[r]&&o[r].isRewardable){n("已开启赞赏的回答无法设为匿名，请先关闭赞赏","red");return}e.setState({anonymousConfirmShown:!e.state.anonymousConfirmShown})}),(0,l._)((0,r._)(e),"startAddAnswer",function(){var t=e.props,n=t.params.answerId,i=t.location.query.group_id,o=t.router;n||i?(o.push("/question/".concat(e.props.id)),setTimeout(e.focusAddAnswer)):e.focusAddAnswer()}),(0,l._)((0,r._)(e),"endAddAnswer",function(){e.setState({answering:!1})}),(0,l._)((0,r._)(e),"focusAddAnswer",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n9(),e.setState({answering:Date.now()},function(){t&&setTimeout(function(){n9()})})}),e}return(0,c._)(n,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer}}},{key:"componentDidMount",value:function(){(0,B.hx)();var e,t,n=this.props,i=n.question,o=n.answer,r=n.draft,s=n.currentUser,c=n.params,l=n.attachedArticleId,u=n.loadAttachedArticleToDraft,d=n.location;(!(e=null==o?void 0:o.updatedTime)||Date.now()-1e3*e>6e4)&&(0,R.v)("https://zz.bdstatic.com/linksubmit/push.js",{crossOrigin:void 0});var h=this;(t=(0,a._)(function(){var e;return(0,m.__generator)(this,function(t){switch(t.label){case 0:e=en(d),t.label=1;case 1:if(t.trys.push([1,8,,9]),!i)return[3,3];return[4,h.fetchDraft()];case 2:return t.sent(),[3,5];case 3:return[4,h.fetchQuestionAndDraft()];case 4:t.sent(),t.label=5;case 5:if(h.props.params.answerId)return[2];if(!l)return[3,7];return[4,u(c.id,l)];case 6:t.sent(),t.label=7;case 7:return(r&&!r.schedule||!r&&e||l)&&h.focusAddAnswer(e||l),[3,9];case 8:return console.log(t.sent()),[3,9];case 9:return[2]}})}),function(){return t.apply(this,arguments)})(),this.getPublicEditPermission(),s&&"guest"!==s.userType||this.setState({signFlowModalShown:!0})}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id;return Promise.all([(0,e.loadQuestion)(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e,t=this.props,n=t.loadDraft;return t.currentUser&&(e=n(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),e}},{key:"renderMeta",value:function(){var e=J(this.props.question);return Object.keys(e).map(function(t){return(0,i.tZ)("meta",{itemProp:t,content:e[t]},t)})}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,o=e.answer,r=e.params.answerId,a=e.ua;if(!/baiduspider/i.test(a.origin))return null;var s=!!r,c=s?o:n;if(c){var l=(0,h._)(s?[c.createdTime,c.updatedTime]:[c.created,c.updatedTime],2),u=l[0],d=l[1],p=n8(u),m=n8(d);return(0,i.tZ)("script",{type:"application/ld+json",children:'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'.concat(t.pathname,'",\n          "appid": "否",\n          "pubDate": "').concat(p,'",\n          "upDate": "').concat(m,'"\n        }')})}}},{key:"handleSignFlowModalClose",value:function(){this.setState({signFlowModalShown:!1})}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.location,r=n.params,a=n.children,s=n.question,c=n.router.location.query,l=n.topicMeta,u=n.answer,h=n.firstAnswer,p=!!r.answerId;if(!s)return(0,i.tZ)("div",{});if("true"===c.answer_deleted_redirect)return(0,i.tZ)($,{id:s.id});var m=s.questionType,f=s.isMuted,v=s.title,g=s.relationship,w=g.isAuthor,y=g.myAnswer,b=s.visibleOnlyToAuthor;if(!p&&!w&&b||p&&(null==u?void 0:u.visibleOnlyToAuthor)&&!(null==u?void 0:null===(e=u.relationship)||void 0===e?void 0:e.isAuthor))return(0,i.tZ)(q,{});var k=this.state,N=k.anonymousConfirmShown,x=k.answering,T=k.hideIsMutedCover,E=k.signFlowModalShown,Q=p?u:s;return(0,i.BX)(I.ZP,{children:[(0,i.tZ)(W.Z,{pageInfo:{pageId:p?"42":"172"},pageOptions:{trackPageDisappear:!!p}}),(0,i.tZ)(S.eV,{content:{type:"Question",token:String(null==s?void 0:s.id)},children:(0,i.tZ)(S.Wi,{zaType:"Card",children:(0,i.tZ)(A.r,{module:"QuestionItem",card:{content:{type:"Question",token:String(s.id)}},children:(0,i.tZ)(j,{isQAPage:!p,children:(0,i.BX)("div",{className:"QuestionPage",itemScope:!0,itemProp:"mainEntity",itemType:"http://schema.org/Question",children:[Q&&(0,i.tZ)(P,{entity:Q}),E&&(0,i.tZ)(O.Vy,{showQrcodeFirst:!0,titlePart:(0,i.tZ)(V.L,{title:"登录知乎，问答干货一键收藏"}),maskClosable:!1,defaultType:"login",onClose:function(){t.handleSignFlowModalClose()}}),(0,i.tZ)(_.ql,(0,d._)({title:v},!p&&{meta:(0,z.Uk)(s,h)})),this.renderMeta(),this.renderJSONLD(),"commercial"===m&&f&&!T&&w&&(0,i.tZ)("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){t.setState({hideIsMutedCover:!0})}}),b&&w&&!p&&(0,i.tZ)("div",{className:"QuestionPage-visibleYourself",children:"仅自己可见"}),(0,i.tZ)(n7,{topicMeta:l,question:s,location:o,isAnswerPage:p}),(0,i.tZ)(C.Box,{id:"AnswerFormPortalContainer",bg:"GBK10C",mt:"10px",mx:"auto",css:{width:"1000px"}}),(0,i.tZ)(B.ct.Provider,{value:this.editableStatscReporter,children:(0,Z.cloneElement)(Z.Children.only(a),{question:s,answering:x})}),(0,i.tZ)(G.Z,{question:s,myAnswer:y,shown:N,onClose:this.handleToggleAnonymous})]})})})})})]})}}]),n}(Z.PureComponent);(0,l._)(ie,"fetchData",function(e){var t=e.dispatch,n=e.getState,i=e.params,o=i.id,r=i.answerId;return n().env.userAgent.isBot?Promise.all([t((0,E.zR)(o,r)),t((0,E.Bi)(o,r)),t((0,E.fk)(o))]):t((0,E.fk)(o))}),(0,l._)(ie,"childContextTypes",{toggleAnonymous:w().func,startAddAnswer:w().func,endAddAnswer:w().func});var it=(0,k.compose)((0,L.g)({scene:L.k.question}),o.withRouter,X.Z,(0,b.connect)(function(e,t){var n=t.params,i=n.id,o=n.answerId,r=t.location.query,a=e.question.topicMeta,s=e.entities.drafts,c=e.env,l=c.referer,u=c.userAgent,h=e.reward,p=e.currentUser;return(0,d._)({id:i,topicMeta:a[i]||{},question:(0,E.Md)(e,{id:i}),attachedArticleId:r.attach_to_article,reward:void 0===h?{}:h,draft:(void 0===s?{}:s)["question_".concat(i)],referer:l,ua:u,currentUserUrlToken:p,currentUser:(0,F.ib)(e)},o?{answer:(0,D.ae)(e,{id:o})}:{firstAnswer:(0,D.xD)(e,{id:i})})},{loadQuestion:E.fk,loadDraft:E.dY,loadAttachedArticleToDraft:E._S,showNotification:H.c0,getPublicEditPermission:U.T}))(ie),ii=n(78233),io=n(83215),ir=n(65033),ia=n(1785),is=n(58608),ic=n(6360),il=n(16646),iu=n(22712),id=n(19958),ih=n(91269),ip=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{contentRef:null,innerEditingState:!1,isWantToWrite:!1}),(0,l._)((0,r._)(e),"contentRef",(0,Z.createRef)()),(0,l._)((0,r._)(e),"handleCloseComment",function(){var t=e.props,n=t.location,i=n.pathname,o=n.search,r=t.byComment,a=t.router;r&&a.replace({pathname:i,search:o})}),(0,l._)((0,r._)(e),"handleCloseEditing",function(){var t=e.props,n=t.location,i=n.pathname,o=n.query,r=n.hash,a=t.router;window.scrollTo(0,0),("#draft"===r||"#write"===r)&&a.replace({pathname:i,query:o})}),(0,l._)((0,r._)(e),"handleEditingStateChange",function(t){e.setState({innerEditingState:t})}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification,i=e.location;e.currentUser&&(0,eA.ZP)("answer",t,eA._x),this.setState({contentRef:this.contentRef.current,isWantToWrite:en(i)}),te().get("answer::justPublished")&&(te().delete("answer::justPublished"),n("answer",t)),(0,ih.ql)({type:"answer",token:t,index:1})}},{key:"render",value:function(){var e,t=this.props,n=t.question,o=n.id,r=n.relationship,a=r.canCollapseAnswers,s=r.canStickAnswers,c=n.hasPublishingDraft,l=t.answer,u=t.location.hash,d=t.isSearchSpecialSource,h=t.hasLoadedDraft,p=t.isAnswerPage;return(null==l?void 0:null===(e=l.question)||void 0===e?void 0:e.id)!==o||l.isDelete?(0,i.tZ)(il.Z,{to:"/question/".concat(o)}):(0,i.tZ)(is.ZP,{className:"AnswerCard",css:p&&this.state.innerEditingState&&{display:"none"},children:(0,i.tZ)("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0,children:(0,i.tZ)(io.wi,{root:this.state.contentRef,children:(0,i.tZ)(ic.Z,{relatedTo:"answer",answer:l,byComment:(0,tY.Y6)(u),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:a,canStick:s,editing:h&&this.state.isWantToWrite,editable:!0,canAbstract:!0,index:0,expanded:d||!eS.Z.isMobileEntry||(0,D.G_)(l)||(0,D.eP)(l),hasPublishingDraft:c,itemProp:"mainEntityOfPage",showReviewingLabel:!0,isSearchSpecialSource:d,isAnswerPage:p,onEditingStateChange:this.handleEditingStateChange})})})})}}]),n}(Z.Component),im=(0,k.compose)(o.withRouter,eW.Z,(0,b.connect)(function(e,t){var n,i,o=e.question,r=(void 0===o?{}:o).draftStatus,a=t.answer;return{hasLoadedDraft:(null==r?void 0:null===(i=r[null==a?void 0:null===(n=a.question)||void 0===n?void 0:n.id])||void 0===i?void 0:i.loading)===!1}},{loadAnswer:D.IS,loadContentRightsNotification:id.NC,updateAdPromotionAction:iu.Cz}))(ip),iv=Object.assign,ig=function(e){return y().createElement(eQ.Z,iv({width:"15",height:"14",fill:"none",viewBox:"0 0 15 14"},e),y().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M3.55 14c-.106 0-.159 0-.265-.053a.583.583 0 0 1-.318-.53v-2.225H.954A.95.95 0 0 1 0 10.238V.965A.95.95 0 0 1 .954.01h12.982a.95.95 0 0 1 .954.954v9.273a.95.95 0 0 1-.954.954H7.418l-3.497 2.702c-.106.053-.212.106-.37.106zm-2.49-3.921h2.437c.318 0 .53.212.53.53v1.854l2.914-2.225c.106-.053.212-.106.318-.106h6.518V1.124H1.06v8.955z",clipRule:"evenodd"}),y().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M3.709 4.515h7.948v-1.06H3.71v1.06zm0 3.18h4.239v-1.06H3.709v1.06z",clipRule:"evenodd"}))},iw=Object.assign,iZ=function(e){return y().createElement(eQ.Z,iw({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),y().createElement("mask",{id:"id-95574191-a",width:"16",height:"16",x:"0",y:"0",maskUnits:"userSpaceOnUse"},y().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M.001.016h15.983V16H.001V.016z",clipRule:"evenodd"})),y().createElement("g",{mask:"url(#id-95574191-a)"},y().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M7.992.016C3.585.016 0 3.6 0 8.008a7.96 7.96 0 0 0 1.344 4.435.521.521 0 0 0 .867-.58 6.915 6.915 0 0 1-1.169-3.855 6.958 6.958 0 0 1 6.95-6.95 6.958 6.958 0 0 1 6.95 6.95 6.958 6.958 0 0 1-6.95 6.95 6.917 6.917 0 0 1-3.865-1.175.522.522 0 0 0-.58.866A7.956 7.956 0 0 0 7.992 16c4.407 0 7.992-3.585 7.992-7.992S12.4.016 7.992.016zM5.046 8.368c-.221 0-.332-.096-.332-.29V7.29c0-.216.111-.323.332-.323h2.167a4.28 4.28 0 0 1-.394 1.401H5.046zm3.14-1.401h2.746a.47.47 0 0 1 .28.071c.058.041.086.125.086.252v.845c0 .155-.12.233-.366.233H7.873a8.4 8.4 0 0 0 .314-1.401zm-2.964 3.316c-.386.266-.945.508-1.677.727v.822c.301-.032.542-.069.722-.11a4.708 4.708 0 0 0 1.63-.774c.558-.409 1.07-.976 1.54-1.701h.712v1.615c0 .33.098.572.294.727.178.143.404.214.68.214h3.206V10.9H9.426c-.126 0-.218-.023-.275-.07-.054-.045-.079-.142-.076-.29l.005-1.293h2.166a.98.98 0 0 0 .703-.261c.155-.149.233-.376.233-.68V7.03c0-.311-.085-.545-.256-.704-.105-.098-.268-.172-.49-.223l.252-.58c.073-.168.11-.308.11-.422a.823.823 0 0 0-.276-.608c-.187-.187-.444-.28-.77-.28h-5.14l.137-.47h-.893c-.161.449-.327.778-.498.987-.206.257-.447.412-.723.466v.907a2.96 2.96 0 0 0 .908-.404 3 3 0 0 0 .622-.608h5.221c.188 0 .304.013.352.038.073.038.109.092.109.162s-.03.175-.095.318l-.21.46H5.09c-.478 0-.805.083-.983.248-.187.177-.28.43-.28.76V8.26c0 .491.202.804.607.94.096.032.288.048.576.048h1.287c-.37.46-.728.805-1.074 1.036z",clipRule:"evenodd"})))},iy=Object.assign,i_=function(e){return y().createElement(eQ.Z,iy({width:"14",height:"14",fill:"none",viewBox:"0 0 14 14"},e),y().createElement("mask",{id:"id-628033106-a",width:"14",height:"14",x:"0",y:"0",maskUnits:"userSpaceOnUse"},y().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M.001.014h13.985V14H.001V.014z",clipRule:"evenodd"})),y().createElement("g",{mask:"url(#id-628033106-a)"},y().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M2.543 8.278a.636.636 0 0 1 0 1.272h-.636A1.907 1.907 0 0 1 0 7.643V1.92C0 .868.854.014 1.907.014H7.63c1.053 0 1.907.854 1.907 1.907v.636a.636.636 0 0 1-1.271 0V1.92a.636.636 0 0 0-.636-.636H1.907a.636.636 0 0 0-.636.636v5.722c0 .35.285.635.636.635h.636zm3.814-3.814h5.722c1.053 0 1.907.854 1.907 1.907v5.722A1.907 1.907 0 0 1 12.08 14H6.357a1.907 1.907 0 0 1-1.907-1.907V6.37c0-1.053.854-1.907 1.907-1.907zm0 1.271a.636.636 0 0 0-.635.636v5.722c0 .35.284.636.635.636h5.722a.636.636 0 0 0 .636-.636V6.37a.636.636 0 0 0-.636-.636H6.357z",clipRule:"evenodd"})))},ib=Object.assign,iC=function(e){return y().createElement(eQ.Z,ib({width:"43",height:"50",fill:"none",viewBox:"0 0 43 50"},e),y().createElement("path",{fill:"#121212",d:"M23.376 45.237c-1.567 0-3.133.012-4.698 0a1.701 1.701 0 0 0-1.133.386 507.16 507.16 0 0 1-4.493 3.517 3.959 3.959 0 0 1-.694.449 1.305 1.305 0 0 1-1.792-1.537c.239-.737.477-1.47.744-2.192.158-.42.153-.597-.384-.68-1.963-.3-3.672-1.093-4.879-2.756a7.614 7.614 0 0 1-1.272-2.983c-.098-.477-.238-.455-.651-.317-.625.212-.783.568-.601 1.16.041.155.057.316.047.477a.988.988 0 0 1-.806 1.03.954.954 0 0 1-1.162-.589c-.115-.257-.189-.417-.527-.408a1.009 1.009 0 0 1-1.003-.701c-.188-.463.015-.828.337-1.112.238-.22.238-.356.067-.625a1.023 1.023 0 0 1 .238-1.432.98.98 0 0 1 1.377.203c.293.348.542.344.966.227 1.315-.365 1.974-1.088 1.99-2.534.015-1.239.346-2.467.494-3.706.158-1.314-.1-2.61-.258-3.905-.205-1.67-.477-3.34-.742-4.992-.136-.89.44-1.462 1.325-1.312 1.119.186 1.104.183 1.255-.955.224-1.689.45-3.376.715-5.058a1.102 1.102 0 0 0-.522-1.243C5.336 12.284 4.34 10.273 3.93 7.954c-.462-2.57.65-4.554 2.53-6.175C8.34.156 10.609-.166 12.993.068a11.67 11.67 0 0 1 3.884 1.028 5.311 5.311 0 0 1 2.147 1.728c.303.436.645.541 1.138.539 4.362-.017 8.721 0 13.08 0 1.776 0 3.415.413 4.813 1.563 2.04 1.67 2.784 3.87 2.558 6.442-.009.08-.023.16-.04.239-.178.954-.21 1.655.715 2.479a4.5 4.5 0 0 1 .386 6.15 13.421 13.421 0 0 1-2.2 2.246 1.322 1.322 0 0 0-.548.928c-.604 4.355-1.267 8.7-1.814 13.06-.539 4.327-3.407 7.65-7.566 8.59-.876.169-1.768.235-2.66.198H23.38l-.003-.021z"}),y().createElement("path",{fill:"#FEFEFE",d:"M12.394 47.606c.441-1.293.809-2.417 1.21-3.526.136-.377 0-.442-.335-.444-.715 0-1.431-.019-2.147-.07-1.346-.095-2.458-.698-3.412-1.624a1.357 1.357 0 0 1-.425-1.105c.046-.93.062-1.863.062-2.794a.614.614 0 0 1 .492-.692c.513-.148 1.014-.338 1.517-.517.442-.156.642-.478.509-.929-.144-.477-.537-.532-.955-.41-.322.09-.64.21-.954.31-.403.13-.601 0-.592-.446.02-.89 0-1.782.024-2.675.05-2.944-.33-5.85-.775-8.751-.02-.117-.043-.239-.055-.351-.046-.535.086-.659.606-.53 1.095.267 2.2.504 3.278.833 1.67.51 3.329.365 4.975-.1 1.97-.559 3.798-1.473 5.64-2.343a1.038 1.038 0 0 0 .604-.955c.072-1.047.16-2.095.238-3.14.048-.61.184-.715.747-.477 1.625.628 3.252 1.25 4.865 1.909a3.12 3.12 0 0 0 2.195.074c1.73-.558 3.348-1.413 5.018-2.114.745-.306.768-.306 1.074.458.532 1.322 1.038 2.653 1.603 3.963.191.444.079.695-.265.954a37.672 37.672 0 0 1-4.576 2.976c-.833.463-.883.568-.716 1.517.838 4.57 1.217 9.189 1.556 13.813a1.209 1.209 0 0 1-.44 1.085c-1.631 1.494-3.552 2.148-5.752 2.148-3.101-.029-6.184 0-9.276 0a1.432 1.432 0 0 0-1 .374c-1.436 1.179-2.93 2.317-4.538 3.58z"}),y().createElement("path",{fill:"#06F",d:"M32.376 15.823a3.172 3.172 0 0 0-.04-.366c-.284-1.171.035-2.087 1.026-2.834.584-.441.61-.926.293-1.403s-.78-.573-1.45-.239c-.24.122-.299.072-.356-.157a1.583 1.583 0 0 0-.212-.477.936.936 0 0 0-1.14-.408.995.995 0 0 0-.693 1.062c.023.211.06.42.112.627-.365-.05-.69-.239-1.05-.086a.99.99 0 0 0-.675.759.869.869 0 0 0 .415.973c.392.239.802.427 1.215.62a.548.548 0 0 1 .394.52c.023.655.076 1.308.133 1.957a.46.46 0 0 1-.327.542 2.832 2.832 0 0 1-2.343.05c-1.894-.8-3.817-1.517-5.743-2.26-.97-.376-1.536-.028-1.63 1.005-.114 1.262-.238 2.524-.312 3.791a.809.809 0 0 1-.51.78c-1.797.83-3.594 1.67-5.56 2.031a6.441 6.441 0 0 1-2.708-.06c-.752-.176-1.494-.398-2.248-.555-.36-.075-.439-.24-.39-.568.28-1.922.552-3.843.813-5.765.043-.322.183-.418.477-.336.424.112.871.104 1.29-.024.492-.132.82.045 1.163.365a8.126 8.126 0 0 0 3.209 1.849c.828.239 1.243-.11 1.08-.954-.142-.738-.262-1.482-.443-2.212a1 1 0 0 1 .334-1.093 17.656 17.656 0 0 0 2.758-3.34c.821-1.272 1.265-2.642.954-4.171-.083-.418.063-.506.451-.506 4.18.012 8.363 0 12.544.012 1.708 0 3.242.477 4.435 1.782 1.29 1.42 1.484 3.102 1.336 4.94-.095 1.176-.522 1.791-1.732 2.147-1.489.434-2.878 1.21-4.309 1.837-.17.1-.363.157-.56.165z"}),y().createElement("path",{fill:"#FEFEFE",d:"M14.94 15.307c-.871-.3-1.477-.87-2.088-1.431-.318-.291-.685-.477-1.129-.392-1.88.404-3.219-.587-4.4-1.806-1.479-1.53-2.2-3.426-1.892-5.538.33-2.25 2.699-4.328 4.99-4.56 1.838-.206 3.7.034 5.425.702 2.83 1.107 3.775 3.844 2.207 6.442a15.454 15.454 0 0 1-3.102 3.656.992.992 0 0 0-.367 1.143c.153.56.231 1.147.356 1.784z"}),y().createElement("path",{fill:"#06F",d:"M35.01 38.244a128.668 128.668 0 0 0-.763-7.824 60.35 60.35 0 0 0-.527-3.464.584.584 0 0 1 .324-.716c.842-.52 1.67-1.062 2.51-1.59.146-.09.296-.295.463-.197.167.098.088.36.064.544-.226 1.652-.455 3.299-.687 4.939-.362 2.507-.73 5.014-1.105 7.523a1.38 1.38 0 0 1-.279.785z"}),y().createElement("path",{fill:"#B7B7B6",d:"M37.792 17.19c-.238-.239-.353-.392-.303-.6 0-.03.13-.073.139-.061a.98.98 0 0 1 .164.66z"}),y().createElement("path",{fill:"#121212",d:"M20.92 27.309c.025.954-.488 1.479-1.43 1.5-.943.022-1.633-.615-1.64-1.56-.007-.945.697-1.53 1.804-1.546.9-.012 1.231.42 1.267 1.606z"}),y().createElement("path",{fill:"#444",d:"M11.938 5.575c.172-.137.35-.265.537-.382a.804.804 0 0 1 1.178.294c.378.652.654 1.358.816 2.094.1.38-.176.432-.43.492-.252.06-.522.112-.6-.265-.094-.444-.172-.895-.308-1.329-.079-.255-.131-.656-.563-.518-.396.124-.477.416-.31.802.183.44.312.897.491 1.336.217.535-.2.623-.518.728-.317.105-.749.339-.93-.239a33.209 33.209 0 0 1-.897-3.567c-.098-.477.26-.553.584-.651.325-.098.575-.045.673.348.072.289.074.6.277.857zM9.266 9.09l.954-.356c.191-.067.356-.048.442.165a.32.32 0 0 1-.047.376.322.322 0 0 1-.11.077 9.983 9.983 0 0 1-2.172.775c-.446.093-.675-.238-.525-.715.22-.697.477-1.38.733-2.09-.332-.077-.616.095-.912.166-.186.046-.358.074-.453-.143a.354.354 0 0 1 .179-.5c.67-.302 1.4-.445 2.133-.42.415.018.551.338.422.737-.196.591-.398 1.188-.644 1.927zm6.461-1.544c-.289.043-.458-.096-.55-.39-.15-.477-.238-.954-.355-1.43-.152-.597.208-.74.626-.862.46-.136.57.212.684.537.115.324.253.715.377 1.059.25.704-.002 1.064-.782 1.086z"}),y().createElement("path",{fill:"#4A4B4A",d:"M15.037 3.055a.77.77 0 0 1 .75.77.728.728 0 0 1-.779.745.716.716 0 0 1-.741-.751c.028-.485.324-.707.77-.764z"}))},ik=n(22715),iS=n(44144),iA=n(18837),iN=n.n(iA),iB=n(87462),ix=n(45987),iT=n(15671),iq=n(43144),iE=n(82963),iQ=n(61120),iM=n(60136),iP=n(55709),iI=n(15042),iR=n(29368),iz=n(28100),iX=n(67898),iL=function(e){function t(){(0,iT.Z)(this,t);for(var e,n,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];return(n=(0,iE.Z)(this,(e=(0,iQ.Z)(t)).call.apply(e,[this].concat(o)))).state={display:!1},n.handleCloseByDocument=function(e){e.target.closest("div")&&"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState(function(e){return{display:!e.display}});var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,i=e.top,o=e.width,r=e.height;n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(i+(r+15),"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-Math.floor(o/2),"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return(0,iM.Z)(t,e),(0,iq.Z)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return y().createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},y().createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",y().createElement(iX.Z,{name:"triangle",className:"Pc-word-card-sign-svg"})),y().createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},y().createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),y().createElement("div",{className:"Pc-word-card-sign-popup-menu"},y().createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),y().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(Z.Component);iL.propTypes={onClose:w().func};var iD=n(45745),iF=n(15820),iH=n(68749),iU=function(e){function t(){(0,iT.Z)(this,t);for(var e,n,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];return(n=(0,iE.Z)(this,(e=(0,iQ.Z)(t)).call.apply(e,[this].concat(o)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=(0,iI.iL)(n.props).ad.clickTracks;(0,iz.Ti)(t)},n.handleClose=function(){var e=(0,iI.iL)(n.props).ad.closeTracks;(0,iz.Gf)(e).then(function(){n.setState(function(e){return{display:!e.display}}),n.props.onClose&&n.props.onClose()})},n.handleRef=function(e){n.root=e},n}return(0,iM.Z)(t,e),(0,iq.Z)(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=(0,iI.iL)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,i=e.viewTracks;(0,iz.nm)(this.root,{impressionTracks:t,viewTracks:i,debugTracks:n}),(0,iz.ai)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=(0,iI.iL)(this.props),t=e.ad,n=e.creative,i=t.expand.displayAdvertisingTag,o=n.asset,r=o.title,a=o.desc,s=o.cta,c=o.landingUrl,l=o.brandName,u=o.brandLogo,d=(0,iH.U2)(n,"protoInfo.contentType","");return y().createElement("div",{className:"Pc-word",ref:this.handleRef},y().createElement("div",{className:"Pc-word-card"},y().createElement(iO,{href:c,onClick:this.handleClick},y().createElement(iV,{data:{name:l,logo:u}})),i&&y().createElement(iL,{onClose:this.handleClose}),y().createElement(iO,{href:c,onClick:this.handleClick},y().createElement("h2",{className:"Pc-word-card-title"},r),y().createElement("div",{className:"Pc-word-card-content  "},a&&y().createElement(y().Fragment,null,y().createElement("span",null,a),y().createElement("span",{className:"Pc-word-card-content-cta  "},s))))),y().createElement(iF.Z,{url:"out_link"===d?"":c}))}}]),t}(Z.Component);function iO(e){var t=e.children,n=(0,ix.Z)(e,["children"]);return y().createElement("a",(0,iB.Z)({target:"_blank"},n),t)}function iV(e){var t=e.data,n=t.name,i=t.logo;return y().createElement("div",{className:"Pc-word-card-brand"},y().createElement("div",{className:"Pc-word-card-brand-wrapper"},y().createElement(iD.Z,{src:i,alt:"logo",className:"Pc-word-card-brand-wrapper-img"}),y().createElement("span",null,n)))}function iW(e){var t=(0,iR.PO)(e.data);return t&&t.adjson?y().createElement(iP.Z,null,y().createElement(iU,(0,iB.Z)({},e,t))):null}iU.propTypes={data:w().object.isRequired,onClose:w().func};var iG=n(74351),ij=n(39288),iK={isDrained:!1,isFetching:!1,ids:[]};function iY(e,t){var n=t.id,i=t.resource;if("notificationAnswers"===i)return e.question[i][n]||iK;var o=e.question[i][n]||iK,r=o.ids,a=(0,eB._)(o,["ids"]);return(0,d._)({ids:r.filter(function(e){return"answer"===e.targetType}).map(function(e){return e.target})},a)}var i$=function(e){var t=e.item,n=(0,eB._)(e,["item"]);return(0,i.tZ)(iS.Z,{children:(0,i.tZ)(S.eV,{moduleId:"question_page_answer_area",moduleIndex:n.dataZaIndex,extra:{attachedInfoBytes:t.attachedInfo},children:(0,i.tZ)(ic.Z,(0,d._)({editable:!0,expanded:!eS.Z.isMobileEntry,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n))})},t.id)},iJ=function(e,t,n){var i=t.relationship,o=i.canCollapseAnswers,r=i.canStickAnswers,a=t.hasPublishingDraft,s=e.map(function(e,t){return i$({item:e,canCollapse:o,canStick:r,hasPublishingDraft:a,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})});return n?s:(0,ek.h)(2,s)},i0=function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return e&&!e.isDelete})},i1=(0,iG.isBrowser)()?iN()(i0,function(e,t){return"".concat(e.join(","),"-").concat(t.length)}):i0,i2=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,i=e.isDrained,o=e.items;n!==t&&!i&&o.length<2&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems,i=e.answerId;return n(t,"answers",{limit:3,entitiesPrefilter:function(e){var t,n,o=null===(t=e.answers)||void 0===t?void 0:t[i];return o&&(delete o.content,null===(n=o.author)||void 0===n||delete n.avatarUrl),e}})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,o=e.isWechat;return n.length?(0,i.tZ)(is.ZP,{className:!eS.Z.isMobileEntry&&"MoreAnswers",children:(0,i.tZ)(ik.ZP,{title:"更多回答","data-zop-feedlist":!0,children:n.map(function(e){return(0,i.tZ)(iS.Z,{children:(0,i.tZ)(ic.Z,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!o})},e.id)})})}):null}}]),n}(Z.Component),i3=(0,b.connect)(function(e,t){var n=t.question.id,i=t.answerId,o=e.entities.answers,r=iY(e,{id:n,resource:"answers"});return{isDrained:r.isDrained,items:r.ids.filter(function(e){return e!==Number(i)}).slice(0,2).map(function(e){return o[e]}),isWechat:e.env.userAgent.Wechat}},{loadItems:E.XD})(i2),i5=n(65696),i4=n(34837),i7=n(57831),i6=n(29431),i8=n(80828),i9=n(21932),oe=n(94226),ot=n(13901),on=n(6438),oi=n(73739),oo=n(97345),or=n(28814),oa=function(e,t){var n=t.urlToken||t.id,i=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:i.isDrained,isFetching:i.isFetching,items:i.ids.map(function(t){var n=(0,or.np)(e,{id:t});return n.code?null:n}).filter(Boolean)}},os=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?(0,i.BX)("div",{className:"AnswerAuthor-item",children:[(0,i.tZ)("span",{className:"AnswerAuthor-item-icon",children:(0,i.tZ)(oi.l,{text:!0,center:!0})}),(0,i.tZ)("div",{className:"AnswerAuthor-item-value",children:(0,i.BX)(oo.CJKSpace,{children:[t.slice(0,3).map(function(e,t){return(0,i.BX)("span",{children:[0!==t&&"、",(0,i.tZ)(e6.Z,{user:e,noBadge:!0,noHoverCard:!0,children:e.name})]},e.urlToken)}),"也关注了",tX.K_[n.gender]]})})]}):null}}]),n}(Z.Component);(0,l._)(os,"propTypes",{author:w().object.isRequired});var oc=(0,k.compose)((0,b.connect)(function(e,t){var n=t.author;return(0,d._)({currentUser:(0,F.ib)(e)},n&&oa(e,{urlToken:n.urlToken}))},{loadItems:on.XD}),(0,t_.Z)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}}))(os),ol=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,i=e.isDrained;t&&(i||n(t))}},{key:"render",value:function(){var e,t=this.props,n=t.user,o=t.isSelf;if(!n)return null;var r=n.urlToken,a=n.isOrg,s=n.headline,c=n.badge,l=n.badgeV2,u=n.answerCount,d=n.articlesCount,h=n.followerCount,p=(0,e_.a)(l,c),m=p.identity,f=p.bestAnswerer,v=p.baike,g=a?"org":"people";return(0,i.BX)(is.ZP,{className:"AnswerAuthor",role:"complementary","aria-label":"关于作者",children:[(0,i.tZ)(is.h4,{className:"AnswerAuthor-title",children:"关于作者"}),(0,i.tZ)(is.$0,{children:(0,i.BX)("div",{className:"AnswerAuthor-user",children:[(0,i.tZ)("div",{className:"AnswerAuthor-user-avatar",children:(0,i.tZ)(oe.Z,{user:n,avatarProps:{size:60},noHoverCard:!0})}),(0,i.BX)("div",{className:"AnswerAuthor-user-content",children:[(0,i.tZ)("div",{className:"AnswerAuthor-user-name",children:(0,i.tZ)(i9.Z,{user:n,noBadge:!0,noHoverCard:!0})}),s&&(0,i.tZ)("div",{className:"AnswerAuthor-user-headline",children:(0,i.tZ)(nl.Z,{html:s})})]})]})}),(0,i.BX)(is.$0,{children:[m&&(0,i.BX)("div",{className:"AnswerAuthor-item",children:[(0,i.tZ)("a",{className:"AnswerAuthor-item-icon",href:"https://zhuanlan.zhihu.com/p/96956163",target:"_blank",rel:"noreferrer",children:(0,i.tZ)(ey.Kr,{center:!0,size:19})}),(0,i.tZ)("div",{className:"AnswerAuthor-item-value",children:m.slice(0,2).map(function(e){return e.description}).join("，")})]}),!!(null==f?void 0:null===(e=f.topics)||void 0===e?void 0:e.length)&&(0,i.BX)("div",{className:"AnswerAuthor-item",children:[(0,i.tZ)("span",{className:"AnswerAuthor-item-icon",children:(0,i.tZ)(ey.Rs,{center:!0,size:19})}),(0,i.BX)("div",{children:[(0,i.tZ)(i8.Z,{topics:f.topics,user:n,noHoverCard:!0}),"的优秀答主"]})]}),!!v&&(0,i.BX)("div",{className:"AnswerAuthor-item",children:[(0,i.tZ)("span",{className:"AnswerAuthor-item-icon",children:(0,i.tZ)(ey.Vs,{center:!0,size:19})}),(0,i.tZ)("div",{children:v.description})]}),n&&!o&&(0,i.tZ)(oc,{author:n})]}),r&&(0,i.BX)(is.$0,{children:[(0,i.tZ)("div",{className:"AnswerAuthor-counts",children:(0,i.BX)(ty.Z,{children:[(0,i.tZ)(ty.Z.Item,{tag:eF.Z,preset:"plain",to:"/".concat(g,"/").concat(r,"/answers"),name:"回答",value:u,"data-za-detail-view-element_name":"Answer"}),(0,i.tZ)(ty.Z.Item,{tag:eF.Z,preset:"plain",to:"/".concat(g,"/").concat(r,"/posts"),name:"文章",value:d,"data-za-detail-view-element_name":"Post"}),(0,i.tZ)(ty.Z.Item,{tag:eF.Z,preset:"plain",to:"/".concat(g,"/").concat(r,"/followers"),name:"关注者",value:h,"data-za-detail-view-element_name":"Follower"})]})}),!o&&(0,i.tZ)(ot.Z,{className:"AnswerAuthor-buttons",user:n})]})]})}}]),n}(Z.Component),ou=(0,b.connect)(function(e,t){var n=t.answer,i=n.author,o=n.author.urlToken,r=e.entities.users,a=o?r[o]:i;return{currentUser:(0,F.ib)(e),isDrained:a&&void 0!==a.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==a.badge,user:a,isSelf:(0,F.pG)(e,a)}},{loadProfile:on.hr})(ol),od=n(99178),oh=n(67992),op=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"load",function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerCopyrightApplicants)(n)}),e}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,o=e.isFetching,r=e.isDrained;return(0,i.BX)("div",{className:"AnswerCopyrightApplicants",children:[(0,i.tZ)("div",{className:"AnswerCopyrightApplicants-header",children:(0,i.BX)("div",{className:"AnswerCopyrightApplicants-title",children:["授权转载 ",(0,eT.uf)(n)," 次"]})}),!(r&&!t.length)&&(0,i.tZ)(od.ZP,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:o,isDrained:r,onLoad:this.load,getContainer:function(e){return e},placeholder:(0,i.tZ)(od.i,{className:"AnswerCopyrightApplicants-item",small:!0}),children:t.map(function(e){var t=e.applier,n=e.accountType,o=e.accountUsername,r=e.createdAt;return(0,i.tZ)("div",{className:"AnswerCopyrightApplicants-item",children:(0,i.tZ)(oh.Z,{user:t,meta:"".concat(n," ").concat(o),status:null,action:(0,i.BX)("div",{className:"AnswerCopyrightApplicants-time",children:["申请于 ",(0,N.tC)(r)]})})},"".concat(t.name,".").concat(r))})})]})}}]),n}(Z.Component),om=(0,b.connect)(function(e,t){var n=t.answer.id,i=e.entities.copyrightApplicants,o=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:o.ids.map(function(e){return i[e]}),count:o.totals,isFetching:o.isFetching,isDrained:o.isDrained}},{loadAnswerCopyrightApplicants:D.RW})(op),of=n(30361),ov=n(46102),og=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"load",function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerFavlists)(n)}),e}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,o=e.isFetching,r=e.isDrained;return(0,i.BX)("div",{className:"AnswerFavlists",children:[(0,i.tZ)("div",{className:"AnswerFavlists-header",children:(0,i.BX)("div",{className:"AnswerFavlists-title",children:["被收藏 ",(0,eT.uf)(n)," 次"]})}),!(r&&!t.length)&&(0,i.tZ)(od.ZP,{className:"AnswerFavlists-list",isLocal:!0,isLoading:o,isDrained:r,onLoad:this.load,getContainer:function(e){return e},placeholder:(0,i.tZ)(od.i,{className:"AnswerFavlists-item",small:!0}),children:t.map(function(e){var t=e.id,n=e.type,o=e.creator,r=e.isFollowing,a=e.answerCount,s=e.followerCount;return(0,i.tZ)(ik.HC,{children:(0,i.tZ)(ov.Z,{favlist:e,action:(0,i.tZ)(ts.Z,{preset:"primary",id:t,type:n,isFollowing:r}),status:(0,i.BX)(of.qb,{children:[(0,i.BX)("span",{children:["由"," ",(0,i.tZ)(e6.Z,{user:o,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"]}),(0,i.BX)("span",{children:[(0,eT.uf)(a)," 条内容"]}),(0,i.BX)("span",{children:[(0,eT.uf)(s)," 人关注"]})]})})},t)})})]})}}]),n}(Z.Component),ow=(0,k.compose)((0,b.connect)(function(e,t){var n=t.answer.id,i=e.entities.favlists,o=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:o.ids.map(function(e){return i[e]}),count:o.totals,isFetching:o.isFetching,isDrained:o.isDrained}},{loadAnswerFavlists:D.Hs}),(0,A.a)({module:"CollectionList"}))(og),oZ=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,o=e.accountUsername,r=e.createdAt;return(0,i.BX)("div",{className:"AnswerInfo-copyright-applicant",children:[(0,i.tZ)(e6.Z,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",o]},"".concat(t.name,".").concat(r))}}]),n}(Z.Component),oy=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return(0,i.tZ)(is.$0,{className:"AnswerInfo-copyright-applicants",children:e.map(function(e,t){return(0,i.tZ)(oZ,{copyrightApplicant:e},t)})},"content")}}]),n}(Z.Component),o_=(0,A.a)(function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}})(function(e){var t=e.favlist,n=t.id,o=t.title,r=t.followerCount,a=t.creator;return(0,i.BX)("div",{className:"AnswerInfo-favlist",children:[(0,i.BX)("div",{className:"AnswerInfo-favlist-title",children:[(0,i.tZ)(eF.Z,{preset:"plain",a:!0,to:"/collection/".concat(n),target:"_blank","data-za-detail-view-element_name":"Collection",title:o,children:o}),(0,i.BX)("div",{className:"AnswerInfo-favlist-followers","data-tooltip":"".concat((0,eT.ok)(r)," 人关注"),children:[(0,eT.Zh)(r),"人关注"]})]}),(0,i.BX)("div",{className:"AnswerInfo-favlist-author",children:[(0,i.tZ)(e6.Z,{user:a,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"]})]},n)}),ob=(0,A.a)({module:"CollectionList"})(function(e){var t=e.favlists;return(0,i.tZ)(is.$0,{className:"AnswerInfo-favlists",css:{padding:"4px 20px",margin:"0"},children:t.map(function(e){return(0,i.tZ)(o_,{favlist:e},e.id)})},"Favlists")}),oC=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{copyrightApplicantsModalShown:!1,favlistsModalShown:!1}),(0,l._)((0,r._)(e),"handleCopyrightApplicantsModalShow",function(){ed.Z.trackEvent((0,r._)(e),{action:"Click",element:"Button",name:"转载授权"}),e.setState({copyrightApplicantsModalShown:!0})}),(0,l._)((0,r._)(e),"handleCopyrightApplicantsModalHide",function(){e.setState({copyrightApplicantsModalShown:!1})}),(0,l._)((0,r._)(e),"handleFavlistsModalShow",function(){ed.Z.trackEvent((0,r._)(e),{action:"Click",element:"Button",name:"被收藏"}),e.setState({favlistsModalShown:!0})}),(0,l._)((0,r._)(e),"handleFavlistsModalClose",function(){e.setState({favlistsModalShown:!1})}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,i=e.favlists,o=e.loadAnswerCopyrightApplicants,r=e.loadAnswerFavlists;n.length||i.length||(o(t),r(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,o=e.copyrightApplicantCount,r=e.favlists,a=e.favlistCount,s=this.state,c=s.favlistsModalShown,l=s.copyrightApplicantsModalShown;return n.length||r.length?(0,i.BX)(is.ZP,{role:"complementary","aria-label":"更多回答信息",children:[!!n.length&&[(0,i.BX)(is.h4,{className:"AnswerInfo-title",children:["授权转载"," ",(0,i.tZ)(em.ZP,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow,children:(0,eT.uf)(o)})," ","次"]},"header"),(0,i.tZ)(oy,{copyrightApplicants:n.slice(0,5)},"content")],!!r.length&&[(0,i.BX)(is.h4,{className:"AnswerInfo-title",children:["被收藏"," ",(0,i.tZ)(em.ZP,{preset:"plain",onClick:this.handleFavlistsModalShow,children:(0,eT.uf)(a)})," ","次"]},"header"),(0,i.tZ)(ob,{favlists:r.slice(0,5)},"content")],(0,i.tZ)(tZ.Z,{size:"fullPage",onClose:this.handleFavlistsModalClose,children:c&&(0,i.tZ)(ow,{answer:t})}),(0,i.tZ)(tZ.Z,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide,children:l&&(0,i.tZ)(om,{answer:t})})]}):null}}]),n}(Z.Component),ok=(0,b.connect)(function(e,t){var n=t.answer.id,i=e.entities,o=i.copyrightApplicants,r=i.favlists,a=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},s=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:a.ids.map(function(e){return o[e]}),copyrightApplicantCount:a.totals,favlists:s.ids.map(function(e){return r[e]}),favlistCount:s.totals}},{loadAnswerCopyrightApplicants:D.RW,loadAnswerFavlists:D.Hs})(oC),oS=n(45732),oA=n(59189),oN=n(17013),oB={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},ox=function(e){var t=e.src,n=e.style;return(0,i.tZ)("div",{className:"AdvancedViewer-imgField",style:(0,d._)({},n,t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{})})};function oT(e){var t=e.isMobileView,o=e.advancedStyle,r=void 0===o?{}:o,a=r.cardType,s=r.url,c=r.material,l=e.handleViewTrack,u=e.handleClickTrack;if(!(null==c?void 0:c.length))return null;var h=function(e){return"function"==typeof u?{onClick:function(){u(e)}}:{}},p=function(e,t){return(0,i.BX)("a",(0,eN._)((0,d._)({className:"AdvancedViewer-commodityItem",target:"_blank",rel:"noopener noreferrer",href:s},h({etu:s,pi:t+1})),{children:[(0,i.tZ)("img",{src:e.image,alt:""}),e.mainTitle&&(0,i.BX)("div",{className:"AdvancedViewer-commodityIntro",children:[(0,i.tZ)("span",{className:"AdvancedViewer-mainTitle",children:e.mainTitle}),(0,i.tZ)("span",{className:"AdvancedViewer-subTitle",children:e.subTitle})]})]}),"AdvancedViewer-commodity-".concat(t))};if("image"===a)return(0,i.tZ)("a",(0,eN._)((0,d._)({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",rel:"noopener noreferrer",href:s},h({etu:s})),{children:(0,i.tZ)(ox,{src:c[0].image,style:t?{width:eS.Z.isMobileEntry?n.g.innerWidth:375,height:(eS.Z.isMobileEntry?n.g.innerWidth:375)/12*5}:{}})}));if("image_text"===a)return(0,i.BX)("a",(0,eN._)((0,d._)({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",rel:"noopener noreferrer",href:s},h({etu:s})),{children:[t&&(0,i.tZ)("div",{className:"AdvancedViewer-intro",children:c[0].intro}),(0,i.tZ)(ox,{src:c[0].image}),!t&&(0,i.tZ)("div",{className:"AdvancedViewer-intro",children:c[0].intro})]}));if("commodity"===a)return c.length&&(0,i.tZ)("div",{className:"AdvancedViewer-material AdvancedViewer-commodity",children:t?c.map(p):(0,i.tZ)(oN.Z,{items:c,renderItem:p})});if("recommended"===a){var m=function(e,t){return(0,i.BX)("a",(0,eN._)((0,d._)({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank",rel:"noopener noreferrer"},h({etu:e.url,pi:t+1})),{children:[(0,i.BX)("div",{className:"AdvancedViewer-summary",children:[(0,i.BX)("div",{className:"AdvancedViewer-wrap",children:[(0,i.tZ)("div",{className:"AdvancedViewer-title",children:e.title}),e.intro&&(0,i.tZ)("div",{className:"AdvancedViewer-desc",children:e.intro.replace(/<[\s\S]*?>/g,"")})]}),(0,i.BX)("span",{className:"AdvancedViewer-data",children:[oB[e.type]," \xb7 ",e.statisticText]})]}),(0,i.tZ)(ox,{src:e.image||tX.tU})]}))};return(0,i.tZ)("div",{className:"AdvancedViewer-material AdvancedViewer-recommended",children:c.map(function(e,t){var n;return l?(0,i.tZ)(oA.Z,(0,eN._)((0,d._)({},(n={pi:t+1},"function"==typeof l?{onChange:function(e,t){e.isIntersecting&&(t.disconnect(),l(n))}}:{})),{children:m(e,t)}),t):m(e,t)})})}return null}function oq(e){var t=e.isMobileView,n=e.brand,o=n.name,r=n.logo,a=e.advancedStyle,s=void 0===a?{}:a,c=s.brandRecommendText,l=s.buttonText,u=s.url,h=s.cardType,p=e.handleViewTrack,m=e.handleClickTrack,f=function(e){return"function"==typeof m?{onClick:function(){m(e)}}:{}},v=o&&o.charCodeAt(o.length-1),g=t&&"recommended"!==h,w=c||"".concat(v>=0&&v<=128?"".concat(o," "):o,"的品牌推荐"),Z=(0,i.BX)(is.ZP,{className:el()("AdvancedViewer",{"is-mobile":t}),children:[!g&&(0,i.tZ)(is.h4,{className:"AdvancedViewer-header",children:(0,i.tZ)("span",{className:"AdvancedViewer-headerText",children:w})}),(0,i.tZ)("div",{className:"AdvancedViewer-content",children:(0,i.tZ)(oT,(0,d._)({},e))}),!t&&h&&"recommended"!==h&&(0,i.tZ)("div",{className:"AdvancedViewer-footer",children:(0,i.tZ)(eF.Z,(0,eN._)((0,d._)({className:"AdvancedViewer-button",target:"_blank",to:u},f({etu:u})),{children:l||"了解更多"}))}),g&&(0,i.BX)("div",{className:"AdvancedViewer-footer",children:[(0,i.BX)("div",{className:"AdvancedViewer-brand",children:[(0,i.tZ)("img",{className:"AdvancedViewer-logo",src:r,alt:""}),(0,i.tZ)("span",{className:"AdvancedViewer-brandName",children:w})]}),(0,i.tZ)(eF.Z,(0,eN._)((0,d._)({className:"AdvancedViewer-button",target:"_blank",to:u},f({etu:u})),{children:l||"查看详情"}))]})]});return p?(0,i.tZ)(oA.Z,(0,eN._)((0,d._)({},"function"==typeof p?{onViewed:function(){p(void 0)}}:{}),{children:Z})):Z}var oE=function(e){(0,u._)(o,e);var t=(0,p._)(o);function o(){var e;return(0,s._)(this,o),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"getTrackUrls",function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.props,r=o.pageType,a=o.advancedStyle,s=a.viewTracks,c=a.clickTracks,l=Object.assign({},{eru:encodeURIComponent(n.g.location.href),ct:1,pt:"question"===r?1:2,rt:eS.Z.isMobileEntry?2:1},i),u=Object.keys(l).map(function(e){return"&".concat(e,"=").concat(l[e])}).join("");return("view"===t?s:c).map(function(e){return"".concat(e).concat(u)})}),(0,l._)((0,r._)(e),"handleViewTrack",function(t){e.getTrackUrls("view",t).forEach(oS.WY)}),(0,l._)((0,r._)(e),"handleClickTrack",function(t){e.getTrackUrls("click",t).forEach(oS.WY)}),e}return(0,c._)(o,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(void 0===t?{}:t).cardType,i=this.props,o=i.advancedStyle,r=(void 0===o?{}:o).cardType,a=i.onLoad;!n&&r&&"function"==typeof a&&a()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?(0,i.tZ)(oq,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:eS.Z.isMobileEntry}):null}}]),o}(Z.Component),oQ=(0,b.connect)(function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}},{loadBrandQuestionAdvancedStyle:E.wU})(oE),oM=(0,k.compose)(o.withRouter,(0,Q.Z)(null))(function(e){var t=e.params,n=(0,b.useSelector)(function(e){return(0,E.mG)(e,{id:t.id})}),o=(0,b.useSelector)(function(e){return(0,E.kR)(e,t.id)}),r=(0,b.useDispatch)();return((0,Z.useEffect)(function(){void 0===o&&r((0,E.RE)(t.id))},[t.id]),(null==n?void 0:n.title)&&(!n.vote||n.vote.disable))?(0,i.tZ)(is.ZP,{css:{marginBottom:"10px"},children:(0,i.tZ)(n2,{data:n})}):null}),oP=(0,k.compose)((0,Q.Z)(null),eW.Z,(0,b.connect)(null,{getReadingMembership:E.MY}))(function(e){var t=e.getReadingMembership,n=e.isLogin,o=(0,h._)((0,Z.useState)(!1),2),r=o[0],a=o[1],s=(0,h._)((0,Z.useState)(!1),2),c=s[0],l=s[1];(0,Z.useEffect)(function(){n&&t().then(function(e){l(e.payload.isHaveRight)}).catch(function(){})},[t,n]);var u=function(){a(!r)};return c&&(0,i.BX)(i.HY,{children:[(0,i.BX)(is.ZP,{className:"ReadingMembership",onClick:u,children:[(0,i.BX)("div",{className:"ReadingMembership-banner",children:[(0,i.tZ)("div",{children:"领取读书会会员体验卡"}),(0,i.BX)("div",{children:["海量电子书免费读 ",(0,i.tZ)(nA.N,{size:22})]})]}),(0,i.tZ)("img",{src:"https://pic3.zhimg.com/80/v2-ba02e89d92407e3e2491a27af5ace660_hd.jpeg",alt:""})]}),(0,i.tZ)(tZ.Z,{className:"ReadingMembership-modal",onClose:u,children:r&&(0,i.BX)("div",{className:"ReadingMembership-content",children:[(0,i.tZ)("img",{src:"https://pic2.zhimg.com/80/v2-8f8b9ff43e407c160bfc2d6352c662b6_hd.jpeg",alt:""}),(0,i.BX)("div",{className:"ReadingMembership-title",children:[(0,i.tZ)("div",{children:"登录知乎 App 领取"}),(0,i.tZ)("div",{children:"读书会会员 7 天体验卡"})]}),(0,i.BX)("div",{className:"ReadingMembership-qrcode",children:[(0,i.tZ)("div",{children:"知乎读书会会员，海量电子书免费读"}),(0,i.tZ)("img",{src:"https://pic2.zhimg.com/80/v2-e3a03af184c11dc3526218de74977fd5_hd.png",alt:"知乎二维码"}),(0,i.tZ)("div",{children:"扫码下载知乎 App"})]})]})})]})}),oI=n(5537),oR=n(74135),oz=n(45071),oX=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{hideDescription:!1}),(0,l._)((0,r._)(e),"handleRef",function(t){e.title=t}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,o=e.description,r=e.meta,a=e.imageUrl,s=this.state.hideDescription;return(0,i.BX)(eF.Z,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank",children:[(0,i.tZ)("img",{className:"RelatedCommodities-image",src:(0,ex.imgUrl)(a,{quality:90,size:"250x0"}),alt:"live"}),(0,i.BX)("div",{className:"RelatedCommodities-content",children:[(0,i.tZ)("div",{className:el()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":s}),style:eS.Z.isMobileEntry?{fontSize:16}:{},ref:this.handleRef,"data-tooltip":n,children:n}),s||(0,i.tZ)("div",{className:"RelatedCommodities-description",children:o}),(0,i.tZ)("div",{className:"RelatedCommodities-meta",children:r})]})]})}}]),n}(Z.Component),oL=function(){return""},oD=function(e){return e>=0?"前":"后开始"},oF=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"handleListen",function(e){var t="".concat(e.target.closest("a").href,"?extra_auto_play=1");e.preventDefault(),e.stopPropagation(),ed.Z.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")}),e}return(0,c._)(n,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,o=e.reviewScore,r=e.seats,a=e.startsAt,s=e.speaker.member,c=s.name,l=s.avatarUrl;return(0,i.tZ)(oX,{link:"/lives/".concat(t),imageUrl:l,title:n,description:c,meta:(0,i.BX)("div",{className:"RelatedCommodities-scoreWrapper",children:[(0,i.tZ)(oz.Z,{score:o}),!!(r&&r.taken)&&"".concat(r.taken," 人参与"),eS.Z.isMobileEntry&&new Date<1e3*a&&(0,i.tZ)("span",{className:"RelatedCommodities-time",children:(0,N.rL)(a,{getPrefix:oL,getSuffix:oD})})]})});case"remix_album":case"podcast":case"remix":var u=e.id,d=e.artwork,h=e.title,p=e.author,m=(void 0===p?{}:p).user,f=e.trackCount;return(0,i.tZ)(oX,{link:"/remix/albums/".concat(u),imageUrl:d,title:h,description:m&&m.name,meta:(0,i.BX)("div",{className:"RelatedCommodities-remixMeta",children:[(0,i.BX)("div",{children:["共 ",(0,eT.uf)(f)," 节课"]}),(0,i.tZ)(em.ZP,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain",children:"试听"})]})});case"special":var v=e.id,g=e.subject,w=e.liveCount,Z=e.liveMemberCount,y=e.speakers,_=e.artworkMobile,b=y.slice(0,2).map(function(e){return e.member.name}).join("、");return(0,i.tZ)(oX,{link:"/lives/specials/".concat(v),imageUrl:_,title:g,description:"".concat(b).concat(y.length>=2?" 等":""),meta:"".concat((0,eT.uf)(w)," 场 Live, ").concat((0,eT.uf)(Z)," 次参与")});case"book":var C=e.id,k=e.title,S=e.cover,A=e.authorName,B=e.readCount;return(0,i.tZ)(oX,{link:"/pub/book/".concat(C),imageUrl:S,title:k,description:A,meta:(0,i.BX)("div",{className:"RelatedCommodities-bookMeta",children:["".concat((0,eT.uf)(B)," 人读过"),(0,i.BX)("span",{className:"RelatedCommodities-bookRead",children:[(0,i.tZ)(oI.t,{width:13,height:14,center:!0}),"阅读"]})]})});default:return null}}}]),n}(Z.Component),oH=(0,A.a)(function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var i="special"===t.type?"LiveAlbum":(0,oR.pascalize)(t.type);return{module:"".concat(i,"Item"),index:n,content:(0,d._)({type:i,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}})(oF),oU="相关推荐",oO=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,i=t.loadRelatedCommodities,o=e.question.id;n!==o&&i(o)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?(0,i.BX)(is.ZP,{children:[(0,i.tZ)(is.h4,{className:"RelatedCommodities-title",children:oU}),(0,i.tZ)(is.$0,{className:"RelatedCommodities-list",children:e.slice(0,3).map(function(e){return(0,i.tZ)(oH,{item:e},e.id)})})]}):null}}]),n}(Z.Component),oV=(0,k.compose)((0,b.connect)(function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}},{loadRelatedCommodities:E.zR}),(0,A.a)(function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:oU}}))(oO),oW=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,o=e.answerCount,r=e.followerCount,a="/question/".concat(t);return(0,i.BX)("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0,children:[(0,i.tZ)("meta",{itemProp:"name",content:n}),(0,i.tZ)("meta",{itemProp:"url",content:"https://www.zhihu.com".concat(a)}),(0,i.tZ)("meta",{itemProp:"answerCount",content:o}),(0,i.tZ)("meta",{itemProp:"zhihu:followerCount",content:r}),(0,i.tZ)(eF.Z,{preset:"plain",to:a,target:"_blank",children:n})," ",(0,eT.uf)(o)," 个回答"]})}}]),n}(Z.Component),oG=(0,A.a)(function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}})(oW),oj=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadSimilarQuestions)(t,n&&n.id)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,i=t.loadSimilarQuestions,o=e.question.id;n!==o&&i(o)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?(0,i.BX)(is.ZP,{css:{borderRadius:"0 0 2px 2px"},role:"complementary","aria-label":"相关问题",children:[(0,i.tZ)(is.h4,{className:"SimilarQuestions-title",children:"相关问题"}),(0,i.tZ)(is.$0,{className:"SimilarQuestions-list",children:e.map(function(e){return(0,i.tZ)(oG,{question:e},e.id)})})]}):null}}]),n}(Z.Component),oK=(0,k.compose)((0,b.connect)(function(e,t){return{items:e.question.similarQuestions[t.question.id]}},{loadSimilarQuestions:E.Bi}),(0,A.a)({module:"RelatedQuestions"}))(oj),oY=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,o=n.id,r=n.questionType,a=e.answer,s=(0,D.G_)(a)||(0,D.eP)(a);return(0,i.tZ)(i6.Z,{className:"Question-sideColumn Question-sideColumn--sticky",children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(i4.Z,{type:"question"}),s||"normal"===r&&437329650!==o&&(0,i.tZ)("div",{className:"Question-sideColumnAdContainer",children:(0,i.tZ)(i5.C,{isMobile:eS.Z.isMobileEntry,id:"question/".concat(o,"/answer/").concat(a.id),location:"new_answer_up",query:{question_token:o,answer_token:a.id}})}),"commercial"===r&&(0,i.tZ)(oQ,{questionId:o}),a.author&&(0,i.tZ)(ou,{answer:a}),(0,i.tZ)(oM,{}),(0,i.tZ)(ok,{answer:a}),(0,i.tZ)(oP,{}),(0,i.tZ)(ta,{id:o,question:t,position:"right"}),s||"normal"===r&&(0,i.tZ)(oK,{answer:a,question:t}),s||"normal"===r&&(0,i.tZ)(oV,{answer:a,question:t}),s||"normal"===r&&437329650!==o&&(0,i.tZ)("div",{children:(0,i.tZ)(i5.C,{isMobile:eS.Z.isMobileEntry,id:"question/".concat(o,"/answer/").concat(a.id),location:"new_answer_down_sticky",query:{question_token:o,answer_token:a.id},delay:1e3})}),(0,i.tZ)(i7.Z,{})]})})}}]),n}(Z.Component),o$=(0,k.compose)((0,Q.Z)(null),(0,A.a)(function(e){var t=e.answer;return{module:"RightSideBar",content:(0,d._)({},t.author&&{member_hash_id:t.author.id})}}))(oY),oJ=n(83322),o0=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e,t=this.props,n=t.to,o=t.itemNum,r=t.questionType,a=t.bottom,s=t.brand;return(0,i.tZ)(is.ZP,{className:el()("ViewAll",{"ViewAll--bottom":eS.Z.isMobileEntry&&a}),children:(0,i.tZ)(oJ.Z,{className:"ViewAll-QuestionMainAction",to:n,"data-za-detail-view-element_name":"ViewAll",style:eS.Z.isMobileEntry?{color:"#175199"}:{},children:"commercial"===r&&(null==s?void 0:s.showAllDescription)?(e=(0,eT.uf)(o),s.showAllDescription.replace("{count}"," ".concat(e," "))):"查看全部 ".concat((0,eT.uf)(o)," 个回答")})})}}]),n}(Z.Component),o1=(0,A.a)(function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}})(o0),o2=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,i=e.loadAnswer,o=e.currentUser,r=e.checkIfCanConvertToVessay;t||i(n),(0,ia.Z)(o,null==t?void 0:t.author)&&r(n)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,i=e.loadAnswer;n!==t&&i(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,o=e.question,r=e.question,a=r.id,s=r.answerCount,c=r.questionType,l=r.brand,u=e.location,d=e.isMuteSpecial,h=(e.currentUser||{}).userType;return!t.relationship.isAuthor&&t.visibleOnlyToAuthor?(0,i.tZ)(q,{}):(0,i.BX)("div",{className:"Question-main",children:[(0,i.tZ)(_.ql,{meta:(0,z.vO)(t,o.topics)}),(0,i.tZ)(io.gx,{selector:".ViewAll-QuestionMainAction,.QuestionAnswer-content,.List-item",children:(0,i.BX)(S.Wi,{as:"div",zaType:"Block",zaModuleId:"login_guide_card",className:"Question-mainColumn","data-zop-questionanswerlist":!0,children:[("guest"===h||!h)&&(0,i.BX)("div",{className:"Question-mainColumnLogin",children:[(0,i.tZ)("div",{className:"Question-mainColumnLoginImg",children:(0,i.tZ)(iC,{})}),(0,i.BX)("div",{className:"Question-mainColumnLoginContent",children:[(0,i.tZ)("div",{className:"Question-mainColumnLoginTitle",children:"登录后你可以"}),(0,i.BX)("div",{className:"Question-mainColumnLoginDes",children:[(0,i.BX)("span",{className:"Question-mainColumnLoginDesIcon",children:[(0,i.tZ)(i_,{}),"不限量看优质回答"]}),(0,i.BX)("span",{className:"Question-mainColumnLoginDesIcon",children:[(0,i.tZ)(ig,{}),"私信答主深度交流"]}),(0,i.BX)("span",{className:"Question-mainColumnLoginDesIcon",children:[(0,i.tZ)(iZ,{}),"精彩内容一键收藏"]})]})]}),(0,i.tZ)("div",{className:"Question-mainColumnLoginRightButton",children:(0,i.tZ)(O.Vy,{loginButton:(0,i.tZ)(S.$U,{as:em.ZP,zaType:"Button",zaModuleId:"login_guide_button",className:"Question-mainColumnLoginButton",children:"登录"})})})]}),(0,D.G_)(t)||(0,D.eP)(t)||s>0&&!d&&(0,i.tZ)(o1,{itemNum:s,to:"/question/".concat(a),questionType:c,brand:l}),(0,i.BX)(ir.ZP,{type:"answer",id:t.id,children:[(0,i.tZ)(ii.Z,{type:"answer",id:t.id,index:0}),(0,i.tZ)(im,{question:o,location:u,answer:t,isAnswerPage:!0})]}),(0,D.G_)(t)||(0,D.eP)(t)||(0,i.tZ)(i3,{question:o,answerId:n}),s>0&&!d&&(0,i.tZ)(o1,{itemNum:s,to:"/question/".concat(a),questionType:c,brand:l})]})}),(0,i.tZ)(ek.Z,{children:(0,i.tZ)(o$,{question:o,answer:t})})]})}}]),n}(Z.Component);(0,l._)(o2,"fetchData",function(e){e.ctx,e.http;var t=e.dispatch,n=e.params.answerId;return Promise.all([t((0,D.IS)(n)),null])});var o3=(0,k.compose)((0,L.g)({scene:L.k.answer}),(0,b.connect)(function(e,t){var n=t.params,i=n.id,o=n.answerId,r=(0,E.Md)(e,{id:i}),a=(0,D.ae)(e,{id:o}),s=(0,F.ib)(e),c=(r||{}).relationship||{myAnswer:{isDelete:!1}};return{question:r,isOffice:(0,tl.Xj)(e),answer:a&&(0,eN._)((0,d._)({},a),{isDelete:(a.relationship||{}).isAuthor&&(c.myAnswer||{}).isDeleted}),isMuteSpecial:(0,E.gW)(r),currentUser:s}},{loadAnswer:D.IS,checkIfCanConvertToVessay:D.Zq}))(o2),o5=n(7835),o4=n(59523),o7=n(42735),o6=n(92120),o8=function(e){var t=e.handleTabChange,n=e.activeTabKey,o=e.isReediting,r=e.videoAnswerPublished,a=(0,b.useSelector)(o4.ib);return(0,i.tZ)(S.eV,{block:"AnswerEditorPageHeader",children:(0,i.BX)(C.Box,{bg:"GBK99A",css:{position:"relative",width:"100%",height:"52px",backgroundClip:"content-box",boxShadow:"0px 16px 32px rgba(0, 0, 0, 0.04)",zIndex:1},children:[(0,i.BX)(C.Flex,{css:{position:"relative",width:"1000px",height:"52px",padding:"0 16px",margin:"0 auto",alignItems:"center"},children:[(0,i.tZ)(o7.Z,{}),(0,i.tZ)(C.Box,{height:"28px",width:"1px",pl:"20px",sx:{borderRight:"1px solid",borderColor:"GBK09A"}}),o?(0,i.tZ)(C.Box,{fontSize:15,fontWeight:"bold",lineHeight:"21px",color:"GBK03A",pl:"20px",children:r?"本回答为视频回答":"本回答为图文回答"}):(0,i.tZ)(o6.Z,{activeTabKey:n,onChange:t})]}),(0,i.tZ)(C.Box,{css:{position:"absolute",top:"50%",left:"50%",transform:"translate(522px, -50%)"},children:(0,i.tZ)(ev.Z,{currentUser:a})})]})})},o9=n(44990),re=n(33722),rt=n(92718),rn=n(79446),ri=n(81552),ro=n(92769),rr=n.n(ro),ra=n(79091),rs=function(e,t){window.onbeforeunload=null,window.name="",requestAnimationFrame(function(){var n=window.location.host,i=t?"//".concat(n,"/question/").concat(e,"/answer/").concat(t):"//".concat(n,"/question/").concat(e);window.location.href=i})},rc=function(e){var t,n=e.params,o=e.location,r=n.id,a=n.answerId,s=o.query,c=(0,b.useDispatch)(),l=(0,Z.useRef)(null),u=(0,b.useSelector)(function(e){return(0,E.Md)(e,{id:r})}),p=s.attach_to_article,m=(0,b.useSelector)(function(e){var t;return null===(t=e.entities.drafts)||void 0===t?void 0:t["question_".concat(r)]}),f=(0,b.useSelector)(function(e){return(0,D.ae)(e,{id:a})}),v=["zvideo","video"].includes(null==f?void 0:null===(t=f.attachment)||void 0===t?void 0:t.type),g=(0,h._)((0,Z.useState)((null==m?void 0:m.draftType)==="video_answer"?o6.Y.videoAnswer:o6.Y.textAnswer),2),w=g[0],y=g[1],k=(0,b.useSelector)(F.wY),N=(0,ng.Z)(function(){return k}),x=(0,h._)((0,Z.useState)(function(){return(0,B.ZP)("QuestionAnswerEditable",N)}),1)[0],T=!!a,q="1"===(0,rt.Z)("ws_publish_answer",{mock:"1"})&&"1"===eS.Z.apollo.content_publish_answer,Q=(0,rn.Z)(["autoSendingCreations"]),M=(0,ri.m)("QuestionAnswerEditable"),P=(0,ng.Z)(function(e){if(e!==w){var t=u.relationship.isAnonymous;if(e===o6.Y.videoAnswer){if(t){c((0,H.c0)("视频回答不支持匿名","red"));return}l.current.hasEditorContent()&&!te().get("answerContentSync")&&(c((0,H.c0)("图文回答内容已同步至视频描述")),te().set("answerContentSync",!0))}y(e)}}),R=(0,ng.Z)(function(e){if(e.publishAt){var t=q?M.scheduledPublish(r,e):c((0,D.mO)(r,e));return t.then(function(e){return rs(r),e}),t}var n=function(){return(q?M.publish(r,e):c((0,D.oe)(r,e))).then(function(e){var t=e.payload;te().set("showEditorTipModal",!0),rs(r,t.id)})};return Q.autoSendingCreations?c((0,D.xW)(r)).then(n,function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return th.Z.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(n,function(){})}):n()}),z=(0,ng.Z)(function(e){return(q?M.update(a,e):c((0,D.p3)(a,e))).then(function(e){return rs(r,a),e})});return(0,o5.Z)(function(){(0,B.hx)(),!a&&p&&(0,E._S)(r,p)}),(0,o5.Z)(function(){return window.name=(0,tp.Hf)(r),function(){window.name=""}}),(0,i.tZ)(I.ZP,{children:(0,i.BX)(S.eV,{content:{type:"Question",token:String(r)},children:[(0,i.tZ)(W.Z,{pageInfo:{pageId:"10123"}}),(0,i.tZ)(_.ql,(0,d._)({title:"写回答"},(0,re.Oo)(re.gM))),(0,i.tZ)(A.r,{module:"QuestionItem",card:{content:{type:"Question",token:String(r)}},children:(0,i.BX)(C.Box,{children:[(0,i.tZ)(o8,{isReediting:T,handleTabChange:P,activeTabKey:w,videoAnswerPublished:v}),(0,i.tZ)(B.ct.Provider,{value:x,children:(0,i.tZ)(ek.Z,{children:(0,i.tZ)(S.eV,{block:w===o6.Y.textAnswer?"TextAnswer":"VideoAnswer",children:(0,i.tZ)(o9.Z,{question:u,answer:f,defaultValue:null==f?void 0:f.editableContent,isReediting:T,activeTabKey:w,imperativeRef:l,onSubmit:T?z:R})})})})]})})]})})};rc.fetchData=function(e){var t=e.dispatch,n=e.params,i=n.id,o=n.answerId,r=e.location.query,a=r.attach_to_article;return Promise.all([o&&t((0,D.IS)(o)),t((0,E.dY)(i)).then(function(){if(!o&&a)return t((0,E._S)(i,a))}),t((0,E.fk)(i)).then(function(e){var t=e.payload,n=rr()(r,["write"]),a=t.relationship,s=a.isAuthor,c=a.myAnswer,l=t.isNormal,u=t.status,d=void 0===u?{}:u,h=d.isClose,p=d.isLocked,m=d.isSuggest,f=t.hasPublishingDraft,v=t.visibleOnlyToAuthor,g=function(e){var t=Error();throw t.status=302,t.redirect=(0,ra.D)(e,n),t};return(null==c?void 0:c.isDeleted)?g("/question/".concat(i,"?answer_deleted_redirect=true")):o?c?String(c.answerId)!==o?g("/question/".concat(i,"/answer/").concat(c.answerId,"/edit")):void 0:g("/question/".concat(i,"/write")):c?g("/question/".concat(i,"/answer/").concat(c.answerId,"/edit")):m||p||h||f||!l||!s&&v?g("/question/".concat(i)):void 0})].filter(Boolean))};var rl=n(84871),ru=n.n(rl),rd=(0,k.compose)((0,eo.$_)({dataPath:"question"}),function(e){return ru()(function(t){var n=(0,eo.qC)().blockStrategies.isBlockingAnswerNewestList,o=t.resource,r=t.question;return n&&"updatedAnswers"===o?(0,i.tZ)(il.Z,{to:"/question/".concat(r.id)}):(0,i.tZ)(e,(0,d._)({},t))},e)}),rh=n(24405),rp=n(58245),rm=n(30577),rf=n(75293),rv=n(85095),rg=n(57378),rw=n(12506),rZ=n(98813),ry=n(46148),r_=n(74296),rb=function(e){var t=e.event,n=e.status,o=t.isOnline,r=t.events;if(!o&&0===n)return null;var a=(0,rh.F)(),s=a.colors,c=s.GBL05A,l=s.GBK09A,u=s.GBK99A,h=s.GBL01A,p=a.fontWeights;return(0,i.tZ)(C.Box,{pt:"16px",css:(0,eN._)((0,d._)({},(0,rp.M)({borderTop:"1px solid ".concat(l)})),{"&::after":{content:"''",display:"block",position:"absolute",width:"2px",height:"calc(100% - 30px - 52px)",backgroundColor:c,opacity:.12,left:"24px",top:"30px"}}),children:r.map(function(e,t){var o=e.content,r=e.created,a=e.url,s=0===t;return 1===n&&t>2?null:(0,i.BX)(nZ.pl,{zaBlock:"EventItem",target:"_blank","data-za-detail-view-id":6621,href:a,pl:"40px",css:{paddingLeft:"40px",paddingRight:"16px",position:"relative",display:"block",paddingBottom:"16px","&::after":(0,d._)({content:"''",zIndex:1,display:"block",position:"absolute",left:"25px",top:"0.5em",transform:"translateX(-50%)",boxShadow:"0px 0px 0px 2px ".concat(u),borderRadius:"50%",width:"6px",height:"6px",background:c},s&&{background:h,border:"2px solid ".concat(u),boxShadow:"0 0 0 1px ".concat(h)})},children:[(0,i.tZ)(C.Text,{css:(0,d._)({color:c},s&&{color:h,fontWeight:p.bold}),children:function(e){if(!(0,rf.Z)(e))return"";var t="";return(0,rv.Z)(e)?t+="今天":(0,rg.Z)(e)?t+="昨天":t+=(0,rw.Z)(e,"yyyy/MM/dd"),0!==(0,rZ.Z)(e)?t+=" "+(0,rw.Z)(e,"HH:mm:ss"):0!==(0,ry.Z)(e)?t+=" "+(0,rw.Z)(e,"HH:mm"):0!==(0,r_.Z)(e)&&(t+=" "+(0,r_.Z)(e)+"点"),t}(1e3*r)}),(0,i.BX)(C.Flex,{flexDirection:"row",alignItems:"center",mt:"6px",color:"GBK02A",css:(0,d._)({},s&&{fontWeight:p.bold}),children:[(0,i.tZ)(C.Text,{flex:"0 1 auto",css:(0,nS.S)(1),children:o}),(0,i.tZ)(nA.N,{text:!0,css:{color:c,flex:"0 0 auto"}})]})]},r+a)})})},rC=function(e){var t=e.slice(0,2).map(function(e){return e.content}).join("、");return t.length<=16?t:e[0]&&e[0].content},rk=function(e){var t=e.event,n=e.status,o=e.onClick,r=t.url,a=!r,s=null,c=eL.f,l=6623;return 0===n?s="显示全部":1==n?(s=a?"展开全部进展":"查看全部进展",l=a?6623:6622,c=a?eL.f:nA.N):2==n&&(s="收起",c=er.v),(0,i.BX)(eE.pl,{zaAction:r?"OpenUrl":null,zaBlock:"ViewAll","data-za-detail-view-id":l,target:"_blank",flex:"0 0 auto",ml:"8px",color:"GBL05A",css:{display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer"},onClick:function(e){r||(e.preventDefault(),o(!1))},href:r,children:[s,(0,i.tZ)(c,{})]})},rS=function(e){var t=e.event,n=e.status,o=e.onChangeStatus,r=e.getContainer,a=t.isOnline,s=t.url,c=t.events;if(a&&c.length<=3&&!s)return null;var l=(0,Z.useRef)(),u=(0,ng.Z)(function(){0===n?o(2):1===n?o(2):2===n&&o(a?1:0),setTimeout(function(){var e;return null===(e=l.current)||void 0===e?void 0:e.check()})});return(0,i.tZ)(eh.Z,{ref:l,bottom:!0,container:r,children:(0,i.BX)(C.Flex,{flexDirection:"row",alignItems:"center",justifyContent:a||2===n?"flex-end":"flex-start",pl:"20px",pr:"13px",height:"48px",css:function(e){return(0,rp.M)({borderTop:"1px solid ".concat(e.colors.GBK09A)})},children:[!a&&2!==n&&(0,i.BX)(C.Text,{children:[rC(c),"等 ",c.length," 个事件进展"]}),(0,i.tZ)(rk,{event:t,status:n,onClick:u})]})})},rA=function(e){var t=e.match(/special\/(\d+)/);return t&&t[1]},rN=function(e){var t=e.event,n=t.isOnline,o=t.url,r=(0,Z.useRef)(null),a=(0,h._)((0,Z.useState)(function(){return o||n?1:0}),2),s=a[0],c=a[1];return(0,i.BX)("div",{ref:r,children:[(0,i.tZ)(rb,{event:t,status:s}),(0,i.tZ)(rS,{event:t,status:s,onChangeStatus:c,getContainer:function(){return r.current}})]})},rB={special_event:"事件讨论",timeline_event:"最新进展"},rx=function(e){var t,n=e.question;if(!(null===(t=n.event)||void 0===t?void 0:t.events))return null;var o=(0,rh.F)().colors,r=o.GBK09A,a=o.GBL01A,s=n.event,c=n.id,l=s.url,u=s.type,d=s.title,h=s.isOnline,p=rA(l);return(0,i.tZ)(S.eV,{block:"SpecialTimeline",content:{type:"SpecialTopic",token:p},children:(0,i.tZ)(A.r,{trackCardShow:!0,module:"Content",content:{type:"SpecialTopic",token:p,parent_token:String(c)},extra:{button:{text:h?"online":"offline"}},view:{id:6620},children:(0,i.BX)(S.Wi,{as:is.ZP,zaType:"Card",css:{fontSize:15},children:[(0,i.BX)(C.Flex,{flexDirection:"row",alignItems:"center",pl:"18px",height:"48px",css:(0,rp.M)({borderTop:"1px solid ".concat(r)}),children:[(0,i.tZ)(rm.xl,{css:{color:a},size:20}),(0,i.BX)(C.Text,{fontWeight:"bold",ml:"10px",children:[rB[u]," \xb7 ",d]})]}),(0,i.tZ)(rN,{event:s})]})})})},rT=n(46906),rq=n(82238),rE=n(14214),rQ=n(86193),rM=n(56828),rP=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){(0,s._)(this,n),i=t.apply(this,arguments),(0,l._)((0,r._)(i),"state",{topicBiosModalShown:!1,activeTabKey:(null===(o=i.props.draft)||void 0===o?void 0:o.draftType)==="video_answer"?o6.Y.videoAnswer:o6.Y.textAnswer}),(0,l._)((0,r._)(i),"answerFormRef",(0,Z.createRef)());var e,i,o,c=(0,r._)(i);return(0,l._)((0,r._)(i),"doAddAnswer",(e=(0,a._)(function(e,t){var n,i,o;return(0,m.__generator)(this,function(r){return(i=(n=c.props).answerContentPublish,o=n.addAnswer,n.hitContentPublish)?[2,i.publish(e,t)]:[2,o(e,t)]})}),function(t,n){return e.apply(this,arguments)})),(0,l._)((0,r._)(i),"handleSubmit",function(e){var t=(0,r._)(i).doAddAnswer,n=i.props,o=n.currentUser,a=n.question.id,s=n.scheduledPublish,c=n.validateScheduledPublish,l=n.loadDraft,u=n.answerContentPublish,d=n.hitContentPublish;if(e.publishAt){var h=d?u.scheduledPublish(a,e):s(a,e);return h.then(function(){i.context.endAddAnswer(),l(a)}),h}var p=function(){return t(a,e)};return o.autoSendingCreations?c(a).then(p,function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return th.Z.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(p,function(){})}):p()}),(0,l._)((0,r._)(i),"focus",function(){var e;null===(e=i.answerFormRef.current)||void 0===e||e.focus()}),(0,l._)((0,r._)(i),"handleToggleAnonymous",function(){var e=i.context.toggleAnonymous,t=i.props,n=t.showNotification,o=t.question.relationship.isAnonymous,r=t.isOffice;if(!o&&i.answerFormRef.current.hasVideo()){n("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red");return}if(!o&&i.answerFormRef.current.hasMCNLinkCard()){n("不能使用匿名身份推荐商品","red");return}if(!o&&i.answerFormRef.current.hasADLinkCard())return i.answerFormRef.current.hasFeeConsultCard()?n("不能使用匿名身份插入付费咨询卡片","red"):void n("不能使用匿名身份插入推荐卡片","red");if(!o&&i.answerFormRef.current.hasCommercialReport()&&r){n("已经进行商业声明的内容不能启用匿名","red");return}e()}),(0,l._)((0,r._)(i),"handleTabChange",function(e){if(e!==i.state.activeTabKey){var t,n=i.props,o=n.question.relationship.isAnonymous,r=n.showNotification;if(e===o6.Y.videoAnswer){if(o){r("视频回答不支持匿名","red");return}(null===(t=i.answerFormRef.current)||void 0===t?void 0:t.hasEditorContent())&&!te().get("answerContentSync")&&(r("图文回答内容已同步至视频描述"),te().set("answerContentSync",!0))}i.setState({activeTabKey:e})}}),i}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.getBio)(t),this.props.answering&&setTimeout(this.focus)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"render",value:function(){var e,t=this.state.activeTabKey,n=this.props.question,o=o9.Z;return(0,i.BX)("div",{className:"AnswerAdd",css:{position:"relative"},children:[(0,i.BX)(C.Flex,{justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},{background:e.colors.GBK99A}]},children:[(0,i.tZ)(o6.Z,{activeTabKey:t,onChange:this.handleTabChange}),(0,i.tZ)(rQ.Z,{handleClick:null===(e=this.answerFormRef.current)||void 0===e?void 0:e.toggleFullscreen})]}),(0,i.tZ)("div",{css:function(e){return{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:(0,i.tZ)(o,{activeTabKey:t,handleTabChange:this.handleTabChange,handleToggleAnonymous:this.handleToggleAnonymous,imperativeRef:this.answerFormRef,question:n,onSubmit:this.handleSubmit,onCancel:this.context.endAddAnswer,useMediumEditor:!0})})]})}}]),n}(Z.Component);(0,l._)(rP,"contextTypes",{toggleAnonymous:w().func.isRequired,endAddAnswer:w().func});var rI=(0,k.compose)(o.withRouter,(0,ri.w)("AnswerAdd"),(0,b.connect)(function(e,t){var n=e.question.bio,i=e.topic.bios,o=e.answers.newAnswer,r=e.entities.drafts,a=t.question.id,s=(n[a]||{result:{type:"headline"}}).result;return"topic"===s.type&&(s.bio=i[s.topic.id]||s.bio),{currentUser:(0,F.ib)(e),questionBio:s,newAnswer:o,isOffice:(0,tl.Xj)(e),draft:(void 0===r?{}:r)["question_".concat(a)]}},{showNotification:H.c0,addAnswer:D.oe,scheduledPublish:D.mO,validateScheduledPublish:D.xW,loadDraft:E.dY,getBio:E.IF}),(0,rM.O)(function(e){return{hitContentPublish:"1"===e&&"1"===eS.Z.apollo.content_publish_answer}},"ws_publish_answer",{mock:"1"}))(rP),rR=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,i=n.id,o=n.relationship.myAnswer,r=t.router,a=e.question,s=a.id,c=a.relationship.myAnswer,l=void 0===c?{}:c;i===s&&(void 0===o?{}:o).answerId!==l.answerId&&(ed.Z.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),r.push("/question/".concat(i,"/answer/").concat(l.answerId)),te().set("answer::justPublished",!0),te().set("showEditorTipModal",!0))}},{key:"render",value:function(){if(!this.props.currentUser)return null;var e=this.props,t=e.question,n=e.question,o=n.relationship.myAnswer,r=n.isNormal,a=n.status,s=void 0===a?{}:a,c=s.isClose,l=s.isLocked,u=s.isSuggest,d=n.hasPublishingDraft,h=e.answering;if(o);else if(u)return(0,i.BX)("div",{className:"QuestionAnswers-answerTip",children:["被建议修改的问题不允许添加新的回答。",(0,i.tZ)(eF.Z,{preset:"plain",to:"/question/21290061",children:"问题为什么会被建议修改？"})]});else if(l)return(0,i.BX)("div",{className:"QuestionAnswers-answerTip",children:["该问题目前已经被锁定，无法添加新答案。",(0,i.tZ)(eF.Z,{preset:"plain",to:"/question/19604313",children:"问题为什么会被锁定？"})]});else if(c)return(0,i.BX)("div",{className:"QuestionAnswers-answerTip",children:["被关闭的问题不允许添加新的回答。",(0,i.tZ)(eF.Z,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？","aria-label":"为什么部分问题会被「关闭」「建议修改」？",icon:rT.x})]});else if(d)return(0,i.tZ)(is.ZP,{className:"QuestionAnswers-answerTipCard",children:"你创建的回答正在发布中…"});else if(r)return(0,i.tZ)(rE.Z,{disabled:!1,children:(0,i.tZ)(rq.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div",children:h&&(0,i.BX)(is.ZP,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard",children:[(0,i.tZ)("a",{name:"draft"}),(0,i.tZ)(rI,{question:t,answering:h})]})})});return null}}]),n}(Z.PureComponent),rz=(0,o.withRouter)((0,eW.Z)(rR)),rX=n(36392),rL=n(30226),rD=n(45001),rF=[{text:"默认排序",value:"default"},{text:"".concat(eS.Z.isMobileEntry?"":"按","时间排序"),value:"updated"}],rH={updatedAnswers:"updated",answers:"default"},rU=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"handleResourceChange",function(t){e.props.router.push("/question/".concat(e.props.question.id).concat("default"===t?"":"/answers/".concat(t)))}),(0,l._)((0,r._)(e),"renderOptions",function(){var t=e.props,n=t.resource,o=t.blockStrategies.isBlockingAnswerNewestList;return eS.Z.isMobileEntry?null:"hiddenAnswers"===n?(0,i.tZ)("span",{children:"按时间排序"}):(0,i.tZ)(rD.Z,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:rH[n],onChange:e.handleResourceChange,css:{".Select-arrow":{width:"1.2em",height:"1.2em"}},children:rF.map(function(e){var t=e.value,n=e.text;return o&&t===rH.updatedAnswers?null:(0,i.tZ)(rD.W,{value:t,text:n},t)})})}),e}return(0,c._)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,i=t.questionType,o=e.permission.canBrandAdminEdit,r=e.loadBrandQuestionAnswerCount;"commercial"===i&&o&&r(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,o=n.id,r=n.answerCount,a=n.questionType,s=n.brand,c=void 0===s?{}:s,l=c.isPuQuestion,u=c.answerCntDescription,d=e.commonAnswerCount,h=e.hiddenAnswerCount,p=e.permission.canBrandAdminEdit;return"commercial"===a&&void 0!==l?p?(0,i.BX)("div",{className:"QuestionAnswers-navs",children:[(0,i.BX)(em.ZP,{preset:"plain",className:el()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/".concat(o)},children:[(0,eT.uf)(d)," 个回答",eS.Z.isMobileEntry?"":u]}),(0,i.BX)(em.ZP,{preset:"plain",className:el()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/".concat(o,"/answers/hidden")},children:[(0,eT.uf)(h)," 个隐藏回答"]})]}):(0,i.BX)("span",{children:[(0,eT.uf)(r)," 个回答 ",u]}):(0,i.BX)("span",{children:[(0,eT.uf)(r)," 个回答"]})}},{key:"isInUpdatedAnswers",get:function(){return"updatedAnswers"===this.props.resource}},{key:"render",value:function(){var e=this.props.children;return(0,i.tZ)(is.ZP,{className:"AnswersNavWrapper",children:(0,i.tZ)(rL.Z,{title:this.renderAnswerListHeader(),options:this.renderOptions(),children:e})})}}]),n}(Z.PureComponent),rO=(0,k.compose)(o.withRouter,eo.OW,(0,b.connect)(function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:(0,E.hh)(e)}},{loadBrandQuestionAnswerCount:E.GE}))(rU),rV=n(53582),rW=n.n(rV);function rG(e){var t=(0,Z.useRef)(!1),n=(0,b.useDispatch)(),o=e.question.id,r=e.resource,a=e.question,s=a.relationship,c=s.canCollapseAnswers,l=s.canStickAnswers,u=a.hasPublishingDraft,h=(0,b.useSelector)(function(e){return iY(e,{id:o,resource:r})}),p=h.isFetching,m=h.isDrained,f=h.ids,v=(0,b.useSelector)(function(e){return e.env.userAgent.isBot}),g=(0,b.useSelector)(E.kM),w=(0,b.useSelector)(function(e){return e.entities}).answers,y=i1(m||p?f:f.slice(0,Math.max(5,f.length-5)),w).filter(function(e){return e&&!e.isDelete});(0,Z.useEffect)(function(){m||p||!t.current||n((0,E.XD)(o,r,{offset:0,limit:5}))},[r]),(0,o5.Z)(function(){t.current=!0});var _={canCollapse:c,canStick:l,hasPublishingDraft:u},C=(0,b.useSelector)(E.Af);return(0,i.tZ)("div",{children:(0,i.tZ)(od.ZP,{isLocal:!0,isLoading:p,isDrained:m,onLoad:function(){m||p||n((0,E.XD)(o,r,{limit:5}))},placeholder:(0,i.tZ)(od.i,{className:"List-item"}),children:(0,i.tZ)(S.eV,{extra:{configMap:{answer_card_tag:"answers"===r?"default":"new"}},children:v?y.map(function(e,t){return i$((0,d._)({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},_))}):(0,ek.h)(2,rW()(C.map(function(e,t){var n,o=C[t+1],r=(o?y.slice(e,o):y.slice(e)).map(function(n,i){var o=e+i+t;return i$((0,d._)({item:n,itemProp:0===o?"acceptedAnswer":"suggestedAnswer",dataZaIndex:o},_))});return o?(0,tb._)(r).concat([(n=g[o])?(0,i.tZ)(iW,{data:n}):null]):r})))})})})}var rj=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,i=t.relationship.isAuthor,o=e.resource,r=e.router;"collapsedAnswers"!==o||i||r.push("/question/".concat(n))}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,o=e.question,r=o.questionType,a=o.answerCount;if(e.isMuteSpecial)return(0,i.tZ)(is.ZP,{className:"Answers-none",children:(0,i.BX)(rX.ZP,{children:[(0,i.tZ)(rX.b2,{}),(0,i.tZ)("div",{children:"回答暂时无法查看"})]})});if("commercial"!==r&&!a){var s=n.status||{},c=s.isClose,l=s.isLocked,u=s.isSuggest;return c||l||u?null:(0,i.tZ)(is.ZP,{className:"Answers-none",children:(0,i.BX)(rX.ZP,{children:[(0,i.tZ)(rX.b2,{}),(0,i.BX)("div",{children:["暂时还没有回答，开始",(0,i.tZ)(tv,{preset:"plain",className:"QuestionAnswers-answerLink",children:"写第一个回答"})]})]})})}return(0,i.tZ)("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1",children:(0,i.tZ)(rO,{question:n,resource:t,children:(0,i.tZ)(rG,{question:n,resource:t})})})}}]),n}(Z.PureComponent),rK=(0,k.compose)((0,A.a)({module:"ContentList"}),o.withRouter,(0,b.connect)(function(e,t){return{isMuteSpecial:(0,E.gW)(t.question)}}))(rj),rY=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=(0,eB._)(e,["className","children"]);return(0,i.tZ)("div",(0,eN._)((0,d._)({},o),{className:el()("QuestionMainDivider",t),children:(0,i.tZ)("span",{className:"QuestionMainDivider-inner",children:n})}))}}]),n}(Z.Component),r$=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{opened:!1}),(0,l._)((0,r._)(e),"handleLoad",function(){var t=e.props,n=t.question.id;return(0,t.loadItems)(n,"collapsedAnswers")}),(0,l._)((0,r._)(e),"handleOpen",function(){e.handleLoad(),e.setState({opened:!0})}),e}return(0,c._)(n,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,o=e.items,r=e.question,a=e.question,s=a.collapsedAnswerCount,c=a.questionType,l=e.currentUser,u=this.state.opened,d="org"===c,h="".concat((0,eT.uf)(s)," 个回答被").concat(d?"隐藏":"折叠"),p=(0,i.tZ)(eF.Z,{preset:"plain",to:d?"/org-intro#org-question":"/question/20120168",target:"_blank",children:"为什么？"});return u?(0,i.BX)(is.ZP,{children:[(0,i.BX)(rY,{children:[h,"（",p,"）"]}),(0,i.BX)(ik.ZP,{children:[iJ(o,r),n&&(0,i.tZ)(od.i,{className:"List-item"})]}),!t&&!n&&(0,i.tZ)(oJ.Z,{onClick:this.handleLoad,children:"更多"})]}):(0,i.BX)("div",{className:"CollapsedAnswers-bar",style:eS.Z.isMobileEntry&&!l?{margin:0}:{},children:[(0,i.tZ)(em.ZP,{preset:"plain",onClick:this.handleOpen,children:h}),"（",p,"）"]})}}]),n}(Z.Component),rJ=(0,k.compose)(eW.Z,(0,b.connect)(function(e,t){var n=iY(e,{id:t.question.id,resource:"collapsedAnswers"});return{isFetching:n.isFetching,isDrained:n.isDrained,items:i1(n.ids,e.entities.answers)}},{loadItems:E.XD}))(r$),r0=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"load",function(){var t=e.props,n=t.isFetching,i=t.id,o=t.loadNotificationAnswers;n||o(i)}),e}return(0,c._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,i=e.items,o=e.router;i.length||o.replace(location.pathname),(t||i.length)&&(0,E.o1)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,o=t.answerCount,r=e.question,a=e.items,s=e.isFetching,c=e.isDrained;return(0,i.BX)("div",{className:"QuestionAnswers-answers",children:[(0,i.tZ)(is.ZP,{children:(0,i.BX)(oJ.Z,{to:"/question/".concat(n),children:["查看全部 ",(0,eT.uf)(o)," 条回答"]})}),(0,i.BX)(is.ZP,{children:[(0,i.BX)(ik.ZP,{children:[iJ(a,r),s&&(0,i.tZ)(od.i,{className:"List-item"})]}),!c&&!s&&(0,i.tZ)(oJ.Z,{onClick:this.load,children:"更多"})]}),(0,i.tZ)(is.ZP,{children:(0,i.BX)(oJ.Z,{to:"/question/".concat(n),children:["查看全部 ",(0,eT.uf)(o)," 条回答"]})})]})}}]),n}(Z.PureComponent),r1=(0,k.compose)(o.withRouter,(0,b.connect)(function(e,t){var n=iY(e,{id:t.id,resource:"notificationAnswers"});return{isFetching:n.isFetching,isDrained:n.isDrained,items:i1(n.ids,e.entities.answers)}},{loadNotificationAnswers:E.o1}))(r0),r2=["answers","hiddenAnswers","updatedAnswers","collapsedAnswers","notificationAnswers"];function r3(e){var t=e.id,n=(0,b.useSelector)(function(e){return e.question}),i=r2.map(function(e){var i,o;return null===(i=n[e])||void 0===i?void 0:null===(o=i[t])||void 0===o?void 0:o.sessionId}).filter(Boolean),o=(0,b.useDispatch)(),r=(0,ng.Z)(function(){i&&i.forEach(function(e){o((0,E.Z3)({questionId:t,sessionId:e}))})});return(0,Z.useEffect)(function(){return window.addEventListener("beforeunload",r),function(){return window.removeEventListener("beforeunload",r)}},[r]),null}var r5=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,s._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"goToBrand",function(){var t=e.props.brand.target;t&&(location.href="/org/".concat(t.urlToken))}),e}return(0,c._)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,i=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&i(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,o=t.name,r=t.target,a=t.isPuQuestion,s=t.aboutDescription,c=e.brandMember,l=e.currentUser;return eS.Z.isMobileEntry&&a?null:(0,i.BX)(is.ZP,{className:el()({MobileBrandQuestionAuthor:eS.Z.isMobileEntry}),children:[(0,i.tZ)(is.h4,{className:"BrandQuestionAuthor-header",children:(0,i.tZ)("span",{className:"BrandQuestionAuthor-headerText",children:s})}),(0,i.BX)(is.$0,{className:el()("BrandQuestionAuthor",r&&"is-clickable"),onClick:this.goToBrand,children:[(0,i.tZ)("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),(0,i.BX)("div",{className:"BrandQuestionAuthor-content",children:[(0,i.BX)("div",{className:"BrandQuestionAuthor-name",children:[o,r&&r.urlToken&&(0,i.tZ)(ey.Vh,{css:{marginLeft:3},badge:r.badge})]}),r&&r.headline&&(0,i.tZ)("div",{className:"BrandQuestionAuthor-intro",children:r.headline})]})]}),c&&c.id&&l&&l.id!==c.id&&(0,i.tZ)(ot.Z,{className:"BrandQuestionAuthor-buttons",user:c})]})}}]),n}(Z.Component),r4=(0,k.compose)(eW.Z,(0,b.connect)(function(e){var t=e.entities,n=e.question.brand,i={};return n&&n.target&&n.target.urlToken&&(i=t.users[n.target.urlToken]||{}),{brand:n,brandMember:i}},{loadBrand:E.Od,loadProfile:on.hr}))(r5),r7=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,i=t.questionType,o=e.loadBrand;"commercial"===i&&o(n)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,i=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&i(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,o=n.id,r=n.questionType,a=e.brand;return(0,i.tZ)(i6.Z,{className:"Question-sideColumn Question-sideColumn--sticky",children:(0,i.BX)(i.HY,{children:["commercial"===r&&(0,i.tZ)(oQ,{questionId:o,pageType:"question"}),"commercial"===r&&a&&(0,i.tZ)(r4,{brand:a}),"commercial"!==r&&(0,i.tZ)(i4.Z,{type:"question"}),"normal"===r&&(0,i.tZ)("div",{className:"Card",children:(0,i.tZ)(i5.C,{isMobile:eS.Z.isMobileEntry,id:"question/".concat(o),location:"new_question_up",query:{question_token:o}})}),(0,i.tZ)(oM,{}),(0,i.tZ)(oP,{}),(0,i.tZ)(ta,{id:o,question:t,position:"right"}),"normal"===r&&(0,i.tZ)(oK,{question:t}),"normal"===r&&(0,i.tZ)(oV,{question:t}),"normal"===r&&(0,i.tZ)("div",{className:"Card",children:(0,i.tZ)(i5.C,{isMobile:eS.Z.isMobileEntry,id:"question/".concat(o),location:"new_question_down_sticky",query:{question_token:o},delay:500})}),"commercial"===r&&(0,i.tZ)(i4.Z,{type:"question"}),(0,i.tZ)(i7.Z,{})]})})}}]),n}(Z.Component),r6=(0,k.compose)((0,Q.Z)(null),(0,A.a)({module:"RightSideBar"}),(0,b.connect)(function(e){return{brand:e.question.brand}},{loadBrand:E.Od,loadProfile:on.hr}))(r7),r8=function(e){(0,u._)(n,e);var t=(0,p._)(n);function n(){return(0,s._)(this,n),t.apply(this,arguments)}return(0,c._)(n,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,o=n.questionType,r=n.collapsedAnswerCount,a=n.answerCount,s=n.isNormal,c=n.status,l=(void 0===c?{}:c).isLocked,u=e.question,d=e.location,h=e.answering,p=e.invitationShowCount,m=e.isDrained,f=e.isMuteSpecial,v=e.isMuteFreeze;return(0,i.BX)("div",{children:[(0,i.tZ)(rz,{question:u,answering:h}),(0,i.tZ)(rx,{question:u}),!!p&&!f&&!v&&(0,i.tZ)(tD.Z,{expandCount:p,question:u}),(0,i.tZ)(rK,{resource:t,question:u,location:d}),s&&!l&&"updatedAnswers"!==t&&m&&!("commercial"!==o&&!a)&&(0,i.tZ)(A.r,{module:"BottomBar",children:(0,i.tZ)(is.ZP,{children:(0,i.tZ)(tv,{className:"QuestionAnswers-answerButton",size:"spread"})})}),("updatedAnswers"===t||m)&&r>0&&!f&&!d.pathname.includes("hidden")&&(0,i.tZ)(rJ,{question:u})]})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,o=e.notificationId,r=e.location;return(0,i.BX)("div",{className:"Question-main",children:[(0,i.tZ)("div",{className:"Question-mainColumn",children:n?(0,i.tZ)(r1,{location:r,question:t,id:o}):this.renderAnswers()}),(0,i.BX)(ek.Z,{children:[(0,i.tZ)(r6,{question:t}),(0,i.tZ)(r3,{id:t.id})]})]})}}]),n}(Z.PureComponent);(0,l._)(r8,"fetchData",function(e){var t=e.params.id,n=e.route.resource,i=e.location.query,o=i.group_id,r=i.page,a=i.qc,s=e.dispatch,c=e.getState;if(!a&&o)return s((0,E.o1)(o));var l=c(),u=l.env.userAgent,d=(0,tl.Hu)(l),h=5;return u.isBot?h=20:d&&(h=4),s((0,E.XD)(t,n,{offset:(0,ij.os)(Number(r)||1),limit:h}))});var r9=(0,k.compose)((0,b.connect)(function(e,t){var n=t.params.id,i=t.route.resource,o=t.location.query,r=o.group_id,a=o.qc,s=e.currentUser,c=iY(e,{id:n,resource:i}).isDrained,l=(0,E.Md)(e,{id:n}),u=l.answerCount,d=l.relationship.isAnonymous;return{isNormalNotification:!a&&r,notificationId:r,resource:i,question:l,isDrained:c,invitationShowCount:s&&!d&&u<4?u?5:3:0,isBot:e.env.userAgent.isBot,isHuman:(0,tl.H8)(e),currentUser:(0,F.ib)(e),canOia:(0,tl.Hu)(e),shouldOia:(0,tl.XE)(e),shouldSpecialOia:(0,tl.cq)(e),referer:(0,tl.Kv)(e),isMuteSpecial:(0,E.gW)(l),isMuteFreeze:(0,E.SZ)(l),ua:(0,tl.Uh)(e),draft:(0,E.x9)(e,{id:n})}}),rd)(r8),ae=n(93155),at=n(86368),an=n(13990),ai=n(7778),ao=function(e){var t=e.className,n=e.titleClassName,o=e.sourceClassName,r=e.hideButtonClassName,a=e.question,s=a.id,c=a.title,l=a.detail,u=a.excerpt,d=a.isDeleted,p=e.mainSource,m=e.subSource,f=e.mainTool,v=e.subTool,g=e.zaId,w=void 0===g?{}:g,y=e.onMouseEnter,_=void 0===y?n_():y,b=e.onMouseLeave,C=void 0===b?n_():b,k=e.onExpand,S=void 0===k?n_():k,N=e.onCollapse,B=void 0===N?n_():N,x="https://www.zhihu.com/question/".concat(s),T=(0,h._)((0,Z.useState)(!0),2),q=T[0],E=T[1],Q=(0,Z.useCallback)(function(e){E(!0),B(e),ed.Z.trackEvent(e.target,{id:w.collapse,action:"Collapse"})},[E,B,w]),M=(0,Z.useCallback)(function(e){E(!1),S(e),ed.Z.trackEvent(e.target,{id:w.expand,action:"Expand"})},[E,S,w]);return d?(0,i.BX)("div",{className:el()("ListQuestionItem","ListQuestionItem--deleted",t),children:[(0,i.tZ)("div",{className:"ListQuestionItem-hint",children:"该问题已被删除"}),(0,i.tZ)("div",{className:"ListQuestionItem-mainTool",children:f})]}):(0,i.tZ)(A.r,{module:"QuestionItem",card:{content:{type:"Question",token:String(s)}},trackCardShow:!!w.cardShow,view:{id:w.cardShow},children:(0,i.BX)("div",{className:el()("ListQuestionItem","jsNavigable",t),onMouseEnter:_,onMouseLeave:C,children:[(p||m)&&(0,i.BX)("div",{className:el()("ListQuestionItem-source",o),children:[p&&(0,i.tZ)("div",{className:"ListQuestionItem-mainSource",children:p}),m&&(0,i.tZ)("div",{className:"ListQuestionItem-subSource",children:m})]}),(0,i.tZ)("a",{className:el()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!l}),href:x,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":w.titleClick,children:c}),l&&(0,i.tZ)(nr,{className:"ListQuestionItem-RichText",html:l,reviewInfo:{},excerpt:u,collapsed:q,onExpand:M,editable:!1}),(0,i.BX)("div",{className:"ListQuestionItem-tool",children:[(0,i.BX)("div",{className:"ListQuestionItem-mainTool",children:[(0,i.tZ)(eF.Z,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:e5.E,label:"写回答",href:"".concat(x,"?write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){ed.Z.trackEvent(e.target,{id:w.writeAnswer,action:"Answer"})}}),f]}),(v||!v&&!q)&&(0,i.BX)("div",{className:"ListQuestionItem-subTool",children:[v,!q&&(0,i.BX)("div",{className:el()("ListQuestionItem-hideButton",r),role:"button",tabIndex:0,onClick:Q,children:["收起",(0,i.tZ)(er.v,{className:"ToolsQuestionItem-hideButtonIcon",center:!0})]})]})]})]})})},ar=function(e){var t=e.user,n=t.isFollowed,o=t.isFollowing,r=t.gender,a=null;return n&&o?a="互相关注":o&&(a="你关注了".concat(0===r?"她":1===r?"他":"TA")),a?(0,i.tZ)("div",{className:"RelationLabel",children:a}):null},aa=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?(0,i.tZ)(e6.Z,{user:n[0]}):2===n.length?(0,i.BX)(Z.Fragment,{children:[(0,i.tZ)(e6.Z,{user:n[0]})," 和 ",(0,i.tZ)(e6.Z,{user:n[1]})]}):3===n.length?(0,i.BX)(Z.Fragment,{children:[(0,i.tZ)(e6.Z,{user:n[0]}),"、",(0,i.tZ)(e6.Z,{user:n[1]})," 和"," ",(0,i.tZ)(e6.Z,{user:n[2]})]}):n.length>3?(0,i.BX)(Z.Fragment,{children:[(0,i.tZ)(e6.Z,{user:n[0]}),"、",(0,i.tZ)(e6.Z,{user:n[1]})," 和"," ",(0,i.tZ)(e6.Z,{user:n[2]})," 等 ",n.length," 人"]}):null},as=n(14586),ac=as.V[0];function al(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,o=e.ignoreInvitedQuestion,r=e.updateLaterQuestion,a=(0,Z.useRef)(null);(0,ai.R)(".jsNavigable",a);var s=(0,h._)((0,Z.useState)(ac),2),c=s[0],u=s[1],p=(0,h._)((0,Z.useState)(new Set),2),m=p[0],f=p[1],v=(0,h._)((0,Z.useState)(new Set),2),g=v[0],w=v[1],y=(0,h._)((0,Z.useState)(as.V.reduce(function(e,t){var n=t.name;return(0,eN._)((0,d._)({},e),(0,l._)({},n,0))},{})),2),_=y[0],b=y[1],C=function(e){t[e.name].questions.length||n(e,20,0),ed.Z.trackEvent(null,{id:5377},{button:{text:e.text}}),u(e)},k=t[c.name],S=k.isEnd,A=k.isLoading,N=k.questions.filter(function(e){var t=e.question;return!m.has(t.id)});return(0,i.BX)("div",{className:"QuestionInvited",ref:a,children:[(0,i.BX)(is.ZP,{className:"QuestionInvited-mainColumn",children:[(0,i.BX)("div",{className:"QuestionInvited-title",children:["邀请回答",!!t.total.count&&(0,i.tZ)("div",{className:"QuestionInvited-titleNumber",children:t.total.count-_.total})]}),(0,i.tZ)("div",{className:"QuestionInvited-tabs",children:as.V.map(function(e){return(0,i.BX)("div",{className:el()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===c.name}),role:"button",tabIndex:0,onClick:function(){return C(e)},children:[(0,i.tZ)("div",{className:"QuestionInvited-tabTitle",children:e.text}),(0,i.tZ)("div",{className:"QuestionInvited-tabMeta",children:t[e.name].count-_[e.name]})]},e.name)})}),(0,i.tZ)(od.ZP,{className:"QuestionInvited-questions",onLoad:function(){return n(c,20,N.length)},isLoading:A,placeholder:(0,i.tZ)(od.i,{className:"QuestionInvited-placeholder"}),isDrained:S,tryLoadOnUpdate:!0,children:N.map(function(e){var t=e.inviters,n=e.question;return(0,i.tZ)(ao,{className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:(0,i.BX)("div",{className:"QuestionInvited-questionItemMainSource",children:[(0,i.tZ)(aa,{users:t})," 邀请你回答"]}),subSource:1===t.length&&(0,i.tZ)(ar,{user:t[0]}),mainTool:(0,i.BX)(Z.Fragment,{children:[(0,i.BX)(em.ZP,{className:el()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){f(new Set(m).add(n.id)),b((0,eN._)((0,d._)({},_),(0,l._)({total:_.total+1},c.name,_[c.name]+1))),o(n.id),ed.Z.trackEvent(e.target,{id:5382,action:"Ignore"})},children:[(0,i.tZ)(ae._,{size:18}),"忽略"]}),(0,i.BX)(em.ZP,{className:el()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":g.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!g.has(n.id),i=new Set(g);t?i.add(n.id):i.delete(n.id),w(i),r(n.id,t),ed.Z.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})},children:[g.has(n.id)?null:(0,i.tZ)(at.D,{}),g.has(n.id)?"已添加":"稍后答"]}),(0,i.BX)("div",{className:"QuestionInvited-info",children:[(0,eT.uf)(n.answerCount)," 个回答"," \xb7 ",(0,eT.uf)(n.visitCount)," 个浏览"]})]})},n.id)})})]}),(0,i.tZ)(an.Z,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}al.fetchData=function(e){return(0,e.dispatch)((0,E.LV)())};var au=(0,b.connect)(function(e){return{allInvitedQuestions:e.question.invitedQuestions}},{getInvitedQuestions:E.Uo,ignoreInvitedQuestion:E.rh,updateLaterQuestion:E.Dt})(al),ad=n(43831),ah=n.p+"assets/empty.1d9c0a11.png";function ap(e){var t=e.laterQuestions,n=e.getLaterQuestions,r=e.updateLaterQuestion,a=(0,Z.useRef)(null);(0,ai.R)(".jsNavigable",a);var s=(0,h._)((0,Z.useState)(new Set),2),c=s[0],l=s[1],u=t.count,d=t.isEnd,p=t.isLoading,m=t.questions.filter(function(e){return!c.has(e.id)});return(0,i.BX)("div",{className:"QuestionLater",ref:a,children:[(0,i.BX)(is.ZP,{className:"QuestionLater-mainColumn",children:[(0,i.BX)("div",{className:"QuestionLater-title",children:[(0,i.tZ)(at.D,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",!!u&&(0,i.tZ)("div",{className:"QuestionLater-titleNumber",children:u})]}),!p&&0===m.length&&(0,i.BX)("div",{className:"QuestionLater-empty",children:[(0,i.tZ)("img",{className:"QuestionLater-emptyImage",src:ah,alt:""}),(0,i.BX)("div",{className:"QuestionLater-emptyText",children:["还没有稍后答，",(0,i.tZ)(o.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting",children:"看看为你推荐的问题"})]})]}),(0,i.tZ)(od.ZP,{className:"QuestionLater-questions",onLoad:function(){return n(20,m.length)},isLoading:p,placeholder:(0,i.tZ)(od.i,{className:"QuestionLater-placeholder"}),isDrained:d,tryLoadOnUpdate:!0,children:m.map(function(e){return(0,i.tZ)(ao,{className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:(0,i.BX)(Z.Fragment,{children:[(0,i.BX)(em.ZP,{className:el()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){l(new Set(c).add(e.id)),r(e.id,!1),ed.Z.trackEvent(t.target,{id:5376,action:"Delete"})},children:[(0,i.tZ)(ad.R,{size:22}),"移除"]}),!e.isDeleted&&(0,i.BX)("div",{className:"QuestionLater-info",children:[(0,eT.uf)(e.answerCount)," 个回答"," \xb7 ",(0,eT.uf)(e.visitCount)," 个浏览"]})]})},e.id)})})]}),(0,i.tZ)(an.Z,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}ap.fetchData=function(e){return(0,e.dispatch)((0,E.Dx)())};var am=(0,b.connect)(function(e){return{laterQuestions:e.question.laterQuestions}},{getLaterQuestions:E.Tp,updateLaterQuestion:E.Dt})(ap),af=n(61818),av=n(68339),ag=n(24304),aw=n(87464),aZ=n(71798),ay=function(e){var t=e.index,n=e.question,o=n.id,r=n.title,a=e.headerInfo,s=a.reason,c=a.reasonId,l=a.avatar,u=a.invite,h=a.labels,p=e.extraFooterInfo,m=e.isGreyBg,f=e.hotLabelType,v=e.creatorScore,g=e.handleIgnoreQuestion,w=void 0===g?n_():g,Z="https://www.zhihu.com/question/".concat(o),y=(0,S.Q4)().trackEvent;return(0,i.tZ)(S.eV,{moduleId:"answer_question_card",moduleIndex:t,content:{type:"Question",token:String(o)},extra:{configMap:(0,d._)({},c&&{recommend_id:String(c)})},children:(0,i.BX)(S.Wi,{zaType:"Card",zaText:r,className:"jsNavigable",css:function(e){return{padding:"24px 0px",borderBottom:"1px solid ".concat(e.colors.GBK09A),position:"relative","&:hover .QuestionWaiting-QuestionItemV2-ignoreButton":{visibility:"visible"}}},children:[(0,i.BX)(C.Flex,{alignItems:"center",color:"GBL05A",fontSize:"15px",children:[(null==l?void 0:l.url)&&(0,i.tZ)(C.Image,{src:null==l?void 0:l.url,css:{width:"20px",height:"20px",borderRadius:"50%",marginRight:"8px"}}),u&&(0,i.tZ)(C.Flex,{alignItems:"center",fontSize:"14px",lineHeight:"15px",children:u}),(0,i.tZ)(aZ.Z,{labels:h})]}),(0,i.BX)(C.Flex,{justifyContent:"space-between",alignItems:"center",css:function(e){return[m&&{marginTop:"12px",backgroundColor:e.colors.GBK10A,padding:"12px",borderRadius:"2px"}]},children:[(0,i.BX)(C.Box,{css:{flex:"1"},children:[!!s&&(0,i.tZ)(C.Text,{color:"GBL05A",fontSize:"14px",lineHeight:"15px",mb:"8px",dangerouslySetInnerHTML:{__html:s}}),(0,i.tZ)(aw.Z,{data:{titleLink:Z,title:r,hotLabelType:f},css:{width:"478px"}}),(0,i.tZ)(C.Text,{mt:"8px",lineHeight:"14px",color:"GBK06A",fontSize:"14px",children:p})]}),(0,i.BX)(C.Flex,{alignItems:"center",children:[(0,i.tZ)(ag.Z,{scoreText:v,css:function(e){return{backgroundColor:e.colors.GBK99A}}}),(0,i.tZ)(S.$U,{zaType:"Button",zaAction:"OpenUrl",zaModuleId:"write_answer",extra:{link:{get url(){return"".concat(Z,"?write")}}},children:(0,i.tZ)(eF.Z,{css:function(e){return{width:"96px",height:"28px",lineHeight:"26px",borderRadius:"3px",color:e.colors.GBK99B,padding:0,border:"1px solid ".concat(e.colors.GBL01A),backgroundColor:e.colors.GBL01A,boxSizing:"border-box"}},icon:e5.E,label:"写回答",href:"".concat(Z,"?write"),target:"_blank"})})]}),(0,i.tZ)(av.ZP,{className:"QuestionWaiting-QuestionItemV2-ignoreButton",css:{position:"absolute",top:"16px",right:"0",visibility:"hidden"},preset:"plain","data-tooltip":"不感兴趣","aria-label":"不感兴趣",icon:ns.HN,onClick:function(){w(o),y({eventType:"Click",elementLocation:{type:"Button",text:"不感兴趣",content:{type:"Question",token:String(o)}}})}})]})]})})},a_=function(e){var t=e.type,n=e.index,r=e.onClick,a=e.enablingTypeName,s=e.totals,c=t.name,l=t.text,u=t.queryName,d=t.icon,h=c===a;return(0,i.BX)(o.Link,{className:el()("QuestionType","QuestionWaiting-type",{"QuestionType--active":h}),role:"tab","aria-selected":h,"aria-setsize":s,"aria-posinset":n+1,to:u?"/question/waiting?type=".concat(u):"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:l}}),onClick:r,children:[(0,i.tZ)(d,{className:"QuestionType-icon",size:18}),l]})},ab=n(93542),aC=(0,o.withRouter)((0,b.connect)(function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:ab.V5.find(function(e){return e.queryName===n})||ab.V5[0]}},{getWaitingQuestions:E.MA,getWaitingInvitedQuestions:E._N,deleteWaitingQuestion:E.Io,ignoreToolsQuestionInvite:E.II})(function(e){var t=e.allWaitingQuestions,n=e.defaultType,o=e.getWaitingQuestions,r=e.getWaitingInvitedQuestions,a=e.deleteWaitingQuestion,s=e.ignoreToolsQuestionInvite,c=(0,Z.useRef)(null);(0,ai.R)(".jsNavigable",c,{scrollPaddingTop:140});var u=(0,Z.useRef)(null),p=(0,h._)((0,Z.useState)(n.name),2),m=p[0],f=p[1],v=(0,h._)((0,Z.useState)(ab.V5.reduce(function(e,t){var n=t.name;return(0,eN._)((0,d._)({},e),(0,l._)({},n,0))},{})),2),g=v[0],w=v[1],y="invite"===m?"invite":"recommend",b=t[m].paging,C=function(){return r((null==b?void 0:b.next)?b.next:"notifications/v3/timeline/entry/invite?invite_with_time_slice=1&limit=20&offset=0",{inviteDomainScoreAb:"1"})},k=function(e){w((0,eN._)((0,d._)({},g),(0,l._)({},m,window.pageYOffset)));var n=e.name,i=e.request,r=i.endpoint,a=i.query;t[e.name].questions.length||("invite"!==e?o({type:n,endpoint:r,query:a,abValue:"1"}):C()),f(n),window.scrollTo(0,g[n])},A=(0,h._)((0,Z.useState)(new Set),2),N=A[0],B=A[1],x=t[m],T=x.isEnd,q=x.isLoading,E=x.questions.filter(function(e){var t=(0,ab.tw)(e,m).question,n=t.ignoreId,i=t.id;return!N.has(n||i)});return(0,S.TN)({pageId:"11295"}),(0,i.BX)("div",{className:"QuestionWaiting",ref:c,children:[(0,i.tZ)(_.ql,{title:"等你来答"}),(0,i.BX)(is.ZP,{role:"region","aria-label":"问题列表",className:"QuestionWaiting-mainColumn",children:[(0,i.tZ)(eh.Z,{offset:62,children:function(e){var t=e.isFixed;return(0,i.BX)("div",{className:el()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":t}),children:[t&&(0,i.tZ)("div",{className:"QuestionWaiting-typesTopper"}),(0,i.tZ)("div",{role:"tablist","aria-label":"问题分类",className:el()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":t}),children:ab.V5.map(function(e,t){return(0,i.tZ)(a_,{totals:ab.V5.length,type:e,index:t,enablingTypeName:m,onClick:function(){return k(e)}},e.name)})})]})}}),(0,i.tZ)(af.Z,{source:y},y),(0,i.tZ)(K.SV,{children:(0,i.tZ)(od.ZP,{ref:u,className:"QuestionWaiting-questions",onLoad:function(){"invite"===m?C():o({type:m,endpoint:n.request.endpoint,query:n.request.query,offset:E.length,abValue:"1"})},isLoading:q,placeholder:(0,i.tZ)(od.i,{className:"QuestionWaiting-placeholder"}),isDrained:T,children:E.map(function(e,t){var n,o=(0,ab.Zp)(e,m),r=o.question,c=o.headerInfo,l=o.extraFooter,d=o.hotLabelType,h=o.creatorScore,p=o.isGreyBg;return(0,i.tZ)(ay,{index:t,question:r,headerInfo:c,extraFooterInfo:l,handleIgnoreQuestion:(n=r.ignoreId||r.id,function(){B(new Set(N).add(n)),"invite"===m?s(n):a(n),u.current.maybeRun()}),hotLabelType:d,creatorScore:h,isGreyBg:p},e.id)})})})]}),(0,i.tZ)(an.Z,{omit:{noBanner:!0,noCategory:!0}})]})})),ak=(0,i.BX)(o.Route,{children:[(0,i.tZ)(o.Route,{path:"waiting",component:aC,name:"QuestionWaiting",authRequired:!0,zaPageShowId:5541}),(0,i.tZ)(o.Route,{path:"later",component:am,name:"QuestionLater",authRequired:!0,zaPageShowId:5371}),(0,i.tZ)(o.Route,{path:"invited",component:au,name:"QuestionInvited",authRequired:!0,zaPageShowId:5543}),(0,i.BX)(o.Route,{path:":id",component:it,name:"Question",children:[(0,i.BX)(o.Route,{children:[(0,i.tZ)(o.IndexRoute,{component:r9,entity:"answers",resource:"answers",name:"QuestionPage",zaPageShowId:3378}),(0,i.tZ)(o.Route,{path:"answers/hidden",component:r9,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),(0,i.tZ)(o.Route,{path:"answers/updated",component:r9,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),(0,i.tZ)(o.Redirect,{from:"answers/created",to:"answers/updated"})]}),(0,i.tZ)(o.Route,{path:"answer/:answerId",component:o3,name:"AnswerPage",zaPageShowId:2012}),(0,i.tZ)(o.Redirect,{from:"noti-answers",to:"."})]}),(0,i.tZ)(o.Route,{path:":id/write",showAppHeader:!1,component:rc,name:"QuestionAnswerEditableAdd",authRequired:!0}),(0,i.tZ)(o.Route,{path:":id/answer/:answerId/edit",showAppHeader:!1,component:rc,name:"QuestionAnswerEditableEdit",authRequired:!0})]})},57269:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var i=n(85879),o=n(43384),r=n(87363),a=n.n(r),s=n(66980),c=Object.assign,l=function(e){return a().createElement(s.Z,c({width:"52",height:"60",fill:"none",viewBox:"0 0 52 60"},e),a().createElement("path",{fill:"#121212",d:"M28.052 54.284c-1.881 0-3.76.015-5.638 0a2.041 2.041 0 0 0-1.36.464 607.935 607.935 0 0 1-5.391 4.22 4.752 4.752 0 0 1-.834.539 1.566 1.566 0 0 1-2.15-1.844c.287-.885.573-1.764.893-2.631.19-.504.184-.716-.46-.816-2.357-.361-4.407-1.312-5.856-3.307a9.136 9.136 0 0 1-1.526-3.58c-.117-.572-.286-.546-.781-.38-.75.255-.94.681-.722 1.391.05.187.07.38.057.573a1.186 1.186 0 0 1-.967 1.237 1.146 1.146 0 0 1-1.395-.707c-.137-.31-.226-.501-.632-.49a1.21 1.21 0 0 1-1.203-.842c-.226-.555.017-.993.404-1.334.286-.263.286-.427.08-.75a1.229 1.229 0 0 1 .286-1.718 1.175 1.175 0 0 1 1.652.243c.352.419.65.413 1.16.272 1.577-.438 2.368-1.305 2.388-3.04.017-1.486.415-2.96.592-4.447.19-1.577-.12-3.132-.309-4.687-.246-2.004-.572-4.008-.89-5.99-.163-1.067.527-1.755 1.589-1.574 1.343.223 1.325.22 1.506-1.146.269-2.027.54-4.051.859-6.07a1.323 1.323 0 0 0-.627-1.491c-2.374-1.638-3.568-4.052-4.06-6.835-.556-3.083.779-5.463 3.035-7.41C10.008.188 12.73-.199 15.592.082c1.612.138 3.19.556 4.66 1.234a6.373 6.373 0 0 1 2.577 2.072c.364.525.773.65 1.366.648 5.234-.02 10.465 0 15.696 0 2.13 0 4.097.495 5.775 1.875 2.448 2.004 3.341 4.644 3.07 7.73a2.295 2.295 0 0 1-.05.287c-.211 1.145-.252 1.987.86 2.975a5.4 5.4 0 0 1 .463 7.381 16.1 16.1 0 0 1-2.64 2.694 1.59 1.59 0 0 0-.658 1.114c-.724 5.225-1.52 10.44-2.176 15.673-.647 5.191-4.089 9.18-9.08 10.307a13.87 13.87 0 0 1-3.192.238h-4.208l-.003-.026z"}),a().createElement("path",{fill:"#FEFEFE",d:"M14.872 57.128c.53-1.552.971-2.9 1.452-4.232.163-.453 0-.53-.4-.533-.86 0-1.719-.023-2.578-.083-1.614-.114-2.949-.839-4.094-1.95a1.63 1.63 0 0 1-.51-1.325c.055-1.117.075-2.236.075-3.353a.736.736 0 0 1 .59-.83c.615-.178 1.216-.407 1.82-.622.53-.186.77-.572.61-1.114-.171-.572-.644-.638-1.145-.492-.386.109-.767.252-1.145.372-.484.155-.722 0-.71-.535.023-1.068 0-2.139.029-3.21.06-3.533-.396-7.02-.931-10.502-.023-.14-.052-.286-.066-.42-.054-.642.103-.791.727-.636 1.315.32 2.64.604 3.934.999 2.005.613 3.995.438 5.97-.12 2.365-.67 4.558-1.767 6.769-2.812a1.245 1.245 0 0 0 .724-1.145c.086-1.257.192-2.514.286-3.768.058-.733.22-.86.897-.573 1.95.753 3.902 1.5 5.838 2.29.838.349 1.774.38 2.634.09 2.075-.67 4.017-1.695 6.02-2.537.894-.367.923-.367 1.29.55.638 1.586 1.245 3.183 1.923 4.755.23.533.095.833-.317 1.145a45.216 45.216 0 0 1-5.492 3.57c-1 .556-1.06.682-.859 1.822 1.005 5.483 1.46 11.026 1.867 16.575a1.45 1.45 0 0 1-.527 1.302c-1.958 1.793-4.263 2.577-6.903 2.577-3.722-.034-7.421 0-11.132 0a1.72 1.72 0 0 0-1.2.45c-1.723 1.414-3.516 2.78-5.446 4.295z"}),a().createElement("path",{fill:"#06F",d:"M38.851 18.987a3.811 3.811 0 0 0-.048-.438c-.34-1.406.043-2.505 1.23-3.401.702-.53.734-1.111.353-1.684-.38-.573-.936-.687-1.74-.286-.287.146-.359.086-.427-.19a1.897 1.897 0 0 0-.255-.572 1.123 1.123 0 0 0-1.369-.49 1.194 1.194 0 0 0-.83 1.275c.028.253.073.505.135.753-.439-.06-.828-.287-1.26-.104a1.189 1.189 0 0 0-.81.911 1.042 1.042 0 0 0 .498 1.168c.47.286.962.513 1.457.745a.658.658 0 0 1 .472.624c.03.784.092 1.569.16 2.348a.552.552 0 0 1-.392.65 3.398 3.398 0 0 1-2.811.06c-2.274-.96-4.581-1.821-6.892-2.712-1.165-.452-1.844-.034-1.955 1.206-.138 1.514-.287 3.029-.375 4.55a.97.97 0 0 1-.613.936c-2.156.996-4.312 2.004-6.671 2.436a7.73 7.73 0 0 1-3.25-.071c-.902-.212-1.792-.479-2.697-.668-.432-.088-.527-.286-.47-.681.338-2.306.664-4.612.977-6.918.051-.386.22-.5.572-.403a2.817 2.817 0 0 0 1.55-.029c.59-.157.981.055 1.394.438a9.752 9.752 0 0 0 3.85 2.22c.994.285 1.492-.133 1.298-1.146-.172-.885-.315-1.778-.533-2.654a1.199 1.199 0 0 1 .4-1.312 21.19 21.19 0 0 0 3.31-4.008c.986-1.526 1.518-3.17 1.146-5.005-.1-.5.074-.607.541-.607 5.016.014 10.036 0 15.052.014 2.05 0 3.89.573 5.322 2.14 1.55 1.703 1.781 3.721 1.604 5.926-.115 1.412-.627 2.15-2.079 2.577-1.786.521-3.453 1.451-5.17 2.204a1.43 1.43 0 0 1-.674.198z"}),a().createElement("path",{fill:"#FEFEFE",d:"M17.928 18.369c-1.045-.361-1.773-1.045-2.506-1.718-.38-.35-.821-.573-1.354-.47-2.256.484-3.862-.704-5.28-2.167-1.775-1.835-2.64-4.112-2.27-6.646.395-2.7 3.238-5.193 5.987-5.471 2.206-.249 4.44.04 6.51.842 3.396 1.328 4.53 4.612 2.65 7.73a18.546 18.546 0 0 1-3.723 4.387 1.19 1.19 0 0 0-.441 1.371c.183.673.278 1.377.427 2.142z"}),a().createElement("path",{fill:"#06F",d:"M42.013 45.892a154.544 154.544 0 0 0-.917-9.388 72.47 72.47 0 0 0-.632-4.157.701.701 0 0 1 .389-.86c1.01-.623 2.004-1.273 3.012-1.906.175-.109.355-.355.555-.238.2.118.106.433.078.653a1194.67 1194.67 0 0 1-.825 5.927c-.435 3.008-.877 6.017-1.326 9.027a1.65 1.65 0 0 1-.334.942z"}),a().createElement("path",{fill:"#B7B7B6",d:"M45.351 20.628c-.286-.287-.424-.47-.364-.719 0-.037.155-.089.166-.074.159.232.229.513.198.793z"}),a().createElement("path",{fill:"#121212",d:"M25.105 32.77c.029 1.146-.587 1.776-1.718 1.801-1.13.026-1.958-.738-1.966-1.872-.01-1.134.835-1.835 2.164-1.855 1.08-.015 1.477.503 1.52 1.926z"}),a().createElement("path",{fill:"#444",d:"M14.326 6.69c.206-.165.42-.318.644-.458a.965.965 0 0 1 1.414.352c.454.783.784 1.63.98 2.514.12.455-.212.518-.516.59-.303.071-.627.134-.722-.318-.111-.533-.206-1.074-.369-1.595-.094-.306-.157-.787-.676-.621-.475.149-.572.498-.372.962.22.527.375 1.076.59 1.603.26.641-.24.747-.621.873s-.9.407-1.117-.286a39.818 39.818 0 0 1-1.076-4.28c-.118-.573.312-.665.701-.782.39-.117.69-.054.807.418.086.346.09.719.333 1.028zm-3.207 4.217 1.145-.426c.23-.08.427-.058.53.197a.384.384 0 0 1-.057.452.385.385 0 0 1-.132.092c-.83.41-1.704.722-2.606.93-.535.113-.81-.285-.63-.858.264-.836.573-1.655.88-2.508-.398-.092-.74.114-1.094.2-.223.054-.43.089-.544-.172a.425.425 0 0 1 .215-.601 5.775 5.775 0 0 1 2.56-.504c.497.023.66.407.506.885-.235.71-.478 1.426-.773 2.313zm7.753-1.852c-.346.051-.55-.115-.658-.467-.18-.573-.287-1.145-.427-1.718-.183-.716.25-.887.75-1.034.553-.163.684.255.822.645.137.39.303.859.452 1.271.301.845-.003 1.277-.939 1.303z"}),a().createElement("path",{fill:"#4A4B4A",d:"M18.045 3.666a.925.925 0 0 1 .899.925.873.873 0 0 1-.934.893.86.86 0 0 1-.89-.901c.034-.582.39-.848.925-.917z"}))},u=function(e){var t=e.title,n=void 0===t?"快速登录，查看完整内容":t,r=e.zaBlock;return(0,i.tZ)(o.Wi,{zaType:"Popup",zaText:n,zaBlock:void 0===r?"LoginPopupWithHeader":r,children:(0,i.tZ)("div",{css:{background:"#EDF4FF",height:"50px"},children:(0,i.BX)("div",{css:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",height:"50px"},children:[(0,i.tZ)(l,{css:{marginRight:"16px",width:"51px",position:"relative",top:"-11px"}}),(0,i.tZ)("div",{css:{fontSize:"16px",fontWeight:"bold",textAlign:"center"},children:n})]})})})}},88257:function(e,t,n){"use strict";var i=n(43384);t.Z=function(e){var t=e.pageInfo,n=e.pageOptions;return(0,i.TN)(t,n),null}},22419:function(e,t,n){"use strict";var i=n(94009),o=n(87363),r=n(76867),a=function(e,t){var n=(e-t)/1e3;return{done:n<=0,days:Math.floor(n/86400),hours:Math.floor(n/3600%24),minutes:Math.floor(n/60%60),seconds:Math.floor(n%60),get now(){return new Date(t)}}};t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.start,s=t.interval,c=void 0===s?1e3:s,l=t.onTick,u=(0,o.useRef)(n||Date.now()),d=(0,o.useRef)(e),h=(0,i._)((0,o.useState)(function(){return a(d.current,u.current)}),2),p=h[0],m=h[1],f=(0,o.useRef)();return(0,o.useEffect)(function(){f.current=Date.now(),u.current=n||Date.now(),d.current=e,m(a(d.current,u.current))},[Number(e),Number(n)]),(0,r.Z)(function(){var e=Date.now()-f.current,t=a(d.current,+u.current+e);m(t),l&&l(t)},p.done?null:c),p}},22627:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s},yP:function(){return c}});var i=n(87363),o=n.n(i),r=n(30851),a=Object.assign;function s(e){var t;return o().createElement(r.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--TextPencil24"+(t?" "+t:"")}),o().createElement("path",{fillRule:"evenodd",d:"M4 12.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75ZM4 4.75A.75.75 0 0 1 4.75 4h14.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 4.75ZM4 19.25a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM19.808 9.309a.751.751 0 0 1 .412.978l-2.63 6.394a.749.749 0 0 1-.98.404.751.751 0 0 1-.41-.979l2.629-6.393a.749.749 0 0 1 .98-.404Zm-3.822 9.394a.751.751 0 0 1 .426.973l-.236.6a.749.749 0 0 1-.974.42.751.751 0 0 1-.426-.973l.237-.6a.749.749 0 0 1 .973-.42Z",clipRule:"evenodd"}))}function c(e){return o().createElement(s,a(a({},e),{className:function(){return"Zi Zi--Preview"+(e.className?" "+e.className:"")}}))}},86368:function(e,t,n){"use strict";n.d(t,{D:function(){return c},Z:function(){return s}});var i=n(87363),o=n.n(i),r=n(30851),a=Object.assign;function s(e){var t;return o().createElement(r.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--TimeArrow24"+(t?" "+t:"")}),o().createElement("path",{fillRule:"evenodd",d:"M19.537 9.269C18.414 6.34 15.532 4.25 12.146 4.25 7.773 4.25 4.25 7.732 4.25 12s3.523 7.75 7.896 7.75c3.663 0 6.734-2.446 7.63-5.75a.75.75 0 0 1 1.448.393c-1.073 3.956-4.736 6.857-9.078 6.857-5.177 0-9.396-4.13-9.396-9.25s4.219-9.25 9.396-9.25a9.433 9.433 0 0 1 7.394 3.543V5.5a.75.75 0 0 1 1.5 0V9a.75.75 0 0 1-.773.75.75.75 0 0 1-.73-.481Z",clipRule:"evenodd"}),o().createElement("path",{d:"M14.437 14.622a.75.75 0 1 0 .86-1.229L12.75 11.61V8.5a.75.75 0 0 0-1.5 0V12c0 .26.119.48.32.614l2.867 2.008Z"}))}function c(e){return o().createElement(s,a(a({},e),{className:function(){return"Zi Zi--Later"+(e.className?" "+e.className:"")}}))}},73739:function(e,t,n){"use strict";n.d(t,{l:function(){return c}});var i=n(87363),o=n.n(i),r=n(30851),a=Object.assign;function s(e){var t;return o().createElement(r.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--UsersFill24"+(t?" "+t:"")}),o().createElement("path",{fillRule:"evenodd",d:"M4.5 8A5.5 5.5 0 0 1 10 2.5 5.5 5.5 0 0 1 15.5 8a5.5 5.5 0 0 1-5.5 5.5A5.5 5.5 0 0 1 4.5 8Zm-.602 7.738c.965-1.075 2.418-1.574 4.19-1.325 1.263.178 2.56.178 3.825 0 1.77-.249 3.224.25 4.189 1.325.628.7 1.212 1.69 1.657 2.656.442.961.78 1.973.868 2.733.07.6-.424 1.023-.927 1.023H2.3c-.503 0-.997-.423-.927-1.023.088-.76.426-1.772.868-2.733.444-.967 1.029-1.956 1.657-2.656Zm12.312-2.046a.743.743 0 0 1-.309-.24.747.747 0 0 1 .081-.995c.338-.335.655-.827.92-1.37.441-.906.652-1.98.59-3.065-.036-.607-.135-1.289-.302-1.782a.75.75 0 0 1 1.42-.48c.228.672.34 1.503.379 2.176.076 1.327-.178 2.658-.739 3.809a7.991 7.991 0 0 1-.594 1.028c.89.564 1.632 1.316 2.22 2.083.768 1.002 1.308 2.075 1.585 2.907a.75.75 0 1 1-1.423.474c-.223-.668-.682-1.595-1.352-2.468-.667-.87-1.507-1.643-2.476-2.077Z",clipRule:"evenodd"}))}function c(e){return o().createElement(s,a(a({},e),{className:function(){return"Zi Zi--Users"+(e.className?" "+e.className:"")}}))}},71923:function(e){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter(function(e){return null!=e})).length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},85095:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(48641),o=n(6889);function r(e){return(0,o.Z)(1,arguments),(0,i.Z)(e,Date.now())}},57378:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(48641),o=n(74590),r=n(6889);function a(e){return(0,r.Z)(1,arguments),(0,i.Z)(e,(0,o.Z)(Date.now(),1))}},74590:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(9539),o=n(6889),r=n(90063);function a(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.Z)(e,-n)}},54946:function(e,t,n){"use strict";var i=n(64836);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var o=i(n(80850));e.exports=t.default},80850:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},88642:function(e){"use strict";var t=function(e,t){return e.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")};e.exports=function(e,n){e.classList?e.classList.remove(n):"string"==typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},34080:function(e,t,n){"use strict";var i,o,r,a,s,c,l,u,d,h,p,m=n(64836);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var f=m(n(52669)),v="transform";if(t.transform=v,t.animationEnd=r,t.transitionEnd=o,t.transitionDelay=l,t.transitionTiming=c,t.transitionDuration=s,t.transitionProperty=a,t.animationDelay=p,t.animationTiming=h,t.animationDuration=d,t.animationName=u,f.default){var g=function(){for(var e,t,n=document.createElement("div").style,i={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},o=Object.keys(i),r="",a=0;a<o.length;a++){var s=o[a];if(s+"TransitionProperty" in n){r="-"+s.toLowerCase(),e=i[s]("TransitionEnd"),t=i[s]("AnimationEnd");break}}return!e&&"transitionProperty"in n&&(e="transitionend"),!t&&"animationName"in n&&(t="animationend"),n=null,{animationEnd:t,transitionEnd:e,prefix:r}}();i=g.prefix,t.transitionEnd=o=g.transitionEnd,t.animationEnd=r=g.animationEnd,t.transform=v=i+"-"+v,t.transitionProperty=a=i+"-transition-property",t.transitionDuration=s=i+"-transition-duration",t.transitionDelay=l=i+"-transition-delay",t.transitionTiming=c=i+"-transition-timing-function",t.animationName=u=i+"-animation-name",t.animationDuration=d=i+"-animation-duration",t.animationTiming=h=i+"-animation-delay",t.animationDelay=p=i+"-animation-timing-function"}var w={transform:v,end:o,property:a,timing:c,delay:l,duration:s};t.default=w},52669:function(e,t){"use strict";t.__esModule=!0,t.default=void 0;var n=!!("undefined"!=typeof window&&window.document&&window.document.createElement);t.default=n,e.exports=t.default},89075:function(e,t,n){"use strict";var i,o=n(64836);t.__esModule=!0,t.default=void 0;var r=o(n(52669)),a="clearTimeout",s=function(e){var t=new Date().getTime(),n=setTimeout(e,Math.max(0,16-(t-l)));return l=t,n},c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};r.default&&["","webkit","moz","o","ms"].some(function(e){var t=c(e,"request");if(t in window)return a=c(e,"cancel"),s=function(e){return window[t](e)}});var l=new Date().getTime();(i=function(e){return s(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)},t.default=i,e.exports=t.default},86950:function(e,t,n){"use strict";var i=n(15934),o=n(74185),r=function(e){return e&&e.__esModule?e:{default:e}},a=function(e,t){if(!i._(e,t))throw TypeError("Cannot call a class as a function")},s=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e},c=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o._(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)};t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=r(n(87363)),d=r(n(14168)),h=r(n(86196)),p=r(n(18636)),m=n(94948);m.nameShape.isRequired,d.default.bool,d.default.bool,d.default.bool,(0,m.transitionTimeout)("Appear"),(0,m.transitionTimeout)("Enter"),(0,m.transitionTimeout)("Leave");var f=function(e){function t(){var n,i;a(this,t);for(var o=arguments.length,r=Array(o),c=0;c<o;c++)r[c]=arguments[c];return n=i=s(this,e.call.apply(e,[this].concat(r))),i._wrapChild=function(e){return u.default.createElement(p.default,{name:i.props.transitionName,appear:i.props.transitionAppear,enter:i.props.transitionEnter,leave:i.props.transitionLeave,appearTimeout:i.props.transitionAppearTimeout,enterTimeout:i.props.transitionEnterTimeout,leaveTimeout:i.props.transitionLeaveTimeout},e)},s(i,n)}return c(t,e),t.prototype.render=function(){return u.default.createElement(h.default,l({},this.props,{childFactory:this._wrapChild}))},t}(u.default.Component);f.displayName="CSSTransitionGroup",f.propTypes={},f.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=f,e.exports=t.default},18636:function(e,t,n){"use strict";var i=n(15934),o=n(74185),r=function(e){return e&&e.__esModule?e:{default:e}},a=function(e,t){if(!i._(e,t))throw TypeError("Cannot call a class as a function")},s=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e},c=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o._(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)};t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=r(n(54946)),d=r(n(88642)),h=r(n(89075)),p=n(34080),m=r(n(87363)),f=r(n(14168)),v=n(61533),g=n(94948),w=[];p.transitionEnd&&w.push(p.transitionEnd),p.animationEnd&&w.push(p.animationEnd),f.default.node,g.nameShape.isRequired,f.default.bool,f.default.bool,f.default.bool,f.default.number,f.default.number,f.default.number;var Z=function(e){function t(){var n,i;a(this,t);for(var o=arguments.length,r=Array(o),c=0;c<o;c++)r[c]=arguments[c];return n=i=s(this,e.call.apply(e,[this].concat(r))),i.componentWillAppear=function(e){i.props.appear?i.transition("appear",e,i.props.appearTimeout):e()},i.componentWillEnter=function(e){i.props.enter?i.transition("enter",e,i.props.enterTimeout):e()},i.componentWillLeave=function(e){i.props.leave?i.transition("leave",e,i.props.leaveTimeout):e()},s(i,n)}return c(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var i=(0,v.findDOMNode)(this);if(!i){t&&t();return}var o=this.props.name[e]||this.props.name+"-"+e,r=this.props.name[e+"Active"]||o+"-active",a=null,s=void 0;(0,u.default)(i,o),this.queueClassAndNode(r,i);var c=function(e){(!e||e.target===i)&&(clearTimeout(a),s&&s(),(0,d.default)(i,o),(0,d.default)(i,r),s&&s(),t&&t())};n?(a=setTimeout(c,n),this.transitionTimeouts.push(a)):p.transitionEnd&&(w.length?w.forEach(function(e){return i.addEventListener(e,c,!1)}):setTimeout(c,0),s=function(){w.length&&w.forEach(function(e){return i.removeEventListener(e,c,!1)})})},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,h.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,u.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,m.default.cloneElement(m.default.Children.only(this.props.children),e)},t}(m.default.Component);Z.displayName="CSSTransitionGroupChild",Z.propTypes={},t.default=Z,e.exports=t.default},86196:function(e,t,n){"use strict";var i=n(15934),o=n(74185),r=function(e){return e&&e.__esModule?e:{default:e}},a=function(e,t){if(!i._(e,t))throw TypeError("Cannot call a class as a function")},s=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e},c=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o._(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)};t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=r(n(71923)),d=r(n(87363)),h=r(n(14168));r(n(9344));var p=n(95777);h.default.any,h.default.func,h.default.node;var m=function(e){function t(n,i){a(this,t);var o=s(this,e.call(this,n,i));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,p.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,p.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,p.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState(function(t){var n=l({},t.children);return delete n[e],{children:n}})},o.childRefs=Object.create(null),o.state={children:(0,p.getChildMapping)(n.children)},o}return c(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,p.getChildMapping)(e.children),n=this.state.children;for(var i in this.setState({children:(0,p.mergeChildMappings)(n,t)}),t){var o=n&&n.hasOwnProperty(i);!t[i]||o||this.currentlyTransitioningKeys[i]||this.keysToEnter.push(i)}for(var r in n){var a=t&&t.hasOwnProperty(r);!n[r]||a||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var i=e.state.children[n];if(i){var o="string"!=typeof i.ref,r=e.props.childFactory(i),a=function(t){e.childRefs[n]=t};r===i&&o&&(a=(0,u.default)(i.ref,a)),t.push(d.default.cloneElement(r,{key:n,ref:a}))}};for(var i in this.state.children)n(i);var o=l({},this.props);return delete o.transitionLeave,delete o.transitionName,delete o.transitionAppear,delete o.transitionEnter,delete o.childFactory,delete o.transitionLeaveTimeout,delete o.transitionEnterTimeout,delete o.transitionAppearTimeout,delete o.component,d.default.createElement(this.props.component,o,t)},t}(d.default.Component);m.displayName="TransitionGroup",m.propTypes={},m.defaultProps={component:"span",childFactory:function(e){return e}},t.default=m,e.exports=t.default},82238:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}},o=i(n(86950)),r=i(n(86196));e.exports={TransitionGroup:r.default,CSSTransitionGroup:o.default}},9344:function(e){"use strict";e.exports=function(){}},95777:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return i.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}t=t||{};var i={},o=[];for(var r in e=e||{})t.hasOwnProperty(r)?o.length&&(i[r]=o,o=[]):o.push(r);var a=void 0,s={};for(var c in t){if(i.hasOwnProperty(c))for(a=0;a<i[c].length;a++){var l=i[c][a];s[i[c][a]]=n(l)}s[c]=n(c)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s};var i=n(87363)},94948:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return Error(t+" must be a number (in milliseconds)")}return null}},i(n(87363));var o=i(n(14168));t.nameShape=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,leave:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterActive:o.default.string,leave:o.default.string,leaveActive:o.default.string,appear:o.default.string,appearActive:o.default.string})])},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=main-question-routes.8a3133a53c5998142b7f.js.map