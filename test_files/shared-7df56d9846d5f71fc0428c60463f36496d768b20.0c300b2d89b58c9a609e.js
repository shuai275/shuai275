(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[4428],{69725:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(14168),d=n.n(u),p=n(87363),h=n(94944),f=n(50373),m=n(74128),v=n(43447),g=n(25628),b=n.n(g),C=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,o=e.onChange,r=e.className;return(0,s.tZ)("div",{className:b()("RadioButtons",r),children:t.map(function(e,t){var r=e.value,i=e.text,a=e.placeholder;return(0,s.BX)("label",{className:"RadioButtons-item",children:[(0,s.tZ)("span",{className:"RadioButtons-text",children:i}),(0,s.tZ)("input",{type:"radio",className:"RadioButtons-input",value:r,checked:n===r,onChange:function(){return o(r,a)}})]},t)})})}}]),n}(p.PureComponent);(0,a._)(C,"propTypes",{options:d().arrayOf(d().shape({value:d().string,text:d().string,placeholder:d().string})).isRequired,value:d().string,onChange:d().func,className:d().string});var Z=function(){return Promise.all([n.e(8133),n.e(4379),n.e(6229),n.e(8691),n.e(8689),n.e(8400),n.e(2540),n.e(5560)]).then(n.bind(n,72474))},y=v.PK.map(function(e){var t=e.code,n=e.description,o=e.placeholder;return{text:n,value:String(t),placeholder:o}}),_=function(e){var t=v.PK.find(function(t){return t.code===e});return t&&t.description},w=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{selectedReasonCode:null,isReasonDescriptionEmpty:!0}),(0,a._)((0,o._)(e),"handleReasonCodeChange",function(t,n){e.setState({selectedReasonCode:Number(t),selectedReasonPlaceholder:n||""}),e.input&&e.input.resetWithValue(n||"")}),(0,a._)((0,o._)(e),"handleAddAnnotation",function(){var t=e.props,n=t.addAnnotation,o=t.type,r=t.urlToken,i=t.showNotification,a=t.onClose;n(o,r,e.state.selectedReasonCode,e.input.toHTML()).then(function(){a(),i&&i("标记内容成功")})}),(0,a._)((0,o._)(e),"handleReasonDescriptionChange",function(t){e.setState({isReasonDescriptionEmpty:t.isEmpty})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,o=t.shown,r=t.className,i=this.state,a=i.selectedReasonCode,l=i.isReasonDescriptionEmpty,c=i.selectedReasonPlaceholder,u=_(a),d=a===v.NW;return(0,s.tZ)(m.Z,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:r,children:o&&(0,s.BX)("div",{children:[(0,s.BX)("div",{className:"AddAnnotationModal-body",children:[(0,s.tZ)(C,{options:y,onChange:this.handleReasonCodeChange,value:String(a)}),a&&(0,s.BX)("div",{children:[(0,s.BX)("div",{className:"AddAnnotationModal-description",children:[u,"（",d?"必填":"选填","）"]}),(0,s.tZ)(f.Z,{getComponent:Z,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:c,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange})]})]}),(0,s.tZ)(m.w,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup",children:(0,s.tZ)(h.ZP,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!a||d&&l,children:"标记"})})]})})}}]),n}(p.PureComponent);(0,a._)(w,"propTypes",{addAnnotation:d().func.isRequired,onClose:d().func.isRequired,shown:d().bool.isRequired,type:d().oneOf([v.R8,v.oP,v.zs]).isRequired,urlToken:d().oneOfType([d().number,d().string]),showNotification:d().func,className:d().string})},65423:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(14168),d=n.n(u),p=n(87363),h=n(74351),f=n(17132),m=n.n(f),v=n(94944),g=n(69719),b=n(74128),C=n(43447),Z=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{isReasonDescriptionEmpty:!0}),(0,a._)((0,o._)(e),"handleCancelAnnotation",function(){var t=e.props,n=t.cancelAnnotation,o=t.type,r=t.urlToken,i=t.showNotification,a=t.onClose;n(o,r,C.n,e.input.value).then(function(){a(),i&&i("撤销标记成功")})}),(0,a._)((0,o._)(e),"handleReasonDescriptionChange",function(t){return e.setState({isReasonDescriptionEmpty:t.isEmpty})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,o=t.shown,r=t.className,i=this.state.isReasonDescriptionEmpty;return(0,s.tZ)(b.Z,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:r,children:o&&(0,s.BX)("div",{className:"CancelAnnotationModal",children:[(0,s.tZ)(g.Z,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),(0,s.BX)(b.w,{direction:"horizontal",children:[(0,h.isBrowser)()&&!m()(window.navigator.userAgent).Mobile&&(0,s.tZ)(v.ZP,{onClick:n,size:"spread",children:"取消"}),(0,s.tZ)(v.ZP,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:i,children:"撤销标记"})]})]})})}}]),n}(p.PureComponent);(0,a._)(Z,"propTypes",{cancelAnnotation:d().func.isRequired,onClose:d().func.isRequired,shown:d().bool.isRequired,type:d().oneOf([C.R8,C.oP,C.zs]).isRequired,urlToken:d().oneOfType([d().number.isRequired,d().string.isRequired]),showNotification:d().func,className:d().string})},43447:function(e,t,n){"use strict";n.d(t,{NW:function(){return a},PK:function(){return c},R8:function(){return o},n:function(){return l},oP:function(){return r},zs:function(){return i}});var o=0,r=1,i=2,a=32300,l=32305,c=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}]},6307:function(e,t,n){"use strict";n.d(t,{Z:function(){return eZ}});var o=n(55164),r=n(94009),i=n(49899),a=n(85879),l=n(30037),c=n(29229),s=n(83537),u=n(65733),d=n(58216),p=n(25628),h=n.n(p),f=n(88329),m=n.n(f),v=n(87363),g=n.n(v),b=n(36695),C=n(87641),Z=n(93206),y=n(69383),_=n(43384),w=n(1733),k=n(47842),x=n(7116),S=n(99158),E=n(38889),I=n(19495),T=n(30361),N=n(63362),A=n(102),B=n(12667),R=n(57386),P=n(24794),z=n(65939),L=n(89897),M=n(53990),D=n(80714),U=n(66263),O=n(85576),F=n(25076),q=n(92994),V=n(58909),H=n(7407),X=n(4773),G=n(41492),K=n(57477),j=n(71728),W=n(58245),Y=n(99878),Q=function(e){var t,n,o,r,i=e.startTime,l=e.endTime,c=e.target,s=e.status,u=e.abnormalReason,d=c.parentObject,p=d.id,h=d.title,f=c.object.id,m=null;return 0===s?(t="已保存草稿",n="GBK06A",m=(0,a.tZ)(Y.N,{}),o="GBK06A"):1===s?(t="发布中...",n="GBK06A",o="GBK06A"):2===s?"审核中"===u?(t="审核中",n="GBL05A",m=(0,a.tZ)(Y.N,{}),o="GBK06A"):(t="已投稿",n="GBL01A",m=(0,a.tZ)(Y.N,{}),o="GBK03A"):3===s&&(t="发布失败",n="GRD03A",m=(0,a.tZ)(Y.N,{}),o="GBK06A",r=!0),{status:s,statusText:t,statusColor:n,StatusIcon:m,titleColor:o,hasAbnormalInfo:r,startTime:Math.floor(i/1e3),endTime:Math.floor(l/1e3),questionId:p,title:h,answerId:f,abnormalReason:u}},$=function(e){var t=e.status,n=e.questionId,r=e.answerId,i=e.children,l=(0,j._)(e,["status","questionId","answerId","children"]);return 2===t?(0,a.tZ)(C.Link,(0,K._)((0,o._)({target:"_blank",href:"https://www.zhihu.com/question/".concat(n,"/answer/").concat(r),css:{display:"block",cursor:"pointer"}},l),{children:i})):(0,a.tZ)(C.Box,(0,K._)((0,o._)({},l),{children:i}))},J={已保存草稿:"已保存草稿",发布失败:"发布失败",已投稿:"投稿成功",审核中:"审核中","发布中...":"发布中..."},ee={已保存草稿:"继续编辑",发布失败:"修改草稿",已投稿:"已投稿",审核中:"查看投稿","发布中...":""},et=function(e){var t=e.item,n=(0,j._)(e,["item"]),r=Q(t),i=r.status,l=r.statusText,c=r.statusColor,s=r.StatusIcon,u=r.titleColor,d=r.hasAbnormalInfo,p=r.questionId,h=r.title,f=r.answerId,m=r.abnormalReason;return(0,a.BX)($,(0,K._)((0,o._)({py:"20px",css:function(e){return(0,o._)({},0===i&&{cursor:"pointer"},(0,W.M)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},status:i,questionId:p,answerId:f},n),{children:[(0,a.BX)(C.Flex,{color:c,alignItems:"center",mb:"8px",fontSize:"12px",children:[(0,a.tZ)(C.Text,{children:J[l]}),(0,a.tZ)(C.Text,{ml:"auto",fontWeight:"bold",css:function(e){return{color:e.colors.GBL01A}},children:ee[l]}),l===J.发布失败?null:s]}),(0,a.tZ)(C.Text,{color:u,fontSize:"14px",children:h}),d&&(0,a.tZ)(C.Text,{p:"8px",mt:"8px",color:"GBK03A",fontSize:"14px",css:function(e){return{borderRadius:2,backgroundColor:e.colorMod(e.colors.GRD03A).alpha(.08)}},children:m})]}))},en=n(66980),eo=Object.assign,er=function(e){return g().createElement(en.Z,eo({width:"14",height:"16",fill:"none",viewBox:"0 0 14 16"},e),g().createElement("path",{fill:"#8590A6",fillRule:"evenodd",d:"M1 2.666c0-.736.597-1.333 1.334-1.333h9.333c.736 0 1.334.597 1.334 1.333v10.667c0 .736-.598 1.333-1.334 1.333h-1.666a.333.333 0 0 1-.334-.333v-4A2.333 2.333 0 0 0 7.334 8h-6A.333.333 0 0 1 1 7.667v-5Zm2.667 0a.667.667 0 1 0 0 1.334h6.667a.667.667 0 1 0 0-1.333H3.667ZM3 6c0-.368.299-.667.667-.667H9a.667.667 0 0 1 0 1.334H3.667A.667.667 0 0 1 3 6Zm-2 4.334a1 1 0 0 1 1-1h5.333a1 1 0 0 1 1 1v3.333a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3.333Zm5.167 1.377a.333.333 0 0 1 0 .578l-2 1.154a.333.333 0 0 1-.5-.288v-2.31c0-.256.277-.417.5-.288l2 1.154Z",clipRule:"evenodd"}))},ei=(0,v.forwardRef)(function(e,t){var n=e.label,r=e.onClick,i=(0,j._)(e,["label","onClick"]);return(0,a.tZ)(_.$U,{zaText:!0,zaType:"Button",zaBlock:"VideoContributeButton",className:"ContentItem-action",children:(0,a.tZ)(E.ZP,(0,o._)({ref:t,preset:"plain",onClick:r,icon:er,label:n},i))})}),ea=n(71783),el=(0,O.Z)(function(e){var t=e.isLiked,n=e.onClick,r=e.showIcon,i=e.authRequired,l=(e.currentUser,e.isLogin,(0,j._)(e,["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"])),c=(0,u.Z)(function(e){var o=!t,r=o?"Like":"UnLike";y.Z.trackEvent(e.target,{id:7448,action:r}),i(function(){return n(o)})()});return(0,a.tZ)(E.ZP,(0,o._)({preset:"plain",onClick:c,icon:void 0===r||r?ea.sh:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},l))}),ec=n(9338),es=n(30971),eu=n(6779),ed=n(57730),ep=n(61255),eh=n(29769),ef=(0,v.forwardRef)(function(e,t){var n=e.onClick,r=(0,j._)(e,["onClick"]);return(0,a.tZ)(E.ZP,(0,o._)({ref:t,preset:"plain",onClick:n,icon:eu.T,label:"设置"},r))}),em=function(e){var t,n,r,i=e.className,l=e.zvideo,c=e.onEdit,s=e.onToggleVisibility,u=e.onRemove,d=e.onChangeCommentPermission,p=e.togglerProps,f=(0,b.useDispatch)(),m=l.id,g=l.commentPermission,Z=l.isVisible,y=l.creationRelationship,_=null==y?void 0:null===(n=y.coCreation)||void 0===n?void 0:null===(r=n.bizInfo)||void 0===r?void 0:r.canCancelPermission,k=(0,v.useCallback)((t=(0,ec._)(function(e){var t;return(0,es.__generator)(this,function(n){switch(n.label){case 0:return t="视频删除后将不可恢复",[4,f((0,G.Hi)(m)).then(function(e){var n=e.payload.message;n&&(t=n)})];case 1:return n.sent(),ed.Z.confirm((0,a.tZ)(C.Text,{textAlign:"center",children:t}),{title:"确定删除视频",text:{ok:"删除视频"}}).then(function(){u(e)}),[2]}})}),function(e){return t.apply(this,arguments)}),[f,m,u]),x=(0,a.BX)(a.HY,{children:[(0,a.tZ)(w.sN,{onClick:c,children:"编辑视频"}),(0,a.tZ)(w.sN,{onClick:s,children:"在视频列表内".concat(Z?"隐藏":"显示")}),(0,a.tZ)(w.R,{}),(0,a.tZ)(eh.rt,{current:g,target:l,onChange:d}),(0,a.tZ)(w.R,{}),(0,a.tZ)(w.sN,{onClick:k,children:"删除"})]});return(0,a.tZ)(w.ZP,{arrowed:!!_,className:h()("ZVideoSettingMenu",i),itemClassName:"ZVideoSettingMenu-item",toggler:(0,a.tZ)(ef,(0,o._)({},p)),reversed:!0,children:_?(0,a.tZ)(w.sN,{children:(0,a.tZ)(ep.ZY,{contentType:"zvideo",contentId:m})}):x})},ev=n(50436),eg=n(28814),eb={up:1,neutral:0,down:-1};function eC(e){var t,p,f,g,Z,x=(0,b.useDispatch)(),O=e.className,K=e.zvideo,j=e.author,W=e.commentsShown,Y=e.onCommentButtonClick,Q=void 0===Y?m():Y,$=e.renderOptions,J=e.renderActionButtons,ee=e.enableContribute,en=void 0!==ee&&ee,eo=e.customShareTitle,er=e.authRequired,ea=K.id,ec=K.title,es=K.description,eu=K.voting,ed=K.voteCount,ep=K.voteupCount,eh=K.commentCount,ef=K.isLiked,eC=K.isFavorited,eZ=K.contribute,ey=K.video,e_=K.video,ew=(void 0===e_?{}:e_).duration,ek=void 0===ew?0:ew,ex=K.isOgv,eS=(t=K.creationRelationship,f="string"==typeof(p=(0,ev.YJ)(t))?p:null==p?void 0:p.urlToken,g=(0,b.useSelector)(function(e){return(0,eg.np)(e,{urlToken:f})}),t?null!=g?g:p:null),eE=(0,V.xw)(eS),eI=(0,V.xw)(j)&&!eE,eT=eI||eE,eN=(0,H.dD)(),eA=(0,v.useMemo)(function(){return parseInt(1e3*ek)},[ek]),eB=(0,v.useMemo)(function(){return{id:ea,video:ey}},[ea,ey]),eR=(0,c.Z)(function(){return Promise.all([n.e(8091),n.e(6765)]).then(n.bind(n,59908))}),eP=(0,X.fh)(ea),ez=(0,r._)((0,v.useState)(!1),2),eL=ez[0],eM=ez[1],eD=(0,X.cF)(ea).answer,eU=(void 0===eD?{}:eD).canContribute,eO=void 0!==eU&&eU,eF=!!((null==eZ?void 0:null===(Z=eZ.contributeList)||void 0===Z?void 0:Z.length)||(null==eZ?void 0:eZ.totals)),eq=en&&!eN&&eI&&eF,eV=en&&!eN&&eI&&eO&&!eF,eH=(0,r._)((0,F.Z)("zvideo_toolbar:should_hide_contribution_tooltip"),2),eX=eH[0],eG=eH[1],eK=(0,v.useRef)();(0,s.Z)(function(){return eG(!0)},!eX&&eV?5e3:null);var ej=(0,v.useCallback)(function(){eM(!0),x((0,X.ub)(ea,"edit"))},[ea,x]),eW=(0,v.useCallback)(function(){return x((0,X.Xg)({zvideoId:ea,target:"answer",duration:eA}))},[x,ea,eA]),eY=(0,v.useCallback)(function(e){return x((0,G.qO)(ea,eb[e]))},[ea,x]),eQ=(0,v.useCallback)(function(e){x((0,G.SL)(ea,e))},[x,ea]),e$=(0,r._)((0,v.useState)(!1),2),eJ=e$[0],e0=e$[1],e1=er(function(e){e0(!0),y.Z.trackEvent(e.target,{id:8213,action:"Collect",is_intent:!eC})},U.q0.favlists),e2=(0,v.useCallback)(function(){e0(!1)},[]),e4=(0,v.useCallback)(function(e,t){x((0,G.ER)(ea,t))},[ea,x]),e3=(0,v.useCallback)(function(){x((0,G.MM)(ea))},[ea,x]),e5=(0,v.useCallback)(function(){x((0,G.W2)(ea)).then(function(){if(j){var e="https://www.zhihu.com/people/".concat(j.urlToken,"/zvideos");window.location.href=e}})},[ea,j,x]),e7=(0,r._)((0,v.useState)(null),2),e6=e7[0],e8=e7[1],e9=(0,r._)((0,v.useState)(!1),2),te=e9[0],tt=e9[1],tn=(0,r._)((0,v.useState)(!1),2),to=tn[0],tr=tn[1];(0,v.useEffect)(function(){te&&!e6&&x((0,G.eJ)(ea)).then(function(e){e8(e.payload)})},[ea,te,e6,x]),(0,v.useEffect)(function(){eI&&!eN&&en&&eW()},[eI,eW,eN,en]);var ti=(0,q.Z)(q.d.zvideoToolbar).publish,ta=(0,v.useCallback)(function(e){ti(ea,e).then(function(){x((0,X.__)(ea));var e="https://www.zhihu.com/zvideo/".concat(ea);window.location.href=e})},[ea,x,ti]),tl=(0,r._)((0,v.useState)(!1),2),tc=tl[0],ts=tl[1],tu=(0,l.qC)().blockStrategies,td=(0,S.Z)([(0,S.m)(tu)],J),tp=td({componentList:[{name:"favlist",component:(0,a.tZ)(N.Z,{onClick:e1,label:"收藏",showIcon:!eN},"favlist")},{name:"like",component:(0,a.tZ)(el,{isLiked:ef,onClick:eQ,showIcon:!eN},"like")},{name:"report",component:!eT&&(0,a.tZ)(R.Z,{id:ea,type:"zvideo",onModalShown:ts},"report")}]}).filter(Boolean),th=(0,v.useCallback)(function(){e8(null),tt(!1),x((0,G.dc)(ea))},[x,ea]),tf=(0,u.Z)(function(e){ej(),x((0,X.O)(e.id)),tr(!1)}),tm=(0,u.Z)(function(e){eW(),x((0,G.dc)(e)),eM(!1)}),tv=L.Z;return(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{css:{marginBottom:"14px"},children:(0,a.BX)(T.eX,{className:h()("ZVideoToolbar",O),children:[td({componentList:[{name:"vote",component:(0,a.tZ)(z.Z,{type:"zvideo",count:ep||ed,voting:eu,onVote:eY,isOwner:eI,zaIds:{voteUp:6599,voteDown:6600}},"vote")},{name:"comment",component:(0,a.tZ)(I.Z,{onClick:Q,commentsShown:void 0!==W&&W,count:eh,positionStatus:"normal"},"comment")},{name:"share",component:(0,a.tZ)(P.Z,{id:ea,type:"zvideo",url:"https://".concat(D.Z.wwwHost,"/zvideo/").concat(ea).concat(ex?"?page=ogv":""),title:eo||ec,authorName:null==j?void 0:j.name,positionStatus:"normal"},"share")}]}),eN?(0,a.BX)(w.ZP,{preventCloseOnTarget:!0,globalClose:!tc,menuContainerClassName:"ZVideoToolbar-menuContainer",toggler:(0,a.tZ)(E.ZP,{preset:"plain",icon:d.AZ,"aria-label":"更多"}),children:[tp.map(function(e){return(0,a.tZ)(w.sN,{className:"ZVideoToolbar-menuItem",children:e},e.key)}),!eT&&$()]}):(0,i._)(tp).concat((0,i._)(eT?[]:$())),eq&&(0,a.tZ)(ei,{label:"全部投稿",onClick:function(){x((0,X.ub)(ea)),tr(!0)}}),eV&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(ei,{ref:eK,label:"添加投稿",onClick:ej}),(0,a.tZ)(B.Z,{placement:"top",isOpen:!eX,target:eK.current,children:"投稿到问题，让更多人看到你的视频"})]}),eT&&(0,a.tZ)(em,(0,o._)({zvideo:K,onEdit:function(){return tt(!0)},onToggleVisibility:e3,onChangeCommentPermission:e4,onRemove:e5},eN&&{togglerProps:{label:null}}))]})}),eI&&(0,a.tZ)(k.Z,{className:"ZVideoToolbar-videoFormModal",title:"编辑视频",size:"fullPage",onClose:th,css:{width:"734px",".Modal-inner":{"::-webkit-scrollbar":{display:"none"}},".Modal-title":{marginLeft:32}},children:te&&e6&&(0,a.tZ)(M.Z,{defaultVideo:e6,onSubmit:ta,onRemove:th})}),(0,a.tZ)(A.E,{id:ea,type:"zvideo",shown:eJ,onClose:e2,zaEnabled:!0}),en&&!eN&&eI&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(k.Z,{title:(0,a.BX)(C.Flex,{px:"24px",justifyContent:"space-between",children:[(0,a.tZ)(C.Text,{fontSize:"24px",color:"GBK02A",children:"全部视频回答投稿"}),eO&&(0,a.tZ)("button",{css:function(e){return{width:90,height:34,border:"none",borderRadius:3,fontSize:14,fontWeight:"normal",color:e.colors.GBL01A,backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.08)}},onClick:function(){ej(),tr(!1)},children:"添加投稿"})]}),css:function(e){return{width:536,height:554,backgroundColor:e.colors.GBK99A,".Modal-title":{marginTop:24},".Modal-inner::-webkit-scrollbar":{display:"none"}}},onClose:function(){return tr(!1)},children:to&&eP.map(function(e){return(0,a.tZ)(et,(0,o._)({item:e},0===e.status&&{onClick:function(){tf(e)}}),e.id)})}),!!eR&&(0,a.tZ)(_.eV,{block:"Contribution",children:(0,a.tZ)(tv,{show:eL,defaultVideo:eB,title:ec,description:es,duration:eA,onClose:function(){tm(ea)},shouldPublish:!0})})]})]})}eC.defaultProps={renderOptions:function(){return[null]},renderActionButtons:x.Z};var eZ=(0,Z.compose)(O.Z)(eC)},64194:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(87363),d=n(14168),p=n.n(d),h=n(69383),f=n(12506),m=n(20072),v=n(98151),g=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{expanded:!0}),(0,a._)((0,o._)(e),"handleTitleClick",function(t){h.Z.trackEvent((0,o._)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)}),(0,a._)((0,o._)(e),"renderHeader",function(){var t=e.props,n=t.title,o=t.url,r=t.author;return(0,s.BX)("div",{className:"AbstractCard-header",children:[(0,s.BX)("div",{className:"AbstractCard-desc",children:[(0,s.tZ)("span",{role:"button",tabIndex:0,className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(o,n)},children:n}),(0,s.tZ)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),(0,s.tZ)(v.Z,{zaId:6120,className:"AbstractCard-author",author:r,preset:"plain"})]})}),(0,a._)((0,o._)(e),"renderContent",function(){var t=e.props,n=t.content,o=t.member.name,r=t.theme;return(0,s.BX)("div",{className:"AbstractCard-content",children:[(0,s.tZ)("div",{className:"AbstractCard-text AbstractCard-text--".concat(r),children:n}),(0,s.tZ)("div",{className:"AbstractCard-tip",children:(0,s.BX)("span",{className:"AbstractCard-info",children:[o," 摘录于 ",e.createdFormat]})})]})}),e}return(0,i._)(n,[{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return(0,f.Z)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}},{key:"componentDidMount",value:function(){(0,m.y3)(this.node,function(){h.Z.trackCardShow(null,{id:6118})})}},{key:"render",value:function(){var e=this;return(0,s.BX)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}}]),n}(u.Component);(0,a._)(g,"propTypes",{title:p().string.isRequired,url:p().string.isRequired,author:p().object,member:p().object,content:p().string.isRequired,created:p().number,theme:p().string.isRequired}),t.Z=g},7116:function(e,t,n){"use strict";function o(e){return e.componentList.filter(Boolean).filter(function(e){return!!e.component}).map(function(e){return e.component})}n.d(t,{Z:function(){return o}})},99158:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},m:function(){return l}});var o=n(49899),r=n(7116),i=new Map([["vote","isBlockingVote"],["comment","isBlockingComment"],["like","isBlockingLike"],["favlist","isBlockingCollect"],["collect","isBlockingCollect"],["thank","isBlockingLike"],["share","isBlockingShare"]]);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Z;return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=e.length>0?e.reduce(function(e,t){return[t.apply(void 0,(0,o._)(e))]},(0,o._)(r)):(0,o._)(r);return t.apply(void 0,(0,o._)(a))}}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return{componentList:t.componentList.map(function(t){var n=t.name,o=t.component;return i.has(n)&&e[i.get(n)]?{name:n,component:null}:{name:n,component:o}})}}}},35139:function(e,t,n){"use strict";n.d(t,{HS:function(){return L},W9:function(){return o.Z}});var o=n(7116),r=n(85879),i=n(20857),a=n(22107),l=n(94707),c=n(87320),s=n(86325),u=n(55164),d=n(57477),p=n(49899),h=n(85626),f=n(71783),m=n(92769),v=n.n(m),g=n(14168),b=n.n(g),C=n(87363),Z=n(36695),y=n(93206),_=n(69383),w=n(43384),k=n(1733),x=n(38889),S=n(83215),E=n(80714),I=n(66263),T=n(4802),N=n(85576),A=n(3028),B=n(8866),R={answer:b().object.isRequired,renderThankButtonText:b().func,zaInfo:b().number},P=(0,p._)(Object.keys(R)).concat(["updateAnswerThank","dispatch","authRequired","isLogin","currentUser"]),z=function(e){(0,s._)(n,e);var t=(0,h._)(n);function n(){var e;return(0,a._)(this,n),e=t.apply(this,arguments),(0,c._)((0,i._)(e),"buttonRef",(0,C.createRef)()),(0,c._)((0,i._)(e),"handleUpdateThanked",e.props.authRequired(function(){var t=e.props,n=t.answer,o=n.id,r=n.relationship,i=(void 0===r?{}:r).isThanked,a=t.zVideoId,l=t.updateAnswerThank,c=t.zaInfo,s=t.answer,d=!i;_.Z.trackEvent(e.buttonRef.current,(0,u._)({action:d?"Thank":"UnThank",element:"Button"},c&&{id:c})),l(o,d,{zVideoId:a},s)},I.q0.thank)),e}return(0,l._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,o=t.renderThankButtonText,i=t.disabled,a=n.relationship,l=(void 0===a?{}:a).isThanked,c=v()(this.props,P),s=o(n);return E.Z.isMobileEntry?(0,r.tZ)(k.sN,(0,d._)((0,u._)({ref:this.buttonRef,onClick:this.handleUpdateThanked},c),{children:s})):(0,r.BX)(r.HY,{children:[(0,r.tZ)(S.bY,{input:"l",action:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}),(0,r.tZ)(w.$U,(0,u._)({as:x.ZP,zaType:"Button",zaAction:l?"UnLike":"Like",zaText:!0,onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:f.sh,label:s,disabled:i,"aria-live":"polite"},c))]})}}]),n}(C.Component);(0,c._)(z,"propTypes",R),(0,c._)(z,"defaultProps",{renderThankButtonText:function(e){var t=e.relationship,n=(void 0===t?{}:t).isThanked,o=e.question.title;return(0,T.Z)(o,I.lH)?n?"取消祈祷":"祈祷":n?"取消喜欢":"喜欢"}});var L=(0,y.compose)(N.Z,(0,Z.connect)(null,{updateAnswerThank:B.TC}),(0,A.Z)(null))(z)},7237:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var o,r,i=n(49899),a=n(85879),l=n(87363),c=n(30037),s=n(23579),u=n(7116),d=n(99158),p=n(30361);(o=r||(r={})).Vote="vote",o.Comment="comment",o.Like="like",o.Favlist="favlist",o.Collect="collect",o.Thank="thank",o.Share="share",o.Unknown="unknown";var h=r,f=function(e){return{componentList:e.componentList.map(function(e,t){var n=e.name,o=e.component;return(0,l.isValidElement)(o)?{name:n,component:(0,l.cloneElement)(o,{key:o.key||n===h.Unknown?n+t:n})}:{name:n,component:o}})}},m=function(e){var t=e.className,n=e.renderChildren,o=e.compatibleRenderActionButtons,r=e.middlewares,l=(0,c.qC)().blockStrategies,m=(0,d.Z)([(0,d.m)(l),f].concat((0,i._)(void 0===r?[]:r)),o||u.Z);return(0,a.tZ)(p.eX,{className:t,css:function(e){return{display:"flex",alignItems:"center",padding:"10px 16px",margin:"0 -16px -10px",color:e.colors.GBK04A,background:e.colors.GBK99A,clear:"both","&.is-fixed":{margin:0,boxShadow:"0 -1px 3px ".concat((0,s.a)(e.colors.GBK02A).alpha(.1))},"& > *":{flexShrink:0},"& > .AnnotationTag":{whiteSpace:"nowrap"}}},children:m({componentList:(null==n?void 0:n(h))||[]})})}},82058:function(e,t,n){"use strict";var o=n(85879),r=n(21060),i=n(98211),a=n(85576);t.Z=(0,a.Z)(function(e){var t=e.hide,n=e.stickyBottom,a=e.stickyContainer,l=e.contentType,c=e.contentId,s=e.zaContentType,u=e.children,d=e.onPositionStatusChange,p=e.authRequired,h=e.useProvider;if(t)return null;var f=void 0===h||h?(0,o.tZ)(i.Rj,{loginCheck:p([function(){return!0},function(){return!1}]),contentType:l,contentId:c,zaContentType:s,children:u}):u;return n?(0,o.tZ)(r.Z,{bottom:!0,container:a,onPositionStatusChange:d,children:f}):f})},74045:function(e,t,n){"use strict";n.d(t,{Ks:function(){return o.Z},sF:function(){return m},XD:function(){return c}});var o=n(82058),r=n(85879),i=n(98211),a=n(65733),l=n(65939),c=function(e){var t=e.defaultVoteUpCount,n=e.defaultStatus,o=e.onChange,c=e.disabled,s=(0,i.Rv)(t||0,n,o),u=s.voteUpCount,d=s.isVotedUp,p=s.isVotedDown,h=s.voteUp,f=s.voteDown,m=s.cancel,v=(0,a.Z)(function(e){switch(e){case"up":return h();case"down":return f();default:return m()}});return(0,r.tZ)(l.Z,{count:u,voting:d?1:p?-1:0,onVote:v,isOwner:c})},s=n(55164),u=n(57477),d=n(71728),p=n(71783),h=n(38889),f=(0,n(85576).Z)(function(e){var t=e.isLiked,n=e.onClick,o=e.showIcon,i=e.authRequired,l=(e.currentUser,e.isLogin,(0,d._)(e,["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"])),c=(0,a.Z)(function(){return i(function(){return n(!t)})()});return(0,r.tZ)(h.ZP,(0,s._)({preset:"plain",onClick:c,icon:void 0===o||o?p.ZP:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},l))}),m=function(e){var t=e.currentIsLiked,n=e.onClick,o=(0,d._)(e,["currentIsLiked","onClick"]),a=(0,i.Tq)({currentIsLiked:t}),l=a.isLiked,c=a.like,p=a.unLike;return(0,r.tZ)(f,(0,u._)((0,s._)({},o),{isLiked:l,onClick:function(e){e?c():p(),null==n||n(e)}}))}},78233:function(e,t,n){"use strict";n.d(t,{Z:function(){return x},_:function(){return k}});var o=n(55164),r=n(57477),i=n(85879),a=n(83697),l=n(65733),c=n(84871),s=n.n(c),u=n(87363),d=n(36695),p=n(29439),h=n(68749),f={gte:{current:["click_tracks"],next:["view_tracks","view_x_tracks"]},lt:{current:["view_tracks","view_x_tracks","click_tracks"],next:["impression_tracks"]}},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,h.cd)(e,void 0,t)};function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.j;Array.isArray(e)&&Promise.race([Promise.all(e.filter(Boolean).map(function(e){return/^https?:\/\/.+\.zhihu\.com/.test(e)?n(e,t):n(e)})).catch(function(){return null}),new Promise(function(e){return setTimeout(e,500)})])}function g(e){var t=e.data,n=void 0===t?"":t,o=e.type,r=e.action,i=void 0===r?"":r,a=e.userAgent,l=void 0===a?{}:a,c=e.contentSign,s=(0,u.useState)(i),d=(0,p.Z)(s,2),g=d[0],b=d[1];return(0,u.useEffect)(function(){!function(e,t,n,o){if(e){var r=(0,h.M$)(n).version,i=f[(0,h.yC)(r,"6.29.0")>=0?"gte":"lt"][e]||[];if(o){i.forEach(function(e){if("click_tracks"!==e){var t={contentSign:o,type:e.replace(/_tracks$/,"").replace(/_(\w)/g,function(e,t){return t.toUpperCase()})};m(t,function(){return console.log("EPluginTrack-sendTypeTrack-fail: ",t)})()}});return}if(t){var a=JSON.parse(t);i.forEach(function(e){v(a[e])})}}}(o,n,l,c)},[c,n,o,l]),(0,u.useEffect)(function(){i!==g&&(b(i),function(e,t,n){if(e){if(n){var o={contentSign:n,type:e};m(o,function(){return console.log("EPluginTrack-sendActionTrack-fail: ",o)})();return}t&&v(JSON.parse(t).conversion_tracks,{et:e,ets:new Date().getTime()})}}(i,n,c))},[i,g,n,c]),null}var b=n(65033),C=n(22712),Z=n(91269),y=n(76435),_=n(83821),w=function(e){var t=e.type,n=e.id,o=e.index,r=(0,d.useSelector)(function(e){return e.adPromotion[t][n]}),l=(0,b.zc)(),c=(0,a.n)();return(0,u.useEffect)(function(){l&&t&&n&&(0,Z.nX)("".concat(t,"-").concat(n,"-").concat(o),l)},[l,t,n,o]),l?(0,i.tZ)(g,{userAgent:c,action:r,data:l}):null},k=function(e){var t=e.dataPath;return function(e){return s()(function(n){var a,c=null!==(a=n[t])&&void 0!==a?a:{},s=c.type,u=c.id,p=(0,d.useDispatch)(),h=(0,b.zc)(),f=(0,l.Z)(function(e){h&&s&&u&&p((0,C.Cz)({type:s,id:u,currentAction:e}))}),m=(0,l.Z)(function(){return f(C.SE.comments.show)}),v=(0,l.Z)(function(){return f(C.SE.comments.close)}),g=(0,l.Z)(function(){return f(C.SE.comments.publish)}),Z=(0,l.Z)(function(e){return f(e?C.SE.follow:C.SE.revertFollow)}),y=(0,l.Z)(function(){return f(C.SE.shareClick)});return(0,i.tZ)(e,(0,r._)((0,o._)({},n),{trackOpenCommentAdPromotion:m,trackCloseCommentAdPromotion:v,trackToggleFollowAdPromotion:Z,trackShareAdPromotion:y,trackPublishCommentAdPromotion:g}))},e)}},x=function(e){return(0,i.tZ)(y.SV,{replacement:null,children:(0,i.tZ)(_.Z,{children:(0,i.tZ)(w,(0,o._)({},e))})})}},4059:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(85879);function r(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,r=t.reasonDescription;return(0,o.tZ)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":r})}},14214:function(e,t,n){"use strict";var o=n(94009),r=n(61533),i=n(87363),a=n(7835);t.Z=function(e){var t=e.disabled,n=e.children,l=(0,o._)((0,i.useState)(null),2),c=l[0],s=l[1];return((0,a.Z)(function(){s(document.querySelector("#AnswerFormPortalContainer"))}),t)?n:!!c&&(0,r.createPortal)(n,c)}},44990:function(e,t,n){"use strict";n.d(t,{Z:function(){return rO}});var o=n(20857),r=n(9338),i=n(22107),a=n(94707),l=n(87320),c=n(86325),s=n(55164),u=n(57477),d=n(94009),p=n(79065),h=n(49899),f=n(85626),m=n(30971),v=n(85879),g=n(47631),b=n(82806),C=n.n(b),Z=n(25628),y=n.n(Z),_=n(72280),w=n(14914),k=n(14168),x=n.n(k),S=n(87363),E=n.n(S),I=n(36695),T=n(19076),N=n(87641),A=n(93206),B=n(69383),R=n(43384),P=n(2979),z=n(74128),L=n(99447),M=n(57730),D=n(22701),U=n(21060),O=n(67516),F=n.n(O),q=n(44169),V=n(92120),H=n(38889),X=n(30851),G=Object.assign;function K(e){var t;return E().createElement(X.Z,G(G({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--InfoCircle24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M12 20.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17Zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Zm1.11-14.79a1.11 1.11 0 1 1-2.22 0 1.11 1.11 0 0 1 2.22 0Zm-1.31 4.208a.07.07 0 0 1 .02-.006h.007c.006.002.016.005.026.013.01.009.015.018.017.023l.002.008c0 .003 0 .009-.003.019l-1.152 4.507c-.312 1.224.941 2.264 2.132 1.77 0 0 1.09-.557 1.461-.848.371-.291.46-.478.334-.765-.168-.388-.542-.513-.928-.352l-1.457.604a.067.067 0 0 1-.018.006.03.03 0 0 1-.009 0 .058.058 0 0 1-.025-.014.057.057 0 0 1-.018-.022.046.046 0 0 1-.002-.008c0-.003 0-.009.003-.019l1.152-4.507c.313-1.224-.849-2.388-2.131-1.77l-1.457.605c-.387.16-.594.534-.405.97.18.415.598.31 1.081.187l.077-.019 1.294-.382Z",clipRule:"evenodd"}))}var j=n(80230),W=n(36798),Y=n(38455),Q=function(e,t){var n=e.store,o=e.getSentences;return Promise.resolve(null==o?void 0:o()).then(function(e){if(null==e?void 0:e.length){var o=n.getEditorState(),r=o.getCurrentContent(),i=r.getBlockMap();e.filter(function(e){var t;return(null==e?void 0:null===(t=e.position)||void 0===t?void 0:t.start)&&e.position.end}).forEach(function(e){var a=e.position,l=a.start,c=l.paragraphId,s=l.offset,u=a.end,d=u.paragraphId,p=u.offset,h=null,f=null,m=p,v=i.skipUntil(function(e){var t,n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),o=e.getKey();return n===c&&(h=o,!0)}).takeUntil(function(e){if(f)return!0;var t,n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),o=e.getKey();return n===d&&(f=o,m=Math.min(e.getLength(),p)),!1});if(!h||!f){console.error("句子互动：无法找到对应的互动句子，startPid：".concat(c,"，startKey：").concat(h,"，endPid：").concat(d,"，endKey：").concat(f));return}var g=j.SelectionState.createEmpty(h).merge({anchorOffset:s,focusKey:f,focusOffset:m});r=j.Modifier.applyInlineStyle(r,g,"INTERACT"),o=j.EditorState.set(o,{currentContent:r}),n.setEditorState(o),t(v)})}})},$=n(62082),J=n(54231),ee=n(84871),et=n.n(ee),en=n(80714),eo=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,a._)(n,[{key:"componentDidCatch",value:function(e,t){var n,o,r,i,a=null!==(o=(0,J.j0)())&&void 0!==o?o:"Unknown",l=null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"Unknown",c=null!==(i=this.props.currentUser)&&void 0!==i?i:"Unknown",s=en.Z.release;(0,$.Tb)(e,{logger:"EditorErrorReport",fingerprint:["editor-fail"],extra:{passWhitelistUrlsTest:!0,pageName:a,currentUser:c}});var u={type:"EditorRenderError",appName:"heifetz",spanName:a,currentUser:c,release:s,error:{name:l,message:e.message,stack:e.stack,payload:e.payload||"Unknown",componentStack:t.componentStack}};throw(0,$.zB)(u),null===(n=window.webReporter)||void 0===n||n.report("heifetz_editor_error",u),e}},{key:"render",value:function(){return this.props.children}}]),n}(S.Component),er=(0,I.connect)(function(e){return{currentUser:e.currentUser}})(eo),ei=n(75056),ea=n(7181),el=function(){return(0,v.tZ)(R.eV,{block:"MarkdownTips",children:(0,v.BX)(N.Text,{color:"GBL05A",ml:"24px",fontSize:14,children:[(0,v.tZ)(R.Wi,{zaType:"Popup",zaText:"Markdown 识别中"}),"Markdown 语法识别中",(0,v.tZ)(ea.Z,{arrowed:!0,toggleEvent:"hover",toggler:(0,v.tZ)(H.ZP,{icon:ei.ZP,preset:"plain",css:{marginLeft:5}}),children:(0,v.BX)(N.Box,{height:64,width:253,px:14,py:12,fontSize:14,css:function(e){return{color:e.colors.GBK02A}},children:[(0,v.tZ)(R.Wi,{zaType:"Popup",zaText:"Markdown 识别中 - 气泡"}),"可在「工具栏」-「更多」中关闭此模式，支持语法请参考「帮助文档」"," "]})})]})})},ec=n(91850),es=n(89965),eu=n.n(es),ed=n(82644),ep=(0,S.createContext)({updateFormData:function(){},formData:{}}),eh=n(67927),ef=n(66980),em=Object.assign,ev=function(e){return E().createElement(ef.Z,em({width:"20",height:"20",fill:"#06F",viewBox:"0 0 20 20"},e),E().createElement("path",{d:"m4.635 4.884-1.133.647 4.944 8.65 1.132-.647-4.943-8.65Z"}),E().createElement("path",{d:"M18.342 3.003 5.524 4.429l5.093 8.991a1.534 1.534 0 0 1 .14 1.153 1.488 1.488 0 0 1-1.25 1.102 1.448 1.448 0 0 1-1.096-.31 1.501 1.501 0 0 1-.377-.45l-4.975-8.79L2 6.76l5.042 8.882c.23.405.558.742.952.98a2.623 2.623 0 0 0 2.612.056 2.69 2.69 0 0 0 .99-.938l7.306-11.792a.622.622 0 0 0-.233-.883.588.588 0 0 0-.327-.062Zm-8.056 4.902a1.175 1.175 0 0 1-.665-.203 1.214 1.214 0 0 1-.442-.546 1.245 1.245 0 0 1 .256-1.331 1.17 1.17 0 0 1 1.301-.267 1.2 1.2 0 0 1 .536.45 1.24 1.24 0 0 1-.146 1.538 1.18 1.18 0 0 1-.84.36Zm3.82-.114a.756.756 0 0 1-.424-.14.781.781 0 0 1-.278-.357.802.802 0 0 1 .181-.853.762.762 0 0 1 .841-.154c.14.063.257.166.34.297a.798.798 0 0 1 .12.44.795.795 0 0 1-.23.556.761.761 0 0 1-.55.222v-.011Z"}))},eg=n(3681),eb=n(95939),eC=n(49274),eZ=n(47842),ey={INVITED_TASK:"品牌任务",EVALUATE_TASK:"众测任务"},e_={CHEESE:"CHEESE",COMMERCIAL_VIP:"COMMERCIAL_VIP"},ew={FE_INIT:"FE_INIT",BINDING:"BINDING",UNBIND:"UNBIND"},ek=function(e){var t=(null==e?void 0:e.bindTaskDTO)||{},n=t.taskType,o=t.taskId,r=t.taskName;return[ey[n],o,r].join("  ").trim()},ex=function(e){var t=e.visible,n=e.onClose,o=e.onConfirm,r=e.value,i=e.taskList,a=void 0===i?[]:i,l=(0,d._)((0,S.useState)(r),2),c=l[0],s=l[1];return(0,S.useEffect)(function(){var e,n;t&&(null==r?void 0:null===(e=r.bindTaskDTO)||void 0===e?void 0:e.taskId)!==(null==c?void 0:null===(n=c.bindTaskDTO)||void 0===n?void 0:n.taskId)&&s(r)},[t]),(0,v.tZ)(eZ.Z,{title:"选择芝士任务",size:"large",onClose:n,children:t&&(0,v.BX)(N.Box,{children:[(0,v.tZ)(N.Box,{color:"GBK02A",maxHeight:"50vh",mr:"-24px",pr:"24px",overflowY:"auto",children:(null==a?void 0:a.length)?a.map(function(e){var t;return(0,v.BX)(N.Flex,{flex:1,py:"12px",justifyContent:"space-between",alignItems:"center",css:function(e){var t=e.colors;return{cursor:"pointer",borderBottom:"1px solid ".concat(t.GBK09A)}},as:"label",children:[(0,v.tZ)(N.Text,{fontSize:"14px",children:ek(e)}),(0,v.tZ)(eb.Z,{checked:(null==c?void 0:null===(t=c.bindTaskDTO)||void 0===t?void 0:t.taskId)===e.bindTaskDTO.taskId,onChange:function(){s(e)}})]},e.bindTaskDTO.taskId)}):(0,v.tZ)(eC.H.EI1,{image:"default",content:"没有可绑定的任务"})}),(0,v.BX)(N.Flex,{mt:"32px",justifyContent:"center",children:[(0,v.tZ)(H.ZP,{preset:"outline",color:"grey",css:{width:"168px",marginRight:"16px"},onClick:n,children:"取消"}),(0,v.tZ)(H.ZP,{preset:"primary",color:"blue",css:{width:"168px"},disabled:!c,onClick:function(){o(c)},children:"确认"})]})]})})},eS=function(e){var t=e.value,n=e.onChange,o=e.taskList,r=e.disabled,i=void 0!==r&&r,a=e.onOpen,l=void 0===a?function(){return!0}:a,c=(0,d._)((0,ec.Z)(!1),2),u=c[0],p=c[1],h=(0,R.Q4)().trackEvent;(0,S.useEffect)(function(){i&&u&&p.off()},[i,u,p]);var f=ek(t),m=function(){h({eventType:"Click",elementLocation:{type:"Text",text:f||"选择绑定芝士任务",block:{blockText:"PublishSettingZhiTaskBind"}}}),p.on()};return(0,v.BX)(N.Flex,{flex:1,alignItems:"center",children:[(0,v.BX)(R.Wi,{zaType:"Text",zaText:!0,view:{elementLocation:{block:{blockText:"PublishSettingZhiTaskBind"}}},as:N.Flex,p:"3px 0",alignItems:"center",fontSize:"14px",color:"GBL05A",css:function(e){var n=e.colors;return(0,s._)({cursor:i?"not-allowed":"pointer",opacity:i?.5:1},t?{padding:"3px 14px",background:"rgba(0, 102, 255, .1)",borderRadius:"15px",color:n.GBL01A}:{})},onClick:function(){if(!i){var e=l();eu()(null==e?void 0:e.then)?e.then(m):!1!==e&&m()}},children:[(0,v.tZ)(ev,{css:function(e){var n=e.colors;return{fill:t?n.GBL01A:n.GBL05A,flexShrink:0}}}),(0,v.tZ)(N.Text,{mx:"4px",title:f||"",css:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:f||"选择绑定芝士任务"}),t&&!i&&(0,v.tZ)(ed.HN,{size:"14px",css:{flexShrink:0},onClick:function(e){e.stopPropagation(),null==n||n(null)}})]}),(0,v.tZ)(ex,{visible:u,value:t,taskList:o,onClose:p.off,onConfirm:function(e){null==n||n(e),p.off()}})]})},eE=function(e){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:"芝士任务",title:"芝士任务绑定",helper:(0,v.tZ)("p",{children:"如该内容为芝士任务投稿内容，需在此处进行对应任务的绑定操作，请在发布前认真检查绑定关系，内容发布后关系即刻生效。"})}),(0,v.tZ)(eS,(0,s._)({},e))]})},eI=function(e){var t=e.taskList,n=e.commercialZhitaskBindInfo,o=e.onChange,r=(0,d._)((0,S.useState)(null),2),i=r[0],a=r[1],l=!!n,c=function(e){o(e),a(e)};return(0,S.useEffect)(function(){(null==n?void 0:n.bindStatus)===ew.BINDING&&c(n)},[l]),(0,v.tZ)(eE,{taskList:t,disabled:(null==i?void 0:i.bindStatus)===ew.BINDING,value:i,onChange:function(e){return c(e)}})},eT=function(e){var t=e.taskList,n=e.isAnonymous,o=(0,I.useDispatch)(),r=(0,S.useContext)(ep),i=r.updateFormData,a=(0,r.getFormData)().commercialZhitaskBindInfo,l=(0,S.useCallback)(function(e){i({commercialZhitaskBindInfo:e})},[i]);return(0,S.useEffect)(function(){(null==a?void 0:a.bindStatus)===ew.UNBIND&&l(null)},[a,l]),(0,v.tZ)(eE,{taskList:t,disabled:(null==a?void 0:a.bindStatus)===ew.BINDING,value:a,onChange:l,onOpen:function(){if(n)return o((0,eh.c0)("已经启用匿名的内容不能进行芝士任务绑定","red")),!1}})},eN=n(48710),eA=n(65733),eB=n(43897),eR=n(86172),eP=n(89694),ez=n(41492),eL=n(77263),eM=n(53438),eD=n(99178),eU=n(76435),eO=n(91486),eF=n(80565);function eq(e){var t=e.item,n=e.onCheck,o=(0,d._)((0,S.useState)(!1),2),r=o[0],i=o[1],a=t.id,l=t.title,c=t.description,s=t.imageUrl,u=t.publishedAt,p=t.video,h=null==p?void 0:p.duration;return(0,v.BX)(N.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[(0,v.BX)(N.Flex,{flex:1,children:[(0,v.BX)(N.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[(0,v.tZ)(N.Image,{width:"100%",height:"100%",src:s,alt:"",css:{objectFit:"cover"}}),(0,v.tZ)(N.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:(0,eP.LU)(h)})]}),(0,v.BX)(N.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[(0,v.tZ)(N.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[(0,eF.S)(1)],children:l}),(0,v.tZ)(N.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[(0,eF.S)(1)],children:c}),(0,v.tZ)(N.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:(0,q.rL)(u)})]})]}),(0,v.tZ)(eO.C,{css:{marginLeft:16,flexShrink:0},checked:r,onChange:function(e){i(e.currentTarget.checked),n(a)}})]})}function eV(e){var t,n=e.onClose,o=e.onSubmit,r=(0,d._)((0,S.useState)([]),2),i=r[0],a=r[1],l=(0,I.useSelector)(function(e){return e.zvideos.insertable})||{},c=l.isLoading,s=l.data,u=l.paging,p=(0,I.useDispatch)(),h=(0,S.useCallback)(function(){p((0,ez.Fn)())},[p]),f=(0,S.useCallback)(function(e){i.includes(e)?a(i.filter(function(t){return t!==e})):a(i.concat([e]))},[i]);return(0,v.BX)(N.Box,{height:688,children:[(0,v.tZ)(N.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),(0,v.tZ)(eD.ZP,{css:{marginBottom:100},onLoad:h,isLoading:null!=c&&c,isDrained:null!==(t=null==u?void 0:u.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:s.map(function(e,t){return(0,v.tZ)(eU.SV,{children:(0,v.tZ)(eq,{item:e,onCheck:f})},t)})}),(0,v.BX)(N.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[(0,v.tZ)(H.ZP,{css:{flex:1},onClick:n,children:"返回"}),(0,v.tZ)(H.ZP,{disabled:0===i.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){o(i),n()},children:"添加"})]})]})}var eH=function(e){var t=e.show,n=e.onZVideoSubmit,o=e.onVideoSubmit,r=e.onClose,i=((0,I.useSelector)(function(e){return e.zvideos.insertable})||{}).data,a=(0,d._)((0,S.useState)(!1),2),l=a[0],c=a[1],u=(0,d._)((0,S.useState)(!1),2),p=u[0],h=u[1],f=(0,I.useDispatch)(),m=function(){if((null==i?void 0:i.length)>0){h(!0);return}f((0,ez.Fn)()).then(function(e){e.payload.data.length?h(!0):f((0,eh.c0)("还没有发布过视频"))})},g=(0,eA.Z)(function(e){var t=(0,eP.D3)(e),n=t.message,r=t.abortUpload,i=t.validFiles;n&&(f((0,eh.c0)(n,r?"red":"white")),r)||o({value:i[0]})});return t?(0,v.BX)(eZ.Z,{css:{width:688},onClose:r,children:[p&&(0,v.tZ)(eV,{onSubmit:n,onClose:function(){h(!1)}}),!p&&(0,v.BX)(v.HY,{children:[(0,v.tZ)(N.Text,{fontSize:"24px",color:"GBK02A",lineHeight:"34px",fontWeight:500,m:"40px 0 30px",textAlign:"center",children:"导入视频"}),(0,v.BX)(N.Flex,{flexDirection:"column",alignItems:"center",width:"440px",height:"300px",margin:"0 auto 45px",css:function(e){return(0,s._)({border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:4},l&&{borderColor:e.colors.GBL05A,"*":{pointerEvents:"none"}})},onDragOver:function(e){return e.preventDefault()},onDragEnter:function(){return c(!0)},onDragLeave:function(){return c(!1)},onDrop:function(e){e.preventDefault(),g((0,eR.Z)(e))},children:[(0,v.tZ)(eB.z,{size:90,css:function(e){return{color:l?e.colors.GBL05A:e.colors.GBK09A,marginTop:66}}}),(0,v.tZ)(N.Text,{color:"GBK03A",fontSize:"20px",lineHeight:"28px",fontWeight:"500",mt:"16px",children:"拖放要导入的视频文件"}),(0,v.BX)(N.Box,{mt:"20px",children:[(0,v.tZ)(eL.Z,{text:"导入视频",multiple:!1,css:{width:142},zaBlockText:"UploadVideoFile",onFiles:g}),(0,v.tZ)(H.ZP,{preset:"secondary",color:"blue",css:{width:142,marginLeft:12,padding:"0 14px",whiteSpace:"nowrap"},onClick:function(e){B.Z.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),m()},children:"选择已发布的视频"})]})]}),(0,v.tZ)(eM.Z,{})]})]}):null},eX={1:49,2:50,r:82,t:84,e:69},eG=n(35102),eK=n(23113),ej=n(6148),eW=n(38765),eY=n(93547),eQ=n(85576),e$=n(26921),eJ=n(65379),e0=n(8866),e1=n(26267),e2=n(58909),e4=n(7407),e3=n(39288),e5=(0,e3.FH)("interactText",["GET_INTERACT_TEXT"]),e7=n(10416),e6=n(71240),e8=n(9435),e9=n(96354),te=function(e){var t=e.shown,n=e.onClose;return(0,v.tZ)(eZ.Z,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&(0,v.tZ)("div",{className:"SlideshowEditBlockModal",children:(0,v.tZ)(H.ZP,{preset:H.EE.Primary,color:H.rp.Blue,onClick:n,children:"知道了"})})})};te.propTypes={shown:x().bool.isRequired,onClose:x().func.isRequired};var tt=n(85703),tn=n(11809),to=n(20944),tr=n(45074),ti=n(59013),ta=function(e){var t=e.shown,n=e.onClose,o=e.onSubmit,r=(0,S.useCallback)(function(e){var t=e.type,r=e.payload;if("browser/closeCurrentPage"===t){n();return}if("editor/submitAttachment"===t){o(r.files);return}},[o,n]);return(0,v.tZ)(eZ.Z,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&(0,v.tZ)("div",{className:"BaiduFileSelector-content",children:(0,v.tZ)(P.Z,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:r})})})},tl=(0,S.forwardRef)(function(e,t){var n=(0,d._)((0,S.useState)(!1),2),o=n[0],r=n[1];return(0,S.useImperativeHandle)(t,function(){return{setBaiduFileSelectorShown:r}},[]),(0,v.tZ)(ta,{shown:o,onClose:function(){return r(!1)},onSubmit:function(t){r(!1),e.onSubmit(t)}})}),tc=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return(0,ti.Z)(e.getEditorState()).filter(function(e){return"file-link-card"===e.getType()})},o=function(){if(n().size>=10){M.Z.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")});return}e.containerRef.current.setBaiduFileSelectorShown(!0)};return e.containerRef=(0,S.createRef)(),{initialize:function(t){Object.assign(e,t)},components:(0,v.tZ)(tl,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),handleCommand:function(e){return"insert-file-from-baidu-wangpan"===e?(o(),"handled"):"not-handled"},toolbar:{section:tn.Z.CUSTOM_MAIN,label:"上传附件",icon:tr._,toolType:D._W.ENTITY,onClick:function(){if(n().size>=10){M.Z.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")});return}e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:to.Z.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:tr._,toolType:D._W.ENTITY,onClick:function(){o()},priority:2}}},ts=n(33773),tu=n(74065),td=n(70877),tp=n(78160),th=n(6715),tf=Object.assign,tm=function(e){return E().createElement(ef.Z,tf({width:"150",height:"120",viewBox:"0 0 150 120"},e),E().createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0 0 98.998 28H50.002A2.996 2.996 0 0 0 47 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0 1 44 93V30.997A5.996 5.996 0 0 1 50.002 25h48.996A5.996 5.996 0 0 1 105 30.998V93a2 2 0 0 1-.396 1.2l-4.112-2.66z"}),E().createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 0 1-.999.999H56a.993.993 0 0 1-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 1 1 0 3h-35.99A1.499 1.499 0 0 1 55 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 1 1 0 3h-24.99A1.499 1.499 0 0 1 55 75.5z"}))},tv={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},tg=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,o._)(e),"formatDate",function(e){return tp.Z("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")}),(0,l._)((0,o._)(e),"handleDraftClick",function(e){e.preventDefault()}),e}return(0,a._)(n,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,o=e.draftId,r=e.draftType,i=t.isFetching,a=t.data;return(0,v.BX)("div",{className:"DraftHistory-main",children:[i&&(0,v.tZ)(td.Z,{className:"DraftHistory-loading"}),!i&&a&&(0,v.BX)(S.Fragment,{children:[a.draft.title&&(0,v.tZ)("div",{className:"DraftHistory-draftTitle",children:a.draft.title}),(0,v.tZ)("div",{className:"DraftHistory-draft",children:(0,v.tZ)(th.Z,{html:a.draft.content,onClick:this.handleDraftClick,sourceType:r,sourceId:o})}),(0,v.BX)("div",{className:"DraftHistory-actions",children:[(0,v.BX)("div",{className:"DraftHistory-meta",children:[this.formatDate(a)," ",tv[a.versionType]]}),(0,v.tZ)(H.ZP,{className:"DraftHistory-revert",disabled:"current"===a.versionType,onClick:function(){return n(a)},children:"恢复此版本"})]})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,o=t.currentVersion,r=t.currentDraft,i=t.getHistory,a=t.onSelect;return n?n.isFetching&&!n.items?(0,v.tZ)("div",{className:"DraftHistory",children:(0,v.tZ)(td.Z,{className:"DraftHistory-loading"})}):(0,v.BX)("div",{className:"DraftHistory",children:[(0,v.BX)("div",{className:"DraftHistory-side",children:[(0,v.tZ)("div",{className:"DraftHistory-title",children:"历史版本"}),(0,v.tZ)(eD.ZP,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:i,children:(0,v.tZ)("div",{children:n.items&&n.items.map(function(t,n){return(0,v.BX)("a",{href:"#",className:y()("DraftHistory-version",{"DraftHistory-version--selected":o&&t.versionType===o.versionType&&t.id===o.id}),onClick:function(e){e.preventDefault(),a(t)},children:[(0,v.tZ)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),(0,v.tZ)("div",{className:"DraftHistory-versionType",children:tv[t.versionType]})]},n)})})})]}),n.items&&!n.items.length&&(0,v.tZ)("div",{className:"DraftHistory-main",children:(0,v.BX)("div",{className:"DraftHistory-empty",children:[(0,v.tZ)(tm,{className:"DraftHistory-emptyIcon"}),(0,v.tZ)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),r&&this.renderCurrentDraft()]}):null}}]),n}(S.Component);(0,l._)(tg,"propTypes",{history:x().object,currentVersion:x().object,currentDraft:x().object,onSelect:x().func,onRevert:x().func});var tb=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,o._)(e),"state",{currentVersion:null}),(0,l._)((0,o._)(e),"getHistory",function(){var t=e.props,n=t.type,o=t.id;(0,t.getHistory)(n,o)}),(0,l._)((0,o._)(e),"handleSelect",function(t){e.setState({currentVersion:t})}),(0,l._)((0,o._)(e),"handleRevert",function(t){var n=e.props,o=n.revert,r=n.onReverted;o(t.versionType,t.id).then(function(){r&&r(t)})}),e}return(0,a._)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,o=n.drafts,r=n.getDraft,i=this.state.currentVersion,a=t.currentVersion;!i||a&&a.versionType===i.versionType&&a.id===i.id||o["".concat(i.versionType,"_").concat(i.id)]||r(i.versionType,i.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,o=e.draftId,r=e.draftType,i=this.state.currentVersion;return(0,v.tZ)(tg,{history:t,currentVersion:i,currentDraft:i?n["".concat(i.versionType,"_").concat(i.id)]:null,draftId:o,draftType:r,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),n}(S.Component);(0,l._)(tb,"propTypes",{type:x().string.isRequired,id:x().number.isRequired,onReverted:x().func});var tC=(0,I.connect)(function(e,t){var n=t.type,o=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(o)],drafts:e.draftHistory.drafts}},{getHistory:tu.s1,getDraft:tu.eJ,revert:tu.CU,reset:tu.mc})(tb),tZ=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,o._)(e),"handleReverted",function(t){var n=e.props,o=n.onClose,r=n.onReverted;r&&r(t),o&&o(),B.Z.trackEvent(null,{id:5016,action:"Click"})}),(0,l._)((0,o._)(e),"handleClose",function(){var t=e.props.onClose;t&&t(),B.Z.trackEvent(null,{id:5015,action:"Click"})}),e}return(0,a._)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,o=e.id,r=e.draftId,i=e.draftType;return(0,v.tZ)(eZ.Z,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&(0,v.tZ)(tC,{type:n,id:o,draftId:r,draftType:i,onReverted:this.handleReverted})})}}]),n}(S.Component);(0,l._)(tZ,"propTypes",{shown:x().bool.isRequired,onClose:x().func,type:x().string.isRequired,id:x().number.isRequired,onReverted:x().func}),(0,l._)(tZ,"defaultProps",{shown:!0});var ty=(0,S.forwardRef)(function(e,t){var n,o,r=e.type,i=e.id,a=e.getId,l=e.handleReverted,c=e.draftId,s=e.draftType,u=e.getDraftId,p=(0,d._)((0,S.useState)(!1),2),h=p[0],f=p[1],m=(0,eA.Z)(function(){return f(!0)}),g=(0,eA.Z)(function(){return f(!1)});return(0,S.useImperativeHandle)(t,function(){return{handleOpen:m,handleClose:g}},[m,g]),(0,v.tZ)(tZ,{shown:h,onClose:function(){return f(!1)},type:r,id:null!==(n=null==a?void 0:a())&&void 0!==n?n:i,draftId:null!==(o=null==u?void 0:u())&&void 0!==o?o:c,draftType:s,onReverted:l})}),t_=function(e){var t=e.type,n=e.id,o=e.syncDraft,r=e.getId,i=e.getDraftId,a=e.draftId,l=e.draftType,c=e.shouldShowToolbarButton,s={};return s.draftModalRef=(0,S.createRef)(null),{initialize:function(e){Object.assign(s,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(s.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[(0,v.tZ)(ty,{type:t,id:n,getId:r,draftId:a,getDraftId:i,draftType:l,ref:s.draftModalRef,handleReverted:function(e){s.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:ts.x8,onClick:function(){o.flush(),s.draftModalRef.current.handleOpen(),B.Z.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:void 0===c?function(){return!0}:c}}},tw=n(71728),tk=n(24486),tx=n(29229),tS=n(83697),tE=n(83688),tI=n(25405),tT=n(40933),tN=n(28545),tA=n(11690),tB=n(59280),tR=n(21706),tP=n(15881),tz=n(2347),tL=n(16427),tM=Object.assign;function tD(e){var t;return E().createElement(X.Z,tM(tM({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Eraser24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M6.956 17.185c.435.365.985.565 1.552.565h5.245c.572 0 1.114-.253 1.482-.69l.213-.255 4.715-5.62a2.415 2.415 0 0 0-.298-3.401l-5.11-4.288a2.415 2.415 0 0 0-3.402.298l-6.858 8.174a2.415 2.415 0 0 0 .298 3.402l2.122 1.78.041.035Zm1.552-.935a.915.915 0 0 1-.588-.214l-.041-.034-2.122-1.781a.915.915 0 0 1-.113-1.29l6.859-8.173a.915.915 0 0 1 1.289-.113l5.11 4.288a.915.915 0 0 1 .112 1.289l-4.715 5.619-.213.254a.434.434 0 0 1-.333.155H8.508ZM17 21.75a.75.75 0 1 0 0-1.5H5a.75.75 0 0 0 0 1.5h12Z",clipRule:"evenodd"}))}var tU=n(7629),tO=n(47866),tF=n(2325),tq=n(29126),tV=n(65389),tH=n(48936),tX=function(e){var t=e.name,n=e.isFirst;return(0,v.BX)(v.HY,{children:[!n&&(0,v.tZ)(N.Text,{color:"GBK06A",fontSize:"12px",mx:"4px",children:"+"}),(0,v.tZ)(N.Flex,{px:"4px",css:function(e){return[{minWidth:"24px",borderRadius:"2px",height:"24px",lineHeight:"26px",background:e.colors.GBK10C,textAlign:"center",color:e.colors.GBK05A,fontSize:"14px",alignItems:"center",justifyContent:"center"},n&&{marginLeft:"auto"}]},children:t})]})},tG=function(e){var t=e.label,n=e.Icon,o=e.shortcut;return(0,v.BX)(N.Flex,{alignItems:"center",css:{"&+&":{marginTop:"20px"}},children:[(0,v.tZ)(n,{size:20,css:function(e){return{color:e.colors.GBK03A}}}),(0,v.tZ)(N.Text,{ml:"8px",color:"GBK03A",fontSize:"14px",children:t}),o.split("+").map(function(e,t){return(0,v.tZ)(tX,{name:e,isFirst:!t},t)})]})},tK=n(26030),tj=Object.assign;function tW(e){var t;return E().createElement(X.Z,tj(tj({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ItalicBold24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M10.25 2.75a.75.75 0 0 0-.728.568l-4.25 17A.75.75 0 0 0 6 21.25h8a4.75 4.75 0 0 0 2.381-8.86A5.25 5.25 0 0 0 13.5 2.75h-3.25Zm3.25 9a3.75 3.75 0 1 0 0-7.5h-2.664l-1.875 7.5H13.5Zm-4.914 1.5-1.625 6.5H14a3.25 3.25 0 0 0 0-6.5H8.586Z",clipRule:"evenodd"}))}var tY=Object.assign;function tQ(e){var t;return E().createElement(X.Z,tY(tY({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--InlineCode24"+(t?" "+t:"")}),E().createElement("path",{d:"M4 4.25a.75.75 0 0 0 0 1.5h16a.75.75 0 0 0 0-1.5H4ZM11.242 16.434a.75.75 0 0 1-.597-.877l1.419-7.447a.75.75 0 0 1 1.473.28l-1.418 7.447a.75.75 0 0 1-.877.597ZM9.143 8.724a.75.75 0 0 1 0 1.06l-2.082 2.083 2.082 2.083a.75.75 0 1 1-1.06 1.06L5.47 12.397a.75.75 0 0 1 0-1.06l2.613-2.613a.75.75 0 0 1 1.06 0ZM14.857 9.915a.75.75 0 0 1 1.06-1.06l2.613 2.612a.75.75 0 0 1 0 1.061l-2.613 2.613a.75.75 0 1 1-1.06-1.06l2.082-2.083-2.082-2.083ZM3.25 19a.75.75 0 0 1 .75-.75h16a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75Z"}))}var t$=n(93975),tJ=Object.assign;function t0(e){var t;return E().createElement(X.Z,tJ(tJ({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Latex24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"m16.647 7.726-.88-2.281-.879 2.281h1.759Zm.578 1.5.557 1.445a.75.75 0 1 0 1.4-.54l-2.248-5.83c-.412-1.068-1.921-1.068-2.333 0l-2.248 5.83a.75.75 0 1 0 1.4.54l.557-1.445h2.915ZM5.518 3.6a.75.75 0 0 1 .75.75v5.302h3.959a.75.75 0 0 1 0 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V4.35a.75.75 0 0 1 .75-.75Zm12.324 9.623a.75.75 0 1 0-1.158.954l2.1 2.548-2.1 2.549a.75.75 0 1 0 1.158.954l1.914-2.323 1.914 2.323a.75.75 0 1 0 1.158-.954l-2.1-2.549 2.1-2.548a.75.75 0 0 0-1.157-.954l-1.915 2.323-1.914-2.323Zm-9.086.977c0-.69.56-1.25 1.25-1.25h4.21a.75.75 0 0 1 0 1.5h-3.96v1.525h3.406a.75.75 0 0 1 0 1.5h-3.405v1.526h3.959a.75.75 0 0 1 0 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V14.2ZM1.75 12.95a.75.75 0 0 0 0 1.5h1.743v5.301a.75.75 0 0 0 1.5 0v-5.3h1.743a.75.75 0 0 0 0-1.5H1.75Z",clipRule:"evenodd"}))}var t1=function(){var e=(0,I.useSelector)(function(e){return(0,e2.ib)(e)}),t=(0,I.useSelector)(function(e){return e.switches}),n="https://www.zhihu.com";if("undefined"!=typeof window){var o=window.location,r=o.hostname,i=o.origin,a=[".zpres.zhihu.dev",".zpres.zhihu.com"].some(function(e){return r.endsWith(e)}),l=i.replace(/\D+/g,"");a&&l&&(n="https://heifetz--box-".concat(l,"--www-zhihu-com.zpres.zhihu.").concat(r.slice(-3)))}return{jumpUrl:e&&!e.isOrg&&t&&t.isCreator?"".concat(n,"/creator/editor-setting"):"".concat(n,"/knowledge-plan/editor-setting")}},t2=function(e){var t=e.name,n=e.describe,o=e.isFirst;return(0,v.BX)(N.Box,{css:function(e){return{color:e.colors.GBK03A,paddingTop:o?"0":"20px"}},fontSize:14,fontWeight:400,children:[(0,v.tZ)(N.Text,{css:function(e){return{color:e.colors.GBK02A}},mb:"8px",fontWeight:500,children:t}),n.map(function(e){return"string"==typeof e?(0,v.tZ)(N.Text,{lineHeight:"20px",children:e}):(0,v.tZ)(v.HY,{children:e})})]})},t4=[{name:"快捷键",component:function(e){var t,n=e.activeTabName,o=(0,tS.n)().isAppleDevice;return(0,v.tZ)(R.Wi,{zaType:"Text",zaText:n,as:N.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:(t="1"===en.Z.apollo.editor_adapt_native,[{icon:tE.Z,label:"粗体",shortcut:"⌘+B",shortcutWin:"Ctrl+B"},{icon:t?tI.ZP:tT.ZP,label:t?"标题":"一级标题",shortcut:"⌘+⌥+1",shortcutWin:"Ctrl+Alt+1"},!t&&{icon:tN.ZP,label:"二级标题",shortcut:"⌘+⌥+2",shortcutWin:"Ctrl+Alt+2"},{icon:tA.ZP,label:"有序列表",shortcut:"⌘+⇧+L",shortcutWin:"Ctrl+Shift+L"},{icon:tB.ZP,label:"无序列表",shortcut:"⌘+L",shortcutWin:"Ctrl+L"},{icon:tR.ZP,label:"引用块",shortcut:"⌘+⇧+U",shortcutWin:"Ctrl+Shift+U"},{icon:tP.Z,label:"代码块",shortcut:"⌘+⌥+C",shortcutWin:"Ctrl+Alt+C"},{icon:tz.ZP,label:"撤销",shortcut:"⌘+Z",shortcutWin:"Ctrl+Z"},{icon:tL.ZP,label:"重做",shortcut:"⌘+Y",shortcutWin:"Ctrl+Y"},{icon:tD,label:"清除格式",shortcut:"⌘+\\",shortcutWin:"Ctrl+\\"},{label:"插入链接",icon:tU.ZP,shortcut:"⌘+K",shortcutWin:"Ctrl+K"},{icon:tO.ZP,label:"目录",shortcut:"⌘+⌥+J",shortcutWin:"Ctrl+Alt+J"},{icon:tF.Z,label:"插入注释",shortcut:"⌘+⌥+R",shortcutWin:"Ctrl+Alt+R"},{icon:tq.Z,label:"插入分割线",shortcut:"⌘+⌥+S",shortcutWin:"Ctrl+Alt+S"},{label:"插入表格",icon:tV.Z,shortcut:"⌘+⌥+T",shortcutWin:"Ctrl+Alt+T"},{label:"插入公式",icon:tH.Z,shortcut:"⌘+⌥+E",shortcutWin:"Ctrl+Alt+E"}].filter(Boolean)).map(function(e,t){var n=e.label,r=e.icon,i=e.shortcut,a=e.shortcutWin;return(0,v.tZ)(tG,{label:n,Icon:r,shortcut:o?i:a},"ShortcutDoc"+t)})})}},{name:"Markdown",component:function(e){var t,n=e.activeTabName,o=t1().jumpUrl;return(0,v.BX)(R.Wi,{zaType:"Text",zaText:n,as:N.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:[(0,v.BX)(N.Box,{fontSize:12,css:function(e){return{color:e.colors.GBK06A,margin:"-10px 0 20px 0"}},children:[(0,v.tZ)(N.Text,{children:"在工具栏-更多中设置为 Markdown 模式后，才会自动识别后续输入内容，转化为对应格式；"}),(0,v.BX)(N.Text,{children:["如你希望每篇内容均为此格式，可在",(0,v.tZ)(N.Link,{css:{cursor:"pointer",textDecoration:"underline",margin:"0 5px"},onClick:function(){return window.open(o)},children:"默认设置"}),"中修改默认编辑器偏好"]})]}),[{icon:(t="1"===en.Z.apollo.editor_adapt_native)?tI.ZP:tT.ZP,label:t?"标题":"一级标题",shortcut:"#+空格"},!t&&{icon:tN.ZP,label:"二级标题",shortcut:"##+空格"},{icon:tA.ZP,label:"有序列表",shortcut:"1+.+空格"},{icon:tB.ZP,label:"无序列表",shortcut:"*+空格"},{icon:tE.Z,label:"粗体",shortcut:"**文字**"},!t&&{icon:tK.ZP,label:"斜体",shortcut:"*文字*"},!t&&{icon:tW,label:"倾斜加粗",shortcut:"***文字***"},{icon:tQ,label:"行内代码",shortcut:"`文字`"},{icon:tP.Z,label:"代码块",shortcut:"```+回车"},{icon:tR.ZP,label:"引用块",shortcut:">+空格"},{icon:tq.Z,label:"分割线",shortcut:"---+回车"},{icon:t$.Z,label:"插入图片",shortcut:"![描述](链接)+空格"},{icon:t0,label:"LaTeX 语法",shortcut:"$$文字$$+空格"},{icon:tU.ZP,label:"插入链接",shortcut:"[标题](链接)+空格"}].filter(Boolean).map(function(e,t){var n=e.label,o=e.icon,r=e.shortcut;return(0,v.tZ)(tG,{label:n,Icon:o,shortcut:r},"MarkdownDoc"+t)})]})}},{name:"功能说明",component:function(e){var t,n=e.activeTabName;return(0,v.tZ)(R.Wi,{zaType:"Text",zaText:n,as:N.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:(t="1"===en.Z.apollo.editor_adapt_native,[{tabName:"目录",describe:["选中工具栏的目录功能后，在编辑器中添加标题，左侧自动识别标题生成目录；",(0,v.BX)(v.HY,{children:[(0,v.tZ)(N.Text,{my:"8px",children:"若不想添加此标题至目录中，可将鼠标悬浮在目录区域的对应标题上，点击「删除」按钮即可移除；"}),(0,v.tZ)(N.Image,{my:"8px",src:t?"https://pic1.zhimg.com/v2-3fe6c6228a545148c1fe24c4f84208f6.png":"https://pic1.zhimg.com/v2-3173fb93f4c628ebc8245a2ae2ecea1d.png?source=6a64a727"}),(0,v.tZ)(N.Text,{my:"8px",children:"若想重新添加标题至目录中，可以在正文中选中此标题，并在目录区域找到对应标题，点击「固定」按钮即可重新添加。"}),(0,v.tZ)(N.Image,{my:"8px",src:t?"https://picx.zhimg.com/v2-17b7a5f82f5dfb856ce853188233d7cd.png":"https://pic2.zhimg.com/v2-1cabcd37bc16361cf95f172fc3ef86f0.png?source=6a64a727"})]})]},{tabName:"代码",describe:[t?"点击工具栏中的代码块图标后，编辑器内生成代码卡片。":"点击工具栏中的代码块图标后，编辑器内生成代码卡片，右上方选择语法，可在代码块中展示语法高亮。"]},{tabName:"公式",describe:["点击工具栏中的公式图标后，在公式编辑器输入 LaTeX 语法，下方为预览区。",(0,v.BX)(v.HY,{children:["您可在",(0,v.tZ)(N.Link,{css:function(e){return{color:e.colors.GBL01A}},target:"_blank",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference",children:"LaTeX基础教程"}),"中参考更多语法"]})]},{tabName:"注释",describe:["点击工具栏中的注释图标，在注释编辑弹框中输入注释文本及链接后，文本对应的注释会出现在文末。"]},{tabName:"历史版本",describe:["点击工具栏中的历史版本后，可在自动保存的草稿版本中查看历史草稿，点击恢复此版本可还原历史草稿。"]},{tabName:"文档导入",describe:["点击工具栏中的文档图标，导入 .docx/.md 文档后，编辑器会自动解析内容并展示在编辑器中。若粘贴图片失败，建议使用文档导入功能。"]}].filter(Boolean)).map(function(e,t){var n=e.tabName,o=e.describe;return(0,v.tZ)(t2,{name:n,describe:o,isFirst:!t},"FunctionDoc"+t)})})}}],t3=function(e){var t=e.children,n=e.className;return(0,v.tZ)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},t5=function(e){var t=e.active,n=(0,tw._)(e,["active"]);return(0,v.tZ)(R.$U,(0,s._)({zaType:"Button",zaText:!0,as:"button",css:function(e){return[{display:"inline-block",width:"88px",borderRadius:"999px",height:"26px",lineHeight:"26px",background:t?e.colorMod(e.colors.primary).alpha(.1):e.colors.GBK10C,textAlign:"center",cursor:"pointer",color:t?e.colors.primary:e.colors.GBK06A,fontSize:"13px",marginRight:"7px",marginBottom:"14px"},t&&{fontWeight:"500"}]}},n))};function t7(e){var t=e.className,o=e.onClose,r=e.getInitialOffset,i=e.getShouldHide,a=(0,d._)((0,S.useState)(0),2),l=a[0],c=a[1],s=t4[l].component,u=(0,tx.Z)(function(){return Promise.all([n.e(5423),n.e(2607),n.e(2174),n.e(5052)]).then(n.bind(n,99063))});return u?(0,v.tZ)(R.eV,{block:"EditorHelpDoc",children:(0,v.BX)(u,{className:t,getInitialOffset:r,getShouldHide:i,children:[(0,v.tZ)(R.Wi,{zaType:"Popup",zaText:"帮助文档"}),(0,v.BX)(N.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"52px",alignItems:"center"},children:[(0,v.tZ)(t3,{css:{fontSize:"18px",lineHeight:"24px"},children:"帮助文档"}),(0,v.tZ)(N.Text,{color:"GBK06A",fontSize:"12px",lineHeight:"17px",fontWeight:"400",ml:"8px",mt:"4px",children:"支持拖拽和调整高度"}),(0,v.tZ)(R.$U,{zaType:"Button",zaAction:"Unknown",zaText:"关闭帮助文档",as:tk.eb,css:{marginLeft:"auto",padding:"16px",cursor:"pointer"},onClick:o})]}),(0,v.BX)(N.Box,{ml:"16px",mr:"9px",pt:"14px",children:[t4.map(function(e,t){return(0,v.tZ)(t5,{active:l===t,onClick:function(){l!==t&&c(t)},children:e.name},t)}),(0,v.tZ)(N.Box,{mr:"7px",sx:{height:"2px",borderBottom:"1px solid",borderColor:"GBK09A",alignItems:"center"}})]}),(0,v.tZ)(N.Box,{px:"16px",css:{height:"calc(100% - 112px)",overflow:"auto"},children:s&&(0,v.tZ)(s,{activeTabName:t4[l].name})})]})}):null}var t6=(0,S.forwardRef)(function(e,t){var n=e.getInitialOffset,o=e.getShouldHide,r=e.forceUpdate,i=(0,d._)((0,ec.Z)(!1),2),a=i[0],l=i[1];return(0,S.useImperativeHandle)(t,function(){return{toggle:l.toggle,getShown:function(){return a}}},[l,a]),a&&(0,v.tZ)(t7,{onClose:function(){l.toggle(),r&&requestAnimationFrame(function(){r()})},getInitialOffset:n,getShouldHide:o})}),t8=function(e){var t=e.getInitialOffset,n=e.getShouldHide,o=e.forceUpdate,r={};return r.helpDocRef=(0,S.createRef)(null),{initialize:function(e){Object.assign(r,e)},handleCommand:function(e){return"toggle-help-document"===e?(r.helpDocRef.current.toggle(),o&&requestAnimationFrame(function(){o()}),"handled"):"not-handled"},queryCommandState:function(e){if("toggle-help-document"===e){var t;return!!(null===(t=r.helpDocRef.current)||void 0===t?void 0:t.getShown())}},components:[(0,v.tZ)(t6,{getInitialOffset:t,getShouldHide:n,ref:r.helpDocRef,forceUpdate:o},"EditorHelpDocContainer")]}},t9=function(e){var t=e.onToggle;return{handleCommand:function(e){return"toggle-markdown-enabled"===e?(t(),"handled"):"not-handled"}}},ne=n(99445),nt=n(97127),nn=function(e){var t=e.sourceType,n=e.sourceId,o=E().createRef(null),r={},i=!1,a=null,l=function(e){i=!0,a=r.getEditorState(),e(),r.setEditorState(a),i=!1},c=function(e,t,n){i?a=(0,ne.Z)(a,"image","IMMUTABLE",(0,u._)((0,s._)({},t?null==e?void 0:e.value:{upload:e}),{size:"normal"}),void 0,{isBatched:!0,isLastOneOfBatch:n}):r.setEditorState((0,ne.Z)(r.getEditorState(),"image","IMMUTABLE",{upload:e,size:"normal"}))};return{initialize:function(e){Object.assign(r,e)},components:[(0,v.tZ)(nt.Z,{ref:o,sourceType:t,sourceId:n,insertImage:function(e,t){l(function(){for(var n=0;n<e.length;n++){var o=n===e.length-1;c({value:e[n]},t,o)}})}},"material_library")],handleCommand:function(e){if("insert-image-from-library"===e){var t;return null===(t=o.current)||void 0===t||t.toggleShown(),"handled"}return"not-handled"},toolbar:{label:"插入图片",section:tn.Z.BASIC_MEDIA,text:"图片",icon:t$.y,priority:2,onClick:function(){var e;null===(e=o.current)||void 0===e||e.toggleShown()}},toolbarV2:[{label:"插入图片",section:to.Z.BASIC_MEDIA,text:"图片",icon:t$.y,priority:2,onClick:function(){var e;null===(e=o.current)||void 0===e||e.toggleShown()}}]}},no=n(86481),nr=n(98151),ni=function(e){var t=e.className,n=e.onClose,o=e.shown,r=e.allInviters,i=e.onChoose;return(0,v.tZ)(z.Z,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:o&&r.map(function(e){return(0,v.BX)(N.Flex,{css:{padding:"12px 0"},children:[(0,v.tZ)(nr.Z,{author:e}),(0,v.tZ)(H.ZP,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){B.Z.trackEvent(null,{id:7682,action:"Click"}),i&&i(e)},children:"选择"})]},e.id)})})},na=n(63573),nl=function(e){var t=e.shown,n=e.hasShown,o=e.children,r=(0,S.useRef)(n),i=(0,S.useRef)(t);return(0,S.useEffect)(function(){!t&&i.current&&(r.current=!0),i.current=t},[t]),t&&!r.current&&o},nc=function(e){var t=e.className,n=e.shown,o=e.hasShown,r=e.inviters,i=e.onConfirm,a=e.onCancel,l=(0,d._)((0,S.useState)(n),2),c=l[0],s=l[1],u=(0,S.useRef)(n);return(0,S.useEffect)(function(){u.current!==n&&s(n),u.current=n},[n]),(null==r?void 0:r.length)>0&&(0,v.tZ)(nl,{shown:c,hasShown:o,children:(0,v.BX)(N.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",justifyContent:"space-between",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[(0,v.BX)(N.Flex,{alignItems:"center",children:[r.map(function(e,t){return(0,v.tZ)(N.Image,{src:r[t].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:r.length-t,marginLeft:t?"-14px":"0"}},e.id)}),(0,v.tZ)(N.Text,{ml:"8px",children:r[0].name+(r.length>1?"等 ".concat(r.length," 人"):"")}),"邀请你回答"]}),(0,v.BX)(N.Flex,{alignItems:"center",children:[(0,v.tZ)(N.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){B.Z.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===r.length?"0":"1"}]},{button:{text:"添加谢邀"}}),i&&i(r)},children:"添加谢邀"}),(0,v.tZ)(N.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){s(!1),B.Z.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===r.length?"0":"1"}]},{button:{text:"忽略"}}),a&&a()},children:"忽略"})]})]})})},ns=function(e){var t;return(null==e?void 0:null===(t=e.thankInviterInfo)||void 0===t?void 0:t.member)?{thankInviterInfo:e.thankInviterInfo.member}:null},nu=function(e){var t;return e?{tableOfContentsEnabled:null==e?void 0:null===(t=e.tableOfContents)||void 0===t?void 0:t.enabled}:null},nd=(0,S.forwardRef)(function(e,t){var n=e.getAllInviters,o=e.inviterQuery,r=e.getStore,i=e.syncDraftImmediately,a=(0,S.useContext)(ep),l=a.updateFormData,c=(0,a.getFormData)().thankInviterInfo,s=(0,d._)((0,S.useState)(!1),2),u=s[0],p=s[1],h=function(e){l({thankInviterInfo:e}),requestAnimationFrame(function(){i()})},f=(0,d._)((0,S.useState)(null),2),m=f[0],g=f[1],b=(0,eA.Z)(function(){return p(!1)});return(0,S.useImperativeHandle)(t,function(){return{openInviterListModal:function(){return p(!0)},getInvitersData:function(){return m},getThankInviterInfo:function(){return c}}},[m,c]),(0,S.useEffect)(function(){n().then(function(e){g(e.payload.data);var t=r();t.setEditorState(t.getEditorState())})},[]),(0,v.BX)(v.HY,{children:[c&&(0,v.tZ)(na.Z,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:c,onDelete:function(){h(null)}}),(null==m?void 0:m.length)>0&&(0,v.tZ)(nc,{hasShown:!!o||!!c,shown:!c,inviters:m,onConfirm:function(e){if(null==e?void 0:e.length){if(1===e.length){h(e[0]);return}p(!0)}}}),(0,v.tZ)(ni,{onClose:b,shown:u,allInviters:m,onChoose:function(e){h(e),b()}})]})}),np=function(e){var t=e.getShouldShowToolbarButton,n=e.getAllInviters,o=e.inviterQuery,r=e.getInitialThankInviterInfo,i=e.syncDraftImmediately,a={},l=(0,S.createRef)(null);return{initialize:function(e){Object.assign(a,e)},componentsBeforeEditor:[{component:(0,v.tZ)(nd,{getAllInviters:n,inviterQuery:o,ref:l,getStore:function(){return a},getInitialThankInviterInfo:r,syncDraftImmediately:i}),priority:0}],toolbar:{label:"添加谢邀",section:tn.Z.CUSTOM_MAIN,priority:3,icon:no.E,onClick:function(){l.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return!!(!(null===(e=null===(t=l.current)||void 0===t?void 0:t.getInvitersData())||void 0===e?void 0:e.length)||(null===(n=l.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:to.Z.BUSINESS_MEDIA,text:"谢邀",icon:no.E,priority:3,onClick:function(){l.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return!!(!(null===(e=null===(t=l.current)||void 0===t?void 0:t.getInvitersData())||void 0===e?void 0:e.length)||(null===(n=l.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}},nh=n(55283),nf=Object.assign;function nm(e){var t;return E().createElement(X.Z,nf(nf({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--MoneyBag24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M6.326 3.132a.75.75 0 0 1 .645-.366h10.046a.75.75 0 0 1 .655 1.114l-1.58 2.848c3.444 1.349 5.543 4.405 5.543 7.72 0 2.254-.992 4.177-2.707 5.519-1.702 1.33-4.078 2.065-6.85 2.065-2.77 0-5.147-.735-6.849-2.065-1.715-1.342-2.707-3.265-2.707-5.519 0-3.274 1.994-6.29 5.37-7.659l-1.58-2.916a.75.75 0 0 1 .014-.741Zm1.905 1.134 1.4 2.58a.75.75 0 0 1-.443 1.075c-3.298.998-5.166 3.68-5.166 6.527 0 1.775.766 3.27 2.132 4.337 1.379 1.079 3.405 1.747 5.925 1.747 2.519 0 4.546-.668 5.925-1.747 1.365-1.068 2.13-2.562 2.13-4.337 0-2.87-1.968-5.605-5.342-6.578a.75.75 0 0 1-.448-1.085l1.399-2.52H8.23Z",clipRule:"evenodd"}),E().createElement("path",{fillRule:"evenodd",d:"M9.777 10.466a.75.75 0 0 1 1.06.056l1.242 1.38 1.242-1.38a.75.75 0 1 1 1.115 1.003l-1.607 1.786v.462h1.5a.75.75 0 0 1 0 1.5h-1.5v1.75a.75.75 0 0 1-1.5 0v-1.75h-1.5a.75.75 0 0 1 0-1.5h1.5v-.462l-1.607-1.786a.75.75 0 0 1 .055-1.059Z",clipRule:"evenodd"}))}function nv(e){return E().createElement(nm,nf(nf({},e),{className:function(){return"ZDI ZDI--Income24"+(e.className?" "+e.className:"")}}))}function ng(e){return E().createElement(nm,nf(nf({},e),{className:function(){return"Zi Zi--Income"+(e.className?" "+e.className:"")}}))}var nb={Ecommerce:"1",Hotel:"2",Tickets:"3",Advertising:"4",Store:"5",RedPacket:"6",Vop:"7",Kepler:"8",SelfPurchase:"9",SelfPublishedBooks:"10",Education:"11"},nC=(0,S.forwardRef)(function(e,t){var n=e.getStore,o=e.getContentInfo,r=(0,d._)((0,S.useState)(!1),2),i=r[0],a=r[1],l=(0,I.useSelector)(function(e){return e.userProfit}).linkCardLimit,c=o(),s=c.id,u=c.type;(0,S.useImperativeHandle)(t,function(){return{setShowUserProfitCardSelector:a}},[]);var p=(0,I.useDispatch)();(0,S.useEffect)(function(){p((0,e9.nh)())},[p]);var h=function(){return(0,ti.Z)(n().getEditorState()).filter(function(e){return"ad-link-card"===e.getType()})};return(0,v.tZ)(v.HY,{children:(0,v.tZ)(eZ.Z,{className:"UserProfitCardSelector",size:"large",onClose:function(){a(!1)},children:i&&(0,v.tZ)("div",{className:"UserProfitCardSelector-content",children:(0,v.tZ)(P.Z,{className:"UserProfitCardSelector-iframe",src:(0,eW.NY)({contentId:s,contentType:u}),onMessage:function(e){var t=n().getEditorRef();if((null==e?void 0:e.type)==="ProfitCardSelector/submitProfitCardInfo"&&(null==e?void 0:e.payload)){var o=e.payload,r=o.type,i=o.id,c=o.url,s=o.preventClose,u=o.goods;if(s||a(!1),"inserLinkCard"===r&&t.props.handleCommand("insert-link-card:".concat(c)),"insertMCNLinkCard"===r){var d=!!u&&(u.productType.toString()===nb.RedPacket||u.productType.toString()===nb.Advertising);if(Array.from(n().getProps().root.querySelectorAll('[data-draft-type="mcn-link-card"]')).filter(function(e){return e.getAttribute("data-mcn-product-type")!==nb.Advertising&&e.getAttribute("data-mcn-product-type")!==nb.RedPacket}).length>=l&&!d&&0!==l){M.Z.alert(null,{title:"一篇内容最多可添加 ".concat(l," 个商品")});return}t.props.handleCommand("insert-mcn-link-card:".concat(i))}if("insertEduCard"===r){if((0,ti.Z)(n().getEditorState()).filter(function(e){return e.getType()===nh.o6.TYPE}).size>=nh.o6.EDU_CARD_LIMIT){M.Z.alert(null,{title:"一篇内容最多可添加 ".concat(nh.o6.EDU_CARD_LIMIT," 个教育卡片")});return}t.props.handleCommand("".concat(nh.o6.WebInsertCommand).concat(i))}if("insertAdLinkCard"===r){if(i.startsWith("ZhiTask_")&&h().filter(function(e){return e.getData().id.startsWith("ZhiTask_")}).size>=5){M.Z.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));return}if(i.startsWith("fee_")&&h().filter(function(e){return e.getData().id.startsWith("fee_")}).size>=1){M.Z.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));return}t.props.handleCommand("insert-ad-link-card:".concat(i))}}}})})})})}),nZ=function(e){var t=e.shouldDisabled,n=e.shouldShow,o=void 0===n?function(){return!0}:n,r=e.getContentInfo,i={};return i.containerRef=(0,S.createRef)(),{initialize:function(e){Object.assign(i,e)},handleCommand:function(e){return"toggle-user-profit-modal"===e?(i.containerRef.current.setShowUserProfitCardSelector(!0),"handled"):"not-handled"},toolbar:{label:"用户收益",icon:ng,shouldShow:o,shouldDisabled:function(){return null!=t&&!!t()||null},section:tn.Z.CUSTOM_MAIN,toolType:D._W.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),B.Z.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"收益",text:"收益",icon:ng,shouldShow:o,shouldDisabled:function(){return!!t()||null},section:to.Z.BUSINESS_MEDIA,toolType:D._W.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),B.Z.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:(0,v.tZ)(nC,{ref:i.containerRef,getStore:function(){return i},getContentInfo:void 0===r?function(){}:r})}},ny=function(){var e=document.createEvent("HTMLEvents");e.initEvent("compositionend",!0,!1),document.querySelector(".public-DraftEditor-content").dispatchEvent(e)},n_=n(48933),nw=function(e){var t=void 0,n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";J.ZP.increment("".concat(e,".").concat(t,".").concat(n,".").concat(o,".default.default.count"))},o=function(){o.count++,t=setTimeout(function(){n("compositionReporter","timer","".concat(o.count,"min")),o()},6e4)};return o.count=0,o.cancel=function(){void 0!==t&&(t=clearTimeout(t)),o.count=0},o},nk=n(12627),nx=function(e){var t=document.querySelector(e||".public-DraftEditor-content");if(!t)return{html:"",text:""};var n=t.cloneNode(!0),o=Array.from(n.querySelectorAll(".ztext-math")),r=!0,i=!1,a=void 0;try{for(var l,c=o[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s,u=l.value,d=document.createElement("a"),p=u.dataset,h=p.tex,f=p.eeimg;h&&(d.setAttribute("alt",h),d.setAttribute("eeimg",f),null===(s=u.parentNode)||void 0===s||s.replaceChild(d,u))}}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}var m=Array.from(n.querySelectorAll('sup[data-draft-type="reference"]')),v=!0,g=!1,b=void 0;try{for(var C,Z=m[Symbol.iterator]();!(v=(C=Z.next()).done);v=!0){var y=C.value,_=y.dataset.numero;y.textContent="[".concat(_,"]")}}catch(e){g=!0,b=e}finally{try{v||null==Z.return||Z.return()}finally{if(g)throw b}}var w=Array.from(n.querySelectorAll('[data-draft-type="link-card"]')),k=!0,x=!1,S=void 0;try{for(var E,I=w[Symbol.iterator]();!(k=(E=I.next()).done);k=!0){var T,N,A=E.value;A.textContent=A.dataset.text||"",null===(T=A.parentNode)||void 0===T||null===(N=T.parentNode)||void 0===N||N.replaceChild(A,A.parentNode)}}catch(e){x=!0,S=e}finally{try{k||null==I.return||I.return()}finally{if(x)throw S}}var B=Array.from(n.querySelectorAll(".Image-captionContainer")),R=!0,P=!1,z=void 0;try{for(var L,M=B[Symbol.iterator]();!(R=(L=M.next()).done);R=!0){var D,U,O=L.value,F=O.querySelector(".Image");F&&(null===(D=O.parentNode)||void 0===D||null===(U=D.parentNode)||void 0===U||U.replaceChild(F,O.parentNode))}}catch(e){P=!0,z=e}finally{try{R||null==M.return||M.return()}finally{if(P)throw z}}var q=Array.from(n.querySelectorAll(".TableToolbar-container")),V=!0,H=!1,X=void 0;try{for(var G,K=q[Symbol.iterator]();!(V=(G=K.next()).done);V=!0){var j,W,Y=G.value;null===(j=Y.parentNode)||void 0===j||null===(W=j.parentNode)||void 0===W||W.replaceChild(Y,Y.parentNode)}}catch(e){H=!0,X=e}finally{try{V||null==K.return||K.return()}finally{if(H)throw X}}var Q=n.innerHTML,$=Array.from(n.querySelectorAll('[contenteditable="false"]')),J=!0,ee=!1,et=void 0;try{for(var en,eo=$[Symbol.iterator]();!(J=(en=eo.next()).done);J=!0)en.value.remove()}catch(e){ee=!0,et=e}finally{try{J||null==eo.return||eo.return()}finally{if(ee)throw et}}return{html:Q,text:n.textContent.replace(/\n/g,"")}},nS=function(e,t){try{var n=e.getCreateContent(),o=e.EditableCore.html2draftMiddlewares,r=e.EditableCore.draft2htmlMiddlwares,i=n(t,o);return(0,nk.Z)(i,"p",r)}catch(e){return"".concat(e.name," - ").concat(e.message)}},nE=function(e,t,n,o){var r=(0,eY.Vt)(t),i=nx(n&&"".concat(n," .public-DraftEditor-content")),a=i.html,l=i.text,c=r.length,s=l.length,u=s-c;if(u>50){var d=Error("partial draft content lost - diff: ".concat(u)),p=nS(o,a),h=(0,eY.Vt)(p),f=h.length,m=s-f;d.payload={diff:u,fixedDiff:m,textLength:c,snapshotTextLength:s,fixedTextLength:f,text:r,snapshotText:l,fixedText:h,fixedHtml:p,html:t,snapshotHtml:a},e.reportFail("DraftPartialLost",d)}},nI=function(e){var t,n=e.canSubmit,o=e.handleSubmit,i=e.isReediting,a=e.scheduledPublishAt,l=e.className,c=(0,d._)((0,ec.Z)(!1),2),s=c[0],u=c[1],p=(t=(0,r._)(function(){var e,t,n,r=arguments;return(0,m.__generator)(this,function(i){switch(i.label){case 0:for(t=Array(e=r.length),n=0;n<e;n++)t[n]=r[n];u.on(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,Promise.resolve(o&&o.apply(void 0,(0,h._)(t)))];case 2:return i.sent(),[3,4];case 3:return u.off(),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,v.tZ)(R.$U,{as:H.ZP,zaText:!0,zaType:"Button",zaAction:"Answer",zaModuleId:"published_button",extra:{configMap:{traceId:(0,eN.OP)(),type:"Answer",publish_type:i?"oldEdit":"newPublish"}},width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:H.rp.Blue,preset:H.EE.Primary,css:{borderRadius:3,cursor:n?"pointer":"not-allowed",opacity:n?1:.3},onClick:p,className:l,disabled:s,children:s?"发布中...":i?"提交修改":a?"定时发送":"发布回答"})},nT=n(7835),nN=n(88782),nA=n(31021),nB=n(98852),nR="匿名设置",nP=function(e){var t=e.question,n=e.isAnonymous,o=e.disabled,r=e.getAnswerFormRef,i=(0,d._)((0,ec.Z)(!1),2),a=i[0],l=i[1],c=(0,I.useDispatch)(),s=(0,eA.Z)(function(){if(!n){c((0,eh.c0)("无法匿名发布，实名发布获得更多曝光","red"));return}var e=r();if(null==e?void 0:e.current){if(e.current.hasVideo()){c((0,eh.c0)("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red"));return}if(e.current.hasMCNLinkCard()){c((0,eh.c0)("不能使用匿名身份推荐商品","red"));return}if(e.current.hasADLinkCard())return e.current.hasFeeConsultCard()?c((0,eh.c0)("不能使用匿名身份插入付费咨询卡片","red")):void c((0,eh.c0)("不能使用匿名身份插入推荐卡片","red"));l.on()}});return(0,v.BX)(N.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,v.BX)(N.Flex,{height:"38px",children:[(0,v.tZ)(eg.KT,{checked:!n,text:"不启用匿名",onChange:s,id:"PublishPanel-Anonymous-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:nR}),(0,v.tZ)(eg.KT,{checked:n,text:"启用匿名",onChange:s,id:"PublishPanel-Anonymous-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:nR})]}),(0,v.tZ)(nB.Z,{question:t,shown:a,onClose:l.off})]})},nz=function(e){var t=e.isAnonymous,n=(0,(0,S.useContext)(ep).getFormData)(),o=n.isReport,r=n.commercialZhitaskBindInfo,i=(0,d._)((0,S.useState)(!1),2),a=i[0],l=i[1];return((0,S.useEffect)(function(){l(function(e){return e||t})},[t]),a)?(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:nR}),(0,v.tZ)(nP,(0,s._)({disabled:!!o||!!r},e))]}):null},nL=n(16563),nM=n(803),nD=function(e){var t=e.updateDraftSettings,n=(0,I.useDispatch)(),o=(0,R.Q4)().trackEvent,r=(0,S.useContext)(ep),i=r.updateFormData,a=(0,r.getFormData)().commentPermission,l=(0,I.useSelector)(function(e){var t;return null===(t=e.commentPermission.answer)||void 0===t?void 0:t.default})||[];return(0,S.useEffect)(function(){n((0,nM.I6)("answer"))},[n]),(0,S.useEffect)(function(){a!==nL.sO||(0,nL.M1)()||(0,nL.UJ)()},[a]),(0,v.tZ)(eg.Qr,{onChange:function(e){var n=l.find(function(t){return t.permission===e}).text;o({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"评论权限-".concat(n)}}),e!==a&&(i({commentPermission:e}),requestAnimationFrame(t))},value:a,children:l.map(function(e){var t=e.permission,n=e.text,o=e.disable;return t!==nL.sO||a===t||(0,nL.M1)()?(0,v.tZ)(eg.o3,{value:t,text:n,disabled:o},t):null})})},nU=(0,S.forwardRef)(function(e,t){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:"评论权限"}),(0,v.tZ)(N.Box,{flex:"1",children:(0,v.tZ)(nD,(0,u._)((0,s._)({},e),{ref:t}))})]})}),nO=function(e){var t,n,o,r,i=(null==e?void 0:null===(t=e.disclaimerInfo)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.status)==="open";return{isDisclaimerChecked:i,disclaimerType:i?null==e?void 0:null===(o=e.disclaimerInfo)||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:r.type:"none"}},nF={type:"none",description:"无声明"},nq=function(e){var t=e.reshipmentDisclaimers,n=e.setReshipmentDisclaimers,o=e.disclaimers,r=(0,R.Q4)().trackEvent;return t=t||nF,(o=JSON.parse(JSON.stringify(o||[]))).push(nF),(0,v.tZ)(eg.Qr,{onChange:function(e){var t=o.find(function(t){return t.type===e});r({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"创作声明-".concat(t.description)}}),t&&n(t)},value:t.type,children:o.map(function(e){return(0,v.tZ)(eg.o3,{value:e.type,text:e.description},e.type)})})},nV=(0,S.forwardRef)(function(e,t){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:"创作声明",helper:(0,v.BX)(v.HY,{children:[(0,v.tZ)("p",{children:"「创作声明」是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。"}),(0,v.tZ)("p",{children:"创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"})]})}),(0,v.tZ)(N.Box,{flex:"1",children:(0,v.tZ)(nq,(0,u._)((0,s._)({},e),{ref:t}))})]})}),nH=function(e){var t=e.question,n=e.updateDraftSettings,o=(0,S.useContext)(ep),r=o.getFormData,i=o.updateFormData,a=(0,I.useDispatch)(),l=(0,I.useSelector)(function(e){return e.question.disclaimers[t.id]}),c=r().disclaimerType,s=(null==l?void 0:l.find(function(e){return e.type===c}))||nF,u=(null==l?void 0:l.length)>0;(0,nT.Z)(function(){l||a((0,e8.J_)(t.id))});var d=(0,eA.Z)(function(e){i({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type}),requestAnimationFrame(n)});return u?(0,v.tZ)(nV,{reshipmentDisclaimers:s,setReshipmentDisclaimers:d,disclaimers:l}):null},nX="推送给关注者",nG=function(e){var t=e.disabled,n=e.updateDraftSettings,o=(0,S.useContext)(ep),r=o.updateFormData,i=(0,o.getFormData)().pushActivity,a=function(e){r({pushActivity:e}),requestAnimationFrame(n)};return(0,v.tZ)(N.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:(0,v.BX)(N.Flex,{height:"38px",children:[(0,v.tZ)(eg.KT,{checked:i,text:"开启推送",onChange:function(){a(!0)},id:"PublishPanel-PushToFollowers-0",disabled:t,shouldTrackClick:!0,zaTextPrefix:nX}),(0,v.tZ)(eg.KT,{checked:!i,text:"关闭推送",onChange:function(){M.Z.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",text:{ok:"关闭推送"}}).then(function(){a(!1)}).catch(function(){})},id:"PublishPanel-PushToFollowers-1",disabled:t,shouldTrackClick:!0,zaTextPrefix:nX})]})})},nK=function(e){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:nX}),(0,v.tZ)(nG,(0,s._)({},e))]})},nj=n(97232),nW=(0,e3.FH)("biz",["OPEN_BIZ_VIP","QUERY_BIZ_VIP_STATUS","GET_COMMERCIAL_REPORT_INFO"]),nY=function(e){var t=e.shown,n=e.toggle,o=(0,tw._)(e,["shown","toggle"]);return(0,v.tZ)(eZ.Z,(0,u._)((0,s._)({title:"",subtitle:"",onClose:function(){n()}},o),{children:t&&(0,v.BX)("div",{children:[(0,v.BX)(N.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:[(0,v.tZ)(N.Text,{children:"系统检测到您的账号已开通芝士平台权限。创作者与品牌主的商业合作，需统一通过知乎官方商业合作服务平台「芝士平台」进行。"}),(0,v.tZ)(N.Text,{children:"知享仅针对品牌自营账号开放。如果您是商家，可以在推出芝士平台后，申请开通知享。"}),(0,v.BX)(N.Text,{children:["如仍有疑问，请详询",(0,v.tZ)(N.Link,{href:"https://www.zhihu.com/messages/0cb9df58ed7a3ff685d0ac55d1c1e553",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"@知乎商业小管家\xa0"}),"反馈，我们将积极解决您的问题。"]})]}),(0,v.tZ)("button",{onClick:function(){n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"}]},children:"知道了"})]})}))},nQ=function(e){var t=e.shown,n=e.toggle,o=e.onSuccess,r=e.onFail,i=(0,tw._)(e,["shown","toggle","onSuccess","onFail"]),a=(0,I.useDispatch)(),l=(0,d._)((0,S.useState)(!0),2),c=l[0],p=l[1],h=(0,d._)((0,ec.Z)(!1),2),f=h[0],m=h[1],g=(0,R.Q4)().trackEvent;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(eZ.Z,(0,u._)((0,s._)({title:"商业内容推广",subtitle:"",onClose:function(){g({eventType:"Click",action:"Unknown",elementLocation:{text:"开通商业会员弹窗关闭"}}),n()}},i),{children:t&&(0,v.BX)("div",{children:[(0,v.tZ)(N.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:"报备后，将自动为您开通「知享」试用版，符合商业内容规范的内容可以正常曝光"}),(0,v.BX)(N.Flex,{flexDirection:"inherit",flexWrap:"nowrap",alignItems:"center",style:{marginTop:"10px"},children:[(0,v.tZ)(eO.C,{onChange:function(){p(!c)},type:"checkbox",checked:c}),(0,v.BX)(N.Text,{ml:"4px",children:["我已阅读并同意",(0,v.tZ)(N.Link,{href:"https://bvip.zhihu.com/agreement",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"《知享服务使用协议》"})]})]}),(0,v.tZ)("button",{disabled:!c,onClick:function(){a({API:{types:nW.OPEN_BIZ_VIP,endpoint:"/commercial/vip",root:"".concat((0,nj.sJ)(),"/api/v1"),method:"POST"}}).then(function(e){var t,n,i=e.payload;if(i.isSuccess){o(),a((0,eh.c0)("开通成功"));return}r(),(null==i?void 0:null===(t=i.err)||void 0===t?void 0:t.code)==="-300"?m.on():a((0,eh.c0)((null==i?void 0:null===(n=i.err)||void 0===n?void 0:n.msg)||"开通失败","red"))}).catch(function(e){var t;r(),a((0,eh.c0)((null==e?void 0:null===(t=e.err)||void 0===t?void 0:t.msg)||"开通失败","red"))}),n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"},!c&&{cursor:"not-allowed"}]},children:"确认并开通"})]})})),(0,v.tZ)(nY,{shown:f,toggle:m.toggle})]})},n$=[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}],nJ=function(e){var t=e.isReport,n=e.commercialPermissionInfo,o=e.setCommercialPermissionInfo,r=e.setIsReport,i=e.validate,a=(0,R.Q4)().trackEvent,l=(0,d._)((0,ec.Z)(!1),2),c=l[0],p=l[1];return(0,v.BX)(v.HY,{children:[(0,v.tZ)(eg.Qr,{onChange:function(e){if(!i||i()){var t=n$.find(function(t){return t.type===e});if(a({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"商业推广-".concat(null==t?void 0:t.description)}}),!0===e&&!(null==n?void 0:n.isCommercialVip)){p.on();return}r(e)}},value:!!t,children:n$.map(function(e){return(0,v.tZ)(eg.o3,{css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}},value:e.type,text:e.description},e.type)})}),(0,v.tZ)(nQ,{shown:c,toggle:p.toggle,onSuccess:function(){r(!0),o(function(e){return(0,u._)((0,s._)({},e),{isCommercialVip:!0})})},onFail:function(){r(!1)}})]})},n0=function(e){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:"商业推广",title:"商业内容推广",helper:(0,v.BX)(v.HY,{children:[(0,v.tZ)("p",{children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),(0,v.tZ)("p",{children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),(0,v.BX)("p",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",(0,v.tZ)("a",{href:"https://www.zhihu.com/creator/explore/academy/rights/rights",target:"_blank",rel:"noreferrer noopener",children:"点击前往了解"})]})]})}),(0,v.tZ)(N.Box,{flex:"1",children:(0,v.tZ)(nJ,(0,s._)({},e))})]})},n1=(0,S.forwardRef)(function(e,t){var n=e.commercialReportInfo,o=e.initCommercialPermissionInfo,r=(0,d._)((0,S.useState)(o),2),i=r[0],a=r[1],l=(0,d._)((0,S.useState)(!1),2),c=l[0],s=l[1],u=!!n;return(0,S.useEffect)(function(){u&&s(n.isReport)},[u]),(0,S.useImperativeHandle)(t,function(){return{getIsReport:function(){return c}}}),(0,v.tZ)(n0,{isReport:!!c,commercialPermissionInfo:i,setIsReport:s,setCommercialPermissionInfo:a})}),n2=function(e){var t=e.isAnonymous,n=e.updateDraftSettings,o=e.initCommercialPermissionInfo,r=(0,I.useDispatch)(),i=(0,d._)((0,S.useState)(o),2),a=i[0],l=i[1],c=(0,S.useContext)(ep),s=c.updateFormData,u=(0,c.getFormData)().isReport,p=(0,eA.Z)(function(e){s({isReport:e}),requestAnimationFrame(n)}),h=(0,eA.Z)(function(){return!t||(r((0,eh.c0)("已经启用匿名的内容不能进行商业推广声明","red")),!1)});return(0,v.tZ)(n0,{isReport:!!u,commercialPermissionInfo:a,setIsReport:p,setCommercialPermissionInfo:l,validate:h})},n4=function(e){var t=e.type,n=e.questionId,o=e.answerId,r=e.articleId,i=e.reportProps,a=void 0===i?{}:i,l=e.taskBindProps,c=void 0===l?{}:l,u=(0,I.useDispatch)(),p=(0,d._)((0,S.useState)([]),2),h=(0,d._)(p[0],3),f=h[0],m=void 0===f?null:f,g=h[1],b=void 0===g?{}:g,C=h[2],Z=void 0===C?"":C,y=p[1],_="article"===t;return((0,nT.Z)(function(){u(_?{API:{types:nW.QUERY_BIZ_VIP_STATUS,endpoint:"/articles/settings",query:{token:r},method:"GET"}}:{API:{types:nW.QUERY_BIZ_VIP_STATUS,endpoint:"/questions/".concat(n,"/answer-settings"),query:{token:o},method:"GET"}}).then(function(e){var t,n,o=(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.commercialPermissionInfo)||{};if(e_.CHEESE===o.businessLine){if(!(null===(n=o.cheeseTaskList)||void 0===n?void 0:n.length))return;y([_?eI:eT,{taskList:o.cheeseTaskList.map(function(e){return{bindStatus:ew.FE_INIT,bindTaskDTO:e}})},e_.CHEESE])}else e_.COMMERCIAL_VIP===o.businessLine&&o.isShowTab&&y([_?n1:n2,{initCommercialPermissionInfo:o},e_.COMMERCIAL_VIP])})}),e_.CHEESE===Z&&"answer"===t&&c.isVideoAnswer)?null:m?(0,v.tZ)(m,(0,s._)({},e_.CHEESE===Z?c:a,b)):null},n3={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},n5=function(e){var t=e.currentUser,n=e.updateDraftSettings,o=(0,R.Q4)().trackEvent,r=(0,S.useContext)(ep),i=r.updateFormData,a=(0,r.getFormData)().reshipmentSettings;return(0,v.tZ)(eg.Qr,{onChange:function(e){var r=n3[e];o({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"转载设置-".concat(r)}}),"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),i({reshipmentSettings:e}),requestAnimationFrame(n)},value:a,children:Object.keys(n3).map(function(e){return"need_payment"===e&&t.isOrg?null:(0,v.tZ)(eg.o3,{value:e,text:n3[e]},e)})})},n7=(0,S.forwardRef)(function(e,t){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:"转载设置"}),(0,v.tZ)(N.Box,{flex:"1",children:(0,v.tZ)(n5,(0,u._)((0,s._)({},e),{ref:t}))})]})}),n6=n(21680),n8=n(67036),n9=n(55344),oe="赞赏设置",ot=function(e){var t;return{rewardTagline:(null==e?void 0:null===(t=e.rewardInfo)||void 0===t?void 0:t.tagline)||""}},on=function(e){var t=e.question.id,n=e.isAnonymous,o=e.disabled,r=e.updateDraftSettings,i=(0,d._)((0,ec.Z)(!1),2),a=i[0],l=i[1],c=(0,S.useContext)(ep),s=c.getFormData,u=c.updateFormData,p=(0,I.useDispatch)(),h=s().rewardTagline,f=!!h,m=(0,eA.Z)(function(e){u({rewardTagline:e}),requestAnimationFrame(r),p((0,n8.$j)(t,!0)),l.off()});return(0,v.BX)(N.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,v.BX)(N.Flex,{height:"38px",children:[(0,v.tZ)(eg.KT,{checked:f,text:"开启赞赏",onChange:function(){if(n){p((0,eh.c0)("匿名回答无法开启赞赏，请先取消匿名","red"));return}l.on()},id:"PublishPanel-RewardSetting-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:oe}),(0,v.tZ)(eg.KT,{checked:!f,text:"关闭赞赏",onChange:function(){u({rewardTagline:""}),requestAnimationFrame(r),p((0,n8.$j)(t,!1))},id:"PublishPanel-RewardSetting-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:oe})]}),a&&(0,v.tZ)(n6.Z,{submitRewardText:m,onClose:l.off,tagline:h,edit:!1})]})},oo=function(e){var t=(0,I.useDispatch)(),n=(0,I.useSelector)(function(e){return e.switches}).isAnswerRewardable;return((0,S.useEffect)(function(){void 0===n&&t((0,n9.X2)(["isAnswerRewardable"]))},[t,n]),n)?(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:oe}),(0,v.tZ)(on,(0,s._)({},e))]}):null},or=n(9539),oi=n(7621),oa=n(61514),ol="定时发布",oc=function(e){var t=e.scheduledPublishAt,n=e.initialScheduledPublishAt,o=e.setUseScheduledPublish,r=!!t,i=function(e){o(e)};return(0,v.BX)(N.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,v.BX)(N.Flex,{height:"38px",children:[(0,v.tZ)(eg.KT,{checked:!r,text:"不使用定时发布",onChange:function(){return i(!1)},id:"PublishPanel-scheduleLabel-0",shouldTrackClick:!0,zaTextPrefix:ol}),(0,v.tZ)(eg.KT,{checked:r,text:"使用定时发布",onChange:function(){i(!0),requestAnimationFrame(function(){(0,oi.yZ)(window,{top:50,behavior:"smooth"})})},id:"PublishPanel-scheduleLabel-1",shouldTrackClick:!0,zaTextPrefix:ol})]}),r&&n&&(0,v.tZ)(oa.Z,{value:t,min:n,max:or.Z(n,7),onChange:function(e){o(!0,e)},css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",marginTop:"5px",".InputButton":{height:"38px"}}}})]})},os=function(e){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:ol}),(0,v.tZ)(oc,(0,s._)({},e))]})},ou=n(48725),od=n(87038),op=n(6438),oh=n(31857),of=n(36963),om=function(e){var t=e.name,n=e.type,o=e.children,r=e.className,i=e.value,a=e.checked,l=e.onChange,c=JSON.stringify(i);return(0,v.BX)("label",{className:y()("CheckItem",r),css:function(e){return{position:"relative",display:"block","&:hover":{".CheckItem-box":{borderColor:e.colors.GBL07A}}}},children:[(0,v.tZ)("input",{className:"CheckItem-input",type:void 0===n?"checkbox":n,name:void 0===t?"checkitems":t,value:c,onChange:l,checked:a,css:function(e){return{position:"absolute",zIndex:-1,opacity:0,"&:checked":{"+ .CheckItem-box":{borderColor:e.colors.GBL07A,".CheckItem-inner":{maxWidth:"calc(100% - 28px)"}}},"&:not(:checked)":{"+ .CheckItem-box":{".CheckItem-icon":{opacity:0,transition:"opacity 200ms"}}}}}}),(0,v.BX)("div",{className:"CheckItem-box",css:function(e){return{position:"relative",padding:"12px",border:"1px solid ".concat(e.colors.GBK10A),borderRadius:"3px",transition:"border-color 200ms ease-out"}},children:[(0,v.tZ)("div",{className:"CheckItem-inner",children:o}),(0,v.tZ)(of.BS,{className:"CheckItem-icon",size:20,css:function(e){return{position:"absolute",top:"50%",right:"12px",fill:e.colors.GBL01A,transform:"translateY(-50%)"}}})]})]})},ov=n(53910),og=n(95377),ob=n(92868),oC=n(21156),oZ=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,o._)(e),"state",{value:null}),(0,l._)((0,o._)(e),"handleModify",function(){e.setState({modifying:!0})}),(0,l._)((0,o._)(e),"handleChange",function(t){e.setState({value:t.target.value})}),(0,l._)((0,o._)(e),"handleCancel",function(){e.setState({value:null,modifying:!1})}),(0,l._)((0,o._)(e),"handleSubmit",function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()}),(0,l._)((0,o._)(e),"handleSelect",function(){e.props.onSelect(e.props.value)}),e}return(0,a._)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,o=e.title,r=e.checked,i=e.rich,a=this.state,l=a.modifying,c=a.value;return l?(0,v.BX)("div",{className:"TopicBioItem",children:[(0,v.tZ)("div",{className:"TopicBioItem-title",children:o}),(0,v.BX)("form",{onSubmit:this.handleSubmit,children:[(0,v.tZ)("div",{className:"TopicBioItem-inner",children:(0,v.tZ)(nr.Z,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:(0,v.tZ)(og.Z,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:o,autoFocus:!0})})}),(0,v.BX)("div",{className:"TopicBioItem-inputFooter",children:[(0,v.tZ)(ob.Z,{current:c?c.length:0,max:40}),(0,v.BX)("div",{className:"TopicBioItem-actions",children:[(0,v.tZ)(H.ZP,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),(0,v.tZ)(H.ZP,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?(0,v.BX)("div",{className:"TopicBioItem",children:[(0,v.tZ)("div",{className:"TopicBioItem-title",children:o}),(0,v.tZ)(om,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:r,children:(0,v.tZ)(nr.Z,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:(0,v.BX)("div",{children:[i?(0,v.tZ)(od.Z,{inline:!0,className:"TopicBioItem-bio",html:n}):(0,v.tZ)("span",{className:"TopicBioItem-bio",children:n}),(0,v.tZ)(oC.Z,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):(0,v.tZ)("div",{className:"TopicBioItem",children:(0,v.BX)(H.ZP,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[(0,v.tZ)(ov.nY,{text:!0,center:!0})," 添加",o]})})}}]),n}(S.Component);(0,l._)(oZ,"propTypes",{user:x().object.isRequired,title:x().node.isRequired,value:x().object.isRequired,onBioChange:x().func.isRequired,onSelect:x().func.isRequired,checked:x().bool.isRequired});var oy=function(e,t){var n=e.type,o=e.topic,r=(void 0===o?{}:o).id,i=t.type,a=t.topic,l=(void 0===a?{}:a).id;return n===i&&r===l},o_=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,o._)(e),"state",{value:null}),(0,l._)((0,o._)(e),"handleSelect",function(t){return e.setState({value:t})}),(0,l._)((0,o._)(e),"handleChoose",function(){return e.props.onBioChoose(e.state.value)}),e}return(0,a._)(n,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return(0,v.tZ)("div",{className:"TopicBios-loading",children:(0,v.tZ)(td.Z,{})});var t=this.props,n=t.user,o=t.question.topics,r=t.bios,i=t.currentBio,a=t.onHeadlineUpdate,l=t.onBioUpdate,c=this.state.value||i,d={type:"headline"};return(0,v.BX)("div",{children:[(0,v.BX)("div",{className:"TopicBioItems",children:[(0,v.tZ)(oZ,{title:"一句话介绍",user:n,bio:n.headline,value:d,onBioChange:a,onSelect:this.handleSelect,checked:oy(c,d),rich:!0}),o.map(function(t){var o,i={type:"topic",topic:{id:t.id}};return(0,v.tZ)(oZ,(0,u._)((0,s._)({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},(o=t.id,r.find(function(e){return e.topic.id===o}))),{value:i,onBioChange:function(e){return l(t.id,e)},onSelect:e.handleSelect,checked:oy(c,i)}),t.id)})]}),(0,v.tZ)(eZ.w,{children:(0,v.tZ)(H.ZP,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})}}]),n}(S.Component);(0,l._)(o_,"propTypes",{onHeadlineUpdate:x().func.isRequired,onBioUpdate:x().func.isRequired,onBioChoose:x().func.isRequired,question:x().object.isRequired,user:x().object.isRequired});var ow=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,o._)(e),"handleUpdateHeadline",function(t){e.props.updateProfile(null,{headline:t})}),(0,l._)((0,o._)(e),"handleUpdateBio",function(t,n){e.props.updateBio(t,n)}),(0,l._)((0,o._)(e),"handleBioChoose",function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()}),e}return(0,a._)(n,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return(0,v.tZ)(o_,(0,s._)({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),n}(S.Component);(0,l._)(ow,"propTypes",{question:x().object.isRequired});var ok=(0,I.connect)(function(e,t){var n=e.currentUser,o=e.question.bio,r=e.entities,i=r.questions,a=r.users,l=e.topic.bios,c=t.question.id,s=i[c],u=(o[c]||{result:{type:"headline"}}).result;return{isFetching:l.isFetching,currentBio:{type:u.type,topic:u.topic},bios:s.topics.map(function(e){return{topic:e,bio:l[e.id]}}),question:s,user:a[n]}},{updateProfile:op.ck,updateBio:oh.rl,chooseBio:e8.vL,loadBios:e8.uF})(ow),ox=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,a._)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,o=(0,tw._)(e,["shown","onClose"]);return(0,v.tZ)(eZ.Z,{title:"编辑话题经验",subtitle:(0,v.BX)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",(0,v.tZ)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&(0,v.tZ)(ok,(0,u._)((0,s._)({},o),{onClose:n}))})}}]),n}(S.Component);(0,l._)(ox,"propTypes",(0,s._)({shown:x().bool.isRequired,onClose:x().func.isRequired},ok.propTypes));var oS=function(e){var t=e.children;return"string"!=typeof t||t.trim().length?(0,v.tZ)(N.Text,{maxWidth:"292px",mr:"20px",css:[(0,eF.S)(1)],children:t}):null},oE=function(e){var t=e.questionId,n=e.currentUser,o=(0,I.useSelector)(function(e){return e.question.bio}),r=(0,I.useSelector)(function(e){return e.topic.bios}),i=(o[t]||{result:{type:"headline"}}).result;return("topic"===i.type&&(i.bio=r[i.topic.id]||i.bio),i.bio&&"headline"!==i.type)?(0,v.tZ)(oS,{children:i.bio}):n.headline?(0,v.tZ)(oS,{children:(0,v.tZ)(od.Z,{inline:!0,html:(i||{}).bio||n.headline})}):null},oI=function(e){var t=e.question,n=e.currentUser,o=(0,d._)((0,ec.Z)(!1),2),r=o[0],i=o[1];return(0,v.BX)(N.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,v.BX)(N.Flex,{alignItems:"center",height:"100%",css:{cursor:"pointer"},onClick:i.on,children:[(0,v.tZ)(oE,{questionId:t.id,currentUser:n}),(0,v.BX)(R.$U,{as:N.Flex,zaType:"Button",zaText:"一句话介绍-修改",color:"GBL01A",alignItems:"center",children:["修改",(0,v.tZ)(ou.E,{css:{marginLeft:"2px"},size:16})]})]}),(0,v.tZ)(ox,{shown:r,question:t,onClose:i.off})]})},oT=function(e){return(0,v.BX)(N.Flex,{py:"11px",children:[(0,v.tZ)(eg.gN,{name:"一句话介绍"}),(0,v.tZ)(oI,(0,s._)({},e))]})},oN=(0,T.withRouter)(function(e){var t,n=e.question,o=e.answer,r=e.isVideoAnswer,i=e.isReediting,a=e.location,l=e.scheduledPublishAt,c=e.initialScheduledPublishAt,u=e.canScheduledPublish,p=e.setUseScheduledPublish,h=e.className,f=e.updateDraftSettings,m=e.getAnswerFormRef,g=e.getInitialEnableMarkdown,b=(0,I.useDispatch)(),C=(0,S.useContext)(ep).updateFormData,Z=((null==a?void 0:a.query)||{}).push_activity,y=(0,I.useSelector)(e2.ib),_=(0,d._)((0,S.useState)(!1),2),w=_[0],k=_[1];(0,nT.Z)(function(){Promise.all([b((0,nA.Gl)()),b((0,nA.PW)(n.id)),o&&b((0,e0.ri)(o.id))].filter(Boolean)).then(function(e){var t,n,r,i,a,l=(0,d._)(e,3),c=l[0],u=l[1],p=l[2];C((0,s._)({},(0,nN.Tq)(null===(t=c.payload)||void 0===t?void 0:t.settings),o&&p&&(0,s._)({},(0,nN.vi)(p.payload),ot(o),nO(p.payload),ns(p.payload),nu(null==o?void 0:o.settings),(0,nN.t8)(o)),(0,nN.p4)(null===(n=u.payload)||void 0===n?void 0:n.settings),Z&&{pushActivity:!!Number(Z)})),g(null===(a=null===(r=c.payload)||void 0===r?void 0:null===(i=r.commonSettings)||void 0===i?void 0:i.markdownEnabled)||void 0===a||a)}).finally(function(){k(!0)})});var x=null==n?void 0:null===(t=n.relationship)||void 0===t?void 0:t.isAnonymous,E=(n||{}).questionType,T=y&&!y.isOrg;return r&&i||!w?null:(0,v.BX)(N.Box,{pl:"10px",pr:"20px",width:"100%",bg:"GBK99A",css:{position:"relative"},className:h,children:[(0,v.tZ)(N.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A"},ml:"10px"}),(0,v.tZ)(N.Text,{color:"GBK03A",ml:"10px",pt:"24px",pb:"12px",css:{lineHeight:"24px",fontSize:"17px",fontWeight:"500"},children:"发布设置"}),T&&("normal"===E||x)&&!r&&!i&&(0,v.tZ)(nz,{question:n,isAnonymous:x,getAnswerFormRef:m}),!r&&(0,v.tZ)(nH,{question:n,updateDraftSettings:f}),(0,v.tZ)(n4,{type:"answer",questionId:null==n?void 0:n.id,answerId:null==o?void 0:o.id,taskBindProps:{isAnonymous:x,isVideoAnswer:r},reportProps:{isAnonymous:x,updateDraftSettings:f}}),u&&(0,v.tZ)(os,{scheduledPublishAt:l,initialScheduledPublishAt:c,setUseScheduledPublish:p}),!i&&T&&(0,v.tZ)(oT,{question:n,currentUser:y}),!i&&(0,v.tZ)(n7,{currentUser:y,updateDraftSettings:f}),!i&&(0,v.tZ)(nU,{updateDraftSettings:f}),!i&&!r&&(0,v.tZ)(nK,{updateDraftSettings:f}),(0,v.tZ)(oo,{question:n,isAnonymous:x,updateDraftSettings:f})]})}),oA=n(66263),oB=n(71702),oR=n(69578),oP={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer",composition:"composition",hasFormula:"HasFormula"},oz=function(e,t){var n=e.isToolbarSticky,o=e.isFullscreen,r=e.toolbarMenuAttention,i=e.scheduledPublishAt,a=e.initialScheduledPublishAt,l=e.placeholder,c=e.draft,s=e.defaultValue,u=e.isLegacyVideoAnswer,d=e.defaultVideo,p=e.question,h=e.videoAnswerEditable,f=e.videoAnswerPublished,m=e.editableReady,g=e.handleChangeContent,b=e.handleAfterChangeContent,C=e.handleFocusWithAuth,Z=e.handleSelectText,_=e.handleSubmit,w=e.handleError,k=e.handleLoadStart,x=e.handleLoadEnd,E=e.handleUploadStart,I=e.handleUploadEnd,T=e.handleUploadError,N=e.handleBeforeVideoUpload,A=e.handleMCNLinkCardEdit,P=e.isVideoAnswer,z=e.handleInsertZVideo,L=e.getToolbarSidePlugins,M=e.getToolbarMenuPlugins,U=e.createEditorPlugins,O=e.getEditorBeforePlugins,F=e.setUseScheduledPublish,q=e.allowToolbar,V=e.onAnyChange,H=e.docPluginProps,X=e.tableOfContentsEnabled,G=e.getMarkdownEnabled,K=e.videoSource,j=(0,S.useRef)(null);return(0,v.tZ)(n_.vB,{name:oP.editableEdit,children:(0,v.tZ)(R.eV,{block:o?"FullScreen":"",children:(0,v.tZ)(oR.Z,{className:y()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:n}),ref:t,hideImageToolbar:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:void 0===q||q,allowUploadDocument:!0,allowVideoTitleChange:!P,allowReference:!0,allowImageEditor:!0,allowZVideo:!P,allowTable:!P,allowCatalog:!P,catalogEnabled:X,useCatalogV2:!0,stickyOffset:117,allowHeaderThree:!1,allowToolbarSticky:!o,toolbarStickyOffset:oA.BR,onInsertZVideo:z,getToolbarSidePlugins:L,getToolbarMenuPlugins:M,getEditorBeforePlugins:O,toolbarMenuAttention:r,createEditorPlugins:U,toolbarProps:{menuCallout:i&&a&&(0,v.BX)(D.LU,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){F(!1),B.Z.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",(0,v.tZ)(oa.Z,{onRef:j,value:a,min:a,max:or.Z(a,7),onChange:function(e,t){F(!0,e),B.Z.setModule(j.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),B.Z.trackEvent(j.current,{action:"Click",id:5731,name:"回答"})}}),(0,v.BX)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[(0,v.tZ)(ou.E,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:6,placeholder:l,defaultValue:c?c.editableContent:s,videoAnswerEditable:h,videoAnswerPublished:f,isLegacyVideoAnswer:u,defaultVideo:d,onReady:m,onChange:g,onAfterChange:b,onFocus:C,onSelectText:Z,onSubmit:_,onError:w,onLoadStart:k,onLoadEnd:x,onUploadStart:E,onUploadEnd:I,onUploadError:T,onBeforeVideoUpload:N,logo:oB,location:p.title,editingContentType:"answer",onMCNLinkCardEdit:A,useV2Feature:!0,useEditableV2:!0,useImageOperationV2:!0,onAnyChange:V,docPluginProps:H,getMarkdownEnabled:G,videoSource:K})})})};oz.propTypes={isToolbarSticky:x().bool.isRequired,answer:x().object.isRequired,isFullscreen:x().bool.isRequired,toolbarMenuAttention:x().string,scheduledPublishAt:x().number,initialScheduledPublishAt:x().number,placeholder:x().string.isRequired,draft:x().object,defaultValue:x().string,isLegacyVideoAnswer:x().bool,defaultVideo:x().object,question:x().object,videoAnswerEditable:x().bool,videoAnswerPublished:x().bool,editableReady:x().func.isRequired,handleChangeContent:x().func.isRequired,handleAfterChangeContent:x().func.isRequired,handleFocusWithAuth:x().func.isRequired,handleSelectText:x().func.isRequired,handleSubmit:x().func.isRequired,handleError:x().func.isRequired,handleLoadStart:x().func.isRequired,handleLoadEnd:x().func.isRequired,handleUploadStart:x().func.isRequired,handleUploadEnd:x().func.isRequired,handleUploadError:x().func.isRequired,handleBeforeVideoUpload:x().func.isRequired,handleMCNLinkCardEdit:x().func.isRequired,isVideoAnswer:x().bool.isRequired,handleInsertZVideo:x().func.isRequired,getToolbarSidePlugins:x().func.isRequired,createEditorPlugins:x().func.isRequired,getToolbarMenuPlugins:x().func.isRequired,getEditorBeforePlugins:x().func.isRequired,setUseScheduledPublish:x().func.isRequired,getMarkdownEnabled:x().func};var oL=(0,S.forwardRef)(oz),oM=Object.assign;function oD(e){var t;return E().createElement(X.Z,oM(oM({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--List24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M3.25 9.027a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75ZM3.25 19.027a.75.75 0 0 1 .75-.75h11.5a.75.75 0 1 1 0 1.5H4a.75.75 0 0 1-.75-.75ZM3.25 5A.75.75 0 0 1 4 4.25h15a.75.75 0 0 1 0 1.5H4A.75.75 0 0 1 3.25 5ZM3.25 15a.75.75 0 0 1 .75-.75h15a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}var oU=n(93406),oO=Object.assign;function oF(e){var t;return E().createElement(X.Z,oO(oO({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Cloud24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M10.836 6.355a4.072 4.072 0 0 0-4.016 4.756.75.75 0 0 1-.772.875 2.902 2.902 0 1 0-.13 5.802h.001l11.142-.035h.003a3.753 3.753 0 1 0-3.53-5.033.75.75 0 0 1-1.41-.512A5.255 5.255 0 0 1 22.318 14c0 2.9-2.352 5.253-5.252 5.253h-.001l-11.142.034h-.003a4.402 4.402 0 0 1-.655-8.756v-.104a5.572 5.572 0 0 1 9.85-3.57.75.75 0 1 1-1.15.962 4.062 4.062 0 0 0-3.128-1.464Z",clipRule:"evenodd"}))}var oq=n(58216),oV=Object.assign;function oH(e){var t;return E().createElement(X.Z,oV(oV({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Gear24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M12 8.125a3.875 3.875 0 1 0 0 7.75 3.875 3.875 0 0 0 0-7.75ZM9.875 12a2.125 2.125 0 1 1 4.25 0 2.125 2.125 0 0 1-4.25 0Z",clipRule:"evenodd"}),E().createElement("path",{fillRule:"evenodd",d:"M14.438 2.397a4.875 4.875 0 0 0-4.875 0l-4.66 2.69A4.875 4.875 0 0 0 2.464 9.31v5.382c0 1.741.929 3.35 2.437 4.221l4.66 2.691c1.509.87 3.367.87 4.876 0l4.66-2.69a4.875 4.875 0 0 0 2.437-4.222V9.309c0-1.741-.929-3.35-2.437-4.221l-4.66-2.691Zm-4 1.515a3.125 3.125 0 0 1 3.125 0l4.66 2.691a3.125 3.125 0 0 1 1.562 2.706v5.382a3.125 3.125 0 0 1-1.562 2.706l-4.66 2.69a3.125 3.125 0 0 1-3.125 0l-4.66-2.69a3.125 3.125 0 0 1-1.563-2.706V9.309c0-1.116.595-2.148 1.562-2.706l4.66-2.69Z",clipRule:"evenodd"}))}var oX=Object.assign;function oG(e){var t;return E().createElement(X.Z,oX(oX({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Markdown24"+(t?" "+t:"")}),E().createElement("path",{fillRule:"evenodd",d:"M3.36 5.964A.75.75 0 0 0 2 6.4v11.202a.75.75 0 0 0 1.5 0V8.739l4.246 5.938a.75.75 0 0 0 1.22 0L13.21 8.74v8.863a.75.75 0 0 0 1.5 0V6.4a.75.75 0 0 0-1.36-.436l-4.995 6.988L3.36 5.964Zm16.397.436a.75.75 0 0 0-1.5 0v9.392l-.963-.961a.75.75 0 1 0-1.06 1.061l2.243 2.24a.75.75 0 0 0 1.06 0l2.242-2.24a.75.75 0 0 0-1.06-1.061l-.962.961V6.4Z",clipRule:"evenodd"}))}var oK=n(55890),oj=Object.assign;function oW(e){var t;return E().createElement(X.Z,oj(oj({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--TrayFull24"+(t?" "+t:"")}),E().createElement("path",{d:"M7.625 11.5c0-.483.392-.875.875-.875h7a.875.875 0 0 1 0 1.75h-7a.875.875 0 0 1-.875-.875ZM10 6.625a.875.875 0 1 0 0 1.75h4a.875.875 0 0 0 0-1.75h-4Z"}),E().createElement("path",{fillRule:"evenodd",d:"M7.581 2.126a3.874 3.874 0 0 0-3.83 3.296L2.169 15.897a3.875 3.875 0 0 0-.043.578V18A3.874 3.874 0 0 0 6 21.874h12A3.874 3.874 0 0 0 21.875 18v-1.525c0-.193-.015-.387-.044-.578L20.25 5.422a3.874 3.874 0 0 0-3.83-3.296H7.58ZM5.48 5.683A2.126 2.126 0 0 1 7.58 3.874h8.838c1.052 0 1.945.769 2.102 1.809l1.444 9.567H4.035L5.48 5.683ZM3.875 17v1c0 1.174.951 2.126 2.125 2.126h12A2.126 2.126 0 0 0 20.126 18v-1H3.875Z",clipRule:"evenodd"}))}function oY(e){return E().createElement(oW,oj(oj({},e),{className:function(){return"ZDI ZDI--Column24"+(e.className?" "+e.className:"")}}))}var oQ=n(82604),o$=n(11360),oJ=n(8586),o0=function(e){var t=e.getMarkdownEnabled,n=e.label,o=e.icon,r=e.text,i=e.onClick,a=(0,d._)((0,S.useState)(t()),2),l=a[0],c=a[1],s=function(){i(),c(!l)};return(0,v.BX)(R.$U,{as:H.ZP,zaType:"Button",zaText:"".concat(n," ").concat(l?"关":"开"),preset:H.EE.Plain,"aria-label":n,css:function(e){return{"&.Button.Button--plain":{padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px",position:"relative"}}},children:[(0,v.tZ)(N.Box,{onClick:s,css:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:1}}),(0,v.tZ)(o,{center:!0,css:{marginRight:"4px"}}),null!=r?r:n,(0,v.tZ)(oJ.Z,{forceControlled:!0,checked:l,preset:"small",css:{marginLeft:37},onChange:s,onClick:function(e){return e.preventDefault()}})]})},o1=function(e){var t=e.showProfit,n=e.onInsertVideoClick,o=e.isVideoAnswer,r=e.shouldAdaptNative;return[{sectionName:"operation",minLength:3,priority:1,items:[{icon:tz.O1,priority:2,label:"撤销",commandName:"undo",shortcut:"⌘+Z"},{icon:tL.OJ,label:"重做",priority:1,commandName:"redo",shortcut:"⌘+Y"},{icon:tD,label:"清除格式",priority:3,commandName:"clear-format",shortcut:"⌘+\\"}]},{sectionName:"style",minLength:4,priority:2,items:[(0,s._)({icon:tI.ZP,label:"标题",priority:1},r?{commandName:"toggle-block-type-header-two",shortcut:"⌘+⌥+1"}:{children:[{icon:tT.ic,label:"一级标题",commandName:"toggle-block-type-header-two",shortcut:"⌘+⌥+1"},{icon:tN.NC,label:"二级标题",commandName:"toggle-block-type-header-three",shortcut:"⌘+⌥+2"}]}),{icon:tE.Z,label:"加粗",commandName:"toggle-inline-style-BOLD",priority:2,shortcut:"⌘+B"},!r&&{icon:tK.ZP,label:"斜体",commandName:"toggle-inline-style-ITALIC",priority:3,shortcut:"⌘+I"}]},{sectionName:"blockType",minLength:6,priority:4,items:[{icon:oD,label:"列表",priority:1,children:[{icon:tA.hS,label:"有序列表",commandName:"toggle-block-type-ordered-list-item",shortcut:"⌘+⇧+L"},{icon:tB.bd,label:"无序列表",commandName:"toggle-block-type-unordered-list-item",shortcut:"⌘+L"}]},{Component:oQ.Z,icon:tO.ZP,label:"目录",commandName:"toggle-catalog",shortcut:"⌘+⌥+J",priority:2},{icon:tR.R7,label:"引用",commandName:"toggle-block-type-blockquote",shortcut:"⌘+⇧+U",priority:3},{icon:tq.Z,label:"分割线",commandName:"insert-divider",shortcut:"⌘+⌥+S",priority:4},{icon:tP.Z,label:"代码块",commandName:"toggle-block-type-code-block",shortcut:"⌘+⌥+C",priority:5},{icon:tF.Z,label:"注释",commandName:"insert-reference",shortcut:"⌘+⌥+R",priority:6}]},{sectionName:"advanced",minLength:2,priority:3,items:[{Component:o$.Z,icon:t$.Z,label:"图片",commandName:"insert-image-from-library",priority:7},!o&&{label:"视频",icon:oU.Z,priority:6,onClick:function(){null==n||n()}},{label:"链接",icon:tU.ZP,commandName:"insert-link",priority:5,shortcut:"⌘+K"},t&&!o&&{label:"收益",icon:nv,commandName:"toggle-user-profit-modal",priority:4},{label:"公式",icon:tH.Z,commandName:"insert-formula",priority:3,shortcut:"⌘+⌥+E"},!o&&{label:"表格",icon:tV.Z,commandName:"insert-table",priority:2,shortcut:"⌘+⌥+T"},{label:"附件",icon:oF,commandName:"insert-file-from-baidu-wangpan",priority:1}].filter(Boolean)}]},o2=function(e){var t=e.getMarkdownEnabled,n=e.onHandleManageEditClick;return[{sectionName:"moreArea",minLength:2,priority:2,items:[{label:"更多",icon:oq.B2,children:[{label:"帮助文档",icon:ei.Ov,commandName:"toggle-help-document",hideMenuOnClick:!0},{label:"默认设置",icon:oH,onClick:function(){return n()},hideMenuOnClick:!0},{Component:function(e){return(0,v.tZ)(o0,(0,s._)({getMarkdownEnabled:t},e))},label:"Markdown 语法识别",icon:oG,commandName:"toggle-markdown-enabled"}]}]}]},o4=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).draftPage;return[{sectionName:"fixArea",minLength:2,priority:2,items:[(0,s._)({label:"文档",icon:oK.j5},e?{children:[{icon:oK.j5,label:"文档",commandName:"insert-doc"},{icon:oY,label:"草稿箱",onClick:function(){location.href=e}}]}:{commandName:"insert-doc"}),{label:"历史版本",icon:ts.ZP,commandName:"toggle-draft-history-modal"}]}]},o3=(0,S.forwardRef)(function(e,t){var n=e.children,o=e.className;return(0,v.tZ)(R.eV,{block:"EditorToolbar",children:(0,v.tZ)("div",{ref:t,css:{width:"100%",display:"flex",justifyContent:"center"},children:(0,v.tZ)("div",{className:y()("toolbarV3",o),css:{display:"flex",overflowX:"auto",padding:"10px 0 10px 20px",boxShadow:"0px -0.5px 0px 0px rgba(235, 235, 235, 1) inset"},onMouseDown:function(e){return e.preventDefault()},children:n})})})}),o5=n(17103),o7=Object.assign;function o6(e){var t;return E().createElement(X.Z,o7(o7({width:"16",height:"16",viewBox:"0 0 16 16"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ArrowDownAlt16"+(t?" "+t:"")}),E().createElement("path",{d:"M7.554 10.505 4.401 7A.6.6 0 0 1 4.847 6h6.306a.6.6 0 0 1 .446 1.001l-3.153 3.503a.6.6 0 0 1-.892 0Z"}))}function o8(e){return E().createElement(o6,o7(o7({},e),{className:function(){return"ZDI ZDI--ArrowDropdown12"+(e.className?" "+e.className:"")}}))}var o9={hover:function(e){return{background:e.colors.GBK10A,borderRadius:"4px"}},isCommandActive:function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}}},re=(0,S.forwardRef)(function(e,t){var n=e.showTogglerIcon,o=e.isMenuOpen,r=e.icon,i=e.isActive,a=e.disabled,l=e.onClick,c=e.className,d=e.text,p=e.label,h=e.sectionIndex,f=e.buttonIndex,m=e.onButtonRectInfoGet,g=(0,S.useRef)(null);(0,S.useEffect)(function(){var e,t=(null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect()).right;t&&(null==m||m({label:p,sectionIndex:h,buttonIndex:f,right:t}))},[h,f]);var b=n&&(0,v.tZ)("div",{className:"togglerIcon",css:{transform:"".concat(o?"rotate(180deg)":"rotate(0deg)"),fontSize:0,marginBottom:"2px"},children:(0,v.tZ)(o8,{})});return(0,v.BX)(R.$U,{as:H.ZP,zaType:"Button",zaText:p,ref:(0,o5.Z)(t,g),preset:H.EE.Plain,className:y()("ToolbarButton",c),disabled:a,css:function(e){return{"&.Button.Button--plain":(0,u._)((0,s._)({marginRight:"20px",padding:"2px 4px",paddingRight:n?"1px":"4px",fontSize:"11px",color:e.colors.GBK03A,textAlign:"center",alignItems:"flex-end",display:"flex",whiteSpace:"nowrap"},i&&o9.isCommandActive(e)),{"&:hover":o9.hover(e)})}},"aria-label":p,onClick:l,children:[(0,v.BX)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,v.tZ)(r,{center:!0}),(0,v.tZ)("span",{css:{width:"100%"},children:null!=d?d:p})]}),b]})});re.propTypes={icon:x().elementType.isRequired,label:x().string.isRequired,isActive:x().bool,disabled:x().bool,showTogglerIcon:x().bool,isMenuOpen:x().bool,className:x().string,text:x().string,shortcut:x().string,onClick:x().func,sectionIndex:x().number,buttonIndex:x().number,onButtonRectInfoGet:x().func},re.defaultProps={isActive:!1,disabled:!1,isMenuOpen:!1,showTogglerIcon:!1,onClick:function(){}};var rt=n(1733),rn=n(4526),ro={hover:function(e){return{background:e.colors.GBK10A,".togglerIcon":{borderLeftColor:e.colors.GBL01A}}},isCommandActive:function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}}},rr=(0,S.forwardRef)(function(e,t){var n=e.isActive,o=e.disabled,r=e.onClick,i=e.icon,a=e.text,l=e.label,c=e.onMouseEnter,u=e.onMouseLeave,d=e.component;return d?(0,v.tZ)(d,(0,s._)({},e)):(0,v.BX)(R.$U,{as:H.ZP,zaType:"Button",zaText:l,preset:H.EE.Plain,"aria-label":l,disabled:o,css:function(e){return{"&.Button.Button--plain":(0,s._)({padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px","&:hover":ro.hover(e),"&:active":ro.isCommandActive(e)},n&&ro.isCommandActive(e))}},onClick:r,onMouseEnter:c,onMouseLeave:u,ref:t,children:[(0,v.tZ)(i,{center:!0,css:{marginRight:"4px"}}),null!=a?a:l]})});function ri(e,t,n){return!!n&&((null==e?void 0:e.children)?e.children.find(function(e){return ri(e,t,n)}):e.commandName?t(e.commandName,n)&&e:void 0)}function ra(e,t,n){return!!n&&((null==e?void 0:e.children)?e.children.some(function(e){return ra(e,t,n)}):t(e.commandName,n))}function rl(e){var t=e.items,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState;return t.map(function(e){if(!0===e.hide)return null;var t,a,l,c=ri(e,o,i),s=!ra(e,r,i);return(null==e?void 0:null===(t=e.children)||void 0===t?void 0:t.length)?(0,v.tZ)(rt.ZP,{toggleEvent:"hover",placement:rn.RIGHT,enterDelay:300,leaveDelay:300,toggler:(0,v.tZ)(rr,{icon:null!==(a=null==c?void 0:c.icon)&&void 0!==a?a:e.icon,onClick:function(t){var o;null===(o=e.onClick)||void 0===o||o.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!c,disabled:s}),className:"ToolbarV3SubmenuButton",children:(0,v.tZ)(rl,{items:e.children,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i})},e.label):(0,v.tZ)(rr,{icon:null!==(l=null==c?void 0:c.icon)&&void 0!==l?l:e.icon,onClick:function(t){var o;null===(o=e.onClick)||void 0===o||o.call(e,t),e.commandName&&n(e.commandName),e.hideMenuOnClick&&document.body.click()},label:e.label,isActive:!!c,disabled:s,component:e.Component},e.label)})}function rc(e){var t=e.subMenu,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,a=e.isActive,l=e.label,c=e.shortcut,s=e.disabled,u=e.onClick,p=e.icon,h=e.sectionIndex,f=e.buttonIndex,m=e.onButtonRectInfoGet,g=(0,d._)((0,S.useState)(!1),2),b=g[0],C=g[1],Z=(0,v.tZ)(re,{isMenuToggler:!0,isMenuOpen:b,showTogglerIcon:!0,icon:p,isActive:a,disabled:s,shortcut:c,onClick:u,label:l,sectionIndex:h,buttonIndex:f,onButtonRectInfoGet:m});return(0,v.tZ)(rt.ZP,{toggler:Z,onOpen:function(){return C(!0)},onClose:function(){return C(!1)},arrowed:!1,menuContainerClassName:"ToolbarV3Menu-container",preventCloseOnTarget:!0,children:(0,v.tZ)(rl,{items:t,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i})})}function rs(){return(0,v.tZ)("span",{className:"ToolbarDivider",css:function(e){return{height:"20px",borderRight:"1px solid",borderColor:e.colors.GBK09A,marginLeft:"-4px"}}})}function ru(e){var t=e.items,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,a=e.showDivider,l=e.showRightSpace,c=e.replaceIconByOnlyChild,d=void 0===c||c,p=e.shouldHide,h=e.sectionIndex,f=e.onButtonRectInfoGet;return(null==p?void 0:p(t))?null:(0,v.BX)("div",{className:"toolbar-section",css:(0,s._)({display:"flex",alignItems:"center"},l&&{marginRight:"16px"}),children:[t.filter(function(e){return!!e}).map(function(e,t){var a,l=e.Component,c=e.label,p=e.text,m=e.children,g=e.shortcut,b=e.commandName,C=e.onClick;if(!0===e.hide)return null;var Z=ri(e,o,i),y=!ra(e,r,i),_=e.icon,w={label:c,icon:_,disabled:y,shortcut:g,isActive:!!Z,text:p,sectionIndex:h,buttonIndex:t,onButtonRectInfoGet:f,onClick:function(e){null==C||C(e),b&&n(b)}};if((null==m?void 0:m.length)>1||!d&&(null==m?void 0:m.length)>0)_=(null==Z?void 0:Z.icon)||_,a=rc,w=(0,u._)((0,s._)({},w),{icon:_,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i,subMenu:m});else if((null==m?void 0:m.length)===1&&d){a=re;var k=m[0],x=k.icon,S=k.label,E=k.text,I=k.shortcut,T=k.commandName;w=(0,u._)((0,s._)({},w),{icon:x,label:S,text:E,shortcut:I,onClick:function(e){null==C||C(e),T&&n(T)}})}else a=re;return l?(0,v.tZ)(l,(0,s._)({toolbarButton:a},w),e.label):(0,v.tZ)(a,(0,s._)({},w),e.label)}),a&&(0,v.tZ)(rs,{})]})}rr.propTypes={icon:x().elementType.isRequired,label:x().string.isRequired,isActive:x().bool,disabled:x().bool,className:x().string,text:x().string,shortcut:x().string,onClick:x().func,onMouseEnter:x().func,onMouseLeave:x().func},rr.defaultTypes={isActive:!1,disabled:!1,onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}},rl.propTypes={items:x().arrayOf(x().oneOfType([x().object,x().bool])).isRequired,onCommand:x().func.isRequired,queryCommandState:x().func.isRequired,queryCommandEnable:x().func.isRequired,editorState:x().object.isRequired},rc.propTypes={icon:x().elementType.isRequired,subMenu:x().arrayOf(x().oneOfType([x().object,x().bool])).isRequired,label:x().string.isRequired,onCommand:x().func.isRequired,queryCommandEnable:x().func.isRequired,queryCommandState:x().func.isRequired,editorState:x().object.isRequired,shortcut:x().string,disabled:x().bool,isActive:x().bool,onClick:x().func,sectionIndex:x().number,buttonIndex:x().number,onButtonRectInfoGet:x().func},rc.defaultTypes={disabled:!1,isActive:!1,onClick:function(){}},ru.propTypes={items:x().arrayOf(x().oneOfType([x().object,x().bool])).isRequired,onCommand:x().func.isRequired,queryCommandState:x().func.isRequired,queryCommandEnable:x().func.isRequired,shouldHide:x().func,editorState:x().object.isRequired,showDivider:x().bool.isRequired,showRightSpace:x().bool.isRequired,isMoreSection:x().bool,sectionIndex:x().number,replaceIconByOnlyChild:x().bool,onButtonRectInfoGet:x().func};var rd=(0,S.forwardRef)(function(e,t){var n=e.mainSections,o=e.setButtonRectInfo,r=e.onCommand,i=e.queryCommandState,a=e.queryCommandEnable,l=e.editorState;return(0,v.tZ)("div",{className:"mainArea",ref:t,css:{display:"flex",flexShrink:1},children:n.map(function(e,t,n){return e&&n?e.items.length>0&&(0,v.tZ)(ru,{sectionIndex:t,onButtonRectInfoGet:o,items:e.items,onCommand:r,queryCommandState:i,queryCommandEnable:a,editorState:l,showDivider:!0,showRightSpace:!0},e.sectionName):null})})}),rp=(0,S.forwardRef)(function(e,t){var n=e.moreSections,o=e.onCommand,r=e.queryCommandState,i=e.queryCommandEnable,a=e.editorState;return(0,v.tZ)("div",{className:"moreArea",ref:t,css:{display:"flex"},children:n.map(function(e){return e?e.items.length>0&&(0,v.tZ)(ru,{items:e.items,onCommand:o,queryCommandState:r,queryCommandEnable:i,editorState:a,showDivider:!1,showRightSpace:!1,replaceIconByOnlyChild:!1,shouldHide:function(e){return e.every(function(e){var t;return(null==e?void 0:null===(t=e.children)||void 0===t?void 0:t.length)===0})}},e.sectionName):null})})}),rh=(0,S.forwardRef)(function(e,t){var n=e.fixSections,o=e.onCommand,r=e.queryCommandState,i=e.queryCommandEnable,a=e.editorState;return(0,v.tZ)("div",{className:"fixArea",ref:t,css:{display:"flex"},children:n.map(function(e){return e.items.length>0&&(0,v.tZ)(ru,{items:e.items,onCommand:o,queryCommandState:r,queryCommandEnable:i,editorState:a,showDivider:!1,showRightSpace:!1},e.sectionName)})})}),rf=n(95951),rm=n(86105);function rv(e){var t,n,o,r,i,a,l,c,s,u,p,h,f,m,g,b,C,Z,y,_,w=e.onCommand,k=e.queryCommandState,x=e.queryCommandEnable,E=e.editorState,I=e.toolbarMainAreaData,T=e.toolbarMoreAreaData,N=e.toolbarFixtureAreaData,A=e.className,B=(n=(t={toolbarMainAreaData:I,toolbarMoreAreaData:T}).toolbarMainAreaData,o=t.toolbarMoreAreaData,i=(r=(0,d._)((0,S.useState)(function(){return[(0,rm.fromJS)(n),(0,rm.fromJS)(o)]}),2))[0],a=r[1],c=(l=(0,d._)((0,S.useState)(!1),2))[0],s=l[1],p=(u=(0,d._)((0,rf.Z)(),2))[0],h=u[1],f=(0,S.useRef)(null),m=(0,S.useRef)(null),g=(0,S.useRef)(null),b=(0,S.useRef)(0),C=(0,eA.Z)(function(e){e&&(f.current=e,b.current=e.offsetLeft)}),Z=(0,S.useRef)([]),y=(0,eA.Z)(function(e){var t=e.label,n=e.sectionIndex,o=e.buttonIndex,r=e.right;Z.current.push({label:t,right:r,sectionIndex:n,buttonIndex:o}),Z.current=Z.current.sort(function(e,t){var n=e.sectionIndex,o=e.buttonIndex,r=t.sectionIndex,i=t.buttonIndex;return n>r?-1:n<r?1:o>i?-1:o<i?1:0})}),_=(0,eA.Z)(function(){var e=null==h?void 0:h.width,t=null==f?void 0:null===(r=f.current)||void 0===r?void 0:r.getBoundingClientRect().width,n=(null==m?void 0:null===(l=m.current)||void 0===l?void 0:l.getBoundingClientRect().width)||0,o=null==g?void 0:null===(c=g.current)||void 0===c?void 0:c.getBoundingClientRect().width;if(e&&t&&void 0!==n&&o){var r,l,c,u,p=e-n-o,v=null===(u=Z.current)||void 0===u?void 0:u.find(function(e){return p>e.right-b.current});if(v){var C=v.sectionIndex,y=v.buttonIndex,_=C,w=y;C<3&&(_=3),(C<3||y<1)&&(w=1);var k=(0,d._)(i,2),x=k[0],S=k[1],E=x.getIn([_,"items"]),I=S.getIn([0,"items",0,"children"]),T=E.concat(I),N=T.slice(0,w+1),A=T.slice(w+1);a([x.setIn([_,"items"],N),S.setIn([0,"items",0,"children"],A)])}}s(!1)}),(0,S.useEffect)(function(){a([(0,rm.fromJS)(n),(0,rm.fromJS)(o)]),s(!0)},[n]),(0,S.useEffect)(function(){c&&_()},[c]),(0,S.useEffect)(function(){s(!0)},[h]),(0,nT.Z)(function(){s(!0)}),{mainSections:i[0].toJS(),moreSections:i[1].toJS(),setToolbarRef:p,setMainAreaRef:C,moreAreaRef:m,fixAreaRef:g,setButtonRectInfo:y}),R=B.mainSections,P=B.moreSections,z=B.setToolbarRef,L=B.setMainAreaRef,M=B.moreAreaRef,D=B.fixAreaRef,U=B.setButtonRectInfo;return(0,v.BX)(o3,{ref:z,className:A,children:[(0,v.tZ)(rd,{ref:L,mainSections:R,setButtonRectInfo:U,onCommand:w,queryCommandState:k,queryCommandEnable:x,editorState:E}),(0,v.tZ)(rh,{ref:D,fixSections:N,queryCommandEnable:x,queryCommandState:k,onCommand:w,editorState:E}),(0,v.tZ)(rp,{ref:M,queryCommandState:k,queryCommandEnable:x,editorState:E,onCommand:w,moreSections:P})]})}function rg(e){var t,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,a=e.toolbarMainAreaData,l=e.toolbarMoreAreaData,c=e.toolbarFixtureAreaData,s=e.className;return(0,v.BX)(o3,{className:s,css:{".ToolbarButton.Button.Button--plain":{marginRight:"6px"},".ToolbarDivider":{marginLeft:"0",paddingLeft:"2px"},".toolbar-section":{marginRight:"8px"},".fixArea .toolbar-section, .moreArea .toolbar-section":{marginRight:"0px"},".fixArea .ToolbarButton.Button.Button--plain:last-child, .moreArea .ToolbarButton.Button.Button--plain:last-child":{marginRight:"0px"},"&.toolbarV3":{paddingLeft:"0px"}},children:[(0,v.tZ)(rd,{mainSections:a,moreSectionIsEmpty:(null===(t=l[0])||void 0===t?void 0:t.items[0].children.length)===0,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i}),(0,v.tZ)(rh,{fixSections:c,queryCommandEnable:r,queryCommandState:o,onCommand:n,editorState:i}),(0,v.tZ)(rp,{queryCommandState:o,queryCommandEnable:r,editorState:i,onCommand:n,moreSections:l})]})}var rb=function(e){var t=e.editorState,n=e.onCommand,o=e.queryCommandEnable,r=e.queryCommandState,i=e.showUserProfitButton,a=e.isVideoAnswer,l=e.onInsertVideoClick,c=e.draftPage,s=e.className,u=e.useMediumEditor,d=e.getMarkdownEnabled,p=t1().jumpUrl,h=(0,S.useMemo)(function(){return o1({showProfit:i,onInsertVideoClick:l,isVideoAnswer:a,shouldAdaptNative:"1"===en.Z.apollo.editor_adapt_native})},[i,l,a]),f=(0,S.useMemo)(function(){return o4({draftPage:c})},[c]),m=(0,S.useMemo)(function(){return o2({getMarkdownEnabled:d,onHandleManageEditClick:function(){return window.open(p)}})},[d,p]),g=u?rg:rv;return(0,v.tZ)(g,{editorState:t,onCommand:n,queryCommandEnable:o,queryCommandState:r,toolbarMainAreaData:h,toolbarMoreAreaData:m,toolbarFixtureAreaData:f,className:s})},rC="AnswerOrg::know",rZ=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,o._)(e),"handleHide",function(){F().set(rC,!0),e.props.onClose()}),e}return(0,a._)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return(0,v.tZ)(z.Z,{title:"机构账号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&(0,v.BX)("div",{children:[(0,v.BX)("ul",{className:"AnswerModal-list",children:[(0,v.tZ)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),(0,v.tZ)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),(0,v.tZ)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),(0,v.tZ)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),(0,v.BX)(z.w,{direction:"horizontal",children:[(0,v.tZ)(H.ZP,{onClick:this.handleHide,children:"不再显示"}),(0,v.tZ)(H.ZP,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})}}],[{key:"getKnown",value:function(){return F().get(rC)}}]),n}(S.Component),ry=n(24419),r_=n(81956),rw=n(17721),rk={timer:"showEvaluatePanelTimer",hasShown:"isShowEvaluatePanel"},rx=function(e){return(0,v.tZ)(R.$U,(0,u._)((0,s._)({as:"button",zaType:"Button",zaText:"关闭nps",css:{position:"absolute",top:"11px",right:"11px"}},e),{children:(0,v.tZ)(ed.HN,{width:"16",height:"16"})}))},rS=function(e){return(0,v.tZ)(N.Box,{css:{textAlign:"right"},children:(0,v.tZ)(R.$U,(0,u._)((0,s._)({as:"button",zaType:"Button",zaText:"提交nps",css:function(e){return{color:e.colors.GBL01A,fontSize:"12px"}}},e),{children:"确认提交"}))})},rE=function(e){return(0,v.tZ)(R.$U,(0,s._)({as:"button",zaType:"Button",css:function(e){return{width:"25px",display:"inline-block",textAlign:"center",lineHeight:"25px",background:e.colors.GBK10A,borderRadius:"2px",color:e.colors.GBK06A,marginRight:"2px",cursor:"pointer","&:hover":{background:e.colors.GBK09A}}}},e))};function rI(e){var t=e.editorFrom,n=e.storageKey,o=void 0===n?"":n,r=(0,d._)((0,S.useState)(""),2),i=r[0],a=r[1],l=(0,d._)((0,S.useState)("10"),2),c=l[0],s=l[1],u=(0,d._)((0,S.useState)(""),2),p=u[0],h=u[1],f=(0,S.useRef)(),m=(0,rw.Z)(),g=(0,r_.Z)(),b=(0,eA.Z)(function(e){g("https://api.zhihu.com/slytherin/fallback/".concat(t),{method:"POST",body:{score:e,content:p}})});return((0,S.useEffect)(function(){var e=new Date().getTime()>F().get(rk.timer+o);if(F().get(rk.hasShown+o)&&!e){a("");return}a(""),setTimeout(function(){a("0"),F().set(rk.hasShown+o,"1"),F().set(rk.timer+o,new Date().getTime()+5184e6),f.current=setTimeout(function(){a("")},6e4)},6e5)},[o]),""===i)?null:(0,v.tZ)(R.eV,{block:"editorEvaluatePanel",children:(0,v.tZ)(R.Wi,{zaText:"nps展示",zaType:"Block",children:(0,v.BX)(N.Box,{css:function(e){return{width:"310px",position:"fixed",bottom:"72px",right:"110px",background:e.colors.GBK99A,padding:"20px",boxShadow:"0px 1px 3px rgba(26, 26, 26, 0.1)",zIndex:"101"}},children:[(0,v.tZ)(rx,{onClick:function(){a("")}}),"0"===i&&(0,v.BX)(N.Box,{children:[(0,v.tZ)(N.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A}},children:"亲爱的创作者，感谢您对知乎内容的贡献"}),(0,v.tZ)(N.Box,{css:function(e){return{fontSize:"13px",color:e.colors.GBK06A,marginTop:"10px",marginBottom:"20px"}},children:"请选择您对编辑器的满意度，以帮助我们更好的服务于您的创作体验"}),(0,v.tZ)(N.Box,{className:"evaluate-box",children:[1,2,3,4,5,6,7,8,9,10].map(function(e,t){return(0,v.tZ)(rE,{zaText:"打分-".concat(e),onClick:function(){clearTimeout(f.current),e<=6?a("1"):e>6&&(a(""),m({text:"感谢您的反馈",delay:2e3}),b(e)),s(e)},children:e},t)})}),(0,v.BX)(N.Flex,{justifyContent:"space-between",css:function(e){return{color:e.colors.GBK03A,marginTop:"15px",fontSize:"11px",lineHeight:"12px"}},children:[(0,v.tZ)("span",{role:"img","aria-label":"不满意",children:"不满意\uD83D\uDC4E"}),(0,v.tZ)("span",{role:"img","aria-label":"满意",children:"满意\uD83D\uDC4D"})]})]}),"1"===i&&(0,v.BX)(N.Box,{children:[(0,v.tZ)(N.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A,marginBottom:"10px"}},children:"请写下您的意见或建议"}),(0,v.tZ)(N.Box,{children:(0,v.tZ)(ry.Z,{className:"Appeal-TextArea",rows:7,placeholder:"请写下您的建议...",css:{width:"270px",height:"85px"},value:p,onChange:function(e){h(e.target.value)}})}),(0,v.tZ)(N.Box,{css:{textAlign:"right"},children:(0,v.tZ)(rS,{onClick:function(){a(""),b(c),m({text:"感谢您的反馈",delay:1e3})}})})]})]})})})}var rT=n(28753),rN=n(81488),rA=function(e){var t=e.children,n=e.className;return(0,v.tZ)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},rB=function(e){var t=e.question,n=e.onClose,o=t.title,r=t.detail,i=(0,d._)((0,S.useState)(null),2),a=i[0],l=i[1],c=(0,S.useRef)(null),s=(0,S.useCallback)(function(){return c.current},[]);return(0,v.tZ)("div",{css:{position:"absolute",top:0,bottom:0,left:"100%",width:"calc((100vw - 100%)/2 - 20px)"},ref:c,children:(0,v.BX)(N.Box,{css:{overflow:"hidden",width:"326px",maxWidth:"326px"},children:[(0,v.tZ)(U.Z,{getStyle:function(){var e=s();return e?{top:85,left:e.getBoundingClientRect().left}:{top:85}},offset:85,container:s,children:(0,v.BX)(N.Box,{css:{width:"326px",maxWidth:"326px"},pl:"16px",children:[(0,v.BX)(N.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"60px",alignItems:"center"},children:[(0,v.tZ)(rA,{css:{fontSize:"18px",lineHeight:"24px"},children:"问题描述"}),(0,v.tZ)(R.$U,{zaType:"Button",zaAction:"Unknown",zaText:"关闭问题详情",as:tk.eb,css:{marginLeft:"auto",padding:"16px"},onClick:n})]}),(0,v.BX)(N.Box,{bg:"GBK99A",px:"16px",css:{minHeight:"340px",maxHeight:"460px",overflow:"auto"},onClick:function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&l(t)},children:[(0,v.tZ)(rA,{css:{fontSize:"16px",lineHeight:"22px",marginBottom:"10px",marginTop:"10px"},children:o}),(0,v.tZ)(th.Z,{itemProp:"text",tag:"span",html:r})]})]})}),a&&(0,v.tZ)(rN.Z,{img:a,onClose:function(){return l(null)}})]})})},rR=function(e){var t=e.question,n=e.onClick,o=t.title,r=t.excerpt;return(0,v.tZ)(N.Box,{bg:"GBK99A",css:{padding:"20px 64px 0"},children:(0,v.BX)(rA,{css:function(e){return{paddingBottom:"20px",borderBottom:"1px solid ".concat(e.colors.GBK09A)}},children:[o,r&&(0,v.BX)(R.$U,{as:"button",zaType:"Button",zaText:!0,onClick:n,shouldTrackShow:!0,css:function(e){return{color:e.colors.GBL05A,lineHeight:"14px",fontSize:"14px",fontWeight:"normal",display:"inline-flex",alignItems:"center"}},children:["问题描述",(0,v.tZ)(rT.f,{size:16})]})]})})},rP=n(74351);function rz(){var e=(0,p._)(["字数：",""]);return rz=function(){return e},e}function rL(){var e=(0,p._)(["草稿保存于",""]);return rL=function(){return e},e}var rM={questionDetail:"questionDetail"},rD=function(e){(0,c._)(n,e);var t=(0,f._)(n);function n(e,a){(0,i._)(this,n),c=t.call(this,e,a),(0,l._)((0,o._)(c),"toolbarWrapperRef",(0,S.createRef)()),(0,l._)((0,o._)(c),"helpDocMilestoneRef",(0,S.createRef)()),(0,l._)((0,o._)(c),"zaRef",(0,S.createRef)()),(0,l._)((0,o._)(c),"editableReady",function(){var e=c.props,t=e.reporter,n=e.draft;t.reportSuccess(oP.editableInit),n&&t.reportSuccess(oP.draftLoad)}),(0,l._)((0,o._)(c),"resetCompositionStatus",function(){c.resetCompositionStatus.timerId=setTimeout(function(){ny()},3e4)}),(0,l._)((0,o._)(c),"cancelResetCompositionStatus",function(){void 0!==c.resetCompositionStatus.timerId&&(c.resetCompositionStatus.timerId=clearTimeout(c.resetCompositionStatus.timerId))}),(0,l._)((0,o._)(c),"compositionReporter",nw("AnswerEditor")),(0,l._)((0,o._)(c),"onCompositionStart",function(){c.props.reporter.reportRequest(oP.composition),c.compositionReporter.cancel(),c.cancelResetCompositionStatus(),c.compositionReporter(),c.resetCompositionStatus(),c.composition=!0,c.syncDraft.cancel()}),(0,l._)((0,o._)(c),"onCompositionEnd",function(){c.props.reporter.reportSuccess(oP.composition),c.compositionReporter.cancel(),c.cancelResetCompositionStatus(),c.composition=!1,c.prevValue&&c.syncDraft(c.prevValue),c.prevValue=null}),(0,l._)((0,o._)(c),"onChangeContent",function(e){c.loggingDeltaTime||(c.loggingDeltaTime=!0,c.startCompositionTime=Math.floor(new Date().getTime()/1e3)),c.hasEdited=!0,c.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),c.composition?c.prevValue=e:c.syncDraft(e)}),(0,l._)((0,o._)(c),"onAfterChangeContent",function(e){requestAnimationFrame(function(){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var o=n.getRangeAt(0).cloneRange();o.collapse(t);var r=o.getBoundingClientRect();if(0===r.height){var i=o.commonAncestorContainer;if(1===i.nodeType&&(r=i.getBoundingClientRect()).height>30)return}if(0!==r.height){var a=r.bottom-(window.innerHeight-117);a>0&&window.scrollBy(0,a)}}})}),(0,l._)((0,o._)(c),"onDeleteDraftModalShow",function(){c.setState({deleteDraftModalShown:!0})}),(0,l._)((0,o._)(c),"onDeleteDraft",function(){var e=c.props,t=e.isReediting,n=e.activeTabKey;t||(n===V.Y.videoAnswer?c.editable.clearAllContent():c.editable.reset(),c.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),c.deleteDraft();var o=c.props.onDeleteDraft;o&&o()}),(0,l._)((0,o._)(c),"onDeleteDraftModalHide",function(){c.setState({deleteDraftModalShown:!1})}),(0,l._)((0,o._)(c),"checkVideoSectionReady",function(e){if(!e)return M.Z.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return M.Z.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var o=c.editable.checkVideoStatus();if(o.isUploading)return M.Z.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(o.hasError)return M.Z.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0}),(0,l._)((0,o._)(c),"checkEditorContentReady",function(){return c.editable.hasVideo("upload")?(c.handleError("video-uploading"),!1):c.editable.hasImage("upload")?(c.handleError("image-uploading"),!1):c.editable.hasImage("error")||c.editable.hasVideo("error")&&!c.editable.hasVideo("error-review")?(M.Z.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!(c.editable.hasVideo("error-review")||c.editable.hasVideo("censor"))||(M.Z.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)}),(0,l._)((0,o._)(c),"getSubmitData",function(e,t,n){var r=c.state.scheduledPublishAt,i=c.props,a=i.answer,l=i.disclaimers,s=i.settings,u=i.isReediting,d=i.getFormData,p={content:t},h=d(),f=h.isDisclaimerChecked,m=h.disclaimerType,g=h.rewardTagline,b=h.pushActivity,C=h.commentPermission,Z=h.reshipmentSettings,y=h.isReport,k=h.commercialZhitaskBindInfo,x=h.thankInviterInfo;if(!u){var S=c.props.currentUser.caEnabled?"need_payment":"allowed";p.reshipmentSettings=Z||S,p.commentPermission=C||"all"}if(p.rewardSetting={canReward:!!g,tagline:g},e)return{content:t,attachment:n,rewardSetting:p.rewardSetting,reshipmentSettings:p.reshipmentSettings,commentPermission:p.commentPermission};if(l&&l.length&&(!a||s)&&(p.disclaimerStatus=f?"open":"close",p.disclaimerType=m||"none"),p.commercialReportInfo={isReport:!!y},p.commercialZhitaskBindInfo=(null==k?void 0:k.bindTaskDTO)?{bind_operate:"BIND",task_id:k.bindTaskDTO.taskId,task_type:k.bindTaskDTO.taskType}:null,p.isReport=!!y,r){if(B.Z.trackEvent((0,o._)(c),{action:"Click",id:5733,name:"回答"}),_.Z(r,w.Z(new Date,30))){M.Z.alert((0,v.tZ)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});return}p.publishAt=Math.floor(r/1e3)+0}return void 0!==b&&(p.pushActivity=b),(null==n?void 0:n.bizExt)&&(p.bizExt=(0,ej.dj)(n.bizExt)),p.tableOfContentsEnabled=c.editable.hasCatalog(),Object.assign(p,(0,nN.jd)(x,"answer")),p}),(0,l._)((0,o._)(c),"canSubmit",function(){var e,t,n=null===(e=c.editable)||void 0===e?void 0:e.toHTML(),o=c.isVideoAnswer?null===(t=c.editable)||void 0===t?void 0:t.getAttachment():null;return c.isVideoAnswer?!!(o||n):!!n});var c,d=(0,o._)(c);(0,l._)((0,o._)(c),"handleSubmit",(0,r._)(function(){var e,t,n,o,r,i,a,l,c,u,p,h,f,v,g,b,C,Z,y,_,w,k,x,S,E;return(0,m.__generator)(this,function(m){switch(m.label){case 0:return[4,new Promise(function(e,t){d.props.authRequired([e,t])()})];case 1:m.sent(),(n=d.props.reporter).reportRequest(oP.addAnswer),(null===(e=d.editable)||void 0===e?void 0:null===(t=e.hasFormula)||void 0===t?void 0:t.call(e))&&n.reportRequest(oP.hasFormula);try{if(r=(o=d.props).answer,i=o.draft,a=o.isReediting,l=o.onSubmit,c=o.showNotification,p=(u=o.question).id,h=u.questionType,f=u.brand,v=o.currentUser,g=o.updateSettingsDisclaimer,b=o.loadLabel,C=o.onCancel,Z=o.useMediumEditor,!d.editable)return C(),n.reportSuccess(oP.addAnswer),[2];if(!d.canSubmit()||(y=d.editable.toHTML(),nE(d.props.reporter,y,".AnswerForm",d.editable),_=d.isVideoAnswer?d.editable.getAttachment():null==i?void 0:i.attachment,d.isVideoAnswer&&!d.checkVideoSectionReady(_)||!d.checkEditorContentReady()))return n.reportSuccess(oP.addAnswer),[2];if(!(w=d.getSubmitData(d.isVideoAnswer,y,(0,s._)({},_))))return[2];return k=function(){B.Z.trackCardShow(null,{id:7879}),a||B.Z.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(p),author_member_hash_id:v.id}]}}],status:{result:"Success",event:{action:"Submit"}}})},x=d.zaRef.current.trackEvent,S=Promise.resolve(l(w)).then(function(e){var t;if(x({action:"Answer",eventType:"Click",elementLocation:{type:"Button",moduleId:"published_successful",content:{type:"Answer",token:String(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.id)}}},{configMap:{traceId:d.props.traceId}}),n.reportSuccess(oP.addAnswer),Z&&(r&&w.disclaimerStatus&&g(r.id,w.disclaimerStatus,w.disclaimerType),r&&b("answer",r.id),"commercial"===h)){var o=(null==f?void 0:f.toastAnswerDescription)||"已发布！由品牌筛选后进入推荐区。";c(o)}}).then(k).catch(function(e){var t;e.status&&(null===(t=e.status)||void 0===t?void 0:t.toString()[0])!=="5"||n.reportFail(oP.addAnswer,e),a||B.Z.trackEvent(d,{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}),E=a?"Edit":"Answer","Answer"===E&&B.Z.trackEvent(d,{id:4930}),B.Z.trackEvent(d,{action:E,is_intent:!1}),[2,S]}catch(e){throw n.reportFail(oP.addAnswer,e),e}return[2]}})})),(0,l._)((0,o._)(c),"validateBeforeCancel",function(){return c.editable.hasVideo("upload")?(c.handleError("video-uploading-draft"),!1):!c.editable.hasImage("upload")||(c.handleError("image-uploading-draft"),!1)}),(0,l._)((0,o._)(c),"onCancel",function(){var e=c.props.onCancel;c.validateBeforeCancel()&&(c.hasEdited&&c.syncDraftImmediately(),e&&e())}),(0,l._)((0,o._)(c),"onFocus",function(){"org"===c.props.question.questionType&&c.shouldAnswerOrgQuestionModalShow&&c.handleAnswerOrgQuestionModalShow(),c.setState({focusing:!0})}),(0,l._)((0,o._)(c),"onFocusWithAuth",function(){return c.onFocusAuthChecked?c.onFocus():(c.onFocusAuthChecked=!0,c.props.authRequired(c.onFocus)())}),(0,l._)((0,o._)(c),"onSelectText",function(e){c.setState({selectedText:e.replace(/\s/g,"")})}),(0,l._)((0,o._)(c),"onLoadStart",function(){c.setState({loadingShown:!0})}),(0,l._)((0,o._)(c),"onLoadEnd",function(){c.setState({loadingShown:!1})}),(0,l._)((0,o._)(c),"handleInsertZVideo",function(){c.setState({showInsertableVideoUploader:!0})}),(0,l._)((0,o._)(c),"getAllInviters",function(){var e=c.props,t=e.question;return(0,e.fetchAllInviters)(t.id)}),(0,l._)((0,o._)(c),"getToolbarSidePlugins",function(){return null}),(0,l._)((0,o._)(c),"getToolbarMenuPlugins",function(){var e=c.state.scheduledPublishAt;return(0,v.tZ)(S.Fragment,{children:c.canUseScheduledPublish&&(0,v.BX)(D.uh,{onClick:function(){c.setUseScheduledPublish(!e),B.Z.trackEvent((0,o._)(c),{action:"Click",id:5730,name:"回答"})},children:[(0,v.tZ)(g.a,{text:!0}),e?"取消定时发布":"定时发布"]})})}),(0,l._)((0,o._)(c),"setUseScheduledPublish",function(e,t){if(e){if(t)c.setState({scheduledPublishAt:t});else{var n=w.Z(new Date,30);c.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}}else M.Z.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then(function(){c.setState({scheduledPublishAt:void 0}),B.Z.trackEvent(c,{action:"Click",id:5737,name:"回答"})}).catch(function(){B.Z.trackEvent((0,o._)(c),{action:"Click",id:5736,name:"回答"})}),B.Z.trackCardShow((0,o._)(c),{id:5735,name:"回答"})}),(0,l._)((0,o._)(c),"getEditorState",function(){return c.editable.state.editorState?c.editable.state.editorState:c.editable.getEditorState()}),(0,l._)((0,o._)(c),"toggleFullscreen",function(){var e,t,n;if(c.validateBeforeCancel()){if(c.hasEdited){c.syncDraftImmediately().finally(function(){var e,t,n;(0,nN.aH)(c.props.question.id,null===(e=c.props.answer)||void 0===e?void 0:e.id),null===(n=(t=c.props).onCancel)||void 0===n||n.call(t)});return}(0,nN.aH)(c.props.question.id,null===(e=c.props.answer)||void 0===e?void 0:e.id),null===(n=(t=c.props).onCancel)||void 0===n||n.call(t)}}),(0,l._)((0,o._)(c),"handleUploadStart",function(){c.setState({isUploading:!0})}),(0,l._)((0,o._)(c),"handleUploadEnd",function(){c.setState({isUploading:!1})}),(0,l._)((0,o._)(c),"handleUploadError",function(e,t){switch(t){case"video":c.handleError("video-upload-error");break;case"image":c.handleError("image-upload-error",e)}}),(0,l._)((0,o._)(c),"handleAnswerOrgQuestionModalShow",function(){c.setState({answerModalShown:!0}),c.shouldAnswerOrgQuestionModalShow=!1}),(0,l._)((0,o._)(c),"handleAnswerModalHide",function(){c.setState({answerModalShown:!1})}),(0,l._)((0,o._)(c),"updateDraftSettings",function(){c.hasSettingsChange=!0,c.syncDraft()}),(0,l._)((0,o._)(c),"syncDraftImmediately",c.props.reporter.recordError(oP.draftSave,function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.state.content;if(c.editable){var o=c.props,r=o.reporter,i=o.draft,a=c.state.lastUpdatedTime,l=n.toHTML(),s=Math.floor(Date.now()/1e3);e=!a||c.startCompositionTime-a>180?s-c.startCompositionTime:s-a,c.setState({isTyping:!1});var u=c.props.answer,d=(void 0===u?{}:u).attachment;t=c.videoAnswerEditable||(null==d?void 0:d.type)==="zvideo"?"video_answer":(null==d?void 0:d.type)==="video"?"video_answer_v2":"normal";var p=c.isVideoAnswer?n.getAttachment():null==i?void 0:i.attachment,h=c.hasSettingsChange||(c.isVideoAnswer?!!(p||l):!!l);c.hasSettingsChange=!1;var f=c.getDraftSettings(c.isVideoAnswer);return h?c.updateDraft(l,e,t,p,f).then(function(e){var t;(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.updatedTime)&&c.setState({lastUpdatedTime:e.payload.updatedTime}),c.loggingDeltaTime=!1,r.reportSuccess(oP.draftSave),B.Z.trackEvent(c,{action:"AutoSave"})},function(e){throw r.reportFail(oP.draftSave,e),e}).finally(function(){delete c.startCompositionTime}):(r.reportSuccess(oP.draftSave),Promise.resolve(c.deleteDraft()))}})),(0,l._)((0,o._)(c),"syncDraft",(0,eJ.Z)(c.syncDraftImmediately,2e3)),(0,l._)((0,o._)(c),"getDraftSettings",function(e){var t=c.props,n=t.answer,o=t.disclaimers,r=t.settings,i=t.isReediting,a=t.getFormData,l={},s=a(),u=s.isDisclaimerChecked,d=s.disclaimerType,p=s.rewardTagline,h=s.pushActivity,f=s.commentPermission,m=s.reshipmentSettings,v=s.isReport,g=s.thankInviterInfo,b=void 0===g?"":g;if(!i){var C=c.props.currentUser.caEnabled?"need_payment":"allowed";l.reshipmentSettings=m||C}if(l.commentPermission=f||"all",l.canReward=!!p,l.tagline=p,e)return l;o&&o.length&&(!n||r)&&(l.disclaimerStatus=u?"open":"close",l.disclaimerType=d||"none"),l.commercialReportInfo={is_report:!!v},void 0!==h&&(l.pushActivity=h),l.tableOfContentsEnabled=c.editable.hasCatalog();var Z=(0,nN.jd)(b);return l.thankInviterStatus=Z.thankInviterStatus,l.thankInviter=Z.thankInviter,l}),(0,l._)((0,o._)(c),"updateDraft",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=c.props,r=o.question.id,i=o.draft,a=o.addDraft,l=o.updateDraft;return i?l.apply(void 0,[r].concat((0,h._)(t))):a.apply(void 0,[r].concat((0,h._)(t)))}),(0,l._)((0,o._)(c),"focus",function(){c.editable&&c.editable.focus()}),(0,l._)((0,o._)(c),"hasVideo",function(){return!!c.editable&&c.editable.hasVideo()}),(0,l._)((0,o._)(c),"hasADLinkCard",function(){return!!c.editable&&c.editable.hasADLinkCard()}),(0,l._)((0,o._)(c),"hasFeeConsultCard",function(){return!!c.editable&&c.editable.hasFeeConsultCard()}),(0,l._)((0,o._)(c),"hasMCNLinkCard",function(){return!!c.editable&&c.editable.hasMCNLinkCard()}),(0,l._)((0,o._)(c),"hasCommercialReport",function(){var e=c.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport}),(0,l._)((0,o._)(c),"handleChangeCommentPermission",function(e,t){c.setState({commentPermission:void 0===t?e:t})}),(0,l._)((0,o._)(c),"handleReshipmentSettings",function(e){"need_payment"!==e||c.props.currentUser.caEnabled||window.open("/copyright/invite"),c.setState({reshipmentSettings:e})}),(0,l._)((0,o._)(c),"handleError",function(e,t){(0,eG.Xc)(e,t,c.props.showNotification)}),(0,l._)((0,o._)(c),"handleBeforeVideoUpload",function(){var e=c.props.question;return!e.relationship||!e.relationship.isAnonymous}),(0,l._)((0,o._)(c),"handleReverted",function(e){c.editable.resetWithValue(e.draft.content)}),(0,l._)((0,o._)(c),"toggleMarkdownEnabled",function(){var e=c.state.markdownEnabled;c.setState({markdownEnabled:!e}),c.props.updateMarkdownSettings({markdownEnabled:!e})}),(0,l._)((0,o._)(c),"getDraftStatus",function(){var e=c.props.draft,t=c.state,n=t.isTyping,o=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&o<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?(0,v.tZ)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):C()(rL(),(0,q.rL)(e.updatedTime)):""}),(0,l._)((0,o._)(c),"handleEditGGRCard",function(e){var t=e.type,n=e.payload,o=c.state.mcnEditingGood,r=c.props.updateLinkCard;if("goodsEditor/submitNewGoodsInfo"===t){r((0,u._)((0,s._)({},o),{title:null==n?void 0:n.title})).finally(function(){c.setState({mcnEditingGood:null}),c.editable.handleCommand("edit-mcn-link-card:".concat(o.id))});return}if("goodsEditor/closeGoodsEditor"===t){c.setState({mcnEditingGood:null});return}}),(0,l._)((0,o._)(c),"shouldShowProfit",function(){return c.props.showUserProfitButton&&!c.isVideoAnswer}),(0,l._)((0,o._)(c),"getSentences",function(){var e;return c.props.isReediting&&(null===(e=c.props.answer)||void 0===e?void 0:e.id)?c.props.getInteractText("answers",c.props.answer.id).then(function(e){var t;return null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.data}):null}),(0,l._)((0,o._)(c),"createEditorPlugins",function(){var e,t,n,r,i,a,l,s,u,d,p,h=t_({type:"question",id:c.props.question.id,draftType:(null===(u=c.props.answer)||void 0===u?void 0:u.id)?"answer":void 0,draftId:null===(d=c.props.answer)||void 0===d?void 0:d.id,syncDraft:c.syncDraft}),f=np({getShouldShowToolbarButton:function(){return!c.isVideoAnswer},getAllInviters:c.getAllInviters,inviterQuery:c.props.inviterQuery,getInitialThankInviterInfo:function(){return c.props.thankInviterInfo},syncDraftImmediately:c.syncDraftImmediately}),m=nZ({shouldDisabled:function(){return c.props.question.relationship.isAnonymous},shouldShow:function(){return c.shouldShowProfit()},getContentInfo:function(){var e;return{type:"answer",id:null===(e=c.props.answer)||void 0===e?void 0:e.id}}}),g=tc(),b=nn({sourceType:"answer",sourceId:null===(p=c.props.question)||void 0===p?void 0:p.id});c.helpDocPlugin=t8({getInitialOffset:c.getHelpDocInitialOffset,getShouldHide:c.getShouldHideHelpDoc,forceUpdate:c.forceUpdate.bind((0,o._)(c))});var C=t9({onToggle:c.toggleMarkdownEnabled});return[(e=({getSentences:c.getSentences}).getSentences,t={},n=new Set,r=!1,i=!1,a=!1,l=null,s=function(){if(r){null==l||l(),l=null;return}(0,Y.Z)(function(e){return l=e,(0,v.tZ)(W.Z,{css:{top:"126px"},delay:36e5,notification:{text:(0,v.BX)(N.Text,{css:{display:"flex",alignItems:"center"},children:[(0,v.tZ)(K,{size:18,css:{marginRight:"8px"}}),"修改有互动的句子时，app 端对应的句子互动划线将不再外显"]}),key:"notificationInteractTexts",timeStamp:new Date().getDate()},actions:(0,v.tZ)(H.ZP,{preset:H.EE.Link,color:H.rp.Blue,onClick:function(){e(),i=!0},children:"知道了"})})})},{initialize:function(o){Object.assign(t,o),Q({store:t,getSentences:e},function(e){(null==e?void 0:e.size)&&e.forEach(function(e){var t=e.getKey();n.add(t)})})},customStyleMap:{INTERACT:{borderBottom:"1px dashed #BFBFBF"}},onChange:function(e){if(!n.size||i)return e;var t=!1,o=e.getCurrentContent(),l=e.getSelection(),c=l.getHasFocus()&&a;if(a=l.getHasFocus(),c){var u=o.getBlockMap(),d=l.getStartKey(),p=l.getEndKey(),h=!1;u.skipUntil(function(e){return e.getKey()===d}).takeUntil(function(e){return!!h||(e.getKey()===p&&(h=!0),!1)}).toArray().forEach(function(e,n){t||e.findStyleRanges(function(e){return e.hasStyle("INTERACT")},function(o,r){if(n>0){t=!0;return}t=l.hasEdgeWithin(e.getKey(),0,r)})})}return t!==r&&(s(),r=t),e}}),h,f,m,g,b,c.helpDocPlugin,C]}),(0,l._)((0,o._)(c),"renderRichInput",function(){var e,t,n,o,r=c.props,i=r.answer,a=(void 0===i?{}:i).attachment,l=r.answer,d=r.question,p=r.isReediting,h=r.draft,f=r.defaultValue,m=c.state,g=m.toolbarMenuAttention,b=m.scheduledPublishAt,C=m.initialScheduledPublishAt,Z=c.props.getFormData().tableOfContentsEnabled,y="".concat(p?"修改":"写","回答...");"commercial"===d.questionType&&(y=null===(t=d.brand)||void 0===t?void 0:t.editorDescription),c.isVideoAnswer&&(y="详细介绍下视频（选填）");var _=c.videoAnswerEditable||(null==h?void 0:h.type)==="video_answer"||(null==a?void 0:a.type)==="zvideo";h?n=null==h?void 0:h.attachment:(null==a?void 0:a.type)==="zvideo"?n=a.zvideo:(null==a?void 0:a.type)==="video"&&(n=(0,u._)((0,s._)({},null===(o=a.video)||void 0===o?void 0:o.videoInfo),{videoId:a.attachmentId}));var w={ref:function(e){return c.editable=e},answer:l,question:d,toolbarMenuAttention:g,scheduledPublishAt:b,initialScheduledPublishAt:C,placeholder:y,draft:h,defaultValue:f,isLegacyVideoAnswer:_,defaultVideo:n,videoAnswerEditable:c.videoAnswerEditable,videoAnswerPublished:c.videoAnswerPublished,editableReady:c.editableReady,handleChangeContent:c.onChangeContent,handleAfterChangeContent:c.onAfterChangeContent,handleFocusWithAuth:c.onFocusWithAuth,handleSelectText:c.onSelectText,handleSubmit:c.handleSubmit,handleError:c.handleError,handleLoadStart:c.onLoadStart,handleLoadEnd:c.handleLoadEnd,handleUploadStart:c.handleUploadStart,handleUploadEnd:c.handleUploadEnd,handleUploadError:c.handleUploadError,handleBeforeVideoUpload:c.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){c.setState({mcnEditingGood:t})},isVideoAnswer:c.isVideoAnswer,handleInsertZVideo:c.handleInsertZVideo,getToolbarSidePlugins:c.getToolbarSidePlugins,createEditorPlugins:c.createEditorPlugins,getToolbarMenuPlugins:c.getToolbarMenuPlugins,getEditorBeforePlugins:c.getEditorBeforePlugins,setUseScheduledPublish:c.setUseScheduledPublish,allowToolbar:!1,onAnyChange:c.handleAnyChange,docPluginProps:(null==(e=c.props.creatorRightStatus)?void 0:e.length)&&e.filter(Boolean).find(function(e){return"8713324000"===String(e.id)&&"pass"===e.status})?{fileSizeLimit:31457280}:{fileSizeLimit:10485760},tableOfContentsEnabled:Z,getMarkdownEnabled:function(){return c.state.markdownEnabled},videoSource:"answer"};return(0,v.tZ)(oL,(0,s._)({},w))}),(0,l._)((0,o._)(c),"handleAnyChange",function(e){var t=e.editorState;c.setState({editorState:t})}),(0,l._)((0,o._)(c),"handleKeyCommand",function(e){if(!c.editable)return"not-handled";var t=c.editable.handleKeyCommand(e);return"toggle-catalog"===e&&requestAnimationFrame(function(){c.forceUpdate(),c.syncDraftImmediately()}),t}),(0,l._)((0,o._)(c),"queryCommandEnable",function(e,t){return!!c.editable&&c.editable.queryCommandEnable(e,t)}),(0,l._)((0,o._)(c),"queryCommandState",function(e,t){return!!c.editable&&c.editable.queryCommandState(e,t)}),(0,l._)((0,o._)(c),"getHelpDocInitialOffset",function(){var e=c.toolbarWrapperRef.current;if(e){var t=e.getBoundingClientRect(),n=c.props.useMediumEditor?t.bottom-50:t.bottom+20;return document.documentElement.clientWidth-t.right>328?{top:n,left:t.right+18}:{top:n,right:0}}}),(0,l._)((0,o._)(c),"getShouldHideHelpDoc",function(){if(!c.props.useMediumEditor)return!1;var e=c.helpDocMilestoneRef.current;return!!e&&e.getBoundingClientRect().top<117}),(0,l._)((0,o._)(c),"getAnswerFormRef",function(){return c.props.imperativeRef}),(0,l._)((0,o._)(c),"handleCloseWriteShieldModal",function(){if(c.props.useMediumEditor){var e,t;null===(t=(e=c.props).onCancel)||void 0===t||t.call(e);return}window.close(),requestAnimationFrame(function(){window.location.href="https://www.zhihu.com"})});var p=c.props,f=p.defaultValue,b=p.draft,Z=b?b.editableContent:f,y=b?b.updatedTime:0;return c.state={draft:Z,content:{toHTML:function(){return Z}},isEmpty:!Z,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:y,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,editorState:null,rightArea:null,markdownEnabled:!1},c.hasEdited=!1,c}return(0,a._)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,o=e.activeTabKey;return t&&t.autoSendingCreations&&o===V.Y.textAnswer&&!n}},{key:"componentDidMount",value:function(){var e,t,n=this;null===(e=this.props.writeShield)||void 0===e||null===(t=e.setOnModalClose)||void 0===t||t.call(e,this.handleCloseWriteShieldModal);var o=this.props,r=o.reporter,i=o.draft,a=o.question.id,l=o.getBio,c=o.loadCreatorRightStatus;l(a),c(),r.reportRequest(oP.editableInit),i&&r.reportRequest(oP.draftLoad),this.shouldAnswerOrgQuestionModalShow=!rZ.getKnown(),this.onFocusAuthChecked=!1;var s=this.props,u=s.fillCurrentUserIfNeeded,p=s.getUserProfitPermission,h=u(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);p(),Promise.resolve(h).then(function(){eK.Z.getActionsByNames(["a_draft_history",n.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then(function(e){var t=(0,d._)(e,1)[0];t&&(n.setState({toolbarMenuAttention:t.description}),eK.Z.markAsShown(t),"auto_pub_answer"===t.guide_name&&B.Z.trackCardShow(n,{id:5738}))}),B.Z.trackCardShow(n,{id:5729,name:"回答"})}),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return window.name="",n.state.isUploading||n.composition||n.syncDraft.pending()||n.props.draft&&n.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval(function(){return n.setState({dateNow:Date.now()})},6e4),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus,hasVideo:this.hasVideo,hasADLinkCard:this.hasADLinkCard,hasMCNLinkCard:this.hasMCNLinkCard,hasFeeConsultCard:this.hasFeeConsultCard,toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!n.state.isEmpty}}),function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(n)&&"function"==typeof(null==window?void 0:null===(e=window.aria)||void 0===e?void 0:null===(t=e.initcallback)||void 0===t?void 0:t.disableShortKeys)){var o=n.map(function(e){return eX[e]});window.aria.initcallback.disableShortKeys(o)}}(["r","t","e"])}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.reporter,o=this.state,r=e.currentUser,i={};o.reshipmentSettings||void 0===r.caEnabled||(i.reshipmentSettings=r.caEnabled?"need_payment":"allowed"),o.commentPermission||void 0===r.lastCommentPermission||(i.commentPermission=r.lastCommentPermission),Object.keys(i).length&&this.setState(i),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(oP.draftLoad,function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n,content:{toHTML:function(){return n}}}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))})(),this.draftLoaded=!0)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,o=n.focusing,r=n.thankInviterInfo,i=this.props,a=i.tagline,l=i.inviterFromNotification;if(a){var c=F().get("rewardNotication");o&&!c&&(this.setState({rewardNotication:!1}),F().set("rewardNotication",!0),this.timeout=setTimeout(function(){t.setState({rewardNotication:!0})},2e3))}r||!l||e.inviterFromNotification||this.setState({thankInviterInfo:l})}},{key:"componentWillUnmount",value:function(){var e,t;this.syncDraft.cancel(),this.compositionReporter.cancel(),this.cancelResetCompositionStatus(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null),"function"==typeof(null==window?void 0:null===(e=window.aria)||void 0===e?void 0:null===(t=e.initcallback)||void 0===t?void 0:t.disableShortKeys)&&window.aria.initcallback.disableShortKeys([])}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,o=e.deleteDraft;if(n)return o(t.id)}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.isReediting,o=t.useMediumEditor,r=t.draft,i=this.state,a=i.content,l=i.scheduledPublishAt,c=i.markdownEnabled,s=n&&this.isVideoAnswer,u=a.toHTML()||"",d=o?eg.vQ:eg.$_;return(0,v.BX)(d,{hideScrollButton:s,getContaner:function(){return e.form},isAnswer:!0,children:[(0,v.BX)(N.Flex,{children:[(0,v.tZ)(N.Text,{color:"GBL05A",fontSize:"14px",ml:s?"0":"24px",children:C()(rz(),(0,eY.Xs)(u,!0))}),c&&(0,v.tZ)(el,{})]}),(0,v.tZ)(N.Text,{color:"GBL05A",fontSize:"14px",ml:"auto",children:this.getDraftStatus()}),o&&n&&(0,v.tZ)(H.ZP,{zaType:"Button",zaText:!0,color:"grey",preset:"secondary",css:{marginLeft:"24px"},onClick:this.onCancel,children:r?"保存草稿并离开":"取消"}),(0,v.tZ)(nI,{canSubmit:this.canSubmit(),handleSubmit:this.handleSubmit,isReediting:n,scheduledPublishAt:l,type:"answer",css:{marginLeft:"24px"}})]})}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===V.Y.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}},{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.className,i=o.isReediting,a=o.answer,l=(void 0===a?{}:a).answerType,c=o.question,d=o.currentUser,p=o.answer,h=o.draft,f=o.activeTabKey,m=o.useMediumEditor,g=o.showUserProfitButton,b=this.state,C=b.deleteDraftModalShown,Z=b.showInsertableVideoUploader,_=b.mcnEditingGood,w=b.editorState,k=b.initialScheduledPublishAt,x=b.scheduledPublishAt,S=b.rightArea,E=m?{offset:52,container:function(){return n.form}}:{getStyle:function(){return{width:"100%",top:0,left:0}}};return(0,v.BX)(L.r,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(c.id),author_member_hash_id:d.id},children:[(0,v.BX)("form",{ref:function(e){n.form=e},className:y()("AnswerForm",r),onSubmit:function(e){return e.preventDefault()},noValidate:!0,css:[{borderBottom:"none"},m?{".AnswerForm-editor .Editable_CatalogV2":{width:"140px",left:"-164px"}}:{".AnswerForm-editor .Editable_CatalogV2":{width:"180px",left:"-260px"}}],children:[(0,v.tZ)(R.pS,{ref:this.zaRef}),!!(this.isVideoAnswer&&(null===(e=this.props.writeShield)||void 0===e?void 0:null===(t=e.commands)||void 0===t?void 0:t.write)&&!this.props.writeShield.commands.write.instruction&&!this.props.writeShield.isLoading)&&(0,v.tZ)(e$.H2,{writeScene:{type:"zvideo"},onClose:this.handleCloseWriteShieldModal}),(0,v.BX)("div",{children:[(0,v.tZ)(rI,{editorFrom:m?"answer-pc-editor-modified":"answer-pc-editor-full"}),this.editable&&(0,v.tZ)(U.Z,(0,u._)((0,s._)({},E),{children:(0,v.tZ)("div",{ref:this.toolbarWrapperRef,css:function(e){return{display:"flex",justifyContent:"center",margin:"0px auto",background:e.colors.GBK99A}},children:(0,v.tZ)(rb,{editorState:w,onCommand:this.handleKeyCommand,queryCommandEnable:this.queryCommandEnable,queryCommandState:this.queryCommandState,showUserProfitButton:g,isVideoAnswer:this.isVideoAnswer,onInsertVideoClick:this.handleInsertZVideo,useMediumEditor:m,getMarkdownEnabled:function(){return n.state.markdownEnabled}},f)})})),(0,v.BX)("div",{css:function(e){return[{position:"relative",".Editable":{paddingTop:"1px",minHeight:"calc(100vh - 120px)"}},m?{width:"694px",margin:"0 auto",background:e.colorMod(e.colors.GBK10C).alpha(.45),".Editable-content":{paddingBottom:"62px"}}:{width:"782px",margin:"20px auto",".AnswerForm-editor .RichText--editable":{paddingLeft:64,paddingRight:64}}]},children:[S===rM.questionDetail&&(0,v.tZ)(rB,{question:c,onClose:function(){n.setState({rightArea:null})}}),!m&&(0,v.tZ)(rR,{question:c,onClick:function(){return n.setState({rightArea:rM.questionDetail})}}),(0,v.tZ)("div",{css:{minHeight:"calc(100vh - 120px)"},children:this.renderRichInput()}),(0,v.tZ)("div",{ref:this.helpDocMilestoneRef}),(0,v.tZ)(oN,{question:c,answer:p,isVideoAnswer:this.isVideoAnswer,isReediting:i,setUseScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,initialScheduledPublishAt:k,scheduledPublishAt:x,draft:h,getAnswerFormRef:this.getAnswerFormRef,css:!m&&{paddingLeft:"54px",paddingRight:"64px"},updateDraftSettings:this.updateDraftSettings,getInitialEnableMarkdown:function(e){return n.setState({markdownEnabled:e})}})]})]}),"org"===c.questionType&&(0,v.tZ)(rZ,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),(0,v.tZ)(tt.Z,{title:"清除草稿",subtitle:i?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:C,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),Z&&(0,v.tZ)(eH,{show:Z,onClose:function(){return n.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(e)))},onVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-video-card",e)}}),(0,v.tZ)(z.Z,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){n.setState({mcnEditingGood:null})},children:!!_&&(0,v.tZ)(P.Z,{className:"AnswerForm-MCNEditorIframe",src:(0,eW.l6)({title:_.title,originTitle:_.originTitle,source:_.source,sourceId:_.sourceId,productTypeName:_.productTypeName}),onMessage:this.handleEditGGRCard})}),(0,v.tZ)(te,{onClose:function(){window.location.href="https://www.zhihu.com/question/".concat(c.id,"/answer/").concat(p.id)},shown:"slideshow"===l})]}),this.renderFooter()]})}}]),n}(S.Component);(0,l._)(rD,"propTypes",{activeTabKey:x().string,question:x().object,isReediting:x().bool,defaultValue:x().string,getFormData:x().func,reporter:x().object}),(0,l._)(rD,"defaultProps",{isReediting:!1});var rU={addDraft:e8.uN,updateDraft:e8._u,deleteDraft:e8.R5,showNotification:eh.c0,fillCurrentUserIfNeeded:e2.sF,updateSettingsDisclaimer:e0.Md,loadLabel:e7.T$,getUserProfitPermission:e9.Yr,updateLinkCard:e6.ko,fetchAllInviters:e8.qX,getBio:e8.IF,loadCreatorRightStatus:e1.Xd,updateMarkdownSettings:e8.zp,getInteractText:function(e,t){return{API:{types:e5.GET_INTERACT_TEXT,endpoint:"/".concat(e,"/").concat(t,"/segments")},FAILSAFE:!0}}},rO=(0,A.compose)((0,e$.ZP)({init:!0,getScene:function(e){return{type:"answer",token:String(e.question.id)}}}),function(e){var t=function(t){(0,c._)(o,t);var n=(0,f._)(o);function o(){return(0,i._)(this,o),n.apply(this,arguments)}return(0,a._)(o,[{key:"render",value:function(){return(0,v.tZ)(er,{children:(0,v.tZ)(e,(0,s._)({},this.props))})}}]),o}(S.Component);return et()(t,e)},eN.SS,function(e){var t=function(t){(0,c._)(o,t);var n=(0,f._)(o);function o(e){var t;return(0,i._)(this,o),(t=n.call(this,e)).state={needReload:e.useMediumEditor&&(0,rP.isBrowser)()&&(0,nN.Cg)()},t}return(0,a._)(o,[{key:"componentDidMount",value:function(){var e=this;this.state.needReload&&this.props.loadDraft(this.props.question.id).finally(function(){requestAnimationFrame(function(){e.setState({needReload:!1},function(){requestAnimationFrame(function(){var t;null===(t=e.props.imperativeRef.current)||void 0===t||t.focus()})})})})}},{key:"render",value:function(){return this.state.needReload?null:(0,v.tZ)(e,(0,s._)({},this.props))}}]),o}(S.Component);return et()((0,I.connect)(null,{loadDraft:e8.dY})(t),e)},T.withRouter,eQ.Z,(0,I.connect)(function(e,t){var n,o,r=e.entities,i=r.questions,a=r.drafts,l=e.question,c=t.location.query.inviter,s=(0,e2.ib)(e),u=(0,e8.em)(e,t.question.id),d=c&&(null==u?void 0:null===(n=u.find)||void 0===n?void 0:n.call(u,function(e){return e.id===c})),p=(void 0===a?{}:a)["question_".concat(t.question.id)];return{question:i[t.question.id]||t.question,draft:p,currentUser:s,isPuQuestion:!!(l&&l.brand&&l.brand.isPuQuestion),disclaimers:l.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(o=(0,e7.yM)(e,t.answer))||void 0===o?void 0:o.thankInviterInfo,allInviters:u,inviterQuery:c,inviterFromNotification:d,isOffice:(0,e4.Xj)(e),creatorRightStatus:(0,e1.Sy)(e)}},rU),function(e){var t=function(t){(0,c._)(r,t);var n=(0,f._)(r);function r(){var e;return(0,i._)(this,r),e=n.apply(this,arguments),(0,l._)((0,o._)(e),"state",{}),(0,l._)((0,o._)(e),"answerFormDataProps",{updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}}),e}return(0,a._)(r,[{key:"render",value:function(){return(0,v.tZ)(ep.Provider,{value:(0,s._)({},this.answerFormDataProps),children:(0,v.tZ)(e,(0,s._)({},this.props,this.answerFormDataProps))})}}]),r}(S.Component);return et()(t,e)},n_.l0)(rD)},86193:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(85879),r=n(87363),i=n(87641),a=n(8512),l=n(43384);function c(e){var t=e.handleClick,n=(0,r.useRef)(null);return(0,o.BX)(l.$U,{as:i.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:t,ref:n,children:[(0,o.tZ)(i.Text,{mr:"10px",children:"全屏编辑"}),(0,o.tZ)(a.R,{text:!0,center:!0})]})}},88782:function(e,t,n){"use strict";n.d(t,{$$:function(){return s},Cg:function(){return u},Hf:function(){return c},Tq:function(){return f},aH:function(){return d},jd:function(){return v},p4:function(){return m},t8:function(){return h},vi:function(){return p}});var o=n(87320),r=n(55164),i=n(57477),a=n(6148),l=n(66263),c=function(e){return"FullScreenAnswerEditor_".concat(e)},s=function(){return!!(window.__FullScreenAnswerEditor&&!window.__FullScreenAnswerEditor.closed)},u=function(){return!!(window.__FullScreenAnswerEditor&&window.__FullScreenAnswerEditor.closed)},d=function(e,t){if(!e)return null;if(s())return window.__FullScreenAnswerEditor.focus(),window.__FullScreenAnswerEditor;var n=c(e),o=window.location,r=o.search,i=o.host,a=t?"//".concat(i,"/question/").concat(e,"/answer/").concat(t,"/edit").concat(r):"//".concat(i,"/question/").concat(e,"/write").concat(r);return window.__FullScreenAnswerEditor=window.open(a,n)},p=function(e){return e?Object.keys(e).reduce(function(t,n){var a=e[n];return"commercialReportInfo"===n?(0,i._)((0,r._)({},t),{isReport:!!(null==a?void 0:a.isReport)}):(0,i._)((0,r._)({},t),(0,o._)({},n,a))},{}):e},h=function(e){return e?{commentPermission:e.commentPermission}:e},f=function(e){return e?Object.keys(e).reduce(function(t,n){var a=e[n];return"canReward"===n?(0,i._)((0,r._)({},t),{rewardTagline:a?l.Sp:""}):(0,i._)((0,r._)({},t),(0,o._)({},n,a))},{}):e},m=function(e){return e?Object.keys(e=f(e)).reduce(function(t,n){var l=e[n];return"commercialReportInfo"===n?(0,i._)((0,r._)({},t),{isReport:!!(null==l?void 0:l.isReport)}):"disclaimerType"===n?(0,i._)((0,r._)({},t),{disclaimerType:l||"none",isDisclaimerChecked:!!(l&&"none"!==l)}):"thankInviter"===n?(0,i._)((0,r._)({},t),{thankInviterInfo:(0,a.dj)(l)}):"thankInviterStatus"===n?t:(0,i._)((0,r._)({},t),(0,o._)({},n,l))},{}):e};function v(e,t){if(!e)return{thankInviterStatus:"close",thankInviter:""};var n=e.urlToken,o=e.name,r=e.id;return{thankInviterStatus:"open",thankInviter:"answer"===t?r:JSON.stringify({url_token:n,name:o,id:r})}}},82022:function(e,t,n){"use strict";var o=n(85879),r=n(3707),i=n(85576),a=n(78970),l=n(97285);t.Z=(0,i.Z)(function(e){var t=e.id,n=e.voteupCount,i=e.authRequired,c=(0,a.Z)(i),s=c.modalShown,u=c.openVotersModal,d=c.closeVotersModal;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(r.Z,{contentType:"answer",id:t,onClickVoterInfo:u}),(0,o.tZ)(l.Z,{id:t,type:"answer",voteupCount:n,modalShown:s,handleListHide:d})]})})},30195:function(e,t,n){"use strict";n.d(t,{v:function(){return eS},m:function(){return eF}});var o,r,i,a=n(85879),l=n(94009),c=n(87363),s=n.n(c),u=n(14168),d=n.n(u),p=n(25628),h=n.n(p),f=n(83697),m=n(24405),v=n(28753),g=n(87804),b=n(9338),C=n(30971),Z=(o=(0,b._)(function(e,t,n){var o,r,i,a;return(0,C.__generator)(this,function(l){switch(l.label){case 0:if(o=function(e){return{state:-1,message:e}},r=function(e){return{state:0,data:e}},!e.Android||!e.Zhihu)return[2,o("「先用后付」激活仅支持安卓端内哦")];l.label=1;case 1:return l.trys.push([1,6,,7]),[4,g.Z.supportsAction("payment/activePayScore")];case 2:if(!l.sent())return[3,4];return[4,(0,g.Z)("payment/activePayScore").dispatch({sku_id:t||"",type:n||0})];case 3:if(null!=(i=l.sent())&&i.orderId)return[2,r(i)];throw Error("激活获取订单号失败");case 4:return[2,o("当前客户端版本不支持，请升级后重试 ~")];case 5:return[3,7];case 6:return[2,o((a=l.sent()).errMsg||a.message||"激活失败，请稍后重试")];case 7:return[2]}})}),function(e,t,n){return o.apply(this,arguments)}),y=function(e,t,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{threshold:[.6]},a=(0,c.useRef)(!0),l=t&&e&&e.Zhihu&&e.Android&&"undefined"!=typeof window&&window.IntersectionObserver&&o&&o.current,s=(0,c.useCallback)(function(t){Array.isArray(t)&&t.length&&t[0].isIntersecting&&l&&a.current&&(a.current=!1,Z(e,n,0).then(function(e){"function"==typeof r&&r(e)}))},[r,l,n,e]);(0,c.useEffect)(function(){if(l){var e=new window.IntersectionObserver(s,i),t=o.current;return setTimeout(function(){e&&e.observe(t)},0),function(){e.unobserve(t)}}},[l,s,o,i])},_=n(20857),w=n(22107),k=n(94707),x=n(86325),S=n(55164),E=n(85626),I=n(20072),T=n(99878),N=n(69383),A=n(43384),B=n(57045),R=n(25115),P=n(74135),z=n(78322),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){var n=e[t];return null!=n&&"".concat(t,"=").concat(encodeURIComponent(n))}).filter(Boolean).join("&")},M=function(e){if(!e)return{};var t=(0,l._)(e.match(/\?([^#]+)/)||[],2)[1];return t?t.split("&").reduce(function(e,t){var n=(0,l._)(t.split("="),2),o=n[0],r=n[1];return e[o]=decodeURIComponent(r),e},{}):{}},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=L((0,S._)({},M(e),t));return n?/\?([^#]+)/.test(e)?e.replace(/\?([^#]+)/,"?".concat(n)):/(#[\w]+)$/.test(e)?e.replace(/(#[\w]+)$/,"?".concat(n,"$1")):"".concat(e,"?").concat(n):e},U=n(62146);function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){(0,x._)(n,e);var t=(0,E._)(n);function n(e){var o,r;return(0,w._)(this,n),o=t.call(this,e),O((0,_._)(o),"zaRef",s().createRef()),O((0,_._)(o),"handleClick",function(e,t){var n=o.props,r=n.onClick,i=n.isShowPurchasePop,a=n.extra,l=n.authRequired,c=n.btnInfo,s=(a||{}).ua,u=(c||{}).isVipFree;N.Z.trackEvent(o.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),"function"==typeof r&&r(o.node),o.unlisten=g.Z.listen("base/viewDidAppear",function(){var e=o.props.popupCallback;e&&e(),o.unlisten&&o.unlisten()}),void 0!==i&&i&&u&&"function"==typeof l?(o.zaRef.current.trackShow({elementLocation:{moduleId:"buy_member_popup",type:"Popup",page:{pageId:"10177"}}}),l(function(){z.Z.show({changeApi:!0})})()):(0,U.t)(e,void 0===s?{}:s,!0)}),O((0,_._)(o),"handleQuery",function(e){var t=o.props.extra,n=((void 0===t?{}:t)||{}).ua,r=void 0===n?{}:n;if(null!=r&&r.Mobile&&!(null!=r&&r.Zhihu)){var i,a,l=(0,B.parse)(null===(i=window)||void 0===i?void 0:null===(a=i.location)||void 0===a?void 0:a.search.substring(1));if("svipgrowth"===(l||{}).utm_medium){var c=encodeURIComponent((0,B.stringify)(l));o.setState({url:D(e,{growth_ref_url:c})})}}}),O((0,_._)(o),"fetchData",function(){var e=o.props.answerId||"";return(0,R.ZP)("".concat("https://api.zhihu.com","/slytherin/scene/paid_answer_truncate_text/material?answer_token=").concat(e)).then(function(e){return(0,P.camelizeKeys)(e)})}),o.state={url:"",btnText:(null===(r=e.btnInfo)||void 0===r?void 0:r.btnText)||"",activityKey:""},o}return(0,k._)(n,[{key:"componentDidMount",value:function(){var e=this;return(0,b._)(function(){var t,n,o,r,i,a,l;return(0,C.__generator)(this,function(c){switch(c.label){case 0:if(!(t=e.props.btnInfo))return[2];return n=t.link,o=e.state.btnText,[4,e.fetchData()];case 1:return i=(r=c.sent()||{}).truncateText,a=r.activityKey,i&&e.setState({btnText:i,activityKey:a}),l=a&&!(null!=n&&n.includes("activity_key="))?D(n,{activity_key:a}):n,e.setState({url:l}),e.handleQuery(l),g.Z.dispatch("vip/preloadVIPHybridPopup",{url:l}),(0,I.y3)(e.node,function(){N.Z.trackCardShow(e.node,{id:4241,name:o},{link:{url:l,anchor:o}})}),[2]}})})()}},{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,o=t.zaInfo,r=void 0===o?{}:o,i=t.className,a=this.state,l=a.url,c=a.btnText;return n?s().createElement("div",{className:h()("KfeCollection-PurchaseBtn",i)},s().createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),s().createElement(A.eV,{block:"textLink",content:(0,S._)({},r||{})},s().createElement(A.$U,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:l}}},s().createElement(A.pS,{ref:this.zaRef}),s().createElement("div",{className:"KfeCollection-PurchaseBtn-HybridLink",onClick:function(){return e.handleClick(l,c)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},s().createElement("span",{className:"KfeCollection-PurchaseBtn-text"},c)," ",s().createElement(T.Z,{className:"KfeCollection-PurchaseBtn-ArrowRight"}))))):null}}]),n}(s().Component);F.propTypes={popupCallback:d().func};var q=n(49899),V=n(61533),H=n(57477),X=n(59189),G=n(38521);function K(e){var t=e.zaInfo,n=e.btnInfo,o=e.picsInfo,r=e.className,i=e.onClick,a=e.popupCallback,u=e.theme,d=e.isMobile,p=e.extra,f=e.isShowPurchasePop,m=void 0!==f&&f,v=e.authRequired,b=e.answerId,C=n.btnText,Z=n.link,y=(0,l._)((0,c.useState)(Z),2),_=y[0],w=y[1],k=o.pcPic,x=o.dayPic,E=o.nightPic,I=(0,c.useRef)(),T=(0,c.useRef)(null),P=(0,c.useRef)(!0),L=(0,A.Q4)().trackShow,M=((void 0===p?{}:p)||{}).ua,O=void 0===M?{}:M,F=(0,c.useMemo)(function(){return d?"dark"===u?E:x:k},[d,u,k,E,x]),q=null;return(0,c.useEffect)(function(){if(d&&!(null!=O&&O.Zhihu)){var e,t,n=(0,B.parse)(null===(e=window)||void 0===e?void 0:null===(t=e.location)||void 0===t?void 0:t.search.substring(1));"svipgrowth"===(n||{}).utm_medium&&w(D(Z,{growth_ref_url:encodeURIComponent((0,B.stringify)(n))}))}},[d,null==O?void 0:O.Zhihu,Z]),(0,c.useEffect)(function(){return function(){q&&q()}},[q]),s().createElement("div",{className:h()("KfeCollection-VipBenefitsCard",r)},s().createElement(A.eV,{block:"vipBenefitsCard",content:(0,H._)((0,S._)({},t),{type:G.at.Answer,subType:G.at.PaidAnswer})},s().createElement(A.$U,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:_}}},s().createElement("div",{className:"KfeCollection-VipBenefitsCard-HybridLink",onClick:function(){N.Z.trackEvent(I.current,{id:4240,action:"OpenUrl",name:C},{link:{url:_,anchor:C}}),"function"==typeof i&&i(I.current),q=g.Z.listen("base/viewDidAppear",function(){a&&a(),q&&q()}),m&&"function"==typeof v?(L({elementLocation:{moduleId:"buy_member_popup",type:"Popup",page:{pageId:"10177"}}}),v(function(){z.Z.show({changeApi:!0})})()):(0,U.t)(_,O,!0)},ref:I,"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[t]}})},F&&s().createElement(X.Z,{onObserve:function(e){e[0].isIntersecting&&P.current&&((0,g.Z)("base/postMessage").dispatch({type:"vip/truncation",data:{ShowVipTc:!0}}),(0,R.ZP)("/slytherin/member_action",{method:"POST",body:JSON.stringify((0,S._)({from_place:2},b?{content_id:String(b)}:{})),headers:{"Content-Type":"application/json"}}),P.current=!1)},threshold:1},s().createElement("img",{className:"KfeCollection-VipBenefitsCard-pic",src:F,ref:T}))))))}K.propTypes={zaInfo:d().object,btnInfo:d().object,popupCallback:d().func,onClick:d().func,className:d().string,theme:d().string.isRequired,isMobile:d().bool.isRequired,picsInfo:d().object.isRequired};var j=n(88423);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y={DARK:"dark",LIGHT:"light"},Q=function(e){(0,x._)(n,e);var t=(0,E._)(n);function n(e){var o;return(0,w._)(this,n),o=t.call(this,e),W((0,_._)(o),"handleClick",function(e,t){var n=o.props.onClick;N.Z.trackEvent(o.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),n&&n({target:o.node})}),W((0,_._)(o),"handleQuery",function(e){var t=o.props.extra,n=((void 0===t?{}:t)||{}).ua,r=void 0===n?{}:n;if(null!=r&&r.Mobile&&!(null!=r&&r.Zhihu)){var i,a,l=(0,B.parse)(null===(i=window)||void 0===i?void 0:null===(a=i.location)||void 0===a?void 0:a.search.substring(1));"svipgrowth"===(l||{}).utm_medium&&o.setState({url:D(e,l)})}}),o.state={url:""},o}return(0,k._)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;this.setState({url:t}),(0,I.y3)(this.node,function(){N.Z.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})}),this.handleQuery(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,o=t.zaInfo,r=void 0===o?{}:o,i=t.goodsCard,a=t.className,l=n===Y.DARK,c=this.state.url,u=i.header,d=u.title,p=u.subTitle,f=i.body,m=f.title,v=f.cover,g=f.coverLabel,b=f.desc,C=f.label,Z=f.vipNote,y=i.catalog;return s().createElement(s().Fragment,null,s().createElement("section",{className:h()("KfeCollection-GoodsCardV2",a),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},s().createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(d).concat(p?" \xb7 ".concat(p):"")),s().createElement(A.eV,{content:(0,H._)((0,S._)({},r),{type:G.at.Answer,subType:G.at.PaidAnswer}),block:"oldSkuCard"},s().createElement(A.$U,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:c}}},s().createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(c,m)},ref:function(t){return e.node=t}},s().createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},s().createElement("img",{className:h()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":l}),src:(0,j.imgUrl)(v,{size:"200x0"})}),s().createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},g)),s().createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},s().createElement("div",null,s().createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},m),b&&s().createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},b),s().createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},C)),s().createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:Z}}))))),y&&y.length>0&&s().createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",s().createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},y.map(function(e){var t=e.manuscriptUrl,n=e.sectionId,o=e.title;return s().createElement(A.$U,{zaType:"Text",key:n,zaBlock:"catalog",extra:{link:{url:t}},zaAction:"OpenUrl"},s().createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,target:"_blank",rel:"noopener noreferrer",key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:o}})},o,s().createElement(T.N,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"})))})))))}}]),n}(s().Component);W(Q,"propTypes",{theme:d().oneOf([Y.DARK,Y.LIGHT]),onClick:d().func,extra:d().object}),W(Q,"defaultProps",{theme:Y.LIGHT});var $=n(89042),J=function(e){return e?-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa"):""},ee=function(e){var t=e.className,n=e.nextSectionInfo,o=e.goodsCard,r=e.zaInfo,i=void 0===r?{}:r,a=e.theme,u=o.header,d=void 0===u?{}:u,p=d.brandImage,m=d.brandLink,v=n.title,g=n.content,b=n.url,C=n.skuUrl,Z=n.voteNum,y=n.isShowVote,_=n.trackNum,w=n.skuName,k=(0,A.Q4)().trackEvent,x=J(b),E=(0,c.useRef)(),I=(0,l._)((0,c.useState)(!1),2),N=I[0],B=I[1],R=(0,f.n)(),P=!v||!b||0===_;(0,c.useEffect)(function(){if(E.current&&g){var e=E.current.clientWidth,t=document.createElement("p");t.style="visibility:hidden;position:absolute;left:-9999px;top:-9999px;width:".concat(e,"px;line-height:21px;font-size:13px;"),t.innerText=g.replace(/[\r\n]/g,""),document.body.appendChild(t),B(t.clientHeight>63),document.body.removeChild(t)}},[E,g]);var z=(0,c.useCallback)(function(){k({action:"OpenUrl",eventType:"Click",elementLocation:{text:v,block:{blockText:"StoryCardTitle"},type:"Button",content:{type:G.at.Answer,subType:G.at.PaidAnswer}}},{link:{url:b}})},[v,k,b]),L=(0,c.useCallback)(function(){k({action:"OpenUrl",eventType:"Click",elementLocation:{block:{blockText:"StoryCardButton"},type:"Button",content:{type:G.at.Answer,subType:G.at.PaidAnswer}}},{link:{url:C}})},[C,k]);return s().createElement("section",{className:h()("KfeCollection-GoodsCardV4",{"KfeCollection-GoodsCardV4-dark":"dark"===(void 0===a?"light":a)},t),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[i]}})},s().createElement("div",{className:"KfeCollection-GoodsCardV4-guide"},s().createElement("span",{className:"KfeCollection-GoodsCardV4-guideBefore"},"来自",s().createElement("span",{className:h()("KfeCollection-GoodsCardV4-guideBeforeBold",{"KfeCollection-GoodsCardV4-link":R.ZhihuHybrid}),onClick:function(){R.ZhihuHybrid&&m&&(k({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Button",page:{pageId:"8028"},moduleId:"brand_title",content:{type:"PaidColumn"}}},{link:{url:m}}),(0,U.t)(m,R))}},"「",p,"」"),"专栏"),w&&s().createElement(s().Fragment,null,s().createElement("span",{className:"KfeCollection-GoodsCardV4-guideTitle"},"《".concat(w)),s().createElement("span",{className:"KfeCollection-GoodsCardV4-guideAfter"},"》"))),P?null:s().createElement("div",{className:"KfeCollection-GoodsCardV4-wrapper"},s().createElement("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV4-header",onClick:z},s().createElement("div",{className:"KfeCollection-GoodsCardV4-title"},s().createElement("div",{className:"KfeCollection-GoodsCardV4-titleText"},"继续阅读下一篇：".concat(v)),s().createElement($.W,{className:"KfeCollection-GoodsCardV4-headerIcon"})),s().createElement("img",{className:"KfeCollection-GoodsCardV4-vipIcon",src:"https://pic2.zhimg.com/v2-d296124c7c5db450cd7cb5d567afd0f0.png"})),s().createElement(A.eV,{content:(0,H._)((0,S._)({},i),{type:G.at.Answer,subType:G.at.PaidAnswer}),block:"StoryCard"},s().createElement(A.$U,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:b}}},s().createElement("a",{href:x,target:"_blank",rel:"noopener noreferrer"},g?s().createElement("div",{className:"KfeCollection-GoodsCardV4-contentWrapper".concat(R.iOS?" KfeCollection-GoodsCardV4-iosContent":"")},s().createElement("p",{className:"KfeCollection-GoodsCardV4-content",ref:E},g),N&&y&&s().createElement("div",{className:"KfeCollection-GoodsCardV4-endorse"},s().createElement("div",{className:"KfeCollection-GoodsCardV4-mask"}),s().createElement("div",{className:"KfeCollection-GoodsCardV4-ellipsis"},"..."),s().createElement("div",{className:"KfeCollection-GoodsCardV4-endorseText"},Z))):null))),s().createElement("a",{className:"KfeCollection-GoodsCardV4-bottom",target:"_blank",rel:"noopener noreferrer",href:J(C),onClick:L},s().createElement("div",{className:"KfeCollection-GoodsCardV4-bottomText"},"查看本专栏全部",s().createElement("span",{className:"KfeCollection-GoodsCardV4-num"},_),"篇",s().createElement(T.N,{className:"KfeCollection-GoodsCardV4-arrowRight",text:!0,center:!0})))))},et=n(16839),en=n(4932),eo=function(e){return s().createElement(en.Z,Object.assign({viewBox:"0 0 43 41"},e),s().createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z"}))};eo.defaultProps={name:"FullStar"};var er=function(e){return s().createElement(en.Z,Object.assign({viewBox:"0 0 43 41"},e),s().createElement("g",{fillRule:"evenodd"},s().createElement("path",{d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z",opacity:".2"}),s().createElement("path",{d:"M21.5.162v34.931c-.716.01-1.43.188-2.083.53L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165c.29-.59.872-.94 1.486-.965z"})))};er.defaultProps={name:"HalfStar"};var ei=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=parseInt(e/1),o=e%1?1:0;return{full:n,half:o,empty:parseInt(t-n-o)}},ea=function(e){var t=e.value,n=void 0===t?5:t,o=e.size,r=void 0===o?13:o,i=(0,c.useMemo)(function(){return 0===n?0:n%1==0?n/2:n>=10?5:(parseInt(n)+1)/2},[n]),a=(0,c.useMemo)(function(){return ei(i)},[i]),l=a.full,u=a.half,d=a.empty;return s().createElement("div",{className:"KfeCollection-RatingNew"},!!l&&Array(l).fill(1).map(function(e,t){return s().createElement(eo,{className:h()("KfeCollection-RatingNew-FullStar","KfeCollection-RatingNew-Star"),key:t,size:r})}),!!u&&s().createElement(er,{className:h()("KfeCollection-RatingNew-HalfStar","KfeCollection-RatingNew-Star"),size:r}),!!d&&Array(d).fill(1).map(function(e,t){return s().createElement(eo,{className:h()("KfeCollection-RatingNew-EmptyStar","KfeCollection-RatingNew-Star"),key:t,size:r})}))},el=function(e){(0,x._)(n,e);var t=(0,E._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return(0,k._)(n,[{key:"render",value:function(){var e=this.props,t=e.total,n=e.value;if(e.isNew)return s().createElement(ea,this.props);var o=Math.floor(Math.round(2*n)/2),r=Math.round(2*n)%2,i=t-o-r;return s().createElement("div",{className:"KfeCollection-Rating"},Array.from({length:o}).map(function(e,t){return s().createElement("div",{className:"KfeCollection-Rating-star",key:"full-".concat(t)},s().createElement(et.mH,null))}),!!r&&s().createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--half",key:"half"},s().createElement(et.mH,null),s().createElement(et.mH,null)),Array.from({length:i}).map(function(e,t){return s().createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--empty",key:"empty-".concat(t)},s().createElement(et.mH,null))}))}}]),n}(s().Component);i={value:5,total:5,size:13,isNew:!1},(r="defaultProps")in el?Object.defineProperty(el,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):el[r]=i;var ec=["Live","RemixAlbum","RemixInstabook"],es={Live:"Live 讲座",课程:"盐选专栏"},eu=function(e){var t,n,o,r,i=e.goodsCard,a=e.zaInfo,l=void 0===a?{}:a,u=e.isMobile,d=e.theme,p=e.resourceType,m=i.header,v=void 0===m?{}:m,g=i.body,b=void 0===g?{}:g,C=v.skuTitle,Z=v.brandImage,y=v.brandLink,_=v.link,w=b.title,k=b.coverLabel,x=b.link,E=b.desc,I=b.activeLink,N=b.vipNote,B=b.icons,R=b.cover,P=b.introduce,z=b.score,L=b.activeText,M=b.contentType,D=(0,f.n)(),O=(0,A.Q4)().trackEvent,F=!u&&ec.includes(M)?x:I,q=24===p,V=(0,c.useCallback)(function(){(0,U.t)(J(F),D)},[F,D]),X=(0,c.useCallback)(function(){q?(0,U.t)(J(_),D):V()},[q,_,D,V]);return s().createElement("section",{className:"KfeCollection-GoodsCardNew","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[l]}})},s().createElement("div",{className:"KfeCollection-GoodsCardNew-guide"},s().createElement("span",{className:"KfeCollection-GoodsCardNew-guideBefore"},"以上回答来自"),Z&&s().createElement("span",{className:h()("KfeCollection-GoodsCardNew-brandImg",{"KfeCollection-GoodsCardNew-link":D.ZhihuHybrid}),onClick:function(){D.ZhihuHybrid&&y&&(O({eventType:"Click",action:"OpenUrl",elementLocation:{type:"Button",moduleId:"brand_title",content:{type:"PaidColumn"}}},{link:{url:y}}),(0,U.t)(y,D))}},"「",Z,"」"),k&&s().createElement("span",null,k)),s().createElement("div",{className:"KfeCollection-GoodsCardNew-wrapper"},s().createElement(A.eV,{content:(0,H._)((0,S._)({},l),{type:G.at.Answer,subType:G.at.PaidAnswer}),block:"".concat(p,"_card")},s().createElement(A.$U,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:F}}},s().createElement("div",{onClick:X,className:"KfeCollection-GoodsCardNew-header"},s().createElement("div",{className:"KfeCollection-GoodsCardNew-headerTitle"},C),s().createElement($.W,{className:"KfeCollection-GoodsCardNew-headerIcon"})),s().createElement("a",{onClick:V,rel:"noopener noreferrer"},(n=(t=B||{}).centerIcon,o=t.leftTopDayIcon,r=t.leftTopNightIcon,s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentWrapper"},R&&s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentLeft"},o&&r&&s().createElement("img",{className:"KfeCollection-GoodsCardNew-coverVip",src:"light"===(void 0===d?"light":d)?o:r}),s().createElement("img",{className:"KfeCollection-GoodsCardNew-coverImg",style:q?{objectFit:"cover"}:{},src:R}),n&&s().createElement("img",{className:"KfeCollection-GoodsCardNew-coverBtn",src:n}),k&&s().createElement("div",{className:"KfeCollection-GoodsCardNew-coverLabel"},es[k]||k)),s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentRight"},s().createElement("div",null,w&&s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentTitle"},w),E&&q&&s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentDes"},E),z?s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentStar"},s().createElement("span",{className:"KfeCollection-GoodsCardNew-score"},z),s().createElement(el,{value:+z/2})):P&&P.length?s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentIntro"},P.map(function(e){return s().createElement("div",{key:e,className:"KfeCollection-GoodsCardNew-contentIntroItem"},e)})):null),s().createElement("div",{className:"KfeCollection-GoodsCardNew-contentBottom"},N?s().createElement("p",{className:"KfeCollection-GoodsCardNew-vipNote",dangerouslySetInnerHTML:{__html:N}}):s().createElement("div",null),L&&s().createElement("div",{className:"KfeCollection-GoodsCardNew-readBtn"},L,s().createElement(T.Z,{className:h()("KfeCollection-GoodsCardNew-arrowRight",{"KfeCollection-GoodsCardNew-arrowRightFix":D.Android}),size:20})))))))))))};function ed(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ep=function(e){(0,x._)(n,e);var t=(0,E._)(n);function n(){for(var e,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return(0,w._)(this,n),e=t.call.apply(t,[this].concat((0,q._)(r))),ed((0,_._)(e),"handleObserve",function(t){var n=e.props.logPaidAnswerProgress;t.forEach(function(t){if(0!==t.intersectionRatio){var o=t.target;e.observer.unobserve(o),n&&n("card")}})}),ed((0,_._)(e),"renderVipCard",function(){var t=e.props,n=t.result,o=void 0===n?{}:n,r=t.theme,i=t.isMobile,a=o.zaInfo,l=o.className,c=o.nextSectionInfo,u=o.goodsCard,d=o.abParam,p=o.resourceType,h=o.productLabel;return c?s().createElement(ee,{nextSectionInfo:c,productLabel:h,goodsCard:u,zaInfo:a,theme:r,className:l,abParam:d}):u?s().createElement(eu,{isMobile:i,goodsCard:u,zaInfo:a,theme:r,resourceType:p,abParam:d}):null}),e}return(0,k._)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hasPurchased,o=t.logPaidAnswerProgress;if(n&&o&&"undefined"!=typeof window&&window.IntersectionObserver){if(this.target=(0,V.findDOMNode)(this),!this.target)return;this.observer=new window.IntersectionObserver(this.handleObserve,{threshold:[.1]}),setTimeout(function(){e.observer.observe(e.target)})}}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.target)}},{key:"render",value:function(){var e=this.props,t=e.hasPurchased,n=e.result,o=void 0===n?{}:n,r=e.theme,i=e.className,a=e.isMobile,l=e.logPaidAnswerProgress,c=e.extra,u=void 0===c?{}:c,d=e.isShowPurchasePop,p=e.authRequired,h=e.answerId,f=o.goodsCard,m=o.zaInfo,v=o.btnInfo,g=o.abParam,b=o.benefitsPics,C=o.popupCallback,Z=(null==g?void 0:g.benefitsPicsShow)==="1";return t?this.renderVipCard():Z?s().createElement(K,{btnInfo:v||{},zaInfo:m||{},picsInfo:b||{},popupCallback:C,theme:r,isMobile:a||!1,onClick:l,extra:u,isShowPurchasePop:void 0!==d&&d,authRequired:p,answerId:h}):f?s().createElement(Q,{goodsCard:f,zaInfo:m,className:i,extra:u}):null}}]),n}(s().Component);ed(ep,"propTypes",{result:d().object.isRequired,theme:d().string,hasPurchased:d().bool,onBookshelfButtonClick:d().func,logPaidAnswerProgress:d().func,extra:d().object}),ed(ep,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var eh=n(36963);n(76931);var ef={yellow:{day:"https://pic1.zhimg.com/v2-74a907bc68ec906c4cbe6fbcd7b382f1.png",night:"https://pic1.zhimg.com/v2-f6840db8368fe995a6a81b20866c90e8.png"},blue:{day:"https://pic1.zhimg.com/v2-176249162145d8ec58435bfab44d2d6e.png",night:"https://pic3.zhimg.com/v2-ae3c36cfe91b5ce4faf4908a551413a3.png"}},em=function(e){var t,n=e.result,o=void 0===n?{}:n,r=e.isDarkMode,i=o.paidConsult,a=o.zaInfo;if(!i)return null;var l=i.userId,c=i.consultUrl,u=i.name,d=i.avatarPath,p=i.description,h=i.descriptionType,f=i.answerCount,m=i.averageScore;return s().createElement("div",{className:"KfeCollection-PaidConsultCard"},s().createElement("div",{className:"KfeCollection-PaidConsultCard-Header"},"向作者咨询"),s().createElement(A.eV,{content:(0,H._)((0,S._)({},a),{id:l,type:G.at.Conversation}),block:"PaidConsultCard"},s().createElement(A.$U,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:c}}},s().createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},(t=null,3!==h&&(t=1===h?ef.yellow:ef.blue),s().createElement("div",{className:"KfeCollection-PaidConsultCard-CardWrapper"},s().createElement("img",{className:"KfeCollection-PaidConsultCard-Avatar",src:d}),s().createElement("div",{className:"KfeCollection-PaidConsultCard-Right"},s().createElement("div",{className:"KfeCollection-PaidConsultCard-NameWrapper"},s().createElement("div",{className:"KfeCollection-PaidConsultCard-Name"},u),s().createElement("div",{className:"KfeCollection-PaidConsultCard-Action"},"去咨询",s().createElement(T.N,{className:"KfeCollection-PaidConsultCard-ArrowRight",text:!0,center:!0}))),s().createElement("div",{className:"KfeCollection-PaidConsultCard-SubInfo"},s().createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultTime"},s().createElement(eh.BS,{className:"KfeCollection-PaidConsultCard-ConsultTimeIcon",text:!0,center:!0}),s().createElement("div",null,f," 次咨询")),!(!m&&0!==m)&&s().createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultScore"},s().createElement(et.mH,{className:"KfeCollection-PaidConsultCard-ConsultScoreIcon",text:!0,center:!0}),s().createElement("div",null,m||0===m?-1===m.toString().indexOf(".")?m.toFixed(1):m:""))),p&&s().createElement("div",{className:"KfeCollection-PaidConsultCard-Info"},t&&s().createElement("img",{className:"KfeCollection-PaidConsultCard-InfoIcon",src:r?t.night:t.day}),s().createElement("p",null,p)))))))))},ev=function(e){(0,x._)(n,e);var t=(0,E._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return(0,k._)(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.url,o=e.zaInfo,r=void 0===o?{}:o;return t&&n?s().createElement("div",{className:"KfeCollection-TextLink"},s().createElement("div",{className:"KfeCollection-TextLink-mask"}),s().createElement(A.eV,{block:"textLinkV2",content:(0,S._)({},r||{})},s().createElement(A.$U,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n}}},s().createElement("a",{className:"KfeCollection-TextLink-HybridLink",href:n,target:"_blank",rel:"noopener noreferrer","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},s().createElement("span",{className:"KfeCollection-TextLink-text"},t)," ",s().createElement(T.N,{className:"KfeCollection-TextLink-ArrowRight"}))))):null}}]),n}(s().Component);ev.propTypes={zaInfo:d().object,text:d().string.isRequired,url:d().string.isRequired};var eg=function(e){var t=e.className,n=e.onRetryFetch,o=(0,l._)((0,c.useState)(!1),2),r=o[0],i=o[1];return s().createElement("div",{className:h()("KfeCollection-PaidAnswerFooter-retry",t)},s().createElement("div",{className:"KfeCollection-PaidAnswerFooter-mask"}),r?s().createElement("svg",{className:"KfeCollection-PaidAnswerFooter-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{fill:"1",className:"KfeCollection-PaidAnswerFooter-path",d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22V20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4V2Z"}),s().createElement("path",{fill:"2",d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22V20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4V2Z"}),s().createElement("circle",{cx:"12",cy:"3",r:"1",fill:"3"}),s().createElement("defs",null,s().createElement("linearGradient",{id:"1",x1:"2",y1:"2",x2:"2",y2:"22",gradientUnits:"userSpaceOnUse"},s().createElement("stop",{className:"KfeCollection-PaidAnswerFooter-stop"}),s().createElement("stop",{className:"KfeCollection-PaidAnswerFooter-stop",offset:"1",stopOpacity:"0.5"})),s().createElement("linearGradient",{id:"2",x1:"12",y1:"2",x2:"12",y2:"22",gradientUnits:"userSpaceOnUse"},s().createElement("stop",{className:"KfeCollection-PaidAnswerFooter-stop",stopOpacity:"0"}),s().createElement("stop",{className:"KfeCollection-PaidAnswerFooter-stop",offset:"1",stopOpacity:"0.5"})),s().createElement("linearGradient",{id:"3",x1:"12",y1:"2",x2:"12",y2:"22",gradientUnits:"userSpaceOnUse"},s().createElement("stop",{className:"KfeCollection-PaidAnswerFooter-stop"}),s().createElement("stop",{className:"KfeCollection-PaidAnswerFooter-stop",offset:"1",stopOpacity:"0.5"})))):s().createElement("div",{className:"KfeCollection-PaidAnswerFooter-text"},"会员内容加载错误，请稍后",s().createElement("span",{className:"KfeCollection-PaidAnswerFooter-retryBtn",onClick:function(){i(!0),n&&n().then(function(){i(!1)}).catch(function(){i(!1)})}},"重试")))},eb=function(e){var t=e.url,n=e.firstLine,o=e.secondLine,r=e.thirdLine,i=e.showOpenInApp,a=e.className,l=(0,f.n)(),c=function(){(0,U.t)(t,l)};return t&&n&&o?l.Mobile?s().createElement("div",{className:h()("NavigateToAppCheckCard-wrap",a)},s().createElement("div",{className:"NavigateToAppCheckCard-mask"}),n&&s().createElement("div",{className:"NavigateToAppCheckCard-title NavigateToAppCheckCard-title-opacity"},n),o&&s().createElement("div",{className:"NavigateToAppCheckCard-title NavigateToAppCheckCard-title-opacity"},o),r&&s().createElement("div",{className:"NavigateToAppCheckCard-title NavigateToAppCheckCard-title-opacity"},r),s().createElement("div",{className:"NavigateToAppCheckCard-navigate",onClick:c},"点击前往 知乎 App",s().createElement($.Z,{className:"NavigateToAppCheckCard-navigate-icon",size:24})),void 0!==i&&i&&s().createElement("div",{className:"NavigateToAppCheckCard-navigate-open",onClick:c},"App 内打开")):s().createElement("div",{className:h()("NavigateToAppCheckCard-wrap",a)},s().createElement("div",{className:"NavigateToAppCheckCard-mask"}),n&&s().createElement("div",{className:"NavigateToAppCheckCard-title"},n),o&&s().createElement("div",{className:"NavigateToAppCheckCard-title"},o),r&&s().createElement("div",{className:"NavigateToAppCheckCard-title"},r),s().createElement("div",{className:"NavigateToAppCheckCard-qrcode"},s().createElement("img",{src:"https://www.zhihu.com/qrcode?url=".concat(encodeURIComponent(t)),className:"NavigateToAppCheckCard-qrcode-img"})),s().createElement("div",{className:"NavigateToAppCheckCard-desc"},"手机浏览器扫上方二维码前往 知乎 App")):null};function eC(e){var t=e.paidContent,n=void 0===t?{}:t,o=e.hasPurchased,r=e.className,i=e.popupCallback,a=e.onLogPaidAnswerProgress,u=e.handleBookshelfButtonClick,d=e.onPayScoreCallback,p=e.isShowPurchasePop,b=void 0!==p&&p,C=e.authRequired,Z=e.onExpandCallback,_=e.answerId,w=e.onRetryFetch,k=e.isVip,x=n.changeManuscript,S=n.resourceType,E=n.btnInfo,I=n.zaInfo,T=n.advertorialInfo,N=n.authenticationResult,A=void 0===N||N,B=T||{},R=B.text,P=B.url,z=(void 0===x?{}:x)||{},L=z.url,M=z.firstLine,D=z.secondLine,U=z.thirdLine,O=(0,m.F)().isDarkMode,q=void 0!==O&&O,V=(0,f.n)(),H=(0,c.useRef)(null),X=(0,c.useRef)(o),G=(0,l._)((0,c.useState)(!1),2),K=G[0],j=G[1],W=(0,l._)((0,c.useState)(k||!1),2),Y=W[0],Q=W[1];return((0,c.useEffect)(function(){!X.current&&o&&j(!0)},[o]),(0,c.useEffect)(function(){V.ZhihuHybrid&&(0,g.Z)("account/me").dispatch().then(function(e){var t;Q(null==e?void 0:null===(t=e.vip_info)||void 0===t?void 0:t.is_vip)})},[V,o,n]),y(V,!o&&"function"==typeof d&&20!==S&&!(!1===A&&Y),n.id,H,function(e){return d(e)}),!V.zhihuHybrid&&L&&M&&D)?s().createElement(eb,{url:L,firstLine:M,secondLine:D,thirdLine:U}):!1===A&&Y?s().createElement(eg,{className:r,onRetryFetch:w}):K&&Z?s().createElement("div",{className:"KfeCollection-PaidAnswerFooter-expand"},s().createElement("div",{className:"KfeCollection-PaidAnswerFooter-mask"}),s().createElement("div",{className:"KfeCollection-PaidAnswerFooter-link",onClick:function(){var e;null===(e=Z())||void 0===e||e.then(function(){j(!1)})}},s().createElement("span",{className:"KfeCollection-PaidAnswerFooter-text"},"点击查看全部"),s().createElement(v.Z,{className:"KfeCollection-PaidAnswerFooter-arrow"}))):20===S&&R&&P?s().createElement(ev,{text:R,url:P}):s().createElement("div",{className:h()("KfeCollection-PaidAnswerFooter",r),ref:H},!o&&s().createElement(F,{answerId:_,btnInfo:E,zaInfo:I||{},popupCallback:i,extra:{ua:V},onClick:a,authRequired:C,isShowPurchasePop:b}),s().createElement(ep,{isMobile:V.Mobile,extra:{ua:V},isDarkMode:q,result:n,hasPurchased:o,onBookshelfButtonClick:u,theme:q?"dark":"light",popupCallback:i,logPaidAnswerProgress:a,authRequired:C,isShowPurchasePop:b,answerId:_}),s().createElement(em,{result:n,isDarkMode:q,extra:{ua:V}}))}eC.propTypes={paidContent:d().object.isRequired,hasPurchased:d().bool.isRequired,className:d().string,popupCallback:d().func,onLogPaidAnswerProgress:d().func,handleBookshelfButtonClick:d().func,onPayScoreCallback:d().func};var eZ=n(36695),ey=n(93206),e_=n(85576),ew=n(3028),ek=n(8866);function ex(e){var t,n=e.answer,o=e.isAnswerPage,r=e.authRequired,i=((0,eZ.useSelector)(function(e){return(0,ek.Mn)(e,null==n?void 0:n.id)})||{}).result;if(!i)return null;var l=null==n?void 0:null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased;return(0,a.tZ)(eC,{hasPurchased:l,paidContent:i,isShowPurchasePop:o,authRequired:r})}var eS=(0,ey.compose)((0,ew.Z)(null),e_.Z)(function(e){var t=e.answer,n=e.isAnswerPage,o=e.authRequired;return(null==t?void 0:t.answerType)==="paid"?(0,a.tZ)(ex,{answer:t,isAnswerPage:void 0!==n&&n,authRequired:o}):null}),eE=function(e){var t=e.content,n=(0,l._)(void 0===t?[]:t,2),o=n[0],r=n[1],i=e.className,a=e.onClick;return s().createElement("div",{className:h()("KfeCollection-CertainEndEllipsis",i),onClick:a},s().createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},o),s().createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},r))};function eI(e){var t=e.contentName,n=e.fallbackContent,o=e.onClick,r=(0,c.useMemo)(function(){return function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n=(0,l._)(Array.from(t.childNodes),3),o=n[0].nodeValue,r=n[1],i=r.innerText,a=r.attributes,c=n[2].nodeValue,s={},u=!0,d=!1,p=void 0;try{for(var h,f=a[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var m=h.value;s[m.name]=m.value}}catch(e){d=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw p}}if(o&&i&&c)return{prefixText:o,content:i,status:c,linkInfo:{name:"a",attr:s}};return null}catch(e){return null}}(t)},[t]);if(null===r)return n;var i=r.prefixText,a=r.content,u=r.status,d=r.linkInfo,p=d.name,h=s().createElement(s().Fragment,null,i,s().createElement(p,d.attr,a.slice(0,-1))),f=s().createElement(s().Fragment,null,s().createElement(p,d.attr,a.slice(-1)),u);return s().createElement(eE,{onClick:o,content:[h,f],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})}var eT=function(e){var t=e.introCard,n=e.paidConsult,o=e.RichTextComponent,r=e.className,i=e.zaInfo,a=void 0===i?{}:i,l=e.handleTrack,c=e.extra,u=void 0===c?{}:c,d=e.extraTxt,p=void 0===d?"":d,f=t.statement,m=t.description,v=t.contentName,g=t.authorDesc,b=u.isNewStyle,C=u.isMobile,Z=(0,A.Q4)().trackEvent,y=function(e,t){var n=e.target,o=e.target,r=o.text,i=o.href;"A"===o.tagName&&(N.Z.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:r},link:{url:i}}),Z({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Text",block:{blockText:5325===t?"userName":"bookTitle"}}},{link:{url:i}})),l&&l(e,i)},_=function(e){return b?C?"".concat(e,"-newStyle-mobile"):"".concat(e,"-newStyle-pc"):e};return s().createElement("section",{className:h()(_("KfeCollection-IntroCard"),r),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},!b&&s().createElement(s().Fragment,null,!!f&&s().createElement("p",null,f),!!m&&s().createElement("p",null,m),(!!f||!!m)&&s().createElement("p",{className:"KfeCollection-IntroCard-spacing"})),s().createElement(eI,{contentName:v,onClick:function(e){return y(e,5326)},fallbackContent:s().createElement("p",{onClick:function(e){return y(e,5326)},className:_("KfeCollection-IntroCard-contentName"),dangerouslySetInnerHTML:{__html:v}})}),o?s().createElement(o,{className:_("KfeCollection-IntroCard-authorDesc"),html:g,onClick:function(e){return y(e,5325)}}):s().createElement("p",{onClick:function(e){return y(e,5325)},className:_("KfeCollection-IntroCard-authorDesc"),dangerouslySetInnerHTML:{__html:g}}),p&&s().createElement("p",{className:_("KfeCollection-IntroCard-authorDesc")},p),n&&n.consultUrl&&s().createElement(A.eV,{content:(0,H._)((0,S._)({},a),{id:n.userId,type:G.at.Conversation}),block:"PaidConsultTopText"},s().createElement(A.$U,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n.consultUrl}}},s().createElement("div",{className:_("KfeCollection-IntroCard-paidConsult")},"作者已开通付费咨询，可向作者",s().createElement("a",{href:n.consultUrl,target:"_blank",rel:"noopener noreferrer"},"发起咨询")))))},eN=n(14583),eA=function(e){return s().createElement(en.Z,Object.assign({viewBox:"0 0 140 43"},e),s().createElement("defs",null,s().createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),s().createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},s().createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};eA.defaultProps={name:"PrivilegeLabel"};var eB=function(e){var t=e.data,n=e.className,o=e.extra,r=t||{},i=r.vipText,a=r.worthText,l=r.cardColor,c=o||{},u=c.isNewStyle,d=c.isMobile,p=function(e){return u?d?"".concat(e,"-newStyle-mobile"):"".concat(e,"-newStyle-pc"):e};return 0===(void 0===l?0:l)?null:s().createElement("div",{className:h()(p("KfeCollection-Privilege"),n)},s().createElement(eN.h,{className:p("KfeCollection-Privilege-vipIcon")}),s().createElement("div",{className:p("KfeCollection-Privilege-content")},s().createElement("span",{className:"KfeCollection-Privilege-vipText"},i),s().createElement("span",null," ".concat(a))),!u&&s().createElement(eA,{className:"KfeCollection-Privilege-label"}))},eR=function(e){var t=e.data,n=e.className,o=e.extra,r=t||{},i=r.worthText,a=r.cardColor,l=o||{},c=l.isNewStyle,u=l.isMobile;return 2!==(void 0===a?0:a)?null:s().createElement("div",{className:h()(c?u?"KfeCollection-OrdinaryLabel-newStyle-mobile":"KfeCollection-OrdinaryLabel-newStyle-pc":"KfeCollection-OrdinaryLabel",n)},s().createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},i))},eP=n(29564),ez=n(26144),eL=function(e){var t=e.ua,n=void 0===t?{}:t,o=e.isDarkMode,r=e.isFixed;return s().createElement("div",{className:void 0!==r&&r?"KfeCollection-FabledStatement-fixed":"KfeCollection-FabledStatement"},s().createElement(ez.d,{isDarkMode:void 0!==o&&o,ua:n},s().createElement(f.I.Provider,{value:n},s().createElement(eP.UC,{disclaimerInfo:{excerpt:"包含虚构创作",description:"创作声明",subDescription:"内容中的情节存在虚构加工，仅供参考"}}))))};function eM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eD=function(e){(0,x._)(n,e);var t=(0,E._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return(0,k._)(n,[{key:"render",value:function(){var e=this.props,t=e.result,n=t.introCard,o=t.vipWorthInfo,r=t.isFabled,i=void 0!==r&&r,a=t.abParam,l=t.paidConsult,c=t.zaInfo,u=e.extra,d=u.ua,p=void 0===d?{}:d,h=u.isDarkMode,f=e.extraTxt,m=(o||{}).cardColor,v={isNewStyle:"1"===(a||{}).paTopLabel,isMobile:!!p.Mobile},g=v.isNewStyle&&!v.isMobile&&0!==m;return s().createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},s().createElement("div",{className:g?"KfeCollection-AnswerTopCard-FlexContainer":""},2===m?s().createElement(eR,{data:o,extra:v}):s().createElement(eB,{data:o,className:v.isNewStyle?"":"KfeCollection-AnswerTopCard-Privilege",extra:v}),i&&v.isNewStyle&&s().createElement(eL,{ua:p,isDarkMode:h,isFixed:g})),!!n&&s().createElement("div",null,s().createElement(eT,{introCard:n,paidConsult:l,extraTxt:f,zaInfo:c,extra:v})))}}]),n}(s().Component);eM(eD,"propTypes",{className:d().string,result:d().object.isRequired}),eM(eD,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}},extraTxt:""});var eU=n(7407),eO=function(e){var t=e.answer,n=(0,eZ.useSelector)(function(e){return(0,ek.Mn)(e,null==t?void 0:t.id)})||{},o=n.isRequesting,r=n.error,i=n.result,l=!!(!o&&!r&&!i),s=(0,eZ.useDispatch)();(0,c.useEffect)(function(){l&&s((0,ek.bs)(t.id))},[l,s,t.id]);var u=(0,eZ.useSelector)(eU.Uh),d=(0,m.F)().isDarkMode;return(0,a.tZ)(eD,{result:i,extra:{ua:u,isDarkMode:d},extraTxt:"\xa9 本内容版权为知乎及版权方所有，正在受版权保护中"})},eF=(0,ew.Z)(null)(function(e){var t=e.answer;return(null==t?void 0:t.answerType)==="paid"?(0,a.tZ)(eO,{answer:t}):null})},79100:function(e,t,n){"use strict";var o=n(55164),r=n(71728),i=n(85879),a=n(7835),l=n(65733),c=n(36695),s=n(65939),u=n(66263),d=n(85576),p=n(8866),h=n(55344);t.Z=(0,d.Z)(function(e){var t,n=e.disabled,d=e.currentUser,f=e.authRequired,m=e.answer,v=e.isOwner,g=(0,r._)(e,["disabled","currentUser","authRequired","answer","isOwner"]),b=(0,c.useDispatch)(),C=!!(!n&&d);(0,a.Z)(function(){C&&b((0,h.X2)(["opposeRight"]))});var Z=(0,l.Z)(f(function(e){b((0,p.i_)(m.id,e,{cardType:m.cardType},m))},u.q0.vote));return(0,i.tZ)(s.Z,(0,o._)({count:m.voteupCount,voting:m.relationship&&m.relationship.voting,isOwner:!!(v||(null===(t=m.relationship)||void 0===t?void 0:t.isAuthor)),onVote:Z},g))})},9651:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var o=n(55164),r=n(57477),i=n(85879),a=n(14168),l=n.n(a),c=n(19076),s=n(2174);function u(e){var t=e.questionId,n=e.title,a=e.href,l=e.zaTitleId,u=e.showStickyMark,d=e.showHeightLight,p=e.onClick;return(0,i.BX)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[(0,i.tZ)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),(0,i.tZ)("meta",{itemProp:"name",content:n}),u&&(0,i.tZ)(s.Z,{}),(0,i.tZ)(c.Link,(0,r._)((0,o._)({to:a,target:"_blank","data-za-detail-view-element_name":"Title"},l&&{"data-za-detail-view-id":l}),{onClick:p,children:d?(0,i.tZ)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n}))]})}u.propTypes={questionId:l().number.isRequired,title:l().string.isRequired,href:l().string.isRequired,zaTitleId:l().number,showStickyMark:l().bool,onClick:l().func}},81168:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(55164),r=n(57477),i=n(85879),a=n(87641),l=n(29229);function c(e){var t=(0,l.Z)(function(){return n.e(3584).then(n.bind(n,85638))});return(0,i.tZ)(a.Box,(0,r._)((0,o._)({my:"14px",css:{minHeight:20}},e),{children:t?(0,i.tZ)(t,{width:"70px",height:"20px",css:{display:"block"}}):null}))}},6680:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var o=n(85879),r=n(68159),i=n(87363),a=n.n(i),l=n(30722),c=n(61255),s=n(32122),u=n(80714),d=n(66980),p=Object.assign,h=function(e){return a().createElement(d.Z,p({width:"8",height:"10",fill:"none",viewBox:"0 0 8 10"},e),a().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M1.315 9.302a.6.6 0 0 1-.915-.51v-7.52a.6.6 0 0 1 .914-.51l6.11 3.754a.6.6 0 0 1 0 1.022l-6.11 3.764Z",clipRule:"evenodd"}))};function f(e){var t=e.videoId,n=e.zvideoId,a=e.title,d=e.playCount,p=void 0===d?0:d,f=e.voteupCount,m=void 0===f?0:f,v=e.isComplete,g=e.startTime,b=e.creationReferences,C=e.creationRelationship,Z=e.shouldExpandState,y=e.itemId,_=e.itemType,w=e.isRecommend,k=Number((void 0===g?0:g)/1e3),x=(0,i.useRef)({currentTime:0}),S=(0,i.useRef)((0,r.Wn)(t,"*",!0));return(0,i.useEffect)(function(){var e=S.current.subscribeMessage(function(e,t){e===r.FP.TIMEUPDATE&&(x.current.currentTime=t.currentTime)});return function(){return e.unsubscribe()}},[]),(0,o.BX)("div",{className:"VideoAnswerPlayer",children:[(0,o.tZ)("div",{className:"VideoAnswerPlayer-video",children:(0,o.tZ)(s.Z,{contentId:y,contentType:_,videoId:t,useSingle:w,zaProps:{type:"Answer",token:y}})}),Z&&(0,o.BX)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){var e=(x.current.currentTime+k).toFixed(1);window.open("https://".concat(u.Z.wwwHost,"/zvideo/").concat(n,"?playTime=").concat(e))},children:[(0,o.BX)("div",{className:"VideoAnswerPlayer-state",children:[(0,o.tZ)("div",{className:"VideoAnswerPlayer-state--title",children:a}),(0,o.BX)("div",{className:"VideoAnswerPlayer-state--data",children:[(null==b?void 0:b.plainText)?"".concat(b.plaintext," \xb7 "):(0,c.Gz)(C)?"引用创作 \xb7 ":null,(0,l.Zh)(p),"播放",m>0?" \xb7 ".concat((0,l.Zh)(m),"赞同"):null]})]}),!(void 0!==v&&v)&&(0,o.BX)("div",{className:"VideoAnswerPlayer-action",children:[(0,o.tZ)(h,{style:{marginRight:"6px"}}),"完整版"]})]})]})}},35219:function(e,t,n){"use strict";var o=n(55164),r=n(57477),i=n(85879),a=n(87641),l=n(61255),c=n(63573),s=n(81168),u=n(6680);t.Z=function(e){var t=e.shouldExpand,n=e.showPlayer,d=e.campaign,p=e.answer,h=e.videoAnswerData,f=e.meta,m=e.videoRef,v=e.alwaysShowVolumeButton,g=e.hideCoCreationFeature,b=e.isRecommend,C=!g&&(0,l.HE)(null==h?void 0:h.creationRelationship);return(0,i.BX)(i.HY,{children:[n&&(0,i.tZ)(u.Z,(0,o._)({itemId:p.id,itemType:p.type,videoRef:m,alwaysShowVolumeButton:v,shouldExpandState:t,isRecommend:b},h)),f,t&&(0,i.BX)(a.Flex,{mt:"14px",children:[C&&(0,i.tZ)(l.xJ,{mr:"12px"}),(0,i.tZ)(s.Z,{my:"0px"})]}),t&&d&&(0,i.tZ)(c.Z,{item:(0,r._)((0,o._)({},p),{campaign:d,collapseReason:null,type:"zvideo"})})]})}},59525:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var o=n(85879),r=n(87363),i=n(36695),a=n(8866),l=n(55344),c=n(65939),s={up:1,neutral:0,down:-1};function u(e){var t=e.id,n=e.voteupCount,u=e.voting,d=e.isOwner,p=e.answer,h=e.currentUser,f=e.disabled,m=(0,i.useDispatch)();(0,r.useEffect)(function(){!f&&h&&m((0,l.X2)(["opposeRight"]))},[f,h,m]);var v=(0,r.useCallback)(function(e){m((0,a.i_)(p.id,s[e],{zVideoId:t}))},[t,m,p.id]);return(0,o.tZ)(c.Z,{type:"zvideo",count:n,voting:u,onVote:v,isOwner:d})}},84069:function(e,t,n){"use strict";function o(e){var t,n=null==e?void 0:null===(t=e.reactionInstruction)||void 0===t?void 0:t.rEACTIONANONYMOUS;return void 0!==n?n||"该问题暂不支持启用匿名":""}function r(e){return 0===Number(null==e?void 0:e.id)}n.d(t,{S:function(){return r},i:function(){return o}})},6360:function(e,t,n){"use strict";n.d(t,{Z:function(){return o.Z}});var o=n(66392)},52504:function(e,t,n){"use strict";n.d(t,{fb:function(){return u},Dm:function(){return s},xx:function(){return c},gh:function(){return l}});var o=n(85879),r=n(8866),i=n(37335),a=function(){return(0,o.BX)("div",{className:"SelfVisibleLable-wrap",children:[(0,o.tZ)(i.P,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})},l=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,i=t.relationship,l=(void 0===i?{}:i).isAuthor,c=t.visibleOnlyToAuthor;return l&&c?(0,o.tZ)(a,{}):"org"!==r||n?null:(0,o.BX)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",(0,o.tZ)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},c=function(e){var t=e.isNormal,n=e.collapsedBy,o=e.suggestEdit,r=e.collapseReason,i=e.isCollapsed,a=e.question,l=(void 0===a?{}:a).brand,c=(void 0===l?{}:l).isPuQuestion;return!(void 0===t||t)&&(null==o?void 0:o.unnormalDetails)?{abnormalDetailProps:{abnormalDetail:o.unnormalDetails}}:("community"===n||c)&&i?{collapseReasonProps:{collapseReason:r}}:null},s=function(e){var t=e.answer,n=e.canCollapse,o=e.hideCommercialInviteLabel,i=t.collapsedBy,a=t.relevantInfo,l=void 0===a?{}:a,c=l.relevantType,s=l.brandSpecialExtra,u=void 0===s?{}:s;if((0,r.z)(t)||(0,r.G_)(t)||"org"===i&&!n){if("brand_special"===c&&!o)return{type:"answer",data:u};if("brand_best"===c)return{data:u}}return null},u=function(e){var t=e.annotationDetail,n=e.isNormal,o=e.collapsedBy;return(void 0===n||n)&&"community"!==o&&t?{annotationDetail:t}:null}},72638:function(e,t,n){"use strict";var o=n(85879),r=n(87363),i=n(99213);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,a=t.unescapable,l=e.labelInfo,c=e.hermesLabel;return(0,o.tZ)(r.Fragment,{children:!n&&!a&&(0,o.tZ)(i.vT,{labelInfo:l||c})})}},92120:function(e,t,n){"use strict";n.d(t,{Y:function(){return u}});var o=n(55164),r=n(85879),i=n(87363),a=n.n(i),l=n(87641),c=n(30016),s=n(43384),u={textAnswer:"textAnswer",videoAnswer:"videoAnswer"},d=[{key:u.textAnswer,name:"图文回答"},{key:u.videoAnswer,name:"视频回答"}];t.Z=a().forwardRef(function(e,t){var n=e.activeTabKey,i=e.onChange;return(0,r.tZ)(c.Z,{children:d.map(function(e){var a=e.key,d=e.name;return(0,r.tZ)(s.$U,{as:c.O,zaType:"Button",zaText:!0,css:{padding:"0 10px",":first-of-type":{paddingLeft:20}},children:(0,r.tZ)(l.Text,{ref:a===u.videoAnswer?t:null,onClick:function(){return i(a)},css:function(e){return(0,o._)({color:e.colors.GBK03A,cursor:"pointer"},n===a&&{fontWeight:"bold",borderBottom:"4px solid ".concat(e.colors.GBL01A)})},children:d})},a)})})})},15377:function(e,t,n){"use strict";n.d(t,{Z:function(){return ex}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(94009),d=n(85626),p=n(85879),h=n(72111),f=n(66011),m=n(82452),v=n(30037),g=n(84220),b=n(60811),C=n(25628),Z=n.n(C),y=n(14168),_=n.n(y),w=n(87363),k=n(36695),x=n(19076),S=n(87641),E=n(93206),I=n(69383),T=n(31252),N=n(99447),A=[340792848,350203097,350203137,350203161,350203194,350203244,360980862,360980655,360979559,360979454,360979327,360979218,360979086,360978949,360978717,360978426,376742720,376747534,376747608,376747691,376747887,377838652,377838776,377839115,377839161,377839236,377839329,377839762,377839827,377839991,377840112,377906867,377907004,377907128,377907233,377907323,377907486,377907592,377907807,377907929,377908171,377908294,377908397,377908510,377908600,377908691,377908791,377908856,377908946,377908990,377909025],B=n(42559),R=n.n(B),P=(0,n(39288).FH)("brand",["GET_URL"]),z=n(38889),L=n(66223),M=n(39959),D=n(27312),U=n(8858),O=n(61255),F=n(63362),q=n(3707),V=n(49906),H=n(80714),X=n(60736),G=n(12421),K=n(85576),j=n(78970),W=n(89250),Y=n(7407),Q=n(1606),$=n(4059),J=n(98151),ee=n(99213),et=n(63573),en=n(28355),eo=n(24794),er=n(65939),ei=n(97285),ea=n(66263),el=n(57138),ec=n(35139),es=n(99158),eu=n(78233),ed=n(24340),ep=n(12564),eh=n(19495),ef=n(11797),em=n(99830),ev=n(30361),eg=n(102),eb=n(57386),eC=n(9070),eZ=n(2174),ey=function(e){return"plain"===e||"special-plain"===e},e_=function(e){var t=e.title,n=e.id,o=e.created,r=e.updated,i=e.commentCount,a=e.imageUrl,l=e.thumbnail;return{headline:t,url:"".concat(ea.vg,"/p/").concat(n),datePublished:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*r).toISOString(),commentCount:i,image:a||l}},ew=(0,K.Z)(function(e){var t=e.id,n=e.type,o=e.voteupCount,r=e.authRequired,i=(0,j.Z)(r),a=i.modalShown,l=i.openVotersModal,c=i.closeVotersModal;return(0,p.BX)(p.HY,{children:[(0,p.tZ)(q.Z,{contentType:"article",id:t,onClickVoterInfo:l}),(0,p.tZ)("div",{className:"ArticleItem-extraInfo",children:(0,p.tZ)(ei.Z,{id:t,type:n,voteupCount:o,modalShown:a,handleListHide:c})},"articleExtraInfo")]})}),ek=function(e){(0,l._)(n,e);var t=(0,d._)(n);function n(){var e,i,l,s,u,d,h;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1,contentExpanded:!1,hasFetchedLabels:!1,shownCatalogModal:!1,imageAspectRatio:1.6}),(0,a._)((0,o._)(e),"disableAuth",(u=(void 0===(s=(void 0===(l=(i=e.props).router)?{}:l).location)?{}:s).pathname,d=i.isMobile,h=i.currentUser,d&&!h&&!u.startsWith("/topic"))),(0,a._)((0,o._)(e),"handleCommentsShown",function(t,n){if(e.props.shouldOia){e.createOpenInAppHandler("comment_article")(t);return}e.setState(n),n.commentsShown?e.props.trackOpenCommentAdPromotion():e.props.trackCloseCommentAdPromotion()}),(0,a._)((0,o._)(e),"handleCommentsHide",function(){e.setState({commentsShown:!1}),e.props.trackCloseCommentAdPromotion()}),(0,a._)((0,o._)(e),"handlePositionStatusChange",function(t){e.setState({positionStatus:t})}),(0,a._)((0,o._)(e),"handleFavButtonClick",function(t){var n=e.props,o=n.zaInfos.favlists;if(n.shouldOia){e.createOpenInAppHandler("comment_article")(t);return}if(I.Z.trackEvent(e.favButtonRef,(0,c._)({action:"Collect",element:"Button",is_intent:!0},o&&{id:o})),e.disableAuth){e.handleToggleGuide();return}e.handleFavlistsShown()}),(0,a._)((0,o._)(e),"handleFavlistsShown",e.props.authRequired(function(){return e.setState({favlistsShown:!0})},ea.q0.favlists)),(0,a._)((0,o._)(e),"handleFavlistHide",function(){e.setState({favlistsShown:!1})}),(0,a._)((0,o._)(e),"handleToggleGuide",function(){e.setState({guideShown:!e.state.guideShown})}),(0,a._)((0,o._)(e),"toggleCatalogModal",function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})}),(0,a._)((0,o._)(e),"handleVote",function(t){var n=e.props,o=n.article.id;(0,n.updateArticleVote)(o,t)}),(0,a._)((0,o._)(e),"handleLogMoreClick",function(){var t=e.props.zaInfos.options;I.Z.trackEvent((0,o._)(e),(0,c._)({action:"Click",element_name:"MoreAction"},t&&{id:t}))}),(0,a._)((0,o._)(e),"loadArticleRelationEndorsement",function(){var t=e.props,n=t.article,o=t.relationEndorsement,r=t.loadArticleRelationEndorsement;o||r(n.id)}),(0,a._)((0,o._)(e),"handleToggleExpand",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.trackUserAction,r=e.props,i=r.onToggleExpand,a=r.getTrackUrl,l=r.article,c=r.ua,s=r.trackPromotionClick;i&&i(t),t&&(e.loadArticleRelationEndorsement(),(void 0===o||o)&&((l.trackUrl?Promise.resolve():a(l.id)).then(function(){return function(e,t){var n=e.trackUrl,o=void 0===n?[]:n,r=e.id;if(0===o.length)return null;var i="other";t.Android?i="android":t.iOS&&(i="ios");var a=R()();return o.forEach(function(e){new Image().src=e.replace("__OS__",i).replace("__ADPLATFORM__",i).replace("__REQUESTID__",a).replace("__SESSIONID__",a).replace("__ATOKEN__",r).replace("__PAGETYPE__","article")}),{os:i,pageId:r,sessionId:a,pageType:"article"}}(e.props.article,c)}),s&&s())),e.setState({contentExpanded:t})}),(0,a._)((0,o._)(e),"renderPrefix",function(){var t=e.props.article,n=t.labelInfo,o=t.hermesLabel,r=e.state.contentExpanded;return(n||o)&&!r?(0,p.tZ)(ee.vT,{labelInfo:n||o}):null}),(0,a._)((0,o._)(e),"createOpenInAppHandler",function(t){var n=e.props.article.id;return function(e){e.preventDefault(),ea.dd||(0,m.rH)((0,el.MN)({type:"article",id:n}),{utm_content:t})}}),(0,a._)((0,o._)(e),"handleLike",function(t){return!!e.props.shouldOia&&(e.createOpenInAppHandler("like_article")(t),!0)}),(0,a._)((0,o._)(e),"handleCoverImageLoad",function(t){var n=e.props.article,o=t.target;n.imageUrl===e.coverProps.cover&&o.naturalWidth&&e.setState({imageAspectRatio:o.naturalWidth/o.naturalHeight})}),(0,a._)((0,o._)(e),"handleClickTitle",function(t){var n=e.props,o=n.trackPromotionClick,r=n.article.id,i=n.onClickTitle;t.preventDefault(),window.open(e.href),null==i||i(r),null==o||o()}),e}return(0,i._)(n,[{key:"href",get:function(){var e=this.props.article.id;return"//".concat(H.Z.zhuanlanHost,"/p/").concat(e)}},{key:"renderLabels",value:function(){if(!this.state.contentExpanded)return null;var e=this.props.article,t=e.annotationDetail;return(0,p.tZ)(et.Z,{annotationProps:t&&{annotationDetail:t},item:e})}},{key:"renderArticleExtraInfo",value:function(){var e=this.props.article,t=e.voteupCount,n=e.id,o=e.type;return(0,p.tZ)(ew,{id:n,type:o,voteupCount:t})}},{key:"renderMeta",value:function(){var e=e_(this.props.article);return Object.keys(e).map(function(t){return(0,p.tZ)("meta",{itemProp:t,content:e[t]},t)})}},{key:"renderSuggestEdit",value:function(){var e=this.props.article,t=e.isNormal,n=e.suggestEdit,o=void 0===n?{}:n,r=o.title,i=o.status,a=o.reason;return i&&!(void 0===t||t)?(0,p.BX)("div",{className:"AnswerItem-statusContent",children:[(0,p.tZ)("div",{className:"AnswerItem-statusReason",children:a}),(0,p.BX)("div",{className:"AnswerItem-statusDescription",children:["作者修改内容通过后，文章会重新显示恢复正常\xa0",(0,p.tZ)("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink",children:r})]})]}):null}},{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.article,i=o.article,a=i.id,l=i.title,d=i.author,m=i.excerpt,v=i.content,C=i.voteupCount,y=i.voting,_=i.type,w=i.created,k=i.updated,x=i.imageUrl,E=i.commentCount,I=i.adminClosedComment,T=i.annotationDetail,N=i.creationRelationship,B=i.ipInfo,R=o.preset,P=o.lastreadTouchable,q=o.itemProp,H=o.ua,X=o.lessExcerpt,K=o.formatContent,j=o.zaInfos,W=j.expand,Y=j.title,Q=j.voteUp,ee=j.voteDown,et=j.toggleComment,ei=j.share,ea=j.report,ec=j.options,eu=j.getCommentAction,e_=o.renderOptions,ew=o.isSticky,ek=o.handleToggleSticky,ex=o.renderActionButtons,eS=o.className,eE=o.isMobile,eI=o.ecommerce,eT=o.showHeightLight,eN=void 0!==eT&&eT,eA=o.truncateDisabled,eB=o.currentUser,eR=o.blockStrategies,eP=o.trackShareAdPromotion,ez=o.trackPublishCommentAdPromotion,eL=o.adHint,eM=(0,es.Z)([(0,es.m)(eR)],ex),eD=this.state,eU=eD.positionStatus,eO=eD.favlistsShown,eF=eD.commentsShown,eq=eD.commentsAutoFocus,eV=eD.commentPattern,eH=eD.contentExpanded,eX=eD.shownCatalogModal,eG=eD.imageAspectRatio,eK=eB&&eB.urlToken===(null==d?void 0:d.urlToken),ej=this.renderSuggestEdit(),eW="function"==typeof ek,eY="special-plain"!==R&&(0,p.tZ)(J.Z,(0,s._)((0,c._)({},ey(R)&&{preset:"plain"}),{author:d,userLinkV2:!0,className:"ArticleItem-authorInfo"}),"authorInfo"),eQ=this.renderArticleExtraInfo(),e$=this.renderLabels(),eJ=null==N?void 0:null===(e=N.coCreation)||void 0===e?void 0:e.refBy,e0=null==N?void 0:null===(t=N.reference)||void 0===t?void 0:t.refBy,e1=eH&&(eJ||e0)&&(0,p.tZ)(S.Box,{my:"16px",children:(0,p.tZ)(O.j7,{type:"article",coCreationRefBy:eJ,referenceRefBy:e0})}),e2=(0,u._)(ey(R)?[[eY,e$,e1],eQ]:[[eY,e$,e1,eQ],null],2),e4=e2[0],e3=e2[1],e5=!ej||eK,e7=K?K(v||m,r):v||m,e6=!eE&&eH&&(0,U.Z)(r,"article"),e8=this.coverProps=r.thumbnailExtraInfo&&"video"===r.thumbnailExtraInfo.type?{cover:r.thumbnail,hasVideo:!0}:{cover:r.imageUrl||r.thumbnail,hasVideo:!1};return(0,p.BX)(ev.ZP,{className:Z()("ArticleItem",eS),onRef:function(e){n.contentItem=e},"data-zop":JSON.stringify({authorName:null==d?void 0:d.name,itemId:a,title:l,type:"article"}),data:r,link:this.href,title:(0,p.BX)(p.HY,{children:[eW&&ew&&(0,p.tZ)(eZ.Z,{}),(0,p.tZ)(h._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,p.tZ)("a",(0,s._)((0,c._)({href:this.href,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-element_name":"Title"},Y&&{"data-za-detail-view-id":Y}),{onClick:this.handleClickTitle,children:eN?(0,p.tZ)("span",{dangerouslySetInnerHTML:{__html:l},className:"ArticleItem-highlight"}):l}))})]}),meta:e4,lastreadTouchable:P,itemProp:void 0===q?"article":q,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0,children:[this.renderMeta(),e5?(0,p.BX)(eC.Z,(0,s._)((0,c._)((0,s._)((0,c._)({truncateDisabled:void 0!==eA&&eA,className:Z()({"ArticleItem-highlight":eN}),itemProp:"articleBody",data:r,excerpt:K?K(m,r):m,html:e7,ecommerce:eI,onToggleExpend:this.handleToggleExpand,prefix:this.renderPrefix(),before:(0,p.BX)("div",{children:[e3,x&&(0,p.tZ)(ed.Z,{mt:"10px",ratio:eG,children:(0,p.tZ)(f.G6,{width:"100%",height:"100%",src:x,alt:l})})]}),after:(0,p.tZ)(eC.O,{href:this.href,created:w,updated:k,ipInfo:B})},X?{limit:74}:{}),{onPositionStatusChange:this.handlePositionStatusChange}),e8),{onCoverImageLoad:this.handleCoverImageLoad,zaIds:{expand:W},children:[eM({componentList:[{name:"vote",component:!A.includes(a)&&(eE?(0,p.tZ)(en.Z,{id:a,type:_,liked:!!y,count:C,disabled:eK,onClick:this.handleLike,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth},"vote"):(0,p.tZ)(er.Z,{type:_,count:C,onVote:this.handleVote,voting:y,isOwner:eK,handleToggleGuide:this.handleToggleGuide,zaIds:{voteUp:Q,voteDown:ee}},"vote"))},{name:"comment",component:(0,p.tZ)("div",{css:A.includes(a)?{marginLeft:-24}:{},children:(0,p.tZ)(eh.Z,{onClick:this.handleCommentsShown,commentsShown:eF,commentClosed:I,count:E,positionStatus:eU,zaInfos:{toggleComment:et,getCommentAction:eu}},"comment")},"comment")},{name:"catalog",component:e6&&(0,p.tZ)(M.Z,{html:e7,sourceId:r.id,onClick:this.toggleCatalogModal},"catalog")},{name:"share",component:(0,p.tZ)(eo.Z,{id:a,type:"article",url:this.href,title:l,authorName:d&&d.name,positionStatus:eU,zaShareId:ei,onShare:eP},"share")},{name:"favlist",component:(!eB||!eB.isOrg)&&(0,p.tZ)(F.Z,{onRef:function(e){return n.favButtonRef=e},onClick:this.handleFavButtonClick,label:eE?"":"收藏"},"favlist")},{name:"sticky",component:!eE&&eW&&eK&&(0,G.U)(eB)&&(0,p.tZ)(z.ZP,{preset:"plain",onClick:ek,icon:ew?g.TX:b.rh,label:ew?"取消置顶":"置顶"},"sticky")},{name:"report",component:!eK&&!eE&&eB&&(0,p.tZ)(eb.Z,{id:a,type:_,zaReportId:ea},"report")},{name:"options",component:!eE&&(null==e_?void 0:e_(function(){return n.contentItem},ec))},{name:"annotation",component:!eH&&(0,p.tZ)($.Z,{annotationDetail:T},"annotation")}]}),eL&&(0,p.tZ)(L.Z,{tag:eL})]})):this.renderSuggestEdit(),e5&&(0,p.tZ)(ep.Z,{content:v,type:"article",urlToken:String(a)}),this.disableAuth&&this.state.guideShown&&(0,p.tZ)(V.Z,{redirectUrl:this.href,urlScheme:(0,el.MN)({type:"article",id:a}),buttons:[H.Wechat?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),(0,p.tZ)(em.Z,{parent:r,commentPattern:eV,commentPlugin:ef.Z,shown:eF,autoFocus:eq,onClose:this.handleCommentsHide,onComment:ez}),(0,p.tZ)(eg.E,{id:a,type:"article",shown:eO,onClose:this.handleFavlistHide,zaEnabled:!0}),e6&&(0,p.tZ)(D.Z,{shown:eX,html:e7,sourceId:r.id,onClose:this.toggleCatalogModal,created:w,updated:k,author:d,zaContent:{type:"Answer",token:String(r.id)}})]})}}]),n}(w.Component);(0,a._)(ek,"propTypes",{preset:_().string,lessExperpt:_().bool,formatContent:_().func,renderOptions:_().func,zaInfos:_().object,trackPromotionClick:_().func,renderActionButtons:_().func}),(0,a._)(ek,"defaultProps",{preset:"primary",zaInfos:{},renderActionButtons:ec.W9});var ex=(0,E.compose)((0,Q.Ib)(function(e){var t=e.article,n=e.index;return(0,c._)({content:{type:"Post",token:String(t.id)}},void 0!==n&&{moduleIndex:n})}),(0,N.a)(function(e){var t,n=e.article,o=e.trackCardShow,r=e.zaInfos,i=(void 0===r?{}:r).cardShow;return(0,s._)((0,c._)({module:"PostItem",card:{has_image:!!(n.thumbnailExtraInfo&&"image"===n.thumbnailExtraInfo.type),has_video:!!(n.thumbnailExtraInfo&&"video"===n.thumbnailExtraInfo.type),content:{type:"Post",token:n.id.toString(),upvote_num:n.voteupCount,comment_num:n.commentCount,publish_timestamp:1e3*n.created,parent_token:n.column&&n.column.id,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id,video_id:n.thumbnailExtraInfo&&n.thumbnailExtraInfo.videoId}}},i&&{view:{id:i}}),{trackCardShow:void 0===o||o})}),x.withRouter,K.Z,(0,v.$_)({dataPath:"article"}),v.OW,(0,k.connect)(function(e,t){var n,o,r,i=t.article;return{article:(n=(0,X.JP)(i))?(0,s._)((0,c._)({},i),{creationRelationship:n}):i,ua:e.env.userAgent,ecommerce:(0,T.G_)(e,{type:"article",urlToken:t.article.id}),shouldOia:(0,Y.XE)(e),isMobile:(0,Y.Hu)(e),relationEndorsement:null===(o=e.articles)||void 0===o?void 0:null===(r=o.relationEndorsement)||void 0===r?void 0:r[i.id]}},{updateArticleVote:W.Pt,getTrackUrl:function(e){return{API:{types:P.GET_URL,endpoint:"/brand/track",method:"GET",fetchOptions:{credentials:"include",failsafe:!0,timeout:100},query:{target_url:"https://zhuanlan.zhihu.com/p/".concat(e)}},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:(0,a._)({},e,{trackUrl:t.data||[]})}}}}},loadArticleRelationEndorsement:W.iv}),(0,eu._)({dataPath:"article"}))(ek)},98151:function(e,t,n){"use strict";n.d(t,{Z:function(){return Q}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(85626),d=n(85879),p=n(82452),h=n(80565),f=n(25628),m=n.n(f),v=n(71549),g=n.n(v),b=n(14168),C=n.n(b),Z=n(87363),y=n(36695),_=n(19076),w=n(93206),k=n(69383),x=n(43384),S=n(80714),E=n(66263),I=n(30256),T=n(7407),N=n(57138),A=n(73596),B=n(85661),R=n(21932),P=n(94226),z=n(91),L=n(94009),M=n(75798),D=n(53910),U=n(46829),O=n(79446),F=n(58909),q=n(6438),V={isFollowing:!1,isFollowed:!1,isBlocking:!1,isBlocked:!1,type:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFollowing,n=e.isFollowed,o=e.isBlocking;return"boolean"==typeof t&&"boolean"==typeof n&&"boolean"==typeof o},X=function(e){var t=e.urlToken,n=e.user,o=e.onToggleFollow,r=(0,y.useDispatch)(),i=(0,O.n)(),a=i?n:V,l=(0,L._)((0,M.Z)({once:!0,rootMargin:"".concat(500,"px")}),2),c=l[0],s=l[1];(0,Z.useEffect)(function(){if(!i)return function(){};!H(n)&&s&&r((0,q._u)(t))},[r,t,n,s,i]);var u=(null==a?void 0:a.isBlocking)||(null==a?void 0:a.isBlocked),p=(0,x.x3)({elementLocation:{block:{blockText:"详情页关注"},type:"Button",moduleId:"follow_button",content:{type:"User",token:null==a?void 0:a.id,id:null==a?void 0:a.id}}});return(0,d.BX)(d.HY,{children:[a&&!u&&(0,d.tZ)(x.eV,{content:{type:"User",token:a.id,id:a.id},moduleId:"follow_button",block:"详情页关注",children:(0,d.BX)(U.Z,{onRef:p,css:{minWidth:74,padding:0,userSelect:"none"},getButtonPresetAndColor:function(e){return e.isFollowing?{preset:"secondary",color:"grey"}:{preset:"secondary",color:"blue"}},canShowMutualFollowStatus:!0,id:t,type:a.type,isFollowing:a.isFollowing,isFollowed:a.isFollowed,onToggleFollow:o,children:[(0,d.tZ)(D.ZP,{text:!0,center:!0})," 关注"]})}),(0,d.tZ)("div",{ref:c,css:{position:"absolute",bottom:0,right:0,width:1,height:1}})]})};function G(e){var t=e.urlToken,n=e.onToggleFollow,o=(0,y.useSelector)(function(e){return e.entities.users[t]});return(0,F.xw)(o)?null:(0,d.tZ)(X,{urlToken:t,user:o,onToggleFollow:n})}var K=n(87641),j=n(24405),W=function(e){var t=e.text,n=(0,j.F)();return(0,d.tZ)(K.Box,{css:{color:n.colors.GBK04A,fontSize:14,lineHeight:1.6,fontWeight:"normal"},children:t})},Y=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"handleClick",function(t){var n=e.props,o=n.zaId,r=n.zaExtra,i=n.zaInfo,a=n.author,l=a.urlToken,c=a.id,s=n.isSpecialQuestionOrAnswer,u=n.preventOpenUrl,d=n.isMobile,h=n.trackEvent;if(u){t.preventDefault();return}if(o&&k.Z.trackEvent(null,{id:o,action:"OpenUrl",element_name:"User"},r),i&&h({eventType:"Click",action:"OpenUrl",elementLocation:g()({type:"Card",content:{type:"User",id:c}},i.elementLocation)},g()({link:{url:t.target.href}},i.extra)),!d){if(s){location.href="zhihu://people/".concat(l,"?utm_app_name=zhihu_check"),t.preventDefault(),t.stopPropagation();return}S.Z.isMobileEntry&&e.props.isHuman&&e.props.shouldOia&&(t.preventDefault(),E.dd&&S.Z.isMobileEntry||(0,p.rH)((0,N.MN)({type:"people",id:l},{utm_content:"user_link"})))}}),(0,a._)((0,o._)(e),"renderDetail",function(t){var n=e.props,o=n.extra,r=n.children,i=n.author,a=n.noHeadline,l=n.coCreationAuthorDescriptionText,u=n.followButtonAtFlexEnd;return l?(0,d.tZ)("div",{className:"AuthorInfo-badge",children:(0,d.tZ)(W,{text:l})}):t&&o||(0,d.tZ)("div",{className:"AuthorInfo-badge",children:r||(0,d.tZ)(A.Z,{className:"AuthorInfo-badgeText",css:u&&{"&.AuthorInfo-badgeText":(0,s._)((0,c._)({},(0,h.S)(1)),{width:490,whiteSpace:"unset"})},user:i,noHeadline:a})})}),e}return(0,i._)(n,[{key:"render",value:function(){var e,t="plain"===this.props.preset,n=this.props,o=n.author,r=n.noLink,i=n.avatarSize,a=void 0===i?t?24:38:i,l=n.className,s=n.extra,u=n.itemProp,p=n.roundAvatar,h=n.isMobile,f=n.target,v=n.noDetail,g=n.noHoverCard,b=n.router,C=n.noBadge,Z=n.noVipBadge,y=n.showVipIcon,_=n.followButtonAtFlexEnd,w=n.onToggleFollow,k=null==o?void 0:null===(e=o.vipInfo)||void 0===e?void 0:e.widget,E=b.getCurrentLocation().pathname,I=-1!==E.indexOf("people")&&3===E.split("/").length,T=this.renderDetail(t),N=this.props.userLinkV2;return(0,d.tZ)("div",{className:m()("AuthorInfo",l,{"AuthorInfo--plain":t}),itemProp:u,itemScope:!0,itemType:"http://schema.org/Person",children:(0,d.BX)(x.eV,{moduleId:"author_portrait_text_button",children:[(0,d.BX)("div",{className:m()("AuthorInfo",{"AuthorInfo--mobile":S.Z.isMobileEntry}),children:[(0,d.tZ)("meta",{itemProp:"name",content:o.name}),(0,d.tZ)("meta",{itemProp:"image",content:o.avatarUrl}),(0,d.tZ)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(o.urlToken)}),(0,d.tZ)("meta",{itemProp:"zhihu:followerCount",content:o.followerCount}),N&&(0,d.BX)(d.HY,{children:[(0,d.tZ)(P.Z,(0,c._)({onClick:this.handleClick,noHoverCard:S.Z.isMobileEntry||h||g,noLink:r,user:o,className:"AuthorInfo-avatarWrapper",avatarProps:{className:"AuthorInfo-avatar",size:a,round:p}},f&&{target:f})),(0,d.BX)("div",{className:"AuthorInfo-content",children:[(0,d.BX)("div",{className:"AuthorInfo-head",children:[(0,d.tZ)(R.Z,(0,c._)({noHoverCard:S.Z.isMobileEntry||h||g,onClick:this.handleClick,noLink:r,user:o,noBadge:C,noVipBadge:Z,showVipIcon:y,className:"AuthorInfo-name"},f&&{target:f})),!t&&s]}),!v&&(0,d.tZ)("div",{className:"AuthorInfo-detail",children:T})]})]}),!N&&(0,d.BX)(d.HY,{children:[(0,d.tZ)(B.Z,(0,c._)({onClick:this.handleClick,noHoverCard:S.Z.isMobileEntry||h||g,noLink:r,className:"AuthorInfo-avatarWrapper",user:o,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:a,round:p}},f&&{target:f})),(0,d.BX)("div",{className:"AuthorInfo-content",children:[(0,d.BX)("div",{className:"AuthorInfo-head",children:[(0,d.tZ)(B.Z,(0,c._)({noHoverCard:S.Z.isMobileEntry||h||g,onClick:this.handleClick,className:"AuthorInfo-name",noLink:r,user:o},f&&{target:f})),!t&&s]}),!v&&(0,d.tZ)("div",{className:"AuthorInfo-detail",children:T})]})]})]}),I&&k&&k.id&&(0,d.tZ)(z.Z,{className:"AuthorInfo-Widget",widget:k}),!!o.urlToken&&_&&(0,d.tZ)(G,{urlToken:o.urlToken,onToggleFollow:w})]})})}}]),n}(Z.Component);(0,a._)(Y,"propTypes",{author:C().object.isRequired,noLink:C().bool,avatarSize:C().number,preset:C().oneOf(["plain","default"]),className:C().string,itemProp:C().string,roundAvatar:C().bool,isMobile:C().bool,noDetail:C().bool,relatedTo:C().string,zaId:C().number,zaExtra:C().object,zaInfo:C().object,noHoverCard:C().bool,noHeadline:C().bool,preventOpenUrl:C().bool,noBadge:C().bool,noVipBadge:C().bool,showVipIcon:C().bool,coCreationAuthorDescriptionText:C().oneOf(["视频作者","图文作者"])}),(0,a._)(Y,"defaultProps",{noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1,preventOpenUrl:!1,coCreationAuthorDescriptionText:null});var Q=(0,w.compose)(_.withRouter,I.Z,(0,y.connect)(function(e,t){var n=t.relatedTo,o=t.params,r=["question","answer"].includes(n),i=(0,T.Hu)(e,{includeTablet:!0});return{isHuman:(0,T.H8)(e),shouldOia:(0,T.XE)(e)&&r,isMobile:i,isSpecialQuestionOrAnswer:(0,T.hV)(e,{type:r&&n,id:r?"question"===n?null==o?void 0:o.id:null==o?void 0:o.answerId:""}),followButtonAtFlexEnd:!i&&r}}))(Y)},7453:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(87363),d=n(93206),p=n(36695),h=n(11017),f=n(42559),m=n.n(f),v=n(45732),g=n(58857),b=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{urls:null,logged:!1}),(0,a._)((0,o._)(e),"handleObserve",function(t){t&&e.log()}),(0,a._)((0,o._)(e),"log",function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then(function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]})).then(function(e){return e.forEach(function(e){return e&&(0,v.WY)(e)})}).then(function(){return e.setState({logged:!0})})}),(0,a._)((0,o._)(e),"load",function(){var t=e.props,n=t.type,o=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:o}).then(function(e){return e&&e.payload&&e.payload.data})}),(0,a._)((0,o._)(e),"normalize",function(t){var n=m()(),o=e.props,r=o.ua,i=o.id,a=o.type,l=encodeURIComponent("其他");r.Android?l="android":r.iOS&&(l="ios");var c={os:l,id:i,sessionId:n,type:a};return t.map(function(e){var t,n,o,r;return t=c.os,n=c.id,o=c.sessionId,r=c.type,e.replace("__OS__",t).replace("__REQUESTID__",o).replace("__SESSIONID__",o).replace("__ATOKEN__",n).replace("__AID__",n).replace("__PAGETYPE__",r)})}),e}return(0,i._)(n,[{key:"render",value:function(){return!this.state.logged&&(0,s.tZ)(h.Z,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),n}(u.Component),C=(0,d.compose)((0,p.connect)(function(e){return{ua:e.env.userAgent}},{loadBrandEntityTrackUrl:g.c1}))(b)},53558:function(e,t,n){"use strict";var o=n(85879),r=n(25628),i=n.n(r);t.Z=function(e){var t=e.className;return(0,o.tZ)("span",{className:i()("Bull",t),children:" \xb7 "})}},66223:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(85879);function r(e){var t=e.tag;return(0,o.tZ)("div",{css:{flex:1,display:"flex",justifyContent:"flex-end"},children:(0,o.tZ)("span",{css:function(e){return{display:"inline-block",boxSizing:"border-box",fontSize:11,lineHeight:"10px",border:"1px solid ".concat(e.colors.GBK09A),borderRadius:4,padding:"3px 4px",color:e.colors.GBK07A}},children:t})})}},39959:function(e,t,n){"use strict";var o=n(85879),r=n(47866),i=n(87363),a=n(69383),l=n(99447),c=n(72080),s=n(38889);t.Z=function(e){var t=e.className,n=e.onClick,u=e.html,d=e.sourceId,p=(0,i.useCallback)(function(e){a.Z.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)},[n]),h=(0,i.useMemo)(function(){return(0,c.f1)(u,d).catalog},[u,d]);return(null==h?void 0:h.length)?(0,o.tZ)(l.r,{trackCardShow:!0,view:{id:9856},children:(0,o.tZ)(s.ZP,{preset:"plain",className:t,onClick:p,icon:r.Ll,label:"目录"})}):null}},27312:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var o=n(79065),r=n(85879),i=n(87363),a=n(25628),l=n.n(a),c=n(74128),s=n(44169),u=n(82806),d=n.n(u),p=n(72080),h=n(55164),f=n(57477),m=n(71728),v=n(94009),g=n(87641),b=n(99878),C=n(80565),Z=n(99447),y=n(69383),_=n(74314),w=function(e){var t=e.children,n=e.targetId,o=e.active,i=e.setCursor,a=(0,m._)(e,["children","targetId","active","setCursor"]);return(0,r.tZ)(g.Text,(0,f._)((0,h._)({color:o?"GBL01A":"GBK02A",fontWeight:o?"bold":"normal",css:{fontSize:"14px"}},a),{children:(0,r.tZ)(Z.r,{module:"Content",moduleName:String(t),children:(0,r.BX)(g.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){y.Z.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);i(n),t&&(0,_.TS)(t)},children:[(0,r.tZ)(g.Text,{css:(0,C.S)(1),children:t}),(0,r.tZ)(b.N,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},k=function(e){return(0,r.tZ)(w,(0,h._)({},e))},x={1:k,2:function(e){return(0,r.tZ)(w,(0,h._)({pl:"20px"},e))}},S=function(e){var t=e.catalog,n=e.className,o=e.zaContent,a=(0,v._)((0,i.useState)(null),2),c=a[0],s=a[1];return((0,i.useEffect)(function(){if(null==t?void 0:t.length){var e=null,n=(0,_.cx)();t.forEach(function(t){var o=document.querySelector("#"+t.targetId);(null==o?void 0:o.getBoundingClientRect().top)<=n+2&&(e=t.targetId)}),s(e)}},[]),null==t?void 0:t.length)?(0,r.tZ)(Z.r,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:o,module:"Content",children:(0,r.tZ)(g.Box,{className:l()(n),children:(0,r.tZ)(g.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map(function(e){var t=e.titleLevel,n=e.text,o=e.targetId,i=x[t]||k;return(0,r.tZ)(i,{targetId:o,active:c===o,setCursor:s,children:n},o)})})})}):null};function E(){var e=(0,o._)([""," 编辑于",""]);return E=function(){return e},e}var I=function(e){var t=e.className,n=e.shown,o=e.onClose,a=e.html,u=e.sourceId,h=e.updated,f=e.author,m=e.zaContent,v=(0,i.useMemo)(function(){return(0,p.f1)(a,u).catalog},[a,u]);return(0,r.tZ)(c.Z,{wrapperClassName:"CatalogModal-wrapper",className:l()("CatalogModal",t),title:"目录",subtitle:d()(E(),null==f?void 0:f.name,(0,s.KZ)(h)),onClose:o,children:n&&(0,r.tZ)(S,{css:{paddingBottom:"16px"},catalog:v,zaContent:m})})}},8858:function(e,t){"use strict";t.Z=function(e,t){if(!e||!(t=t||e.type))return!1;if("answer"===t||"post"===t||"article"===t){var n,o;return null===(n=e.settings)||void 0===n?void 0:null===(o=n.tableOfContents)||void 0===o?void 0:o.enabled}return!1}},12564:function(e,t,n){"use strict";var o=n(87363),r=n(14168),i=n.n(r),a=n(36695),l=n(31252);function c(e){var t=e.content,n=e.type,r=e.urlToken,i=(0,a.useDispatch)(),c=(0,o.useCallback)(function(){i((0,l.Ll)({content:t,type:n,urlToken:r}))},[i,t,n,r]),s=(0,a.useSelector)(function(e){return(0,l.G_)(e,{type:n,urlToken:r})});return(0,o.useEffect)(function(){s||c()},[s,c]),null}c.propTypes={content:i().string.isRequired,type:i().oneOf(["answer","article"]).isRequired,urlToken:i().string.isRequired},t.Z=c},50436:function(e,t,n){"use strict";function o(e){var t,n,o,r;return!!(null==e?void 0:null===(t=e.coCreation)||void 0===t?void 0:null===(n=t.refTo)||void 0===n?void 0:null===(o=n.contents)||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:r.type)}function r(e){var t,n,r,i;return!o(e)&&!!(null==e?void 0:null===(t=e.reference)||void 0===t?void 0:null===(n=t.refTo)||void 0===n?void 0:null===(r=n.contents)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.type)}function i(e){var t,n,o,r=null==e?void 0:null===(t=e.coCreation)||void 0===t?void 0:null===(n=t.refTo)||void 0===n?void 0:null===(o=n.contents)||void 0===o?void 0:o[0];return r?"answer"===r.type?r.answer:"article"===r.type?r.article:null:null}function a(e){var t,n,o,r=null==e?void 0:null===(t=e.reference)||void 0===t?void 0:null===(n=t.refTo)||void 0===n?void 0:null===(o=n.contents)||void 0===o?void 0:o[0];return r?"answer"===r.type?r.answer:"article"===r.type?r.article:null:null}function l(e,t){var n=t.contentAuthor;return n&&e.id!==(null==n?void 0:n.id)?n:e}function c(e){var t,n;return o(e)&&null!==(n=null===(t=i(e))||void 0===t?void 0:t.author)&&void 0!==n?n:null}n.d(t,{AQ:function(){return l},Ey:function(){return i},Gz:function(){return r},HE:function(){return o},YJ:function(){return c},y5:function(){return a}})},61255:function(e,t,n){"use strict";n.d(t,{ZY:function(){return W},xJ:function(){return u},j7:function(){return F},_N:function(){return L},HE:function(){return o.HE},Gz:function(){return o.Gz},SF:function(){return H}});var o=n(50436),r=n(55164),i=n(57477),a=n(85879),l=n(87641),c=n(24405),s=n(23579),u=function(e){var t=(0,c.F)();return(0,a.tZ)(l.Flex,(0,i._)((0,r._)({width:"58px",height:"20px",bg:(0,s.a)(t.colors.GYL01A).alpha(.08),color:t.colors.GYL01A,alignItems:"center",justifyContent:"center",css:{fontWeight:"normal",fontSize:12,borderRadius:4,overflow:"hidden"}},e),{children:"联合创作"}))},d=n(99878),p=n(43384),h=n(65733),f=n(87363),m=n.n(f),v=n(66980),g=Object.assign,b=function(e){return m().createElement(v.Z,g({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),m().createElement("path",{fill:"url(#id-1711650925-a)",fillRule:"evenodd",d:"M2.8 2a.8.8 0 0 0-.8.8v11.4a.8.8 0 0 0 .8.8h11.4a.8.8 0 0 0 .8-.8V2.8a.8.8 0 0 0-.8-.8H2.8Zm1.051 1.25a.6.6 0 0 0-.6.6v9.3a.6.6 0 0 0 .6.6h9.3a.6.6 0 0 0 .6-.6v-9.3a.6.6 0 0 0-.6-.6h-9.3Z",clipRule:"evenodd"}),m().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M2.8 2a.8.8 0 0 0-.8.8v11.4a.8.8 0 0 0 .8.8h11.4a.8.8 0 0 0 .8-.8V2.8a.8.8 0 0 0-.8-.8H2.8Zm1.051 1.25a.6.6 0 0 0-.6.6v9.3a.6.6 0 0 0 .6.6h9.3a.6.6 0 0 0 .6-.6v-9.3a.6.6 0 0 0-.6-.6h-9.3Z",clipRule:"evenodd"}),m().createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"url(#id-1711650925-b)",rx:".8"}),m().createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"#06F",rx:".8"}),m().createElement("path",{fill:"#fff",stroke:"#fff",d:"M8.962 11.153h.725V13.5H8.3v-2.754c0-.66.293-1.181.7-1.567.064-.06.129-.116.196-.168a2.654 2.654 0 0 0-.205.227c-.295.369-.53.864-.53 1.415v.5h.5ZM12.974 11.153h.726V13.5h-1.387v-2.754c0-.66.293-1.181.7-1.567.063-.06.129-.116.195-.168a2.657 2.657 0 0 0-.204.227c-.295.369-.53.864-.53 1.415v.5h.5Z"}),m().createElement("defs",null,m().createElement("linearGradient",{id:"id-1711650925-a",x1:"15",x2:"2",y1:"2",y2:"15",gradientUnits:"userSpaceOnUse"},m().createElement("stop",{stopColor:"#06F"}),m().createElement("stop",{offset:"1",stopColor:"#00D1FF"})),m().createElement("linearGradient",{id:"id-1711650925-b",x1:"17.5",x2:"4.5",y1:"4.5",y2:"17.5",gradientUnits:"userSpaceOnUse"},m().createElement("stop",{stopColor:"#06F"}),m().createElement("stop",{offset:"1",stopColor:"#00D1FF"}))))},C=n(66263);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.title,o=e.question,r=(void 0===o?{}:o).title,i=e.url,c=e.id,s=(0,h.Z)(function(){window.open(i)});return(0,a.tZ)(p.eV,{content:{type:C.LA[t],token:String(c)},children:(0,a.BX)(p.$U,{shouldTrackShow:!0,zaText:"zvideo_origin_content",zaType:"Card",zaAction:"OpenUrl",extra:{link:{url:i}},as:l.Flex,bg:"GBK10A",padding:"12px 10px 12px 18px",justifyContent:"space-between",onClick:s,css:{cursor:"pointer"},children:[(0,a.BX)(l.Flex,{children:[(0,a.tZ)(b,{css:{marginRight:"6.5px"}}),(0,a.tZ)(l.Text,{color:"GBK06A",fontSize:"14px",lineHeight:"19.6px",children:"answer"===t?"原回答：".concat(r):"原文章：".concat(n)})]}),(0,a.tZ)(d.N,{size:20,css:function(e){return{flexShrink:"0",fill:e.colors.GBK06A}}})]})})}var y=n(94009),_=n(55698),w=n(82452),k=n(80565),x=n(24187),S=n(36695),E=n(47842),I=n(30722),T=n(80714),N=n(28814),A=n(41492),B=n(46829),R=function(e){var t=e.author,n=t.author,o=t.identity,r=t.id,i=(0,S.useSelector)(function(e){return(0,N.np)(e,{urlToken:n})}),c=i||{},s=c.avatarUrl,u=c.isFollowing,d=c.name,h=(0,f.useRef)(),m=(0,f.useCallback)(function(){return window.open("https://www.zhihu.com/people/".concat(n))},[n]),v=(0,f.useCallback)(function(){return h.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",text:u?"取消关注":"关注"},action:u?"UnFollow":"Follow"}),!0},[u]);return i?(0,a.BX)(p.eV,{content:{type:"User",token:n,id:r},children:[(0,a.tZ)(p.pS,{ref:h}),(0,a.BX)(l.Flex,{mt:"16px",css:{"& + &":{marginTop:"24px"}},alignItems:"center",children:[(0,a.tZ)(_.qE,{url:s,size:38,css:{cursor:"pointer"},onClick:m}),(0,a.BX)(l.Box,{ml:"14px",flex:"1",children:[(0,a.tZ)(l.Box,{color:"GBK03A",fontSize:"15px",lineHeight:"17px",fontWeight:"bold",onClick:m,css:[(0,k.S)(1),{cursor:"pointer"}],children:d}),(0,a.tZ)(l.Box,{color:"GBK04A",fontSize:"14px",lineHeight:"16px",mt:"3px",children:o})]}),(0,a.tZ)(B.Z,{useCustomZa:!0,preset:"primary",type:"people",id:n,isFollowing:u,onClick:v,css:{padding:"0 14px",minWidth:"0px"}})]})]}):null},P=function(e){var t,n,o,r,i,c=e.item,s=e.index;if("ANSWER"===c.type)o="Answer",r=(i=c.answer).question.title;else{if("ARTICLE"!==c.type)return null;o="Post",r=(i=c.article).title}var u=i.id,d=i.thumbnailInfo,h=i.url,f=i.voteupCount,m=i.commentCount,v=null==d?void 0:null===(t=d.thumbnails)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.url,g="".concat((0,I.Zh)(f),"赞同 \xb7 ").concat((0,I.Zh)(m),"评论");return(0,a.tZ)(p.eV,{content:{type:o,id:String(u)},children:(0,a.BX)(p.$U,{as:"a",view:{elementLocation:{card:{index:s}}},zaType:"Card",zaAction:"OpenUrl",zaText:"视频引用的原文",extra:{link:{url:h}},href:h,target:"_blank",css:function(e){return{marginTop:"16px",display:"flex",alignItems:"center",height:"84px",borderRadius:"8px",padding:"0 12px",backgroundColor:e.colors.GBK10A}},children:[v&&(0,a.tZ)(l.Image,{src:v,width:"60px",height:"60px",mr:"12px",css:{borderRadius:"6px"}}),(0,a.BX)(l.Box,{flex:"1",children:[(0,a.tZ)(l.Box,{fontWeight:"bold",fontSize:"15px",css:(0,k.S)(1),children:r}),(0,a.tZ)(l.Box,{color:"GBK06A",fontSize:"13px",children:g})]})]})})},z=function(e){var t,n,o=e.id,r=e.subAuthor,i=e.before,c=e.after,s=e.content,u=s||{},h=u.type,m=u.id,v=C.LA[h],g=(0,S.useDispatch)(),Z=(0,S.useSelector)(function(e){return e.zvideos.creationReferences[o]}),I=(0,y._)((0,f.useState)(!1),2),N=I[0],B=I[1],z=(0,f.useCallback)(function(){T.Z.isMobileEntry?(0,w.rH)("zhihu://zvideo/".concat(o)):(B(!0),g((0,A.jl)(o)))},[g,o]);return r?(0,a.BX)(a.HY,{children:[(0,a.tZ)(p.eV,{block:"CreationReferencesBar",content:s?{type:v,token:String(m)}:{},children:(0,a.BX)(p.Wi,{zaText:!0,shouldTrackClick:!0,zaType:"Card",as:l.Flex,onClick:z,justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"10px",py:"12px",color:"GBK06A",bg:"GBK10A",fontSize:"14px",lineHeight:"20px",css:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[(0,a.BX)(l.Flex,{children:[(0,a.tZ)(b,{css:{marginRight:"6.5px"}}),(0,a.tZ)(l.Box,{flexShrink:"0",children:i}),(0,a.BX)(l.Flex,{alignItems:"center",mx:"6px",children:[(0,a.tZ)(_.qE,{url:r.avatarUrl,round:!0,size:18,css:function(e){return{border:"1px solid ".concat(e.colors.GBK99A)}}}),(0,a.tZ)(l.Box,{flex:"1",ml:"6px",css:(0,k.S)(1),children:r.name})]}),(0,a.tZ)(l.Box,{flexShrink:"0",children:c})]}),(0,a.tZ)(d.N,{size:20,css:{flexShrink:"0"}})]})}),!T.Z.isMobileEntry&&(0,a.tZ)(E.Z,{onClose:function(){return B(!1)},title:"引用详情",children:N&&(Z?(0,a.BX)(p.eV,{block:"CreationReferencesModal",children:[(0,a.tZ)(l.Box,{fontSize:"15px",fontWeight:"bold",children:"作者"}),null===(t=Z.authors)||void 0===t?void 0:t.map(function(e){return(0,a.tZ)(R,{author:e},e.author)}),(0,a.tZ)(l.Box,{my:"24px",css:function(e){return{borderTop:"1px solid ".concat(e.colors.GBK10A)}}}),(0,a.tZ)(l.Box,{fontSize:"15px",fontWeight:"bold",children:"视频引用的原文"}),null===(n=Z.originalContent)||void 0===n?void 0:n.map(function(e,t){return(0,a.tZ)(P,{item:e,index:t},t)})]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(x.O,{variant:"P01"}),(0,a.tZ)(x.O,{variant:"T02"})]}))})]}):null},L=function(e){var t=e.id,n=e.creationRelationship;if(!n)return null;if((0,o.HE)(n)){var i,l=(0,o.Ey)(n);return(null!==(i=null==l?void 0:l.author)&&void 0!==i?i:null)&&(0,a.tZ)(Z,(0,r._)({},l))}if(!(0,o.Gz)(n))return null;var c,s=(0,o.y5)(n),u=null!==(c=null==s?void 0:s.author)&&void 0!==c?c:null,d=(null==s?void 0:s.type)==="answer"?"回答":"文章";return u&&(0,a.tZ)(z,{id:t,subAuthor:u,before:"本视频引用",after:"的".concat(d,"进行创作"),content:s})},M=n(29229),D=n(76435),U=function(e){var t=e.zvideo,n=t.id,o=t.imageUrl,r=t.author,i=t.video,a=t.playCount,l=t.voteupCount,c=e.stats,s=c.memberCount,u=c.count;return{zvideoId:n,thumbnail:o,duration:i.duration,avatarUrl:r.avatarUrl,userName:r.name,memberCount:s,videoCount:u,playCount:a,voteupCount:l}};function O(e){var t=e.coCreationRefBy,o=e.referenceRefBy,r=e.type,i=!!t,l=!i&&!!o,c=(0,M.Z)(function(){return n.e(7970).then(n.bind(n,34178))});if(i){if(!c)return(0,a.tZ)("div",{css:{height:82}});var s=U(t),u=s.zvideoId,d=s.thumbnail,p=s.duration,h=s.avatarUrl,f=s.userName,m=s.memberCount,v=s.videoCount,g=s.playCount,b=s.voteupCount;return(0,a.tZ)(c.CoCreationCard,{zaContentId:u,thumbnail:d,duration:p,avatarUrl:h,userName:f,isMultiMember:m>1,videoCount:v,playCount:g,voteupCount:b,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(u),showSingleVideoUI:!0})}if(l){if(!c)return(0,a.tZ)("div",{css:{height:44}});var C=U(o),Z=C.zvideoId,y=C.avatarUrl,_=C.userName,w=C.memberCount;return(0,a.tZ)(c.ReferenceCard,{type:r,zaContentId:Z,avatarUrl:y,userName:_,isMultiMember:w>1,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(Z),showSingleVideoUI:!0})}return null}function F(e){return(0,a.tZ)(D.SV,{replacement:null,children:(0,a.tZ)(O,(0,r._)({},e))})}var q=n(98151),V=function(e){var t,n=e.mainAuthor,o=e.subAuthor,c="plain"===(t=e.preset)||"special-plain"===t;return(0,a.BX)(l.Flex,{mt:"10px",children:[(0,a.tZ)(q.Z,(0,i._)((0,r._)({},c&&{preset:"plain"}),{author:n,coCreationAuthorDescriptionText:"视频作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1,css:{marginRight:c?16:30}})),(0,a.tZ)(q.Z,(0,i._)((0,r._)({},c&&{preset:"plain"}),{author:o,coCreationAuthorDescriptionText:"图文作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1}))]})};function H(e,t,n,r){var i=(0,o.AQ)(t,n),l=(0,o.YJ)(n);return r&&(0,a.tZ)(V,{preset:e,mainAuthor:i,subAuthor:l},"coCreateAuthors")}var X=n(9338),G=n(30971),K=n(57730),j=(0,n(39288).FH)("coCreation",["CANCEL"]);function W(e){var t,n=e.contentType,o=e.contentId,r=(0,S.useDispatch)(),i=(t=(0,X._)(function(){return(0,G.__generator)(this,function(e){switch(e.label){case 0:return[4,K.Z.confirm("",{title:"你确定要取消联合创作吗？",text:{ok:"同意"}})];case 1:return e.sent(),[4,r({API:{types:j.CANCEL,endpoint:"creation-relationship/cancel",method:"PUT",body:{content_type:n,content_id:String(o)}}})];case 2:return e.sent(),window.location.reload(),[2]}})}),function(){return t.apply(this,arguments)});return(0,a.tZ)(p.$U,{zaType:"Button",zaText:!0,zaBlock:"CancelCoCreation",onClick:i,children:"取消联合创作"})}},63068:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(85626),d=n(85879),p=n(58216),h=n(14168),f=n.n(h),m=n(87363),v=n(36695),g=n(93206),b=n(74128),C=n(99447),Z=n(47842),y=n(30722),_=n(44169),w=n(38889),k=n(7181),x=n(80714),S=n(66263),E=n(45842),I=n(6438),T=n(1606),N=n(51448),A=n(30361),B=n(46829),R=n(24794),P=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{showQuit:!1}),(0,a._)((0,o._)(e),"onClose",function(){e.setState({showQuit:!1})}),(0,a._)((0,o._)(e),"handleQuitButton",function(){e.setState({showQuit:!0})}),(0,a._)((0,o._)(e),"handleQuitColumn",function(t,n){e.props.fetchQuitColumn(t,n),e.setState({showQuit:!1})}),e}return(0,i._)(n,[{key:"renderStatus",value:function(){var e=this.props,t=e.column,n=t.itemsCount,o=t.voteupCount,r=e.isProfile,i=e.urlToken,a=(e.currentUser||{}).urlToken;return(0,d.BX)(A.qb,{children:["".concat((0,y.uf)(n)," 篇内容"),"".concat((0,y.uf)(o)," 赞同"),r&&i===a&&this.renderProfileContent()]})}},{key:"renderMeta",value:function(){var e=this.props,t=e.preset,n=e.column.intro;return(0,d.tZ)("div",{className:"ColumnItem-meta",children:x.Z.isMobileEntry?(0,d.tZ)("span",{className:"ColumnItem-meta",children:this.renderStatus()}):(0,d.BX)(d.HY,{children:[n,t===A.PG.default&&this.renderStatus()]})})}},{key:"renderProfileContent",value:function(){var e=this,t=this.props,n=t.column,o=n.id,r=n.author,i=t.contributions,a=this.state.showQuit,l=r.urlToken===i.urlToken;return(0,d.BX)(d.HY,{children:[(0,d.tZ)(k.Z,{toggler:(0,d.tZ)(w.ZP,{preset:"plain",icon:p.AZ}),placement:"top",className:"ColumnItem-more",arrowed:!0,children:l?(0,d.tZ)(w.ZP,{component:"a",preset:"plain",href:"".concat(S.i7,"/column/").concat(o),className:"ColumnItem-botton",children:"管理专栏"}):(0,d.tZ)(w.ZP,{preset:"plain",className:"ColumnItem-botton",onClick:this.handleQuitButton,children:"退出专栏"})}),(0,d.tZ)(b.Z,{onClose:this.onClose,title:"确定退出该专栏吗？",children:a&&(0,d.tZ)("div",{className:"ColumnAuthorsList-modal",children:(0,d.BX)(Z.w,{direction:"horizontal",children:[(0,d.tZ)(w.ZP,{onClick:function(){return e.onClose},children:"取消"}),(0,d.tZ)(w.ZP,{className:"ColumnPosts-confirmButton",onClick:function(){return e.handleQuitColumn(i.urlToken,o)},color:"blue",preset:"primary",children:"确定"})]})})})]})}},{key:"renderInteractiveContent",value:function(){var e=this,t=this.props,n=t.column,o=n.id,r=n.type,i=n.articlesCount,a=n.followers,l=n.lastArticle,u=n.isFollowing,p=n.author,h=n.title,f=t.zaInfos,m=f.follow,v=f.options,g=t.renderOptions,b={id:o,type:r},C=(l||{}).updated;return(0,d.BX)(d.HY,{children:[!x.Z.isMobileEntry&&(0,d.BX)(A.n1,{className:"ContentItem-counts",children:[(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"文章："}),(0,y.uf)(i)]}),(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"最后更新于："}),(0,_.rL)(C)||"暂未更新"]}),(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"关注者："}),a]})]}),(0,d.BX)(A.eX,{children:[(0,d.tZ)(B.Z,(0,s._)((0,c._)({},b),{isFollowing:u,zaId:m})),(0,d.tZ)(R.Z,(0,s._)((0,c._)({},b),{title:h,authorName:p&&p.name,href:"".concat(S.i7,"/column/").concat(o)})),g&&g(function(){return e.contentItem},v)]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preset,o=t.column,r=t.lastreadTouchable,i=(0,d.tZ)(N.Z,{column:o,target:"_blank"});return(0,d.tZ)(A.ZP,{className:"ColumnItem",data:o,link:"".concat(S.i7,"/column/").concat(o.id),onRef:function(t){return e.contentItem=t},title:i,meta:this.renderMeta(),lastreadTouchable:r,children:n===A.PG.interactive&&this.renderInteractiveContent()})}}]),n}(m.Component);(0,a._)(P,"propTypes",{preset:f().oneOf(Object.values(A.PG)),isProfile:f().bool,zaInfos:f().shape({follow:f().number,options:f().number}),renderOptions:f().func}),(0,a._)(P,"defaultProps",{preset:A.PG.default,isProfile:!1,zaInfos:{}}),t.Z=(0,g.compose)((0,T.Ib)(function(e){return{content:{type:"Column",token:String(e.column.id)}}}),(0,C.a)(function(e){var t=e.column,n=e.trackCardShow;return{module:"ColumnItem",card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:(t.author||{}).id}},trackCardShow:void 0===n||n}}),E.Z,(0,v.connect)(null,{fetchQuitColumn:I.eB}))(P)},18621:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(71728),d=n(85626),p=n(85879),h=n(77236),f=n(33773),m=n(87363),v=n(36695),g=n(69383),b=n(44169),C=n(91770),Z=n(66263),y=n(10886),_=n(31142),w=function(e){(0,l._)(n,e);var t=(0,d._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"load",function(){var t=e.props,n=t.dispatch,o=t.id;n((0,y.ly)(o))}),(0,a._)((0,o._)(e),"track",function(){var t,n=e.props.column;e.hoverCardElement&&n&&(g.Z.setModule(e.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:n.id,item_num:n.articlesCount,follower_num:n.followers,publish_timestamp:1e3*n.updated,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id}}}),g.Z.trackCardShow(e.hoverCardElement))}),(0,a._)((0,o._)(e),"handleOpen",function(){e.load(),e.track()}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.column,r=t.id,i=t.isLoading,a=t.onRef,l=(0,u._)(t,["toggler","column","id","isLoading","onRef"]),d=o||{},m=d.title,v=d.intro,g=d.itemsCount,y=d.voteupCount,w=d.lastArticle,k=d.articlesCount,x=d.followers,S=w||{},E=S.title,I=S.created,T="".concat(Z.i7,"/column/").concat(r);return(0,p.BX)(h.Z,(0,s._)((0,c._)({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{ref:function(t){a&&"function"==typeof a&&a(t),e.hoverCardElement=t},children:[(0,p.tZ)(h.O,{title:(0,p.tZ)("a",{target:"_black",href:T,children:m})}),v,w&&(0,p.BX)("div",{children:[(0,p.tZ)(f.x8,{text:!0,center:!0})," 最后更新",(0,p.tZ)("span",{className:"HoverCard-separate",children:" | "}),E,(0,p.BX)("span",{children:["（",(0,b.rL)(I),"）"]})]}),(0,p.tZ)("div",{children:(0,p.BX)(C.Z,{children:[(0,p.tZ)(C.Z.Item,{tag:_.Z,preset:"plain",a:!0,to:T,name:g>=0?"内容":"文章",value:null!=g?g:k}),(0,p.tZ)(C.Z.Item,{tag:_.Z,preset:"plain",a:!0,to:T,name:y>=0?"赞同":"关注",value:null!=y?y:x})]})})]}))}}]),n}(m.Component);t.Z=(0,v.connect)(function(e,t){var n=t.id,o=e.entities.columns,r=e.loading.local;return{column:o[n],isLoading:!!r["column/".concat(n)]}})(w)},51448:function(e,t,n){"use strict";var o=n(22107),r=n(94707),i=n(87320),a=n(86325),l=n(55164),c=n(57477),s=n(71728),u=n(85626),d=n(85879),p=n(55698),h=n(72111),f=n(25628),m=n.n(f),v=n(92769),g=n.n(v),b=n(14168),C=n.n(b),Z=n(87363),y=n(36695),_=n(93206),w=n(7407),k=n(66263),x=n(18621),S=function(e){(0,a._)(n,e);var t=(0,u._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,r._)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,o=t.column,r=o.title,i=o.imageUrl,a=o.id,u=t.avatar,f=t.avatarProps,v=t.noHoverCard,b=t.style,C=t.className,Z=t.children,y=(0,s._)(t,["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"]);return(e=u?(0,d.tZ)(p.qE,(0,l._)({url:i,alt:r},f)):Z||r,(void 0===v?n:v)||(e=(0,d.tZ)(x.Z,{toggler:e,id:a})),n&&k.dd)?e:(0,d.tZ)(h._o,{zaAction:"OpenUrl",zaEventType:"Click",zaType:"Text",children:(0,d.tZ)("a",(0,c._)((0,l._)({style:b,className:m()("ColumnLink",C),href:"".concat(k.i7,"/column/").concat(a)},g()(y,["dispatch"])),{children:e}))})}}]),n}(Z.Component);(0,i._)(S,"propTypes",{column:C().object.isRequired,avatar:C().bool,avatarProps:C().object,noHoverCard:C().bool,style:C().object,className:C().string,children:C().node}),(0,i._)(S,"defaultProps",{avatar:!1}),t.Z=(0,_.compose)((0,y.connect)(function(e){return{isMobile:(0,w.Hu)(e,{includeTablet:!0})}}))(S)},19495:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(15030),s=n(55164),u=n(85626),d=n(85879),p=n(73108),h=n(14168),f=n.n(h),m=n(87363),v=n(69383),g=n(43384),b=n(30722),C=n(38889),Z=n(83215),y=n(80714),_=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"buttonRef",(0,m.createRef)()),(0,a._)((0,o._)(e),"handleClick",function(t){var n=e.props,o=n.zaInfos,r=o.toggleComment,i=o.getCommentAction,a=n.positionStatus,l=n.onClick,u=n.commentsShown;if(v.Z.trackEvent(e.buttonRef.current,(0,s._)({action:i?i(!u):"Comment",element:"Button",is_intent:!0},r&&{id:r})),l){var d="fixed"===a||y.Z.isMobileEntry?"fixed":"bottom",p={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(0,c._)(t,KeyboardEvent),commentPattern:d};(0,c._)(t,KeyboardEvent)&&"bottom"===d&&e.buttonRef.current.focus(),l(t,p)}}),e}return(0,i._)(n,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,o=t.count,r=t.commentsShown,i=t.commentClosed;if(r)e="收起评论";else{var a=o&&!i;e=y.Z.isMobileEntry?a?"评论 ".concat((0,b.Zh)(o).trim()):"评论":a?"".concat((0,b.uf)(o)," 条评论"):"添加评论"}return(0,d.BX)(m.Fragment,{children:[(0,d.tZ)(Z.bY,{input:"c",action:this.handleClick}),(0,d.tZ)(g.$U,{as:C.ZP,zaAction:r?"Collapse":"Expand",zaText:r?"收起评论":"展开评论",zaBlock:r?"收起评论":"展开评论",zaModuleId:"comment_area_expand_collapse_button",zaType:"Button",onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:p.b,label:e})]})}}]),n}(m.Component);(0,a._)(_,"propTypes",{commentsShown:f().bool,count:f().number,zaInfos:f().shape({id:f().number,getCommentAction:f().func}),onInstance:f().func}),(0,a._)(_,"defaultProps",{zaInfos:{},onInstance:function(){return null}}),t.Z=_},11797:function(e,t,n){"use strict";var o=n(55164),r=n(85879),i=n(29229);t.Z=function(e){var t=(0,i.Z)(function(){return n.e(6815).then(n.bind(n,29246)).then(function(e){return e.default})});return t?(0,r.tZ)(t,(0,o._)({},e)):null}},99830:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(14168),d=n.n(u),p=n(87363),h=n(36695),f=n(43384),m=new Set(["clickCommentInput","toggleLike"]),v=n(258),g=n(7407),b=n(55164),C=n(29229),Z=function(e,t){var n=(0,p.useRef)(!!e);return n.current!==t&&!!e===t&&(n.current=!!e),n.current},y=function(e){var t=Z(e.shown,!0),o=(0,C.Z)(function(){return Promise.all([n.e(7050),n.e(6248),n.e(6362),n.e(213)]).then(n.bind(n,6811))},t);return o?(0,s.tZ)(o,(0,b._)({},e)):null},_=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"zaRef",(0,p.createRef)()),(0,a._)((0,o._)(e),"handlePackup",function(){var t=e.props,n=t.onClose,o=t.commentPattern;n&&n(),"bottom"===o&&window.scrollTo(0,e.originPageYOffset)}),(0,a._)((0,o._)(e),"openInApp",function(t){var n=e.props.skipOia;null!=n&&n(t)||(0,v.Z)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"评论弹层",noEnteringSignin:!!e.props.currentUser})}),e}return(0,i._)(n,[{key:"componentDidUpdate",value:function(e){"bottom"===this.props.commentPattern&&this.props.shown&&!e.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.shown,o=e.showPackupButton,r=e.parent,i=e.isSelf,a=e.commentPattern,l=e.byComment,c=e.targetLink,u=e.commentPlugin,d=e.onComment,p=e.onMount,h=r.id,m=r.type,v=r.author;return(0,s.BX)(s.HY,{children:[(0,s.tZ)(f.pS,{ref:this.zaRef}),(0,s.tZ)(y,{shown:n,className:t,resourceId:String(h),resourceType:m,isSelf:i,author:v,commentPattern:a,hideFoldButton:!o,hideBottomEditorShadow:!o,byComment:l,targetLink:c,commentPlugin:u,onMount:p,onClose:this.handlePackup,onComment:d,openInApp:this.openInApp})]})}}]),n}(p.Component);(0,a._)(_,"propTypes",{className:d().string,containerClassName:d().string,byComment:d().oneOfType([d().number,d().string]),parent:d().object,shown:d().bool,showPackupButton:d().bool,commentPattern:d().string,commentInputPosition:d().oneOf(["top","bottom"]),onClose:d().func,needLoadCommentPermission:d().bool,onOrderChange:d().func,onItemLike:d().func,onPaginationClick:d().func,autoFocus:d().bool,onMount:d().func,zaInfo:d().object}),(0,a._)(_,"defaultProps",{commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"});var w=(0,h.connect)(function(e){var t=(0,g.cM)(e);return{skipOia:function(e){return t.oppoSearch&&!m.has(e)}}})(_)},66238:function(e,t,n){"use strict";var o=n(85879),r=n(82452),i=n(82435),a=n(65733),l=n(36695),c=n(19076),s=n(38889),u=n(66263),d=n(57138),p=n(7407);t.Z=(0,c.withRouter)(function(e){var t=e.parent,n=t.type,c=t.id,h=t.question,f=e.location.pathname,m=(0,p.dD)(),v=(0,l.useSelector)(function(e){var t=null==f?void 0:f.includes("/answer/"),n=!t&&(null==f?void 0:f.includes("/question/"));return(0,p.hV)(e,{type:t?"answer":n?"question":"",id:c||(null==h?void 0:h.id)})}),g=(0,a.Z)(function(e,t){if(e&&e.stopPropagation(),!u.dd||!m){if("zvideo"===n){(0,r.rH)((0,d.MN)({type:n,id:c},{launch_button:t}));return}if(v){location.href="zhihu://".concat(n,"/").concat(c,"?utm_app_name=zhihu_check");return}(0,r.rH)((0,d.MN)({type:n,id:c},{launch_button:t})),e.preventDefault()}});return(0,o.tZ)("div",{className:"CommentsForOia",children:(0,o.tZ)(i.ZP,{css:{margin:0},showInteractions:!1,resourceType:n,resourceId:String(c),showCommentInput:!1,useHeartIcon:!0,openInApp:function(e){return g(e,u.dN.comment_list)},customHeader:function(){return null},customFooter:function(e){return e<=2||u.dd?null:(0,o.tZ)(s.ZP,{color:"blue",preset:"primary",onClick:function(e){return g(e,u.dN.comment_more)},children:"打开 App 查看更多评论"})}})})})},68508:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var o=n(85879),r=n(25628),i=n.n(r),a=n(87363),l=n.n(a),c=n(30851),s=Object.assign;function u(e){var t;return l().createElement(c.Z,s(s({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ArrowTurnRight24"+(t?" "+t:"")}),l().createElement("path",{fillRule:"evenodd",d:"M14.528 4.47a.75.75 0 1 0-1.06 1.06l4.723 4.72H10c-2.125 0-3.699.54-4.643 2.114-.87 1.45-1.107 3.651-1.107 6.636a.75.75 0 0 0 1.5 0c0-3.015.263-4.814.893-5.864C7.2 12.21 8.125 11.75 10 11.75h8.187l-4.717 4.718a.75.75 0 1 0 1.06 1.06l6-6a.75.75 0 0 0-.008-1.068l-5.994-5.99Z",clipRule:"evenodd"}))}function d(e){return l().createElement(u,s(s({},e),{className:function(){return"Zi Zi--Jump"+(e.className?" "+e.className:"")}}))}var p=function(e){var t=e.className,n=e.commercial;if(!n||!n.tail||!n.tail.url||!n.tail.message)return null;var r=n.tail,a=r.url,l=r.message;return(0,o.BX)("a",{className:i()("CommercialQuestionTail",t),href:a,children:[l,(0,o.tZ)(d,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})}},99365:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var o=n(94009),r=n(85879),i=n(25628),a=n.n(i),l=n(87363),c=n(69383),s=n(47842),u=n(38889),d=n(31142),p=n(30170),h=n.p+"assets/liukanshan_coin.32323a56.svg",f=n(93029),m=n(4757),v={answerAdmireCouldOpen:{image:h,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:h,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:f,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:f,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}},g=function(e){var t=e.notification,n=void 0===t?{}:t,i=e.className,h=e.onRead,f=e.onUseAdmire,g=e.onUseRecommend,b=(0,o._)((0,m.Ue)(),2),C=b[0],Z=b[1],y=Object.keys(n).find(function(e){return n[e]}),_=v[y]||{},w=_.title,k=_.image,x=_.content,S=_.buttonText,E=_.buttonLink,I=_.detailViewName,T=_.cardShowId,N=_.buttonClickId,A=_.readAlwaysId,B=_.readNextId;return((0,l.useEffect)(function(){y&&Z()},[y]),(0,l.useEffect)(function(){y&&c.Z.trackCardShow(null,{id:T,name:I})},[y,T,I]),C)?(0,r.tZ)(s.Z,{className:a()("CreatorRightsNotification",i),onClose:function(){h("next"),c.Z.trackEvent(null,{id:B,name:I})},children:y&&(0,r.BX)(l.Fragment,{children:[(0,r.tZ)("img",{className:"CreatorRightsNotification-background",src:p,alt:"blue background"}),(0,r.tZ)("img",{className:"CreatorRightsNotification-liukanshan",src:k,alt:"liukanshan image"}),(0,r.tZ)("div",{className:"CreatorRightsNotification-title",children:w}),(0,r.tZ)("div",{className:"CreatorRightsNotification-content",children:x}),(0,r.BX)(s.w,{className:"CreatorRightsNotification-buttonGroup",children:[E?(0,r.tZ)(d.Z,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:E,target:"_blank",onClick:function(){h("current"),c.Z.trackEvent(null,{id:N,name:I})},children:S}):(0,r.tZ)(u.ZP,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){h("current"),c.Z.trackEvent(null,{id:N,name:I}),"answerAdmireCouldUse"===y&&f(),"recommendationCouldUse"===y&&g()},children:S}),(0,r.tZ)(u.ZP,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){h("always"),c.Z.trackEvent(null,{id:A,name:I})},children:"不再提醒"})]})]})}):null}},75789:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(85626),d=n(85879),p=n(14168),h=n.n(p),f=n(87363),m=n(99447),v=n(88423),g=n(80714),b=n(45071),C=n(95876),Z=n(19495),y=n(99830),_=n(30361),w=n(28355),k=n(24794),x=n(85661),S=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),(0,a._)((0,o._)(e),"handleCommentsShown",function(t,n){e.setState(n)}),(0,a._)((0,o._)(e),"handleCommentsHide",function(){e.setState({commentsShown:!1})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.preset,o=e.ebook,r=e.lastreadTouchable,i=o.id,a=o.type,l=o.url,u=o.title,p=o.cover,h=o.authors,f=o.price,m=o.promotionPrice,v=o.description,S=o.relationship,E=o.voteupCount,I=o.commentCount,T=o.score,N=this.state,A=N.commentsShown,B=N.commentsAutoFocus,R=N.commentPattern;if(t!==_.PG.interactive)return(0,d.tZ)(_.ZP,{title:(0,d.tZ)("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:u}),data:o,link:l});var P={id:i,type:a},z=h.slice(0,2);return(0,d.BX)(_.ZP,{className:"EBookItem",data:o,link:l,title:!g.Z.isMobileEntry&&(0,d.tZ)("a",{className:"EBookItem-title",href:l,target:"_blank",rel:"noopener noreferrer",children:u}),image:(0,d.tZ)(n.Cover,{url:l,title:u,cover:p}),meta:g.Z.isMobileEntry?(0,d.BX)("div",{className:"EBookItem-meta",children:[(0,d.tZ)("a",{className:"EBookItem-title",href:l,target:"_blank",rel:"noopener noreferrer",children:u}),(0,d.BX)("span",{children:[z.length&&(0,d.tZ)(x.Z,{user:z[0]}),z.length>1&&"等","的电子书"]}),(0,d.tZ)(b.Z,{score:T})]}):(0,d.BX)("div",{children:[(0,d.tZ)("div",{className:"EBookItem-description",children:v}),(0,d.BX)(_.n1,{children:[(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"作者："}),z.map(function(e,t){return(0,d.BX)("span",{children:[(0,d.tZ)(x.Z,{user:e}),t<z.length-1&&"、"]},t)})]}),(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"知乎价："}),"number"==typeof m?(0,d.BX)("span",{className:"EBookItem-price",children:[(0,C.u)(m),(0,d.tZ)("del",{children:(0,C.u)(f)})]}):(0,C.u)(f)]})]})]}),lastreadTouchable:r,children:[(0,d.BX)(_.eX,{className:"EBookItem-actions",children:[(0,d.tZ)(w.Z,(0,s._)((0,c._)({},P),{liked:!!(void 0===S?{}:S).voting,count:E})),(0,d.tZ)(Z.Z,{onClick:this.handleCommentsShown,commentsShown:A,count:I}),(0,d.tZ)(k.Z,(0,s._)((0,c._)({},P),{title:u,authorName:h[0]&&h[0].name,href:l}))]}),(0,d.tZ)(y.Z,{parent:o,commentPattern:R,shown:A,autoFocus:B,onClose:this.handleCommentsHide})]})}}]),n}(f.Component);(0,a._)(S,"propTypes",{preset:h().oneOf(Object.values(_.PG))}),(0,a._)(S,"defaultProps",{preset:_.PG.default}),(0,a._)(S,"Cover",function(e){var t=e.url,n=e.cover,o=e.title;return(0,d.tZ)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,d.tZ)("img",{className:"EBookItem-image",style:{width:g.Z.isMobileEntry?"60px":"78px",height:g.Z.isMobileEntry?"80px":"104px"},src:(0,v.imgUrl)(n,"100w"),srcSet:"".concat((0,v.imgUrl)(n,"xld")," 2x"),alt:o})})}),t.Z=(0,m.a)(function(e){var t=e.trackCardShow;return{module:"EBookItem",trackCardShow:void 0===t||t}})(S)},48933:function(e,t,n){"use strict";n.d(t,{ct:function(){return T},hx:function(){return E},l0:function(){return N},vB:function(){return A}});var o=n(22107),r=n(94707),i=n(86325),a=n(15030),l=n(55164),c=n(49899),s=n(85626),u=n(85879),d=n(62082),p=n(54231),h=n(84871),f=n.n(h),m=n(12592),v=n.n(m),g=n(88329),b=n.n(g),C=n(87363),Z=n(67516),y=n.n(Z),_=n(80714),w=n(35102),k={success:"success",fail:"fail",request:"request"},x="EDITABLE_STATSC",S=function(e){var t=e.name;return"ResponseError"===t?"".concat(t,"_").concat(e.status||0):t||"Unknown"};function E(){var e=y().get(x);e&&(e.forEach(function(e){p.ZP.increment(e)}),y().delete(x))}var I={get pageName(){return"UnknownPage"},reportRequest:b(),reportSuccess:b(),reportFail:b(),recordError:function(e){return e},wrapAutoRecord:function(e){return e}},T=(0,C.createContext)(I),N=function(e){return f()(function(t){var n=(0,C.useContext)(T);return(0,u.tZ)(e,(0,l._)({reporter:n},t))},e)},A=N(function(e){(0,i._)(n,e);var t=(0,s._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,r._)(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props,o=n.reporter,r=n.name;throw o&&o.reportFail(r,e,{extra:{errorInfo:t}},!0),e}},{key:"render",value:function(){return this.props.children}}]),n}(C.Component));t.ZP=function(e,t){var n=function(t,n){p.ZP.increment("".concat(e,".").concat(t,".").concat(n,".count"))},o=function(t,n){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a._)(n,Error)&&(null===(o=window.Raven)||void 0===o||o.captureException(n,(0,l._)({tags:{scope:"".concat(e,":").concat(t)}},r)))},r=function(e){return n(e,k.request)},i=function(e){return n(e,k.success)},s=function(n,r,i,l){if(!(!(0,a._)(r,Error)||(0,w.hu)(r.message))){var c=S(r);if(p.ZP.increment([e,n,k.fail,c,"count"].join(".")),o(n,r,i),!l){var s,u={type:"EditorActionError-"+n,appName:"heifetz",spanName:e,currentUser:(null==t?void 0:t())||"Unknown",release:_.Z.release,error:{name:c,message:r.message,payload:r.payload||"Unknown",stack:r.stack}};(0,d.zB)(u),null===(s=window.webReporter)||void 0===s||s.report("heifetz_editor_error",u)}}},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.intent,a=void 0===o||o,l=n.success,u=void 0===l||l;return function(){for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];try{a&&r(e);var d=function(){return u?i(e):void 0},p=t.apply(void 0,(0,c._)(o));if(v()(p))return p.then(function(e){return d(),e},function(t){throw s(e,t),t});return d(),p}catch(t){throw s(e,t),t}}};return{get pageName(){return e},reportRequest:r,reportSuccess:i,reportFail:s,wrapAutoRecord:u,recordError:function(e,t){return u(e,t,{success:!1})},stash:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if(n.length){var r=y().get(x)||[];r.push("".concat(e,".").concat(n.join("."),".count")),y().set(x,r)}}}}},56520:function(e,t,n){"use strict";var o=n(85879),r=n(30037),i=n(74045),a=n(7237);t.Z=function(e){var t=e.eduSection,n=e.renderContent,l=e.renderActions,c=t.id;return(0,o.BX)(r.xM,{data:t,children:[null==n?void 0:n(),(0,o.tZ)(i.Ks,{contentId:c,contentType:"edu_section",children:null==l?void 0:l(a.Z)})]})}},63362:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var o=n(85879),r=n(16839),i=n(87363),a=n(43384),l=n(38889),c=n(83215),s=function(e){var t=e.className,n=e.onClick,s=e.label,u=e.onRef,d=e.disabled,p=e.showIcon;return(0,o.BX)(i.Fragment,{children:[(0,o.tZ)(c.bY,{input:"f",action:n}),(0,o.tZ)(a.$U,{as:l.ZP,zaText:"收藏",zaType:"Button",zaModuleId:"pop_up_panel_collect_button",zaBlock:"收藏",onRef:u,className:t,preset:"plain",onClick:n,icon:void 0===p||p?r.mH:null,label:s,disabled:d})]})};s.defaultProps={label:"收藏"};var u=s},46102:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(85626),d=n(85879),p=n(37335),h=n(14168),f=n.n(h),m=n(87363),v=n(87641),g=n(99447),b=n(30722),C=n(44169),Z=n(80714),y=n(19495),_=n(99830),w=n(30361),k=n(46829),x=n(24794),S=n(85661),E=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0}),(0,a._)((0,o._)(e),"handleCommentsShown",function(t,n){e.setState(n)}),(0,a._)((0,o._)(e),"handleCommentsHide",function(){e.setState({commentsShown:!1})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,o=t.favlist,r=t.favlist,i=r.id,a=r.type,l=r.title,u=r.updatedTime,h=r.answerCount,f=r.followerCount,m=r.isFollowing,g=r.isPublic,E=r.creator,I=void 0===E?{}:E,T=r.commentCount,N=t.status,A=t.action,B=t.lastreadTouchable,R=t.zaInfos,P=R.follow,z=R.options,L=t.renderOptions,M=this.state,D=M.commentsShown,U=M.commentsAutoFocus,O=M.commentPattern,F="/collection/".concat(i),q=(0,d.tZ)("a",{href:F,target:"_blank",rel:"noopener noreferrer",children:l});if(n===w.PG.plain)return(0,d.tZ)(w.ZP,{data:o,link:F,title:q});var V={id:i,type:a};return n===w.PG.default?(0,d.tZ)(w.ZP,{data:o,link:F,title:(0,d.BX)(v.Flex,{alignItems:"center",children:[q,!g&&(0,d.tZ)(v.Text,{color:"GBL05A",ml:".3em",children:(0,d.tZ)(p.P,{center:!0,size:18})})]}),meta:N||(0,d.BX)(w.qb,{children:["".concat((0,C.tC)(u)," 更新"),"".concat((0,b.uf)(h)," 条内容"),"".concat((0,b.uf)(f)," 人关注")]}),extra:A}):(0,d.BX)(w.ZP,{data:o,link:F,onRef:function(t){e.contentItem=t},title:q,lastreadTouchable:B,children:[Z.Z.isMobileEntry?(0,d.BX)("div",{className:"FavlistItem-cells",children:[(0,d.tZ)("span",{children:!!f&&"".concat((0,b.uf)(f)," 关注")}),(0,d.BX)("span",{children:[(0,C.tC)(u),"更新"]})]}):(0,d.BX)(w.n1,{children:[(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"关注数："}),(0,b.uf)(f)]}),(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"最后更新于："}),(0,C.tC)(u)]}),(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"作者："}),(0,d.tZ)(S.Z,{user:I})]})]},"favlist-item-cells"),(0,d.BX)(w.eX,{children:[(0,d.tZ)(k.Z,(0,s._)((0,c._)({},V),{isFollowing:m,zaId:P})),(0,d.tZ)(y.Z,{onClick:this.handleCommentsShown,commentsShown:D,count:T}),(0,d.tZ)(x.Z,(0,s._)((0,c._)({},V),{title:l,authorName:I&&I.name})),L&&L(function(){return e.contentItem},z)]},"favlist-item-actions"),(0,d.tZ)(_.Z,{parent:o,commentPattern:O,shown:D,autoFocus:U,onClose:this.handleCommentsHide})]})}}]),n}(m.Component);(0,a._)(E,"propTypes",{preset:f().oneOf(Object.values(w.PG)),zaInfos:f().shape({follow:f().number,options:f().number}),renderOptions:f().func}),(0,a._)(E,"defaultProps",{preset:w.PG.default,zaInfos:{}}),t.Z=(0,g.a)(function(e){var t=e.favlist,n=e.trackCardShow;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:void 0===n||n}})(E)},102:function(e,t,n){"use strict";n.d(t,{E:function(){return x}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(71728),d=n(49899),p=n(85626),h=n(85879),f=n(87363),m=n(36695),v=n(93206),g=n(31824),b=n(50373),C=n(85576),Z=n(35528),y=function(){return Promise.all([n.e(9165),n.e(3280)]).then(n.bind(n,29165)).then(function(e){return e.FavlistsModal})},_={ids:[],isFetching:!1,isDrained:!1},w=(0,g.P1)(function(e){return e.favlists[e.currentUser]||_},function(e){return e.entities.favlists},function(e,t){var n=e.ids,o=(0,u._)(e,["ids"]);return(0,s._)((0,c._)({},o),{items:n.map(function(e){return t[e]})})}),k=function(e){(0,l._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"onFavlistAdd",function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=e.props,i=r.type,a=r.id;return r.onFavlistAdd.apply(void 0,(0,d._)(n).concat([{type:i,id:a}]))}),(0,a._)((0,o._)(e),"onLoad",function(){var t=e.props,n=t.onLoad,o=t.type,r=t.id,i=t.onUpdateReaction;return n(o,r).then(function(e){i({contentType:o,contentId:r,relations:e.payload.data.reduce(function(e,t){return(0,s._)((0,c._)({},e),(0,a._)({},t.id,t.isFavorited))},{})})})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.authRequired,o=(0,u._)(e,["currentUser","authRequired"]);return(0,h.tZ)(b.Z,(0,s._)((0,c._)({getComponent:y},o),{authRequired:n,isUserActive:!!(null==t?void 0:t.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),n}(f.Component),x=(0,v.compose)(C.Z,(0,m.connect)(function(e,t){var n=t.id,o=t.type,r=e.favlists.relations,i=e.currentUser,a=w(e);return{isFetching:a.isFetching,isDrained:a.isDrained,items:a.items,relations:r["".concat(o,"_").concat(n)],zaEnabled:!0,urlToken:i}},function(e,t){return{onUpdateFav:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(Z.NK.apply(void 0,(0,d._)(n)))},onFavlistAdd:t.onFavlistAdd||function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(Z.Vf.apply(void 0,(0,d._)(n)))},onLoad:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(Z.n2.apply(void 0,(0,d._)(n)))},onUpdateReaction:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(Z.k1.apply(void 0,(0,d._)(n)))}}}))(k)},51397:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var o=n(87320),r=n(55164),i=n(57477),a=n(85879),l=n(25628),c=n.n(l),s=n(38003),u=n(3028),d=n(42951),p=n(64884),h=n(27834),f=n(30577),m=n(6788),v=n(37986),g=n(31458),b=n(17924),C=n(41884),Z={online_roundtable:d.T,relevant:p.o,editor_recommendation:h.N,roundtable:d.T,special:f.xl,weekly:m.S,daily:v.N,professional:g.W,zhizhi_plan_recommend:b.z,zhizhi_plan_edu_recommend:b.z,zhizhi_plan_baby_recommend:b.z,zhizhi_plan_acg_recommend:b.z,zhizhi_plan_outing_recommend:b.z,zhizhi_plan_rumour_deny:C.E,zhizhi_plan:b.z},y={alpha:1,group:"GYL02A"},_={alpha:.08,group:"GYL02A"},w={brand_special:s.T},k=(0,i._)((0,r._)({},Z),{COMMERCIAL_ICONS:w}),x=(0,u.Z)(null)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,r=void 0===n?{}:n,i=e.className;if(!t)return null;var l=t.type,s=t.text,u=t.foregroundColor,d=t.backgroundColor,p=r.customIcon,h=r.customIconClassName,f="GBL07A"===(u||y).group?"commercial":"positive",m="GBL07A"===(d||_).group?"commercial":"positive",v=p||k["recognition"===l?"professional":l];return v?(0,a.BX)("span",{className:c()("Label-icon","Label-iconColor--".concat(f),(0,o._)({},"Label-iconColor--".concat(m,"Background"),d),i),children:[(0,a.tZ)(v,{center:!0,className:c()("Label-iconImg",h)}),s]}):null})},63573:function(e,t,n){"use strict";var o=n(55164),r=n(85879),i=n(29229),a=n(87363),l=n(36695),c=n(10416),s=function(){return(0,r.tZ)("div",{className:"LabelContainer-loading"})};t.Z=function(e){var t=e.item,u=e.abnormalDetailProps,d=e.collapseReasonProps,p=e.showDeleteButton,h=e.inviter,f=t.type,m=t.id,v=t.isLabeled,g=(0,l.useDispatch)(),b=(0,l.useSelector)(function(e){return u||d?{}:p?{thankInviterInfo:h}:(0,c.yM)(e,t)}),C=(0,i.Z)(function(){return n.e(2033).then(n.bind(n,54662))});return((0,a.useEffect)(function(){v&&!b&&f&&m&&g((0,c.T$)(f,m))},[g,f,m,v,b]),C)?(0,r.tZ)(C,(0,o._)({data:b},e)):v?(0,r.tZ)(s,{}):null}},99213:function(e,t,n){"use strict";n.d(t,{vT:function(){return o.Z},Fg:function(){return d},yy:function(){return h}});var o=n(51397),r=n(55164),i=n(57477),a=n(85879),l=n(87363),c=n(84871),s=n.n(c),u=(0,l.createContext)({showLabelInfo:!0,showLabels:!0}),d=u.Provider,p=u.Consumer,h=function(e){return function(t){var n=(0,a.tZ)(p,{children:function(n){return(0,a.tZ)(e,(0,i._)((0,r._)({},t),{showLabelProps:n}))}});return s()(n,e)}}},28355:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(71783),d=n(63722),p=n(25628),h=n.n(p),f=n(14168),m=n.n(f),v=n(87363),g=n(36695),b=n(93206),C=n(69383),Z=n(4534),y=n(30722),_=n(38889),w=n(66263),k=n(85576),x=n(89250),S=n(55164),E=n(57477),I=n(39288),T=(0,I.FH)("ebook",["FOLLOW","UNFOLLOW"]),N=(0,I.FH)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]),A=n(26797),B=n(5349),R={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},P=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"handleToggleVote",e.props.authRequired(function(t){var n=e.props,o=n.liked,r=n.type,i=n.id,a=!o;C.Z.trackEvent(t.target,{action:a?"Upvote":"UnUpvote",element:"Button"});var l=R[r];e.props[l](i,a)},w.q0.vote)),(0,a._)((0,o._)(e),"handleClick",function(t){var n=e.props,o=n.disableAuth,r=n.handleToggleGuide,i=n.onClick;i&&i(t)||(o?r(t):e.handleToggleVote(t))}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.count,o=e.className,r=e.icon,i=e.disabled;return(0,s.BX)(_.ZP,{className:h()("LikeButton",{"is-active":t},o),onClick:this.handleClick,disabled:i,"aria-live":"polite",children:["thank"===(void 0===r?"like":r)?(0,s.tZ)(u.sh,{center:!0}):(0,s.tZ)(d.g,{center:!0})," ",(0,y.Zh)(n).trim()]})}}]),n}(v.Component);(0,a._)(P,"propTypes",{type:m().oneOf(Z.eX).isRequired,id:m().oneOfType([m().number,m().string]).isRequired,icon:m().string,liked:m().bool,count:m().number});var z=(0,b.compose)(k.Z,(0,g.connect)(null,{updateEBookVoters:function(e){return function(t,n){var o=n().entities.ebooks[e],r=!(o.relationship||{}).voting;return t({API:{types:T.FOLLOW,method:r?"POST":"DELETE",endpoint:"v3/books/".concat(e,"/voters")},UPDATE:{request:{ebooks:(0,a._)({},e,{relationship:(0,E._)((0,S._)({},o.relationship),{voting:r}),voteupCount:o.voteupCount+(r?1:-1)})},failure:{ebooks:(0,a._)({},e,o)}}})}},updateLiveLiked:function(e){return function(t,n){var o=n().entities.lives[e],r=!o.isLiked;return t({API:{types:N.UPDATE_LIKED,endpoint:"v3/lives/".concat(e,"/like"),method:r?"POST":"DELETE"},UPDATE:{request:{lives:(0,a._)({},e,{isLiked:r,likedNum:o.likedNum+(r?1:-1)})},failure:{lives:(0,a._)({},e,o)}}})}},updateLiveCourseLiked:function(e){return function(t,n){var o=n().entities.liveCourses[e],r=!o.isLiked;return t({API:{types:N.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/".concat(e,"/like"),method:r?"POST":"DELETE"},UPDATE:{request:{liveCourses:(0,a._)({},e,{isLiked:r,likedNum:o.likedNum+(r?1:-1)})},failure:{liveCourses:(0,a._)({},e,o)}}})}},updateArticleLike:x.k5,updatePromotionLike:B.k,updatePinsLike:A.T8}))(P)},6126:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var o=n(22107),r=n(94707),i=n(87320),a=n(86325),l=n(55164),c=n(57477),s=n(85626),u=n(85879),d=n(84220),p=n(60811),h=n(14168),f=n.n(h),m=n(87363),v=n(93206),g=n(99447),b=n(88423),C=n(30722),Z=n(44169),y=n(38889),_=n(71728),w=n(41402),k=n(55698),x=n(25628),S=n.n(x),E=function(e){var t=e.className,n=e.children;return(0,u.tZ)("div",{className:S()(t,"LiveAvatar-column"),children:n})},I=function(e){var t=e.className,n=e.speakers,o=e.size,r=e.alt;if(!n||!n.length)return null;var i=n.map(function(e){return e.avatarUrl}).slice(0,4),a=function(e){var t=e.className,n=e.src,o=(0,_._)(e,["className","src"]);return(0,u.tZ)(k.qE,(0,c._)((0,l._)({url:n},o),{className:S()("LiveAvatar-img",t)}))},s=function(e){var t=e.className,n=(0,_._)(e,["className"]);return(0,u.tZ)(E,{children:(0,u.tZ)(a,(0,c._)((0,l._)({},n),{className:S()(t,"alignCenter"),size:o}))})},d=function(e){return(0,u.tZ)(a,(0,c._)((0,l._)({},e),{size:o/2-1}))},p=function(e){var t=e.imageUrls,n=(0,_._)(e,["imageUrls"]);return(0,u.tZ)(E,{children:t.map(function(e,t){return(0,w.az)(d,(0,c._)((0,l._)({},n),{key:t,src:e}))})})},h=[];switch(i.length){case 1:h=(0,u.tZ)(function(e){return(0,u.tZ)(a,(0,c._)((0,l._)({},e),{size:o}))},{src:i[0],alt:r});break;case 2:h=i.map(function(e,t){return(0,u.tZ)(s,{src:e,alt:r},t)});break;case 3:h=[(0,u.tZ)(s,{src:i[0],alt:r},"1"),(0,u.tZ)(p,{imageUrls:i.slice(1,3),alt:r},"2")];break;default:h=[i.slice(0,2),i.slice(2)].map(function(e,t){return(0,u.tZ)(p,{imageUrls:e,alt:r},t)})}return(0,u.tZ)("div",{className:S()(t,"LiveAvatar-wrapper"),style:{width:o,height:o},children:h})},T=n(2174),N=n(80714),A=n(95876),B=n(12421),R=n(93547),P=n(45842),z=n(30361),L=n(28355),M=n(9070),D=n(24794),U=function(e){(0,a._)(n,e);var t=(0,s._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,r._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,o=t.live,r=t.live,i=r.id,a=r.type,s=r.subject,h=r.speaker.member,f=r.startsAt,m=r.price,v=r.promotionPrice,g=r.description,_=void 0===g?"":g,w=r.image,k=r.isLiked,x=r.likedNum,S=r.seats,E=t.lastreadTouchable,P=t.zaIds.options,U=t.renderOptions,O=t.isSticky,F=t.handleToggleSticky,q=t.currentUser,V=q&&q.urlToken===h.urlToken,H="function"==typeof F,X=(S||{}).taken,G="/lives/".concat(i);if(n!==z.PG.interactive)return(0,u.tZ)(z.ZP,{data:o,link:G,title:(0,u.BX)(u.HY,{children:[H&&O&&(0,u.tZ)(T.Z,{}),(0,u.tZ)("a",{href:G,target:"_blank",rel:"noopener noreferrer",children:s})]}),children:!N.Z.isMobileEntry&&H&&V&&(0,B.U)(q)&&(0,u.tZ)(y.ZP,{preset:"plain",onClick:F,icon:O?d.TX:p.rh,label:O?"取消置顶":"置顶"})});var K=(0,u.tZ)(I,{className:"LiveItem-avatar",speakers:[h],size:60}),j={id:i,type:a};return(0,u.BX)("div",{className:"LiveItem",children:[!N.Z.isMobileEntry&&w&&(0,u.tZ)("a",{className:"LiveItem-cover",href:G,target:"_blank",rel:"noopener noreferrer",children:(0,u.tZ)("img",{src:(0,b.imgUrl)(w,"640w"),srcSet:"".concat((0,b.imgUrl)(w,"r")," 2x"),alt:s})}),(0,u.tZ)(z.ZP,{image:N.Z.isMobileEntry&&K,data:o,link:G,onRef:function(t){e.contentItem=t},title:(0,u.BX)("span",{children:[h.name,"：",(0,u.tZ)("a",{href:G,target:"_blank",rel:"noopener noreferrer",children:s})]}),meta:N.Z.isMobileEntry&&(0,u.BX)("span",{children:[(0,C.uf)(X)," 参与"]}),lastreadTouchable:E,children:N.Z.isMobileEntry?(0,u.tZ)(L.Z,(0,c._)((0,l._)({},j),{liked:k,count:x,icon:"thank"})):(0,u.BX)(M.Z,{className:"LiveItem-description",excerpt:(0,R.$G)(_,60),limit:60,limitWithImage:60,html:_,data:o,extra:(0,u.BX)(z.n1,{children:[!!X&&(0,u.BX)("div",{children:[(0,u.tZ)("span",{children:"参与人数："}),X]}),(0,u.BX)("div",{children:[(0,u.tZ)("span",{children:"时间："}),(0,Z.P5)(f)]}),(0,u.BX)("div",{children:[(0,u.tZ)("span",{children:"特价："}),"number"==typeof v?(0,u.BX)("span",{className:"LiveItem-price",children:[(0,A.u)(v),(0,u.tZ)("del",{children:(0,A.u)(m)})]}):(0,A.u)(m)]})]}),children:[(0,u.tZ)(L.Z,(0,c._)((0,l._)({},j),{liked:k,count:x,icon:"thank"})),(0,u.tZ)(D.Z,(0,c._)((0,l._)({},j),{title:s,authorName:h&&h.name,url:G})),U&&U(function(){return e.contentItem},P)]})})]})}}]),n}(m.Component);(0,i._)(U,"propTypes",{preset:f().oneOf(Object.values(z.PG)),renderOptions:f().func,zaIds:f().object}),(0,i._)(U,"defaultProps",{zaIds:{}});var O=(0,v.compose)(P.Z,(0,g.a)(function(e){var t=e.live,n=e.trackCardShow,o=e.zaInfos,r=(void 0===o?{}:o).cardShow;return(0,c._)((0,l._)({module:"LiveItem",card:{content:{type:"Live",id:t.id,author_member_hash_id:t.speaker.member.id}}},r&&{view:{id:r}}),{trackCardShow:void 0===n||n})}))(U)},71364:function(e,t,n){"use strict";var o=n(85879),r=n(43384),i=n(38889),a=n(51618);t.Z=function(e){var t=e.show,n=e.onCancel,l=e.onSubmit,c=(0,r.Q4)().trackEvent;return(0,o.tZ)(a.Z,{className:"SkipModal",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:t&&(0,o.BX)(r.Wi,{zaType:"Block",zaBlock:"expandBlockModal",zaText:"展开阅读全文弹窗",children:[(0,o.tZ)("div",{className:"title",children:"即将打开“知乎App”继续阅读"}),(0,o.BX)("div",{className:"button_container",children:[(0,o.tZ)(i.ZP,{preset:"plain",onClick:function(){c({eventType:"Click",block:"expandModal_cancel",elementLocation:{type:"Button"}}),n()},children:"取消"}),(0,o.tZ)(i.ZP,{preset:"primary",onClick:function(){c({eventType:"Click",action:"OpenUrl",block:"expandModal_open",elementLocation:{type:"Button"}}),l()},children:"打开App"})]})]})})}},11584:function(e,t,n){"use strict";var o=n(85879),r=n(38020),i=n(25628),a=n.n(i),l=n(87363),c=n(92565);t.Z=function(e){var t=e.show,n=e.children,i=e.className,s=(0,l.useRef)();return(0,l.useEffect)(function(){var e=null;return t?(document.body.style.overflow="hidden",e=(0,c.c)(s.current)):document.body.style.overflow="auto",function(){e&&e()}},[t]),(0,o.tZ)("div",{className:i,children:(0,o.BX)("div",{ref:s,children:[(0,o.tZ)("div",{className:a()({"ModalLoading-background":t})}),(0,o.BX)("div",{className:a()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,(0,o.tZ)(r.Z,{})]})]})})}},99446:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var o=n(85879),r=n(87363),i=n(67516),a=n.n(i),l=n(83697),c=n(55679),s=n(51618),u=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"有问题，就会有回答",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],d={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},p=function(e){var t=e.show,n=e.onCancel,i=e.onSubmit,p=e.id,h=e.type,f=(0,l.n)(),m=f.origin.toLowerCase(),v=f.Android?d.chrome.imageSrc:d.safari.imageSrc,g=a().get("question:firstCheckedTrue");(0,r.useEffect)(function(){g&&t&&!f.Wechat&&(location.href="zhihu://".concat(h,"/").concat(p))},[g,t,h,p,f.Wechat]);var b=function(e){0===e?(a().set("question:firstCheckedTrue","true"),i()):n()},C="";return C=f.UC?"uc":f.Wechat?"wx":f.MQQBrowser?"qq":/huawei|honor/g.test(m)?"huawei":/chrome/g.test(m)||/crios/g.test(m)?"chrome":f.Safari?"safari":"default",u[1].title=d[C].title,u[1].imageSrc="default"===C?v:d[C].imageSrc,(0,o.BX)(s.Z,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&(0,o.tZ)(c.dF,{className:"ModalWrap-body"}),(0,o.BX)("div",{className:"ModalWrap-content",children:[(0,o.tZ)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),u.map(function(e,t){return(0,o.BX)("div",{className:"ModalWrap-item",children:[e.imageSrc&&(0,o.tZ)("div",{className:"ModalWrap-itemImg",children:(0,o.tZ)("img",{src:e.imageSrc,alt:""})}),(0,o.BX)("div",{className:"ModalWrap-itemContent",children:[(0,o.tZ)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&(0,o.tZ)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),(0,o.tZ)("div",{className:"ModalWrap-itemBtn",role:"button",tabIndex:0,onClick:function(){return b(t)},children:e.button})]},t)})]})]})}},21156:function(e,t,n){"use strict";var o=n(55164),r=n(57477),i=n(71728),a=n(85879),l=n(48725),c=n(38889),s=function(e){var t=e.onClick,n=e.text,s=(0,i._)(e,["onClick","text"]);return(0,a.BX)(c.ZP,(0,r._)((0,o._)({preset:"link",onClick:t,css:{fontSize:15}},s),{children:[(0,a.tZ)(l.E,{text:!0,center:!0})," ",n]}))};s.defaultProps={text:"修改"},t.Z=s},38791:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var o=n(85879),r=n(87363),i=n.n(r),a=n(14168),l=n.n(a),c=n(36695),s=n(93206),u=n(87462),d=n(94334),p=n(15671),h=n(43144),f=n(82963),m=n(61120),v=n(60136),g=n(74135),b=n(53966),C=n.n(b),Z=n(69383),y=n(43384),_=n(87804),w=n(28100),k=n(55709),x=n(25484),S=n(68749),E=n(25628),I=n.n(E),T=n(45745);function N(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}function A(e){var t=e.logoUrl,n=e.productName,o=e.productDesc,r=e.link,a=e.btnText,l=void 0===a?"":a,c=e.className,s=void 0===c?"":c,u=e.productNameMaxLength,d=void 0===u?6:u,p=e.productDescMaxLength,h=void 0===p?15:p,f=e.btnTextMaxLength,m=void 0===f?4:f,v=e.type,g="".concat("pc"===v?"pc":"app","_EAnswerCard");return i().createElement("a",{ref:e.cardRef,onClick:e.onClick,href:void 0===r?"":r,target:"_blank",className:I()("".concat(g),s)},i().createElement(y.Wi,{zaType:"Card",zaBlock:"advertPluginCard"}),i().createElement(T.Z,{src:t,className:"".concat(g,"-image"),alt:"logo"}),i().createElement("div",{className:"".concat(g,"-content")},i().createElement("div",{className:I()("".concat(g,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(d+1,"em")}},N(n,d)),o&&i().createElement("div",{className:"".concat(g,"-content-desc"),style:{maxWidth:"".concat(h+1,"em")}},N(o,h))),i().createElement("div",{className:"".concat(g,"-button"),style:{maxWidth:"".concat(m+1,"em")},onClick:e.onBtnClick},N(l,m)),"app"===v&&i().createElement("div",{className:"app_EAnswerCard-bottom-close",onClick:function(t){t.stopPropagation(),t.preventDefault(),e.onClose()}},"\xd7"))}var B=n(57592),R=function(e){function t(e){var n;return(0,p.Z)(this,t),(n=(0,f.Z)(this,(0,m.Z)(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,Z.Z.trackCardShow(e,{id:5642}),(0,w.uI)(e,{trackMethod:w.Yv,tracks:t}))},n.addDSCListener=function(){try{var e=n.props.data.pluginType;if(/^android/i.test(e)){n.appPromotionUrl=null,n.downloadInfo=null,n.landingUrl=(0,S.U2)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".landingUrl"),"");var t=(0,S.U2)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".downloadInfo"),"{}"),o=(0,S.U2)(JSON.parse(t.adjson||"{}"),"ads[0].creatives[0].asset.app_promotion_url","");o&&(B.WI({app_promotion_url:n.appPromotionUrl},"ad/getDownloadStatus").then(function(e){var t=e.status,o=e.data;t||console.log("下载插件 ad/getDownloadStatus 调用失败！"),n.setState({status:o.status})}).catch(console.log),n.appPromotionUrl||_.Z.listen("ad/downloadStatusChange",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;n.setState({status:void 0===t?"error":t})})),n.appPromotionUrl=o,n.downloadInfo=t}}catch(e){console.log(e)}},n.onBtnClick=function(e){"pc"!==(0,S.dU)().os&&n.appPromotionUrl&&n.downloadInfo&&(e.stopPropagation(),e.preventDefault(),n.sendClickTrack(),B.WI(n.downloadInfo,"ad/downloadApk"))},n.sendClickTrack=function(){Z.Z.trackEvent(n.card,{id:5641,action:"OpenUrl"}),(0,w.Ti)({trackMethod:w.Yv,tracks:n.track.click})},n.handleClick=function(e){e.stopPropagation(),n.sendClickTrack(),"pc"!==(0,S.dU)().os&&n.landingUrl&&n.downloadInfo&&(e.preventDefault(),B.WI(n.downloadInfo,"ad/open"))},n.sessionId=C()(),n.init(e),n.viewShow=!1,n.state={status:"ready"},n}return(0,v.Z)(t,e),(0,h.Z)(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,o=t.suger,r=(n[t.pluginType]||{}).trackUrl,i=void 0===r?{}:r,a=(0,S.dU)(),l={xSuger:void 0===o?"":o,sessionId:this.sessionId,os:a.os,cardType:"".concat(a.os,"_download")};this.track=(0,S.Vg)(i,l)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=(0,S.dU)();Z.Z.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.track.view),this.addDSCListener()}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,o=t.plugin,r=t.className,a=t.pluginType,l=(o[a]||{}).plugin,c=(void 0===l?{}:l)[a],s=(0,S.dU)(),d=this.state.status,p=void 0===d?"ready":d,h={className:void 0===r?"":r,type:"pc"===s.os?"pc":"app",btnText:c.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4,onClose:this.props.onClose};return(/^ios/i.test(a)?(h.logoUrl=c.icon,h.productName=c.name,c.score>0&&(h.productDesc="Appstore 评分：".concat(c.score)),h.link=c.landingUrl):/^android/i.test(a)&&(h.logoUrl=c.icon||(void 0===n?{}:n).avatarUrl||"",h.productName=c.name,h.link=c.landingUrl,h.onBtnClick=this.onBtnClick,x.q1[p]&&(h.btnText=x.q1[p])),h.link)?i().createElement(y.KC,(0,u.Z)({as:A,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},h)):null}}]),t}(i().Component);function P(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?i().createElement(k.Z,null,i().createElement(R,e)):null}R.propTypes={data:l().object.isRequired};var z=function(e){function t(e){var n;return(0,p.Z)(this,t),(n=(0,f.Z)(this,(0,m.Z)(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,Z.Z.trackCardShow(n.card,{id:5642}),(0,w.uI)(e,{trackMethod:w.Yv,tracks:t}))},n.handleClick=function(e){e.stopPropagation(),Z.Z.trackEvent(n.card,{id:5641,action:"OpenUrl"}),(0,w.Ti)({trackMethod:w.Yv,tracks:n.track.click});var t=(0,S.U2)(n.props.data,"plugin.leads.plugin.leads",{}),o=n.props.data,r=o.contentType,i=o.contentToken;t.isCanvas&&(e.preventDefault(),t.creativeId=(0,S.bS)(),B.WI(t,"ad/openForm"));var a=t.cardType,l=t.hashId;"message"===a&&(e.preventDefault(),B.WI({inbox_id:l,initial_message:"",auto_focus:!0,title:"",source_type:r,source_id:i},"base/openInbox"))},n.isHiddenEcommerceAd=function(e){return!!e.isCanvas&&!e.adjson||!e.isCanvas&&!e.token&&!e.landingUrl},n.sessionId=C()(),n.init(e),n.viewShow=!1,n}return(0,v.Z)(t,e),(0,h.Z)(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,o=t.suger,r=t.pluginType,i=(0,S.U2)(e.data,"plugin.leads.plugin.leads",{}).cardType,a=(n[r]||{}).trackUrl,l=void 0===a?{}:a,c=(0,S.dU)().os,s={xSuger:void 0===o?"":o,sessionId:this.sessionId,os:c,cardType:i};this.track=(0,S.Vg)(l,s)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=(0,S.dU)();Z.Z.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.track.view);var n=(0,S.U2)(this.props.data,"plugin.leads.plugin.leads",{}),o=n.isCanvas,r=n.adjson;o&&B.WI({adjson:r},"ad/preload")}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,o=void 0===n?{}:n,r=t.plugin,a=t.className,l=t.pluginType,c=(0,S.U2)(void 0===r?{}:r,"".concat(l,".plugin.").concat(l),{});return this.isHiddenEcommerceAd(c)?null:i().createElement(y.KC,(0,u.Z)({as:A,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},{className:void 0===a?"":a,type:"app",logoUrl:o.avatarUrl,productName:o.name,productNameMaxLength:13,productDesc:c.desc,productDescMaxLength:15,link:c.landingUrl||"javascript:",btnText:c.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick,onClose:this.props.onClose}))}}]),t}(i().Component);function L(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?i().createElement(k.Z,null,i().createElement(z,e)):null}z.propTypes={data:l().object.isRequired};var M=function(e){function t(){(0,p.Z)(this,t);for(var e,n,o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=(0,f.Z)(this,(e=(0,m.Z)(t)).call.apply(e,[this].concat(r)))).state={display:!1},n.onClose=function(){n.setState({display:!0})},n.getContent=function(e){var t=e.data;if(!t||!t.plugin)return null;var o=(t=(0,S.Gw)((0,g.camelizeKeys)(t))).plugin,r=(0,S.dU)();if(o.androidDownload||o.iosDownload){var a="".concat(r.os,"Download");return"pc"===r.os&&(a=("mac"===r.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"]).find(function(e){return o[e]})||""),i().createElement(P,(0,u.Z)({},e,{data:(0,d.Z)({},t,{pluginType:a}),onClose:n.onClose}))}return o.leads&&"pc"!==r.os?i().createElement(L,(0,u.Z)({},e,{data:(0,d.Z)({},t,{pluginType:"leads"}),onClose:n.onClose})):null},n}return(0,v.Z)(t,e),(0,h.Z)(t,[{key:"render",value:function(){var e=this.props.data,t=this.state.display;return e&&e.plugin&&!t?i().createElement(i().Fragment,null,this.getContent({data:e})):null}}]),t}(i().Component),D=n(3028),U=n(79540);function O(e){var t=e.loadBrandContentPlugin,n=e.contentType,i=e.contentToken,a=e.author,l=e.plugin,c=(0,r.useCallback)(function(){t(n,i)},[n,i,t]),s="organization"===a.userType&&!l;return((0,r.useEffect)(function(){s&&c()},[s,c]),l)?(0,o.tZ)("div",{className:"OrgEquityPlugin",children:(0,o.tZ)(M,{data:{contentType:n,contentToken:i,suger:{},author:a,plugin:l,visible:!0}})}):null}O.propTypes={contentType:l().oneOf(["answer","article"]).isRequired,contentToken:l().oneOfType([l().number,l().string]).isRequired,author:l().object.isRequired};var F=(0,s.compose)((0,D.Z)(null),(0,c.connect)(function(e,t){var n=t.contentType,o=t.contentToken;return{plugin:(0,U.PQ)(e,{contentType:n,contentToken:o})}},{loadBrandContentPlugin:U.RD}))(O)},7233:function(e,t,n){"use strict";n.d(t,{Z:function(){return ti}});var o=n(55164),r=n(57477),i=n(94009),a=n(85879),l=n(30037),c=n(25628),s=n.n(c),u=n(87363),d=n.n(u),p=n(36695),h=n(93206),f=n(99830),m=n(2174),v=n(66263),g=n(85576),b=n(92718),C=n(58909),Z=n(1606),y=n(30361),_=n(9070),w=function(e){var t=e.content,n=e.name,o=e.hasAuthorBeforeContent;return(0,u.useMemo)(function(){if(!(null==t?void 0:t[0]))return"";var e="";return"text"===t[0].type&&(e=t[0].content,o&&(e=n?"".concat(n,"：").concat(e):e)),e},[t,n,o])};function k(e){var t=[],n=[],o=[],r=[];return e&&Array.isArray(e)&&e.length&&e.forEach(function(e){var i=e.type;"quote"===i&&o.push(e),"video"===i&&n.push(e),"link"===i&&r.push(e),"image"===i&&t.push(e)}),{images:t,videos:n,quotes:o,links:r}}var x=n(98151),S=n(46829);function E(e){var t=e.preset,n=e.author,o=e.showFollowButton;return"special-plain"===t?null:(0,a.tZ)("div",{children:(0,a.BX)("div",{className:"PinItem-author",children:[(0,a.tZ)(x.Z,{author:n,className:"PinItem-authorInfo",preset:"plain"===t?"plain":"default",userLinkV2:!0},"authorInfo"),o&&(0,a.tZ)(S.Z,{className:"PinItem-followButton",preset:"primary",type:n.type,id:n.urlToken,gender:n.gender,isFollowing:n.isFollowing})]})})}var I=n(20857),T=n(22107),N=n(94707),A=n(87320),B=n(86325),R=n(85626),P=n(66011),z=n(14168),L=n.n(z),M=n(43384),D=n(88423),U=n(81488),O=n(16836),F=n(54674),q=n(99878),V=n(82644),H=n(72137),X=n(17132),G=n.n(X),K={top:10,left:20},j={top:0,left:0};function W(){var e=G()(navigator.userAgent).Mobile?j:K,t=e.top,n=e.left,o=window.innerWidth,r={left:0,top:0,width:o,height:window.innerHeight},i={x:r.left+r.width/2,y:r.top+r.height/2},a=(96+n)*2,l=o,c=0;return o<1e3+a?l=o-a:(l=1e3,c=(o-(1e3+a))/2),{x:i.x,y:i.y,imgContainerWidth:l,imgContainerHeight:r.height-2*t,left:c,top:t}}var Y=function(e){(0,B._)(n,e);var t=(0,R._)(n);function n(e){var r;return(0,T._)(this,n),r=t.call(this,e),(0,A._)((0,I._)(r),"getBoundingClientRect",function(e,t){var n=t.width,o=t.height,r={top:0,left:0,width:0,height:0},i=1;return e.width>e.height?(r.height=o,i=o/e.height,r.width=e.width*i,r.left="-".concat((r.width-n)/2)):e.width<e.height?(r.width=n,i=n/e.width,r.height=e.height*i,r.top="-".concat((r.height-o)/2)):(r.width=n,r.height=o),r}),(0,A._)((0,I._)(r),"getParentNode",function(){for(var e,t=r.props.img.parentNode;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview")){e=t;break}t=t.parentNode}return e}),(0,A._)((0,I._)(r),"getChildImgNode",function(e){if(e){var t=e.childNodes,n=r.state.index,o=n;return n>=t.length&&(o=t.length-1),{img:(0,t[o]).querySelector(".Image-Preview"),index:o}}}),(0,A._)((0,I._)(r),"setImageElAttr",function(){var e=r.state,t=e.width,n=e.transition,o=r.props.images,i=r.getParentNode(),a=r.getChildImgNode(i);if(a&&a.img){var l=a.img.getBoundingClientRect(),c=r.getBoundingClientRect(o[a.index],{width:l.width,height:l.height}),s=r.imgEl.getBoundingClientRect(),u=r.containerClientRect,d=u.left,p=u.top,h={x:s.left+s.width/2-d-c.width/2,y:s.top+s.height/2-p-c.height/2},f=t/c.width;if("transition"===n){r.setState({translate:null,scale:null,opacity:-1,transform:"translate(".concat(l.left-d,"px,").concat(l.top-p,"px)")});return}r.setState({transition:""},function(){r.setState({rect:l,transition:"",width:c.width,height:c.height,translate:h,scale:f,transform:"translate(".concat(h.x,"px ,").concat(h.y,"px) scale(").concat(f,")")})}),setTimeout(function(){r.setState({transition:"transition",translate:null,scale:null,transform:"translate(".concat(l.left-d,"px,").concat(l.top-p,"px)"),opacity:-1})},20)}}),(0,A._)((0,I._)(r),"getImageSize",function(e){var t=r.containerClientRect,n=t.imgContainerWidth,o=t.imgContainerHeight,i=e.width,a=e.height,l=!1,c=1;return(e.width>n||e.height>o)&&(e.width>n&&(c=n/e.width,i=e.width*c,a=c*e.height),a>o&&(c=o/a,a*=c,i*=c),l=!0),r.setState({cursorZoomIn:l}),{width:i,height:a}}),(0,A._)((0,I._)(r),"handleResizeCallback",function(){r.containerClientRect=W();var e=r.state.index,t=r.props.images;r.setState((0,o._)({transition:"fixed",transform:""},r.getImageSize(t[e])))}),(0,A._)((0,I._)(r),"handleClick",function(e){var t=r.state.cursorZoomIn,n=e.target;n&&n.classList&&n.classList.contains("ImageGallery-Img")&&t&&r.setState({previewImage:n}),(n.classList.contains("ImageGallery")||n.classList.contains("ImageGallery-Inner"))&&r.setImageElAttr()}),(0,A._)((0,I._)(r),"handleTransEnd",function(){var e=r.state,t=e.translate,n=e.scale,o=r.props.onClose;t&&n||o()}),(0,A._)((0,I._)(r),"handlePreviewImageClose",function(){r.setState({previewImage:null},function(){H.Cp()})}),(0,A._)((0,I._)(r),"handleKeyUpCallback",function(e){39===e.keyCode?r.handleCutImage(1):37===e.keyCode&&r.handleCutImage(-1)}),(0,A._)((0,I._)(r),"handleCutImage",function(e){var t=r.state.index+e,n=r.props.images;t<n.length&&t>=0&&r.setState((0,o._)({index:t,transition:"fixed",transform:""},r.getImageSize(n[t])))}),r.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},r.containerClientRect=W(),r}return(0,N._)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.data,n=e.img.getBoundingClientRect();H.Cp();var o=this.containerClientRect,r=o.left,i=o.top,a=this.getBoundingClientRect(t,{width:n.width,height:n.height}),l={left:n.left-r+Number(a.left),top:n.top-i+Number(a.top)};this.setState({rect:a,width:a.width,height:a.height,transform:"translate(".concat(l.left,"px, ").concat(l.top,"px)")})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState((0,o._)({},e.computeTransition(e.props.index)))},20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)}},{key:"componentWillUnmount",value:function(){H.$Z(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)}},{key:"computeTransition",value:function(e){var t=this.props.images[e],n=this.containerClientRect,o=n.x,r=n.y,i=n.left,a=n.top,l=this.getImageSize(t).width;if(this.imgEl){var c=this.imgEl.getBoundingClientRect(),s=l/c.width,u={x:o-c.width/2-i,y:r-c.height/2-a};return{translate:u,scale:s,transform:"translate(".concat(u.x,"px ,").concat(u.y,"px) scale(").concat(s,")")}}}},{key:"render",value:function(){var e=this,t=this.props.images,n=this.state,o=n.translate,r=n.index,i=n.width,l=n.height,c=n.transition,u=n.previewImage,d=n.transform,p=n.cursorZoomIn,h=n.opacity,f=this.containerClientRect,m=f.left,v=f.top,g=f.imgContainerWidth,b=f.imgContainerHeight,C=(G()(navigator.userAgent).Mobile?j:K).left,Z=t[r];return(0,a.tZ)(O.Z,{children:(0,a.BX)("div",{className:s()("ImageGallery",{"is-active":o}),onClick:this.handleClick,children:[(0,a.BX)("div",{className:"ImageGallery-Content",style:{width:"".concat(g+(96+C)*2,"px"),height:"".concat(b,"px"),left:"".concat(m,"px"),top:"".concat(v,"px")},children:[!u&&t.length>1&&(0,a.tZ)("a",{className:s()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===r}),style:{left:"".concat(C,"px")},onClick:function(){return e.handleCutImage(-1)},children:(0,a.tZ)(F.e,{fill:"#fff",size:42})}),(0,a.tZ)("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t},children:(0,a.tZ)("img",{ref:function(t){e.imgEl=t},src:(0,D.imgUrl)(Z.url,"r"),className:s()("ImageGallery-Img",{"ImageGallery-transition":"transition"===c,"ImageGallery-fixed":"fixed"===c,"ImageGallery-CursorZoomIn":p}),style:{width:i,height:l,transform:d,opacity:h},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":Z.width,"data-rawheight":Z.height,"data-thumbnail":Z.thumbnail,"data-original":(0,D.imgUrl)(Z.url,"r"),"data-actualsrc":(0,D.imgUrl)(Z.url,"b")})}),!u&&t.length>1&&(0,a.tZ)("a",{className:s()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":r>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:"".concat(C,"px")},children:(0,a.tZ)(q.N,{fill:"#fff",size:42})})]}),!u&&(0,a.tZ)("a",{className:"ImageGallery-close",onClick:this.setImageElAttr,children:(0,a.tZ)(V.HN,{fill:"#fff"})}),u&&(0,a.tZ)(U.Z,{img:u,onClose:this.handlePreviewImageClose})]})})}}]),n}(u.Component);(0,A._)(Y,"propTypes",{img:L().object.isRequired,data:L().object.isRequired,onClose:L().func.isRequired});var Q=function(e){(0,B._)(n,e);var t=(0,R._)(n);function n(e){var o;return(0,T._)(this,n),o=t.call(this,e),(0,A._)((0,I._)(o),"setImageAttr",function(){var e=o.state,t=e.width,n=e.height;if(!t||!n){var r=o.divEl.getBoundingClientRect();t=t||r.width,n=n||r.width,o.setState({width:t,height:n})}var i=o.getBoundingClientRect({width:t,height:n});o.setState({imageWidth:i.width,imageHeight:i.height,imageTop:i.top,imageLeft:i.left})}),(0,A._)((0,I._)(o),"getBoundingClientRect",function(e){var t=e.width,n=e.height,r=o.props.data,i={top:0,let:0,width:0,height:0},a=1;return r.width>r.height?(i.height=n,a=n/r.height,i.width=r.width*a,i.left="-".concat((i.width-t)/2)):(i.width=t,a=t/r.width,i.height=r.height*a,i.top="-".concat((i.height-n)/2)),i}),(0,A._)((0,I._)(o),"handlePreviewImageOpen",function(e){var t=o.props.onPreviewImageOpen;e.persist(),t&&t(e)||o.setState({previewImage:o.imgWrapper.querySelector("img")})}),(0,A._)((0,I._)(o),"handlePreviewImageClose",function(){o.setState({previewImage:null})}),o.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},o}return(0,N._)(n,[{key:"componentDidMount",value:function(){this.setImageAttr()}},{key:"render",value:function(){var e=this,t=this.state,n=t.width,o=t.height,r=t.previewImage,i=t.imageWidth,l=t.imageHeight,c=t.imageTop,u=t.imageLeft,d=this.props,p=d.data,h=d.images,f=d.index,m=d.surplus,v=d.previewType,g=d.data.isGif,b=d.vague,C=d.previewTransitionType;return(0,a.BX)(M.Wi,{shouldTrackClick:!r,zaType:"Image",zaModuleId:"IMAGE_TOP_CONTAINER",extra:{configMap:{image_index:String(f+1)}},onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?"".concat(n,"px"):"",height:o?"".concat(o,"px"):""},children:[(0,a.tZ)("span",{ref:function(t){e.imgWrapper=t},className:s()({"Image-PreviewVague":b}),children:b?(0,a.tZ)(P.Nm,{className:"Image-Preview",src:g?(0,D.imgUrl)(p.thumbnail,"xl"):(0,D.imgUrl)(p.url,"xl"),width:n,height:o,alt:"cover",thumbnail:g?(0,D.imgUrl)(p.thumbnail,"xl"):(0,D.imgUrl)(p.url,"xl"),"data-rawwidth":p.width,"data-rawheight":p.height,"data-thumbnail":p.thumbnail,"data-original":(0,D.imgUrl)(p.url,"r"),"data-actualsrc":(0,D.imgUrl)(p.url,"b")}):(0,a.tZ)("img",{className:"Image-Preview",src:g?p.thumbnail:(0,D.imgUrl)(p.url,"r"),width:i,height:l,style:{top:"".concat(c,"px"),left:"".concat(u,"px")},alt:"preview","data-rawwidth":p.width,"data-rawheight":p.height,"data-thumbnail":p.thumbnail,"data-original":(0,D.imgUrl)(p.url,"r"),"data-actualsrc":(0,D.imgUrl)(p.url,"b")})}),m>0&&(0,a.tZ)("em",{className:"Thumbnail-Surplus-Sign",children:"+".concat(m)}),g&&(0,a.tZ)("em",{className:"Thumbnail-Gif-Sign",children:"GIF"}),r&&(1===(void 0===v?1:v)?(0,a.tZ)(Y,{img:r,data:p,index:f,images:h,onClose:this.handlePreviewImageClose}):(0,a.tZ)(U.Z,{img:r,isOriginalUrl:!b,transitionType:void 0===C?0:C,data:p,onClose:this.handlePreviewImageClose}))]})}}]),n}(u.Component);function $(e){var t=e.images,n=void 0===t?[]:t;return 0===n.length?null:(0,a.tZ)("div",{className:"Image-Wrapper-Preview",children:n.slice(0,4).map(function(e,t){return(0,a.tZ)(Q,{data:e,vague:!0,index:t,images:n,surplus:3===t&&Math.max(0,n.length-4)},t)})})}(0,A._)(Q,"propTypes",{width:L().number,height:L().number,index:L().number,surplus:L().number,data:L().object,images:L().array,onPreviewImageOpen:L().func});var J=n(32122),ee=function(e){var t=e.pinId,n=e.data,o=n.videoId||n.id,r=n.thumbnail;return(0,a.tZ)("div",{css:{paddingTop:"".concat(9/16*100,"%"),position:"relative"},children:(0,a.tZ)(J.Z,{cover:r,videoId:o,contentId:t,contentType:"pin",zaProps:{type:"Pin",token:t}})})};function et(e){var t=e.id,n=e.videos,o=void 0===n?[]:n;return 0===o.length?null:o.map(function(e,n){return(0,a.tZ)(ee,{pinId:t,data:e},n)})}function en(e){var t=e.id,n=e.images,o=e.videos;return 0===n.length&&0===o.length?null:(0,a.BX)("div",{className:s()("RichText","ztext","PinItem-remainContentRichText"),children:[(0,a.tZ)($,{images:n}),(0,a.tZ)(et,{id:t,videos:o})]})}var eo=n(64099);function er(e){var t=e.data,n=t.url,o=t.card;return(0,a.tZ)(eo.Ho,{html:'<a href="'+n+'" data-draft-type="link-card" ></a>',linkCardInfo:(0,A._)({},"".concat(n),o)})}function ei(e){var t=e.links,n=void 0===t?[]:t;return 0===n.length?null:n.map(function(e,t){return(0,a.tZ)(er,{data:e},t)})}function ea(e){var t=e.quotes,n=void 0===t?[]:t;return 0===n.length?null:n.map(function(e,t){return(0,a.tZ)("blockquote",{className:"PinItem-3lineBlockquote",children:e.content},t)})}function el(e){var t=e.useNewPinStyle,n=e.id,o=e.images,r=e.videos,i=e.quotes,l=e.links;return 0===o.length&&0===r.length&&0===i.length&&0===l.length?null:(0,a.BX)("div",{className:s()("RichText","ztext","PinItem-remainContentRichText"),children:[!t&&(0,a.tZ)($,{images:o}),!t&&(0,a.tZ)(et,{id:n,videos:r}),(0,a.tZ)(ea,{quotes:i}),(0,a.tZ)(ei,{links:l})]})}function ec(e){var t=e.pin,n=e.useNewPinStyle,o=e.noCollapsed,r=t.id,i=t.regulateInfo,l=t.isDeleted,c=t.deletedReason,u=t.content,d=t.author,p=k(u),h=p.images,f=p.videos,m=p.quotes,v=p.links;if(null==i?void 0:i.isRegulating)return(0,a.tZ)("div",{className:s()("PinItem-RichText","PinItem-content-originpin"),children:i.reason});if(l)return(0,a.tZ)("div",{className:s()("PinItem-RichText","PinItem-content-originpin"),children:c});if(u&&u[0]){var g=u.find(function(e){return"text"===e.type});return(0,a.BX)("div",{className:s()("PinItem-RichText","PinItem-content-originpin"),css:{paddingTop:6},children:[n&&(0,a.tZ)(en,{id:r,images:h,videos:f}),(0,a.BX)("div",{css:{marginTop:12},children:[d.name,"："]}),g&&(0,a.tZ)(_.Z,{html:g.content,noCollapsed:o,expanded:o}),(0,a.tZ)(el,{id:r,useNewPinStyle:n,images:h,videos:f,quotes:m,links:v})]})}return null}var es=n(29564),eu=n(87641),ed=n(38003),ep=n(30851),eh=Object.assign,ef=n(25195),em=n(64011),ev=n(53237),eg=n(42951),eb=n(60203),eC=n(64884),eZ=n(27834),ey=n(32516),e_=n(30577),ew=n(6788),ek=n(37986),ex=n(31458),eS=n(17924),eE=n(41884),eI=n(31650),eT={zhicon_icon_24_badge_write_fill:ed.Z,zhicon_icon_24_crab_fill:function(e){var t;return d().createElement(ep.Z,eh(eh({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--CrabFill24"+(t?" "+t:"")}),d().createElement("path",{d:"M7.093 5.48a.75.75 0 0 0-.657-.743 4.641 4.641 0 0 0-3.66 1.117c-.896.784-1.485 1.9-1.485 3.006a3.822 3.822 0 0 0 3.823 3.823c1.467 0 2.628-.653 3.312-1.678.673-1.01.842-2.317.481-3.58a.75.75 0 0 0-.958-.505l-.856.286V5.48ZM18.183 4.753a.75.75 0 0 0-.657.744v1.71l-.846-.282a.75.75 0 0 0-.959.506c-.359 1.257-.19 2.558.48 3.564.68 1.02 1.837 1.67 3.298 1.67a3.807 3.807 0 0 0 3.807-3.806c0-1.102-.586-2.213-1.48-2.993a4.621 4.621 0 0 0-3.643-1.113Z"}),d().createElement("path",{fillRule:"evenodd",d:"M5.848 17.446a.6.6 0 0 1-.544.651l-1.979.178a.6.6 0 0 1-.107-1.195l1.978-.178a.6.6 0 0 1 .652.544ZM5.83 19.432a.6.6 0 0 1-.336.78l-1.444.573a.6.6 0 1 1-.443-1.115l1.444-.574a.6.6 0 0 1 .779.336ZM5.963 15.247a.6.6 0 0 1-.6.6h-1.72a.6.6 0 1 1 0-1.2h1.72a.6.6 0 0 1 .6.6ZM18.765 17.446a.6.6 0 0 0 .544.651l1.979.178a.6.6 0 0 0 .107-1.195l-1.978-.178a.6.6 0 0 0-.652.544ZM18.783 19.432a.6.6 0 0 0 .336.78l1.444.573a.6.6 0 1 0 .443-1.115l-1.444-.574a.6.6 0 0 0-.779.336ZM18.65 15.247a.6.6 0 0 0 .6.6h1.721a.6.6 0 0 0 0-1.2h-1.72a.6.6 0 0 0-.6.6Z",clipRule:"evenodd"}),d().createElement("path",{d:"M18.25 18.405c0 1.517-1.238 2.457-2.756 2.457H9.006c-1.517 0-2.756-.94-2.756-2.457 0-2.14 1.381-3.991 3.385-4.866a1 1 0 1 1 1.558-.456 6.688 6.688 0 0 1 2.114 0 1 1 0 1 1 1.558.455c2.004.876 3.385 2.726 3.385 4.867Z"}))},zhicon_icon_24_blue_book:ef.Z,zhicon_icon_24_exclamation_circle_fill:em.Z,zhicon_icon_24_hash_bubble_fill:ev.Z,zhicon_icon_24_label_roundtable:eg.Z,zhicon_icon_24_chat_bubble_hash_fill:eb.Z,zhicon_icon_24_badge_relevant_fill:eC.Z,zhicon_icon_24_badge_recommendation_fill:eZ.Z,zhicon_icon_24_search_circle_fill:ey.Z,zhicon_icon_24_newspaper_fill:e_.ZP,zhicon_icon_24_label_weekly:ew.Z,zhicon_icon_24_label_daily:ek.Z,zhicon_icon_24_badge_pro_fill:ex.Z,zhicon_icon_24_cheese:eS.Z,zhicon_icon_24_stamp:eE.Z,zhicon_icon_24_zhi_zhi_ji_hua:eI.Z},eN=n(65733),eA=function(e){return e},eB=function(e){var t=(0,i._)(e.filter(function(e){return"TEXT"===e.type}),2),n=t[0],o=t[1],r=e.find(function(e){return"IMAGE"===e.type&&!e.selectedImageKey});return{first:n,second:o,icon:r,hasIcon:!!r}},eR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eA,n=(0,eN.Z)(t);return(0,u.useMemo)(function(){return e.map(function(e,t){return n(eB(e.elements),t)})},[e,n])},eP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eA,n=(0,eN.Z)(t);return(0,u.useMemo)(function(){return n(eB(e))},[e,n])},ez=function(e){var t=eT[e.imageKey];return t?(0,a.tZ)(t,{fill:"currentColor",size:18,text:!0,center:!0}):null},eL=function(e){var t=e.data,n=(0,i._)(t,2),r=n[0],l=n[1],c=eP(r.elements),s=c.first,u=c.second,d=c.icon,p=(0,i._)(l.elements,1)[0];return(0,a.tZ)(es.yk,(0,o._)({name:s.content,subText:null==u?void 0:u.content,description:p.content},!!d&&{renderMoreIcon:(0,a.tZ)(ez,{imageKey:d.imageKey}),moreLink:d.actionUrl}))},eM=function(e){var t=e.data,n=eR(t,function(e,n){var o=e.first,r=e.second,i=e.icon,a=e.hasIcon,l=o.fontColor||{};return{type:o.content,color:{color:l.group,textAlpha:l.alpha},icon:a&&eT[i.imageKey],title:o.content,description:null==r?void 0:r.content,link:t[n].actionUrl}});return(0,a.tZ)(es.zi,{data:n})},eD=(0,u.forwardRef)(function(e,t){var n=e.bg,o=e.data,r=e.subNodes,i=e.url,l=e.type,c=eP(o),s=c.first,u=c.second,d=c.icon,p=c.hasIcon,h=s.fontColor||{};return(0,a.tZ)(es.Lr,{ref:t,color:{bg:n.group,bgAlpha:n.alpha,color:h.group,textAlpha:h.alpha},icon:p&&eT[d.imageKey],name:s.content,subText:null==u?void 0:u.content,link:i,css:{margin:"0 10px 10px 0",display:"inline-flex"},children:"DESCRIPTION"===l?(0,a.tZ)(eL,{data:r}):(0,a.tZ)(eM,{data:r})})}),eU=(0,u.forwardRef)(function(e,t){var n=e.data,o=e.bg,r=e.url,i=eP(n),l=i.first,c=i.second,s=i.icon,u=i.hasIcon,d=l.fontColor||{};return(0,a.tZ)(es.__,{ref:t,color:{bg:o.group,bgAlpha:o.alpha,color:d.group,textAlpha:d.alpha},icon:u&&eT[s.imageKey],name:l.content,subText:null==c?void 0:c.content,link:r,css:{margin:"0 10px 10px 0",display:"inline-flex"}})}),eO=function(e){var t,n=e.item;return(null===(t=n.subElements)||void 0===t?void 0:t.length)>0?(0,a.tZ)(eD,{bg:n.backgroundColor,data:n.elements,subNodes:n.subElements,url:n.actionUrl,type:n.subElementsType}):(0,a.tZ)(eU,{bg:n.backgroundColor,data:n.elements,url:n.actionUrl})},eF=function(e){var t=e.qualityLabel,n=null==t?void 0:t[0];return n?n.theme?(0,a.tZ)(eu.Box,{marginY:16,children:(0,a.tZ)(es.Gh,{theme:n.theme.toUpperCase(),text:n.text,iconName:null==n?void 0:n.icon,detail:n.detail})}):(0,a.tZ)(eu.Box,{marginY:16,children:(0,a.tZ)(eO,{item:n})}):null},eq=n(72111),eV=n(19076);function eH(e){var t=e.pinId,n=e.title,o=e.href,r=e.showHeightLight,i=e.onClick;return(0,a.tZ)(M.eV,{block:"卡片标题跳转",children:(0,a.tZ)("h2",{className:"ContentItem-title",children:(0,a.tZ)(eq._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,a.BX)("div",{itemProp:"zhihu:pin",itemType:"http://schema.org/UserTweets",itemScope:!0,children:[(0,a.tZ)("meta",{itemProp:"url",content:"https://www.zhihu.com/pin/".concat(t)}),(0,a.tZ)("meta",{itemProp:"name",content:n}),(0,a.tZ)(eV.Link,{to:o,target:"_blank",onClick:i,children:r?(0,a.tZ)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n})]})})})})}var eX=n(11018),eG=n(84220),eK=n(60811),ej=n(12421),eW=n(7407),eY=n(67927),eQ=n(26797),e$=n(38889),eJ=n(19495),e0=n(85703),e1=n(63362),e2=n(102),e4=n(71783),e3=n(30722);function e5(e){var t=e.authRequired,n=e.liked,o=e.id,r=e.onChange,i=(0,p.useDispatch)(),l=(0,eW.dD)(),c=(0,eN.Z)(t(function(){r?r(o):i((0,eQ.A0)(o))}));return(0,a.tZ)(M.$U,{zaAction:n?"UnLike":"Like",zaType:"Button",zaModuleId:"content_card_like_unlike_button",as:e$.ZP,preset:e$.EE.Plain,color:n?e$.rp.Red:e$.rp.Grey,onClick:c,icon:e4.ZP,label:n?"取消喜欢":"喜欢","aria-live":"polite",css:{marginLeft:l?0:24}})}function e7(e){var t=e.authRequired,n=e.count,o=e.liked,r=e.id,i=e.onChange,l=(0,p.useDispatch)(),c=(0,eN.Z)(t(function(){i?i(r):l((0,eQ.tW)(r))}));return(0,a.tZ)(M.$U,{zaAction:o?"UnApplaud":"Applaud",zaType:"Button",zaModuleId:"content_card_like_unlike_button",as:e$.ZP,preset:e$.EE.Plain,color:o?e$.rp.Red:e$.rp.Grey,onClick:c,icon:e4.ZP,label:n?"".concat((0,e3.Zh)(n),"人喜欢"):"喜欢","aria-live":"polite"})}var e6=n(57386),e8=n(24794),e9=n(71728),te=n(65939),tt={Neutral:0,UP:1,DOWN:-1},tn=(0,g.Z)(function(e){var t=e.pin,n=e.authRequired,r=(0,e9._)(e,["pin","authRequired"]),i=t.reaction||{},l=i.relation,c=i.statistics,s=l||{},u=s.vote,d=s.isAuthor,h=(c||{}).upVoteCount,f=tt[void 0===u?"Neutral":u],m=(0,p.useDispatch)(),g=(0,eN.Z)(n(function(e){var n="neutral"!==e?e:1===f?"up":"down";m((0,eQ.uC)(t.id,n))},v.q0.vote));return(0,a.tZ)(te.Z,(0,o._)({count:h,voting:f,isOwner:void 0!==d&&d,onVote:g},r))});function to(e){var t=e.positionStatus,n=e.href,o=e.stickyFeatureEnabled,r=e.commentsShown,l=e.setCommentsShown,c=e.isDetailPage,s=e.pin,d=e.isSticky,h=e.handleToggleSticky,f=e.showCommentButton,m=e.renderOptions,g=e.currentUser,C=e.blockStrategies,Z=e.authRequired,_=e.isTopicPage,w=s.id,k=s.author,x=s.commentCount,S=s.reactionCount,E=s.adminClosedComment,I=s.reaction,T=s.virtuals,N=(void 0===T?{}:T).reactionType,A=C||{},B=A.isBlockingCollect,R=A.isBlockingShare,P=A.isBlockingComment,z=A.isBlockingLike,L=(0,i._)((0,u.useState)(!1),2),M=L[0],D=L[1],U=(0,i._)((0,u.useState)(!1),2),O=U[0],F=U[1],q=(0,p.useSelector)(eW.Hu),V=(0,p.useDispatch)(),H=(void 0===I?{}:I).relation||{},X=H.liked,G=H.isAuthor,K="1"===(0,b.Z)("wm_newtoolbar")&&!1;return(0,a.BX)(a.HY,{children:[(0,a.BX)(y.eX,{css:{marginTop:-10},children:[!(void 0!==_&&_)&&!z&&K&&(0,a.tZ)(tn,{pin:s}),!K&&!z&&(0,a.tZ)(e7,{liked:"like"===N,count:S,id:w,authRequired:Z}),!P&&(void 0===f||f)&&(0,a.tZ)(eJ.Z,{onClick:function(){return l(!r)},commentsShown:r,commentClosed:E,count:x,positionStatus:t}),!R&&(0,a.tZ)(e8.Z,{id:w,type:"pin",authorName:k&&k.name,href:n,positionStatus:t}),!B&&(!g||!g.isOrg)&&(0,a.tZ)(e1.Z,{onClick:function(){Z(function(){return D(!0)},v.q0.favlists)()},label:"收藏"}),K&&(0,a.tZ)(e5,{liked:!!X,id:w,authRequired:Z}),!G&&(0,a.tZ)(e6.Z,{type:"pin",id:w}),!q&&o&&G&&(0,ej.U)(g)&&(0,a.tZ)(e$.ZP,{preset:"plain",onClick:h,icon:d?eG.TX:eK.rh,label:d?"取消置顶":"置顶"}),G&&(0,a.tZ)(e$.ZP,{preset:"plain",onClick:function(){F(!0)},icon:eX.Z,label:"删除"}),(void 0===m?function(){return[null]}:m)()]}),G&&(0,a.tZ)(e0.Z,{title:"你确定要删除自己的想法吗？",shown:O,onCancel:function(){F(!1)},onSubmit:function(){return Z(V((0,eQ.q$)(w)).then(function(){c&&(V((0,eY.c0)("想法已删除")),location.href="//www.zhihu.com")}),v.q0.deletePin)}}),(0,a.tZ)(e2.E,{id:w,type:"pin",shown:M,onClose:function(){D(!1)},zaEnabled:!0})]})}var tr=function(e){var t=e.pin,n=e.images,o=e.videos,r=e.quotes,i=e.links,l=e.useNewPinStyle,c=e.noCollapsed,s=t.id,u=t.originPin,d=t.created,p=t.updated,h=t.ipInfo,f="//".concat(v.yK,"/pin/").concat(s);return(0,a.BX)("div",{children:[(0,a.tZ)(el,{useNewPinStyle:l,id:s,quotes:r,links:i,images:n,videos:o}),u&&(0,a.tZ)(ec,{pin:u,noCollapsed:c,useNewPinStyle:l}),(0,a.tZ)(_.O,{href:f,created:d,updated:p,ipInfo:h})]})},ti=(0,h.compose)((0,Z.Ib)(function(e){return{content:{type:"Pin",id:String(e.pin.id)},moduleId:"universal_single_card"}}),g.Z,(0,l.$_)({dataPath:"pin"}),l.OW,(0,p.connect)(function(e,t){var n=t.pin;return(0,o._)({},"string"==typeof(null==n?void 0:n.author)&&{pin:Object.assign({},n,{author:e.entities.users[n.author]})})}))(function(e){var t=e.pin,n=e.pin,l=n.id,c=n.author,d=n.qualityLabel,h=n.content,g=e.preset,Z=e.lastreadTouchable,x=e.isSticky,S=e.handleToggleSticky,I=e.noCollapsed,T=void 0!==I&&I,N=e.showFollowAuthorButton,A=e.hasAuthorBeforeContent,B=e.onToggleExpand,R=e.commentsPosition,P=e.blockStrategies,z=(void 0===P?{}:P).isBlockingComment,L=e.showCommentButton,M=void 0===L||L,D=e.commentInputPosition,U=e.showHighLight,O=(0,i._)((0,u.useState)(null!=R?R:"bottom"),2),F=O[0],q=O[1],V=(0,p.useSelector)(C.ib),H=(0,i._)((0,u.useState)(!M),2),X=H[0],G=H[1],K=R||(M?"fixed":"bottom"),j="1"===(0,b.Z)("uw_pc_pin_pattern"),W=V&&V.urlToken===c.urlToken,Y="function"==typeof S,Q="//".concat(v.yK,"/pin/").concat(l),$=w({content:h,name:c.name,hasAuthorBeforeContent:A}),J=(0,u.useMemo)(function(){var e,n,o;return null!==(o=null==t?void 0:null===(e=t.content)||void 0===e?void 0:null===(n=e[0])||void 0===n?void 0:n.title)&&void 0!==o?o:""},[t]),ee=k(h),et=ee.images,eo=ee.videos,er=ee.quotes,ei=ee.links;return(0,a.BX)(y.ZP,(0,r._)((0,o._)({data:t,link:Q,"data-zop":JSON.stringify({itemId:l,type:"pin"}),meta:(0,a.tZ)(E,{preset:g,author:c,showFollowButton:void 0!==N&&N&&!W&&V}),className:s()("PinItem",{"PinItem-withLabel":!!(null==d?void 0:d[0])}),lastreadTouchable:Z},J&&{title:(0,a.tZ)(eH,{pinId:l,title:J,href:Q,showHeightLight:void 0!==U&&U})}),{children:[j&&(0,a.tZ)(en,{id:l,images:et,videos:eo}),(0,a.tZ)(_.Z,{prefix:Y&&x&&(0,a.tZ)(m.Z,{}),alwaysShowPrefix:!0,data:t,html:$,excerpt:$,noCollapsed:T,before:(0,a.tZ)(eF,{qualityLabel:d}),expanded:T,expandButtonZaType:"Button",onPositionStatusChange:function(e){q(e)},extra:(0,a.tZ)(tr,{pin:t,useNewPinStyle:j,noCollapsed:T,quotes:er,links:ei,images:et,videos:eo}),onToggleExpend:B,children:(0,a.tZ)(to,(0,o._)({positionStatus:F,href:Q,stickyFeatureEnabled:Y,commentsShown:X,setCommentsShown:G},e))}),!z&&(0,a.tZ)(f.Z,{parent:t,commentPattern:K,commentInputPosition:void 0===D?"bottom":D,shown:X,showPackupButton:M,autoFocus:M,onClose:function(){return G(!1)}})]}))})},14904:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(85626),d=n(85879),p=n(72111),h=n(30037),f=n(93155),m=n(87363),v=n.n(m),g=n(30851),b=Object.assign;function C(e){var t;return v().createElement(g.Z,b(b({width:"24",height:"25",viewBox:"0 0 24 25"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--TextFill24"+(t?" "+t:"")}),v().createElement("path",{d:"M3.5 5.487c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 1 1 0 2.5H4.75c-.69 0-1.25-.56-1.25-1.25ZM3.5 12.487c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 1 1 0 2.5H4.75c-.69 0-1.25-.56-1.25-1.25ZM4.75 18.237a1.25 1.25 0 1 0 0 2.5h7.5a1.25 1.25 0 0 0 0-2.5h-7.5Z"}))}function Z(e){return v().createElement(C,b(b({},e),{className:function(){return"Zi Zi--Answer"+(e.className?" "+e.className:"")}}))}var y=n(14168),_=n.n(y),w=n(93206),k=n(25628),x=n.n(k),S=n(64011);function E(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var o=t.detail,r=t.member,i=t.reasonDescription,a=t.type,l=r?"".concat(r.name,"："):"";return(0,d.BX)("section",{className:x()("Annotation-mark",n),children:[(0,d.BX)("header",{className:"Annotation-header",children:["strong"===a&&(0,d.tZ)(S.G,{size:16,center:!0,text:!0,className:"Annotation-alert"}),(0,d.tZ)("h1",{className:"Annotation-markTitle",children:i||"该内容已被标记"})]}),(o||l)&&(0,d.tZ)("div",{className:"Annotation-markSummary",dangerouslySetInnerHTML:{__html:"".concat(l).concat(o||"未填写原因")}})]})}E.propTypes={annotationDetail:_().shape({reason:_().number.isRequired,reasonDescription:_().string,type:_().oneOf(["strong","weak"]).isRequired,detail:_().string,member:_().shape({name:_().string.isRequired}),showOuter:_().bool}).isRequired};var I=n(99447),T=n(30722),N=n(44169),A=n(4059),B=n(80714),R=n(1606),P=n(19495),z=n(99830),L=n(30361),M=n(46829),D=n(31142),U=n(9070),O=n(24794),F={placeholders:{img:" [图片] "}},q=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{collapsed:!0,commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0}),(0,a._)((0,o._)(e),"handleOpenComment",function(t){var n=t.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",o=e.state.modalShown;e.setState({modalShown:!("bottom"===n&&o),commentPattern:n})}),(0,a._)((0,o._)(e),"handleCommentsShown",function(t,n){e.setState(n)}),(0,a._)((0,o._)(e),"handleCommentsHide",function(){e.setState({commentsShown:!1})}),(0,a._)((0,o._)(e),"handlePackupButton",function(){e.setState({modalShown:!1}),e.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)}),(0,a._)((0,o._)(e),"handleContentToggleExpand",function(t){e.setState({collapsed:!t})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,o=t.question,r=t.question,i=r.id,a=r.title,l=r.type,u=r.created,h=r.answerCount,m=r.followerCount,v=r.isMuted,g=r.questionType,b=r.detail,C=r.commentCount,y=r.adminClosedComment,_=r.relationship,w=void 0===_?{}:_,k=r.annotationDetail,x=t.action,S=t.isConcise,I=t.isAnonymousFollowing,R=t.lastreadTouchable,q=t.zaInfos,V=q.title,H=q.expand,X=q.follow,G=q.options,K=t.renderOptions,j=t.blockStrategies,W=void 0===j?{}:j,Y=W.isBlockingFollowQuestion,Q=W.isBlockingComment,$=W.isBlockingShare,J=this.state,ee=J.commentsShown,et=J.commentsAutoFocus,en=J.commentPattern,eo=J.collapsed,er={id:i,type:l},ei="/question/".concat(i);return(0,d.BX)(L.ZP,{data:o,link:ei,lastreadTouchable:R,onRef:function(t){e.contentItem=t},title:(0,d.BX)("div",{className:"QuestionItem-title",children:[(0,d.tZ)(p._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,d.tZ)("a",(0,s._)((0,c._)({href:ei,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},V&&{"data-za-detail-view-id":V}),{children:a}))}),I&&(0,d.tZ)(f._,{className:"QuestionItem-icon"}),"commercial"===g&&v&&(0,d.tZ)("span",{className:"QuestionItem-muteStatus",children:"待推广"})]}),children:[!eo&&k&&(0,d.tZ)(E,{annotationDetail:k}),n===L.PG.default&&(0,d.BX)(L.qb,{children:[(0,N.KZ)(u),"".concat((0,T.uf)(h)," 个回答"),"".concat((0,T.uf)(m)," 个关注")]}),n===L.PG.interactive&&(0,d.BX)(U.Z,{data:o,html:b||"",excerpt:o.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:F,onToggleExpend:this.handleContentToggleExpand,zaIds:{expand:H},children:[!Y&&(x||(0,d.tZ)(M.Z,(0,s._)((0,c._)({},er),{isFollowing:(w&&({}).hasOwnProperty.call(w,"isFollowing")?w:o).isFollowing,zaId:X}))),B.Z.isMobileEntry&&S?(0,d.BX)("div",{className:"QuestionItem-concise",children:[!!h&&(0,d.BX)("span",{children:[(0,T.uf)(h)," 个回答"]}),!!(h&&m)&&(0,d.tZ)("span",{className:"QuestionItem-mobileDot"}),!!m&&(0,d.BX)("span",{children:[(0,T.uf)(m)," 关注"]})]}):[!Q&&(0,d.tZ)(P.Z,{onClick:this.handleCommentsShown,commentsShown:ee,commentClosed:y,count:C},"comment"),!$&&(0,d.tZ)(O.Z,(0,s._)((0,c._)({},er),{title:a,href:ei}),"share"),!!h&&(0,d.BX)(D.Z,{preset:"plain",to:ei,target:"_blank",children:[(0,d.tZ)(Z,{style:{marginRight:"4px"},center:!0,text:!0}),(0,T.uf)(h)," 个回答"]},"linkbutton"),K&&K(function(){return e.contentItem},G),eo&&k&&(0,d.tZ)(A.Z,{annotationDetail:k})]]}),(0,d.tZ)(z.Z,{parent:o,commentPattern:en,shown:ee,autoFocus:et,onClose:this.handleCommentsHide})]})}}]),n}(m.Component);(0,a._)(q,"propTypes",{preset:_().oneOf(Object.keys(L.PG)).isRequired,isAnonymousFollowing:_().bool,contentShown:_().bool,zaInfos:_().shape({title:_().number,expand:_().number,follow:_().number,options:_().number}),renderOptions:_().func}),(0,a._)(q,"defaultProps",{preset:L.PG.default,zaInfos:{}});var V=(0,w.compose)((0,R.Ib)(function(e){return{content:{type:"Question",token:String(e.question.id)}}}),(0,I.a)(function(e){var t=e.question,n=e.trackCardShow;return{module:"QuestionItem",card:{content:{type:"Question",token:String(t.id),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:void 0===n||n}}),(0,h.$_)({dataPath:"question"}),h.OW)(q)},45071:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var o=n(85879),r=n(87363),i=n.n(r),a=n(66980),l=Object.assign,c=function(e){return i().createElement(a.Z,l({viewBox:"0 0 15 15"},e),i().createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},i().createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 0 0 .175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 0 0-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i().createElement("path",{d:"M7.5 1.4a.47.47 0 0 0-.474.354l-1.318 4.29H1.49a.499.499 0 0 0-.467.36.523.523 0 0 0 .185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},s=Object.assign,u=function(e){return i().createElement(a.Z,s({width:"15",height:"15",viewBox:"0 0 15 15"},e),i().createElement("g",{fillRule:"evenodd"},i().createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 0 0 .175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 0 0-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i().createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 0 0-.474.354l-1.318 4.29H1.49a.499.499 0 0 0-.467.36.523.523 0 0 0 .185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},d=Object.assign,p=function(e){return i().createElement(a.Z,d({viewBox:"0 0 15 15"},e),i().createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},i().createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 0 0 .175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 0 0-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),i().createElement("path",{d:"M7.5 1.4a.47.47 0 0 0-.474.354l-1.318 4.29H1.49a.499.499 0 0 0-.467.36.523.523 0 0 0 .185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},h=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return(0,o.tZ)("div",{className:"Rating",children:Array.from({length:5}).map(function(e,t){var r=n>=t+1?c:n>=t+.5?u:p;return(0,o.tZ)(r,{size:15},t)})})}},3707:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var o=n(55164),r=n(57477),i=n(79065),a=n(85879),l=n(24405),c=n(80565),s=n(65733),u=n(82806),d=n.n(u),p=n(36695),h=n(87641),f=n(43384);function m(){var e=(0,i._)(["",""]);return m=function(){return e},e}var v=function(e){var t=e.avatars,n=e.isDarkMode;return(0,a.tZ)("ul",{css:{display:"flex",alignItems:"center",marginRight:3},children:t.map(function(e){var t=e||{},o=t.day,r=t.night,i=t.width,l=void 0===i?14:i,c=t.height,s=void 0===c?14:c,u=n?r:o;return u?(0,a.tZ)("li",{css:{display:"flex",alignItems:"center","& + &":{marginLeft:-5}},children:(0,a.tZ)("img",{src:u,alt:"",css:function(e){return{width:l,height:s,borderRadius:"100%",border:"1px solid ".concat(e.colors.GBK99A)}}})},u):null})})};function g(e){var t=e.contentType,n=e.id,i=e.onClickVoterInfo,u=(0,p.useSelector)(function(e){return e["".concat(t,"s")].relationEndorsement[n]})||{},g=u.icon,b=u.text,C=void 0===b?"":b,Z=u.textColor,y=void 0===Z?"GBK06A":Z,_=u.textSize,w=void 0===_?14:_,k=u.isBold,x=void 0!==k&&k,S=u.type,E=u.avatars,I=u.relationshipEndorseReasonType,T=(0,l.F)().isDarkMode,N="reaction_endorse"===S,A=(0,s.Z)(function(){N&&i()});if(!C)return null;var B=g||{},R=B.day,P=B.night,z=B.width,L=B.height,M=!!(null==E?void 0:E.length);return(0,a.tZ)(f.Wi,(0,r._)((0,o._)({zaType:"Text",zaModuleId:"relationship_endorse"},"relationship_endorse"===S?{extra:{configMap:{relationship_endorse_type:String(I)}}}:{zaBlock:"VoterInfo"}),{children:(0,a.BX)(h.Flex,{css:(0,o._)({},N&&{cursor:"pointer",display:"inline-flex"}),onClick:A,alignItems:"center",my:"12px",children:[!M&&g&&(0,a.tZ)(h.Image,{mr:"4px",width:void 0===z?12:z,height:void 0===L?12:L,src:T?void 0===P?"":P:void 0===R?"":R,alt:""}),M&&(0,a.tZ)(v,{avatars:E,isDarkMode:T}),(0,a.tZ)(h.Text,{css:function(e){return(0,o._)({fontSize:w,fontWeight:x?"bold":"normal",color:e.colors[y]},(0,c.S)(1))},children:d()(m(),C)})]})}))}},45588:function(e,t,n){"use strict";var o=n(85879),r=n(25628),i=n.n(r),a=n(37335);t.Z=function(e){var t=e.className;return(0,o.BX)("div",{className:i()("Reviewing",t),children:[(0,o.BX)("div",{className:"Reviewing-top",children:[(0,o.tZ)(a.P,{size:16}),(0,o.tZ)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),(0,o.tZ)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},47163:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(14168),d=n.n(u),p=n(87363),h=n(36695),f=n(93206),m=n(50373),v=n(67516),g=n.n(v),b=n(85576),C=n(66263),Z=n(8866),y=n(67927),_=n(67036),w=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.totalMoney,n=e.showRewarders;return(0,s.tZ)("div",{children:!!t&&(0,s.tZ)("div",{className:"Reward-money",children:(0,s.BX)("span",{onClick:n,role:"button",tabIndex:0,children:["\xa5 ",t.toFixed(2)]})})})}}]),n}(p.Component);(0,a._)(w,"propTypes",{totalMoney:d().number,showRewarders:d().func});var k=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this.props.activateReward;return(0,s.BX)("div",{className:"Reward",children:[(0,s.tZ)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),(0,s.tZ)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})}}]),n}(p.Component);(0,a._)(k,"propTypes",{activateReward:d().func});var x=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return(0,s.BX)("div",{children:[(0,s.tZ)("div",{className:"Reward-tagline",children:t||C.Sp}),(0,s.tZ)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})}}]),n}(p.Component);(0,a._)(x,"propTypes",{onClick:d().func,tagline:d().string});var S=n(19076),E=n(99447),I=n(30722),T=n(80714),N=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{hoverName:""}),(0,a._)((0,o._)(e),"hoverUser",function(t){e.setState({hoverName:t.target.dataset.name})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,o=t.handleListShown,r=t.rewardMemberCount,i=t.onUserClick,a=this.state.hoverName,l=n.slice(0,5);return(0,s.BX)("div",{className:"Reward-count",children:[(0,s.tZ)("p",{className:"Reward-User-text",onClick:o,children:"".concat((0,I.uf)(r)," 人已赞赏")}),(0,s.BX)("div",{children:[l.map(function(t,n){return T.Z.isMobileEntry&&C.dd?(0,s.tZ)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,alt:"赞赏用户"},n):(0,s.tZ)(S.Link,{to:"//".concat(T.Z.wwwHost,"/").concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":a,target:"_blank",onClick:i,children:(0,s.tZ)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)}),r>6&&(0,s.BX)("span",{className:"Reward-MoreUser",onClick:o,children:[(0,s.tZ)("i",{}),(0,s.tZ)("i",{}),(0,s.tZ)("i",{})]})]})]})}}]),n}(p.Component);(0,a._)(N,"propTypes",{users:d().array,handleListShown:d().func,rewardMemberCount:d().number,onUserClick:d().func}),(0,a._)(N,"defaultProps",{users:[]});var A=(0,E.a)({module:"UserList",moduleName:"*** 人已赞赏"})(N),B=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,o=e.isAuthor,r=e.users,i=e.onUserClick;return t?(0,s.tZ)(A,{users:r,onUserClick:i,handleListShown:n,rewardMemberCount:t}):(0,s.tZ)("div",{className:"Reward-countZero",children:o?null:"还没有人赞赏，快来当第一个赞赏的人吧！"})}}]),n}(p.Component);(0,a._)(B,"propTypes",{rewardMemberCount:d().number,handleListShown:d().func,isAuthor:d().bool,users:d().array,onUserClick:d().func});var R=n(74128),P=n(41613),z=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,o=e.items,r=e.voteupCount,i=e.isRewardList,a=e.onClose,l=e.notice;return(0,s.tZ)(R.Z,{size:"fullPage",onClose:a,children:t&&(0,s.tZ)(P.Z,{items:o,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:r,onLoad:n,isRewardList:i,notice:l,type:"rewardPeople"})})}}]),n}(p.Component);(0,a._)(z,"propTypes",{onLoad:d().func,modalShown:d().bool});var L=function(){return n.e(5622).then(n.bind(n,35622)).then(function(e){return e.TipjarDialog})},M=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{TipjarRender:!1,modalShown:!1}),(0,a._)((0,o._)(e),"onSubmitReward",function(t){g().set("isRewardable",!0),e.updateReward(t)}),(0,a._)((0,o._)(e),"onPaySuccess",function(){var t=e.props,n=t.reward,o=t.currentUser,r=t.id,i=t.type,a=n[i][r].users,l=[o];Array.isArray(a)&&(a.push(o),l=a),e.props.onRewardSuccess(l,r,i),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")}),(0,a._)((0,o._)(e),"onLoad",function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()}),(0,a._)((0,o._)(e),"onLoadArticleRewardUser",function(){var t=e.props.id;e.props.getArticleRewardUser(t)}),(0,a._)((0,o._)(e),"onLoadArticleRewardUserDetails",function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)}),(0,a._)((0,o._)(e),"onLoadRewardUser",function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then(function(t){var n=t.payload.data;if(n.length>0){var o={};n.forEach(function(e){o[e.urlToken]=e}),e.props.updateEntitiesUsers(o)}})}),(0,a._)((0,o._)(e),"handleListShown",function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})}),(0,a._)((0,o._)(e),"handleListHide",function(){e.setState({modalShown:!1})}),(0,a._)((0,o._)(e),"updateReward",function(t){var n=e.props,o=n.type,r=n.id,i=n.rewardInfo.canOpenReward;"article"===o?e.props.updateArticleReward(r,t,!!i||void 0):e.props.updateAnswerReward(r,t)}),(0,a._)((0,o._)(e),"activateReward",function(){e.onSubmitReward(C.Sp)}),(0,a._)((0,o._)(e),"showRewarders",function(){e.setState({modalShown:!0})}),(0,a._)((0,o._)(e),"addReward",e.props.authRequired(function(t,n){var o=e.props,r=o.id;"article"===o.type?e.props.createArticleTipjar(r,t):e.props.createTipjar(r,t,n)},void 0,y.zQ)),(0,a._)((0,o._)(e),"handleRewardButtonClick",function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})}),(0,a._)((0,o._)(e),"colseTijarDialog",function(){e.setState({TipjarRender:!1})}),(0,a._)((0,o._)(e),"removeTradeNumber",function(){var t=e.props,n=t.id,o=t.type;e.props.removeTradeNumber(n,o)}),e}return(0,i._)(n,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isAuthor,o=e.isMobile,r=e.id,i=e.reward,a=e.author,l=e.type,c=e.ua,u=e.rewardInfo,d=u.canOpenReward,p=u.isRewardable,h=u.tagline,f=u.rewardTotalMoney,v=u.rewardMemberCount,g=e.onRewardUserClick,b=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var C=this.state,Z=C.TipjarRender,y=C.modalShown;if(n&&d)return(0,s.tZ)("div",{children:(0,s.tZ)(k,{activateReward:this.activateReward})});if(p){var _=i&&i[l][r]||{},S=_.tradeNumber,E=_.users,I=_.notice,T=(0,s.tZ)(z,{modalShown:y,items:E,voteupCount:v,onLoad:this.onLoad,isRewardList:n,notice:I,onClose:this.handleListHide}),N=(0,s.tZ)(B,{rewardMemberCount:v,handleListShown:this.handleListShown,onUserClick:g,users:E,isAuthor:n});if(!n)return(0,s.BX)("div",{className:"Reward",children:[(0,s.tZ)(x,{tagline:h,onClick:this.handleRewardButtonClick}),N,T,(0,s.tZ)(m.Z,{getComponent:L,author:a,tagline:h,isMobile:o,ua:c,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:S,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:Z,type:l,balanceEnable:b})]});var A=(Number(f)||0)/100;return(0,s.BX)("div",{className:"Reward",children:[(0,s.tZ)(w,{tagline:h,totalMoney:A,showRewarders:this.showRewarders}),T,N]})}return null}}]),n}(p.Component);(0,a._)(M,"propTypes",{reward:d().object,isAuthor:d().bool,author:d().object,id:d().number,rewardInfo:d().object,currentUser:d().object,ua:d().object,type:d().string,isMobile:d().bool,balanceEnable:d().bool,onRewardButtonClick:d().func,onRewardUserClick:d().func,onRewardUserMoreClick:d().func}),(0,a._)(M,"defaultProps",{rewardInfo:{},type:"answer",balanceEnable:!0});var D=(0,f.compose)(b.Z,(0,h.connect)(null,{updateAnswerReward:Z.fT,updateArticleReward:_.i3,createArticleTipjar:_.pb,getRewardUserDetails:_.Js,getPagingArticleRewardUser:_.Ze,getPagingArticleRewardUserDetails:_.BE,getArticleRewardUser:_.nb,updateEntitiesUsers:_.$U,getRewardUser:_.vu,createTipjar:_.Cf,removeTradeNumber:_.on,onRewardSuccess:_.TN,showNotification:y.c0}))(M)},9070:function(e,t,n){"use strict";n.d(t,{O:function(){return eP},Z:function(){return eU}});var o,r=n(20857),i=n(22107),a=n(94707),l=n(87320),c=n(86325),s=n(55164),u=n(57477),d=n(71728),p=n(94009),h=n(85626),f=n(85879),m=n(79852),v=n(75798),g=n(65733),b=n(54231),C=n(28753),Z=n(25628),y=n.n(Z),_=n(79445),w=n.n(_),k=n(14168),x=n.n(k),S=n(87363),E=n(36695),I=n(93206),T=n(69383),N=n(43384),A=n(59189),B=n(21060),R=n(36480),P=n(20072),z=n(67516),L=n.n(z),M=n(1785),D=n(45842),U=n(31857),O=n(74128),F=n(38889),q=n(64194),V=n(4627),H="TopicSelect",X=function(e){(0,c._)(n,e);var t=(0,h._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{topics:[],actived:!1}),(0,l._)((0,r._)(e),"handleChange",function(t){(0,e.props.onChange)(t),e.setState(function(e){return(0,u._)((0,s._)({},e),{actived:!1,topics:t})})}),(0,l._)((0,r._)(e),"deactived",function(){e.setState({actived:!1})}),(0,l._)((0,r._)(e),"toggleActived",function(){e.setState(function(e){return(0,u._)((0,s._)({},e),{actived:!e.actived})})}),(0,l._)((0,r._)(e),"focus",function(){return e.topicsInput&&e.topicsInput.focus()}),e}return(0,a._)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,o=t.actived;return(0,f.tZ)("div",{className:H,children:(0,f.tZ)(V.Z,{actived:o,placeholderNote:" ",max:1,inputProps:{className:"".concat(H,"-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(S.Component),G=function(e){(0,c._)(n,e);var t=(0,h._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{topics:[]}),(0,l._)((0,r._)(e),"handleChangeTopics",function(t){e.setState(function(e){return(0,u._)((0,s._)({},e),{topics:t})})}),(0,l._)((0,r._)(e),"handleSubmit",function(){var t=e.state,n=(0,p._)(t.topics,1)[0].urlToken;(0,e.props.onSubmit)(n)}),e}return(0,a._)(n,[{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,o=e.currentUser,r=e.title,i=e.url,a=e.onClose,l=e.content,c=e.visible;return(0,f.tZ)(O.Z,{onClose:a,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:c&&(0,f.BX)(S.Fragment,{children:[(0,f.tZ)(q.Z,{type:t,author:n,member:o,title:r,url:i,content:l,theme:"scroll"}),(0,f.tZ)(X,{onChange:this.handleChangeTopics}),(0,f.tZ)("div",{className:"AbstractForm-footer",children:(0,f.tZ)(F.ZP,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}}]),n}(S.Component);(0,l._)(G,"propTypes",{type:x().string.isRequired,author:x().object,currentUser:x().object,title:x().string.isRequired,content:x().string.isRequired,url:x().string.isRequired,visible:x().bool.isRequired,onClose:x().func.isRequired,onSubmit:x().func.isRequired});var K=n(21706),j=function(e){(0,c._)(n,e);var t=(0,h._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,a._)(n,[{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,o=e.onSelect,r=e.content,i=this.hintInfo,a=i&&"danger"===i.type;return(0,f.BX)("div",{className:y()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:a,children:[(0,f.tZ)("span",{className:"SharePopover-arrow"}),(0,f.BX)("div",{role:"button",tabIndex:0,className:y()("SharePopover-content",{"SharePopover-content--danger":a}),onClick:function(){a||o(r)},children:[(0,f.tZ)(K.vZ,{className:"SharePopover-quote",size:24}),(0,f.tZ)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),i&&(0,f.tZ)("span",{className:"SharePopover-hint",children:i.text})]})]})}}]),n}(S.Component);(0,l._)(j,"propTypes",{content:x().string,top:x().number,visible:x().bool});var W=n(9338),Y=n(30971),Q=function(e,t,n){var o,r=(o=(0,W._)(function(o){var r;return(0,Y.__generator)(this,function(i){switch(i.label){case 0:return[4,new Promise(function(e){setTimeout(function(){e((document.selection?document.selection.createRange().text:document.getSelection()).toString())},0)})];case 1:return(r=i.sent())?t(r,o.target===e?o.offsetY:o.offsetY+e.offsetTop+o.target.offsetTop+30):n(),[2]}})}),function(e){return o.apply(this,arguments)});return null==e||e.addEventListener("mouseup",r),function(){return null==e?void 0:e.removeEventListener("mouseup",r)}},$=function(e){(0,c._)(n,e);var t=(0,h._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",{popoverVisible:!1,top:0,content:"",abstractModalVisible:!1}),(0,l._)((0,r._)(e),"handlePopoverShow",function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;T.Z.trackCardShow(null,{id:6115}),e.setState(function(e){return(0,u._)((0,s._)({},e),{top:n,content:t,popoverVisible:!0})})}),(0,l._)((0,r._)(e),"handlePopoverClose",function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState(function(e){return(0,u._)((0,s._)({},e),{popoverVisible:!1})})}),(0,l._)((0,r._)(e),"handleAbstractModalClose",function(){e.setState(function(e){return(0,u._)((0,s._)({},e),{abstractModalVisible:!1})})}),(0,l._)((0,r._)(e),"handleAbstractSelected",function(t){T.Z.trackEvent(null,{id:6116,action:"Send"}),e.setState(function(e){return(0,u._)((0,s._)({},e),{content:t,popoverVisible:!1,abstractModalVisible:!0})})}),(0,l._)((0,r._)(e),"handleCreateAbstract",function(t){var n=e.props,o=n.type,r=n.objectId,i=n.createAbstract,a=e.state.content;T.Z.trackEvent(null,{id:6117,action:"Submit"}),i({type:o,token:r,topicId:t,content:a}).then(function(){e.setState(function(e){return(0,u._)((0,s._)({},e),{content:a,popoverVisible:!1,abstractModalVisible:!1})})})}),e}return(0,a._)(n,[{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return(0,M.Z)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"userDisabled",get:function(){return L().get("global::AddToBaikeDisabled")}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}},{key:"componentDidMount",value:function(){this.removeMouseUpListener=Q(this.richContainer,this.handlePopoverShow,this.handlePopoverClose)}},{key:"componentWillUnmount",value:function(){this.removeMouseUpListener()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,o=e.content,r=e.abstractModalVisible,i=this.props,a=i.type,l=i.author,c=i.currentUser,s=i.title,u=i.url,d=i.isCopyable;return!this.hasAddBaikeSummaryPermission||this.userDisabled?null:(0,f.BX)(S.Fragment,{children:[(0,f.tZ)(j,{top:n,visible:t,content:o,isCopyable:this.isAuthor||d,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),(0,f.tZ)(G,{type:a,onSubmit:this.handleCreateAbstract,author:l,visible:r,onClose:this.handleAbstractModalClose,currentUser:c,title:s,url:u,content:o})]})}}]),n}(S.Component);(0,l._)($,"propTypes",{type:x().string.isRequired,author:x().object.isRequired,currentUser:x().object,title:x().string.isRequired,url:x().string.isRequired,objectId:x().number.isRequired,isCopyable:x().bool}),(0,l._)($,"defaultProps",{isCopyable:!0});var J=(0,I.compose)(D.Z,(0,E.connect)(null,{createAbstract:U.sF}))($),ee=n(8858),et=n(30361),en=n(62317),eo=n(58909),er=n(6715),ei=function(e){(0,c._)(n,e);var t=(0,h._)(n);function n(){var e;return(0,i._)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind((0,r._)(e)),e.handleCopy=e.handleCopy.bind((0,r._)(e)),e.handleTipClose=e.handleTipClose.bind((0,r._)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return(0,a._)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var o=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],r=["",""];return n?o.concat(r):r.concat(o)}},{key:"getCopyText",value:function(e,t,n,o){var r=this.getExtraCopyright(t,n,o).join("\n");return o?r+e:e+r}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,o){var r=this.getExtraCopyright(t,n,o).join("<br />"),i=o?r+e:e+r;return"<div>".concat(i,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var o=window.getSelection(),r=this.getRange(o),i=r.toString().trim(),a=this.getRangeHtml(r);if(i&&!(i.length<128)){var l=i.length>=512,c=this.getCopyHtml(a,t,n,l),s=this.getCopyText(i,t,n,l),u=e.nativeEvent.clipboardData;if("object"==typeof u&&(u.setData("text/html",'<meta charset="utf-8">'+c),u.setData("text/plain",s),u.getData("text/plain")&&u.getData("text/plain").length>0)){e.preventDefault();return}var d=document.createElement("div");d.innerHTML=c;var p=d.firstChild;p.style.position="fixed",p.style.left="-9999px",document.body.appendChild(p),o.selectAllChildren(p),setTimeout(function(){document.body.removeChild(p),o.removeAllRanges(),o.addRange(r)},200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n,o=window.getSelection(),r=this.getRange(o),i=r.toString().trim(),a=this.randomRange(44,66);if(!(i.length<=a)){e.preventDefault(),e.stopPropagation();var l=r.getBoundingClientRect(),c=window.pageYOffset,s=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)n=u+3;else{var p=this.props.viewPort,h=l.top+c,f=l.bottom+c,m=c+p.top+52,v=c+p.bottom-52;f<m?n=m-52:f<v?n=f:(d="top",n=h>m&&h<v?h:v+52)}var g=-1!==s?s+3:l.left+(l.right-l.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:g,tipY:n,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,o=n.author,r=n.type,i=n.id,a=n.question,l=n.reshipmentSettings,c=n.relationship,s=void 0===c?{}:c,u=s.isAuthor,d=s.isAuthorized,p=t.isCurrentUser,h="";if("article"===r?h="https://zhuanlan.zhihu.com/p/".concat(i):"answer"===r&&(h="https://www.zhihu.com/question/".concat(a.id,"/answer/").concat(i)),!p&&!u)switch(l){case"disallowed":this.showTip(e,(0,f.tZ)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(d)this.showTip(e,"已获授权，复制成功");else{this.showTip(e,(0,f.tZ)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(i),children:"申请转载"}));break}default:this.addCopyright(e,h,o.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,o=e.tag,r=e.html,i=e.children,a=e.onClick,l=e.className,c=e.itemProp,s=e.style,u=e.prefix,d=e.ecommerce,p=e.shouldShowCatalog,h=e.shouldCatalogCollapse,m=e.richContentKey,v=e.isCurrentUser,g=e.isNovel,b=e.isExpanded,C=e.entityWords,Z=e.isVideoAnswer,y=this.state,_=y.tipShown,w=y.tipContent,k=y.tipX,x=y.tipY,S=y.tipPosition;return(0,f.BX)("div",{ref:t,onClick:a,className:l,style:s,children:[u,(0,f.tZ)(er.Z,{entityWords:C,richContentKey:m,sourceId:n.id,sourceType:n.type,paidInfo:n.paidInfo,itemProp:c,tag:o,html:r,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:d,shouldShowCatalog:p,useCatalogV2:!0,isAuthor:v,isNovel:g,isExpanded:b,shouldCatalogCollapse:h,isVideoAnswer:Z}),i,(0,f.tZ)(en.Z,{shown:_,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:k,y:x,position:S,content:w,className:"CopyrightRichText-tooltip"})]})}}]),n}(S.Component);ei.propTypes={onRef:x().func,viewPort:x().object};var ea=(0,I.compose)((0,E.connect)(function(e,t){return{isCurrentUser:(0,eo.pG)(e,t.data.author)}}))(ei),el=n(36225),ec=n(83215),es=n(80714),eu=n(59937),ed=n(7407),ep=n(35586),eh=function(){var e=(0,N.x3)({action:"ReadFinished",elementLocation:{type:"Text",text:"阅读完成",block:{blockText:"阅读完成"},moduleId:"universal_single_card"}});return(0,f.tZ)("span",{ref:e})},ef=n(66011),em=n(6080),ev=n(2930),eg=n(84871),eb=n.n(eg),eC=n(16850),eZ=n(89774),ey=(0,I.compose)((o={biz_tag:"ContentItem"},function(e){return eb()(function(t){return(0,f.tZ)(ef.BM,{query:o,children:(0,f.tZ)(e,(0,s._)({},t))})},e)}))(function(e){var t=e.url,n=e.hasVideo,o=e.duration,r=e.isVideoAnswer,i=e.onCoverImageLoad,a=e.useImageX,l=(0,d._)(e,["url","hasVideo","duration","isVideoAnswer","onCoverImageLoad","useImageX"]),c=(0,eC.Z)(),p=(0,eZ.Z)(),h="1"===(0,em.c)("contentItem_cover_imagex",{mock:"1"}),m=!c&&a&&(h||p);return(0,f.BX)("div",(0,u._)((0,s._)({className:y()("RichContent-cover",{"RichContent-cover--mobile":es.Z.isMobileEntry})},l),{children:[(0,f.BX)("div",{className:y()("RichContent-cover-inner",{"RichContent-cover--normal":!m}),children:[m?(0,f.tZ)(ef.MQ,{src:t,width:"190px",height:"105px",alt:"cover",layout:"fill",onLoad:i,objectFit:"cover"}):(0,f.tZ)(ef.Nm,{src:t,width:190,height:105,alt:"cover",onLoad:i}),o&&(0,f.tZ)("div",{className:"RichContent-cover-mask"}),o&&(0,f.tZ)("div",{className:"RichContent-cover-duration",children:o})]}),r&&(0,f.tZ)(ef.Nm,{alt:"",width:64,height:18,css:{position:"absolute",left:0,top:0,objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&(0,f.tZ)(ev.o,{className:"RichContent-cover-play"})]}))}),e_=n(79065),ew=n(82806),ek=n.n(ew),ex=n(19076),eS=n(30722),eE=n(44169);function eI(){var e=(0,e_._)(["发布于",""]);return eI=function(){return e},e}function eT(){var e=(0,e_._)(["发布于",""]);return eT=function(){return e},e}function eN(){var e=(0,e_._)(["编辑于",""]);return eN=function(){return e},e}function eA(){var e=(0,e_._)(["发布于",""]);return eA=function(){return e},e}function eB(){var e=(0,e_._)(["・",""]);return eB=function(){return e},e}var eR=function(e){(0,c._)(n,e);var t=(0,h._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,a._)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,o=e.updated,r=e.onClick,i=e.videoPlayCount,a=e.ipInfo;return(0,f.BX)("div",{className:"ContentItem-time",children:[(0,f.tZ)(ex.Link,{to:t,target:es.Z.isMobileEntry?"":"_blank",onClick:r,children:(0,f.tZ)("span",{"data-tooltip":ek()(eI(),(0,eE.KZ)(n)),"aria-label":ek()(eT(),(0,eE.KZ)(n)),children:o!==n?ek()(eN(),(0,eE.KZ)(o)):ek()(eA(),(0,eE.KZ)(n))})}),!!a&&ek()(eB(),a),!!i&&(0,f.BX)("span",{css:{marginTop:10,marginLeft:5},children:["\xb7 ",(0,eS.Zh)(i),"次播放"]})]})}}]),n}(S.Component);(0,l._)(eR,"propTypes",{href:x().string,created:x().number,updated:x().number,videoPlayCount:x().number,onClick:x().func,ipInfo:x().string});var eP=eR,ez=new Set([106713022,429615779,435773734,426291898,250310031,414291487,409115369,446861209,247003387,73377905,254989758,35134669,36249462,435345603,182387634,140256060,437667891,153624684,47216571,1009993776,1166287748,150785754,573667246,345093461,2051581556,423418617,24921526,427937981,119180585,442812865,175851487,285113967,807213480,415830436,125852644,399866520,269912473,736404714,630788898,217627201,32718846,233425911,1965977070,1703482555,425876259,376921084,477237451,430849009,409175983,395659900,404407636,33593650,29355234,45519587,477365726,407347055,128506044,324992390,391677046,399503822,540487048,514491508,340627548,433773279,125028091,126685323,1073936835,128655569,1782124590,431426144,198577418,449399100,2074550774,342658316,429187404,275411797,121202894,356603699,211168793,1182049284,88545788,435377412,142918293,112180819,107952366,394146559,239506554,243404812,967162682,416311991,108937963,503648342,37744326,338336040,742041726,2142758456,13098904,435935045,181579258,17350640]),eL=/.*?(class="link-box")/,eM=function(e){var t=e.children,n=e.onChange,o=(0,d._)(e,["children","onChange"]),r=(0,p._)((0,v.Z)(o),2),i=r[0],a=r[1],l=(0,g.Z)(n);return(0,S.useEffect)(function(){l(a)},[l,a]),(0,f.tZ)("span",{ref:i,children:t})},eD=function(e){(0,c._)(n,e);var t=(0,h._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),(0,l._)((0,r._)(e),"state",(0,u._)((0,s._)({},e.getInitTruncatedState(e.props)),{shouldSticky:!1,offset:0,prevImgUrls:[]})),(0,l._)((0,r._)(e),"richContentRef",(0,S.createRef)()),(0,l._)((0,r._)(e),"zaRef",(0,S.createRef)()),(0,l._)((0,r._)(e),"truncateContent",function(){var t=e.props,n=t.isMobile,o=t.onToggleExpend,r=e.props.expandedHeight||(n?400:800);(!e.content||e.content.scrollHeight<r)&&(e.setState({isTruncated:!1,isExpanded:!1}),null==o||o(!1,{trackUserAction:!1})),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})}),(0,l._)((0,r._)(e),"updateStateInBrowser",function(){var t=e.props,n=t.excerpt,o=t.allowCollapseWithEmptyExcerpt,r=t.html,i=t.expanded,a=t.cover,l=t.unescapable,c=t.limit,s=t.limitWithImage,u=t.truncateHTMLOptions,d=t.truncateDisabled,p=!0,h=e.state.truncatedContent;if((n||o)&&(eL.test(n)||d))h=n;else if(!l){var f=e.truncate(r,a?s:c,u);p=f.isTruncated,h=f.content}return{isTruncated:p,isExpanded:r&&i,truncatedContent:h,previewImg:null}}),(0,l._)((0,r._)(e),"checkOpenInAppStyle",function(e){if(es.Z.isMobileEntry){var t=document.querySelector(".OpenInApp");t&&(e?t.classList.add("is-higher"):t.classList.remove("is-higher"))}}),(0,l._)((0,r._)(e),"toggle",function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)}),(0,l._)((0,r._)(e),"trackExpand",function(t){var n=e.props.expandButtonZaType,o=t?"阅读全文":"收起阅读全文";e.zaRef.current.trackEvent({eventType:"Click",action:t?"Expand":"Collapse",elementLocation:{type:n||"Card",text:o,moduleId:"read_full_text_button"},block:o})}),(0,l._)((0,r._)(e),"handleExpand",function(t){var n,o,r,i,a,l=e.props.zaIds.expand;(null==t?void 0:t.target)&&((null==(r=t.target.textContent)?void 0:r.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(r=null),ez.has(null===(n=e.props)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.id)&&b.ZP.increment("RichContent.Expand.afterZALog.".concat(r||"default",".").concat(l||"default",".").concat(null===(i=e.props)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.id,".count"));var c=e.props.onExpand;if(c){c(t);return}var s=e.props,u=s.onToggleExpend,d=s.data,p=d.type,h=d.id;s.currentUser&&(0,eu.ZP)("article"===p?"post":p,h,eu._x),u&&(u(!0),e.trackExpand(!0)),e.setState({isExpanded:!0},function(){"article"===p&&(0,P.y3)(e.richContentRef.current,function(){T.Z.trackEvent(e.richContentRef.current,{action:"ReadFinish"})})})}),(0,l._)((0,r._)(e),"handleCollapse",function(){var t=e.props.onToggleExpend;T.Z.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"}),t&&(t(!1),e.trackExpand(!1)),e.setState({isExpanded:!1},function(){return e.checkOpenInAppStyle(!1)})}),(0,l._)((0,r._)(e),"handlePreview",function(t){var n,o,r=e.props,i=r.ua,a=r.isMobile,l=e.state,c=l.isExpanded,s=l.isTruncated,u=l.prevImgUrls,d=t.target;!(s&&!c)&&"IMG"===d.tagName&&(d.classList.contains("zh-lightbox-thumb")||d.classList.contains("Slideshow-swiperImage"))&&(a&&i.MQQBrowser&&(null===(n=window.browser)||void 0===n?void 0:null===(o=n.app)||void 0===o?void 0:o.openPhotoBrowser)?setTimeout(function(){window.browser.app.openPhotoBrowser(u,w()(u,function(e){return e===d.dataset.original}),0)},0):e.setState({previewImg:d}))}),(0,l._)((0,r._)(e),"handlePositionStatusChange",function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))}),(0,l._)((0,r._)(e),"handleBodyInViewChange",function(t){t!==e.state.shouldSticky&&(e.setState({shouldSticky:t}),t||e.checkOpenInAppStyle(!1))}),(0,l._)((0,r._)(e),"handleTrunObserve",function(t){var n=e.props,o=n.data,r=o.type,i=o.id,a=n.updateReadStatus,l=n.html,c=t[0],s=c.intersectionRatio,u=c.isIntersecting;!es.Z.isMobileEntry||"answer"!==r||e.isReadMarked||e.isCollapsed()||((0,P.y3)(e.richContentRef.current,function(){a({type:r,id:i},!0)}),e.isReadMarked=!0),!e.truncateComputed&&(s>0||u||!l)&&(setTimeout(function(){return e.truncateContent()}),e.truncateComputed=!0)}),(0,l._)((0,r._)(e),"isCollapsed",function(){var t=e.props,n=t.after,o=t.before,r=t.unescapable,i=e.state,a=i.isExpanded,l=i.isTruncated;return(o||n)&&!r?!a:l&&!a}),e}return(0,a._)(n,[{key:"abstractProps",get:function(){var e=this.props.data,t=e.id,n=e.type,o=e.author,r=e.question;return{objectId:t,type:n,author:o,title:(void 0===r?{}:r).title,url:e.url,isCopyable:e.isCopyable}}},{key:"componentDidMount",value:function(){var e=this;this.setState((0,u._)((0,s._)({},this.updateStateInBrowser()),{viewPort:{top:148,bottom:window.innerHeight-56}}),function(){var t,n;null===(n=(t=e.props).onToggleExpend)||void 0===n||n.call(t,e.state.isExpanded,{trackUserAction:!1})}),(0,P.y3)(this.richContentRef.current,function(){var t=e.props,n=t.data,o=n.type,r=n.id,i=t.expanded;t.currentUser&&i&&(0,eu.ZP)("article"===o?"post":o,r,eu._x)}),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){var n=e.ua,o=e.html,r=e.isMobile;if(this.state.isExpanded&&!t.isExpanded){var i=this.richContentRef.current.getBoundingClientRect();i.top<this.props.topExcludedHeight&&(this.rect=i,this.scroll=window.pageYOffset)}r&&!this.state.isExpanded&&t.isExpanded&&n.MQQBrowser&&this.setState({prevImgUrls:function(e){for(var t,n=e.replace(/(<noscript>).*?(<\/noscript>)/g,""),o=[],r=/<\s*img.*?>/g,i=/(zh-lightbox-thumb)|(Slideshow-swiperImage)/,a=/(data-original=").*?"/,l=null;l=null===(t=r.exec(n))||void 0===t?void 0:t[0];)if(i.test(l)){var c=a.exec(l);c&&o.push(c[0].split("data-original=")[1].replace(/"|\\/g,""))}return o}(o)})}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,o=n.top,r=n.bottom,i=n.height,a=this.richContentRef.current.offsetHeight,l=window.innerHeight;window.scrollTo(0,this.scroll+(r<l?a-i:o-(l-a))),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,o=e.expanded,r=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:o,truncatedContent:r?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var o=(0,R.tK)(e,t,n);return{isTruncated:o.isTruncated,content:o.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,o=t.unescapable,r=t.noCollapsed,i=t.expandText,a=t.onClick,l=t.videoData,c=t.needExpandArrow,s=t.forceSticky,u=t.noRenderActions,d=this.state,p=d.isExpanded,h=d.isTruncated,m=d.shouldSticky,v=d.offset;if(!p)return[o&&h&&!l&&(0,f.BX)(F.ZP,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:a||this.handleExpand,children:[void 0===i?"展开阅读全文":i,(void 0===c||c)&&(0,f.tZ)(C.f,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),!u&&n&&(0,f.tZ)(et.eX,{children:n},"actions")];var g=!u&&(n||!r)&&(0,f.BX)(et.eX,{className:"RichContent-actions",children:[n,!r&&(0,f.BX)(F.ZP,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[(0,f.tZ)("span",{className:"RichContent-collapsedText",children:"收起"}),(0,f.tZ)(C.f,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return(s||m)&&g?(0,f.tZ)(B.Z,{offset:v,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:g}):g}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,o=t.excerpt,r=t.data,i=t.itemProp,a=t.expandText,l=t.onClick,c=t.prefix,d=t.unescapable,p=t.isSearchContent,h=t.collapsedHeight,v=t.ecommerce,g=t.canAbstract,b=t.richContentKey,Z=t.shouldCatalogCollapse,_=t.isNovel,w=t.entityWords,k=t.isVideoAnswer,x=this.state,S=x.truncatedContent,E=x.previewImg,I=x.viewPort,T=x.contentCollapsed,N=x.isExpanded,B=this.isCollapsed(),R=B?S||o:n,P=p&&es.Z.isMobileEntry?{onClick:l}:{},z=(0,f.BX)(ea,(0,u._)((0,s._)({entityWords:w,richContentKey:b&&String([b,B]),itemProp:void 0===i?"text":i,className:y()("RichContent-inner",{"RichContent-inner--collapsed":T}),style:B&&d?{maxHeight:h}:null,tag:"span",onRef:function(t){e.content=t},isExpanded:N,data:r,html:R,viewPort:I,prefix:c},B&&{onClick:l||this.handleExpand},P),{ecommerce:v,shouldCatalogCollapse:Z,shouldShowCatalog:(0,ee.Z)(r)&&(N||d&&!B),isNovel:_,isVideoAnswer:k,children:[g&&(0,f.tZ)(J,(0,s._)({},this.abstractProps)),!d&&B&&(0,f.BX)(F.ZP,{preset:"plain",className:"ContentItem-more",children:[void 0===a?"阅读全文":a,(0,f.tZ)(C.f,{className:"ContentItem-arrowIcon",center:!0})]}),(0,f.tZ)(m.Z,{img:E,onClose:function(){return e.setState({previewImg:null})}})]}),B);return d?(0,f.tZ)(A.Z,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:z}):z}},{key:"render",value:function(){var e=this.props,t=e.unescapable,n=e.after,o=e.before,r=e.extra,i=e.cover,a=e.onCoverImageLoad,l=e.hasVideo,c=e.renderCanExpandExtra,s=e.className,u=e.videoData,d=e.handleClickVideoMoreButton,p=e.duration,h=e.isVideoAnswer,m=this.state.isExpanded,v=this.isCollapsed(),g=u?(0,f.BX)(f.HY,{children:[(0,f.tZ)(el.Z,{data:u}),(0,f.tZ)("p",{className:"RichContent-videoMore",onClick:d,children:"点击查看全文"})]}):this.renderText(),b=(0,f.tZ)(eM,{rootMargin:"-".concat(240,"px 0px"),onChange:this.handleBodyInViewChange,children:g});return(0,f.BX)("div",{className:y()("RichContent",s,{"is-collapsed":v,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[(0,f.tZ)(N.pS,{ref:this.zaRef}),(0,f.tZ)(ec.bY,{input:"o",action:this.toggle}),!v&&o,!t&&v&&i&&(0,f.tZ)(ey,{url:i,onCoverImageLoad:a,hasVideo:l,onClick:this.handleExpand,duration:p,isVideoAnswer:h,useImageX:!0}),b,r||"function"==typeof c&&c(m,this.handleExpand),!v&&(0,f.BX)(f.HY,{children:[n,(0,f.tZ)(eh,{root:this.richContentRef})]}),this.renderActions()]})}}]),n}(S.Component);(0,l._)(eD,"propTypes",{enableConvert:x().bool,unescapable:x().bool,expanded:x().bool,noCollapsed:x().bool,limit:x().number,limitWithImage:x().number,collapsedHeight:x().number,html:x().string,excerpt:x().string,allowCollapseWithEmptyExcerpt:x().bool,truncateDisabled:x().bool,before:x().node,after:x().node,prefix:x().node,extra:x().node,renderCanExpandExtra:x().func,topExcludedHeight:x().number,onPositionStatusChange:x().func,type:x().string,data:x().object,canAbstract:x().bool,cover:x().string,hasVideo:x().bool,truncateHTMLOptions:x().object,expandText:x().string,onToggleExpend:x().func,videoData:x().object,handleClickVideoMoreButton:x().func,zaIds:x().shape({expand:x().number}),forceSticky:x().bool}),(0,l._)(eD,"defaultProps",{limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{},forceSticky:!1});var eU=(0,I.compose)(D.Z,(0,E.connect)(function(e){return{ua:(0,ed.Uh)(e),isMobile:(0,ed.Hu)(e)}},{updateReadStatus:ep.m3}))(eD)},6715:function(e,t,n){"use strict";n.d(t,{Z:function(){return ta}});var o,r,i=n(55164),a=n(57477),l=n(71728),c=n(94009),s=n(49899),u=n(85879),d=n(83697),p=n(65733),h=n(88329),f=n.n(h),m=n(87363),v=n.n(m),g=n(61533),b=n(87804),C=n(72111),Z=n(24405),y=n(5537),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return'<span data-search-entity="'.concat(t,'">').concat(e,"</span>")},w=function(e,t,n){for(var o=e.length,r=0;r<=o;){if(-1===(r=e.indexOf(t,r))||0==--n)return r;r+=t.length}return -1},k=function(e,t){for(var n=0,o="",r=0,i=0;i<e.length;i++){var a=(0,c._)(e[i],3),l=a[0],s=a[1],u=a[2];s<=r||(o+=t.slice(n,s)+_(l.mention,u),r=n=s+l.mention.length)}return o+t.slice(n)},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return t&&e&&(null==e?void 0:e.length)!==0?k(e.reduce(function(e,n,o){var r=w(t,n.mention,n.matchorder);return -1!==r&&e.push([n,r,o]),e},[]).sort(function(e,t){return e[1]-t[1]}),t):t}},S={0:{icon:function(e){var t=e.size,n=e.className;return(0,u.tZ)("svg",{width:t,height:t,viewBox:"0 0 15 15",className:n,children:(0,u.tZ)("path",{d:"M10.89 9.477l3.06 3.059a1 1 0 0 1-1.414 1.414l-3.06-3.06a6 6 0 1 1 1.414-1.414zM6 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",fill:"currentColor"})})},block:"SearchEntity"},1:{icon:function(e){var t=e.size,n=e.className;return(0,u.tZ)("svg",{width:t,height:t,viewBox:"0 0 10 10",className:n,children:(0,u.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.64422 2.0701C5.43934 2.02495 5.22835 2.00107 5.01435 2.00024L5.01881 1C6.77895 1.00679 8.38723 2.18375 8.8647 3.96569C8.96467 4.33879 9.00845 4.71371 9.00122 5.08146L8.00058 5.08592C8.00545 4.91135 7.99501 4.73455 7.96827 4.55722C7.92244 4.24814 7.82948 3.95442 7.69691 3.68362C7.48242 3.24345 7.16768 2.87255 6.78903 2.59189C6.45425 2.34299 6.06581 2.16222 5.64422 2.0701ZM1.13729 6.03624C0.659821 4.2543 1.46415 2.43088 2.98508 1.54493L3.48906 2.40894C3.17129 2.59405 2.89522 2.83372 2.67003 3.11208C2.36422 3.48898 2.14798 3.94151 2.05373 4.43727C1.99759 4.72965 1.98457 5.0335 2.0198 5.33994C2.06383 5.73147 2.18322 6.10019 2.36312 6.43126C2.40015 6.49969 2.43967 6.56631 2.48152 6.63103L1.61207 7.12786C1.40517 6.79796 1.24334 6.43202 1.13729 6.03624ZM2.90011 8.40484L3.39642 7.53631C3.69079 7.72299 4.0199 7.85981 4.37186 7.9349C4.70489 8.0066 5.05386 8.02217 5.40538 7.97391C5.73677 7.92924 6.051 7.83047 6.33889 7.68677C6.78065 7.46729 7.15162 7.14642 7.43027 6.76141C7.55152 6.59389 7.65528 6.41424 7.7398 6.22551L8.60733 6.73154C8.11978 7.74635 7.20905 8.55042 6.03627 8.86467C4.92852 9.16149 3.80474 8.96295 2.90011 8.40484ZM4.08193 5.92023C3.83814 5.67643 3.70117 5.34577 3.70117 5.00099C3.70117 4.65621 3.83814 4.32555 4.08193 4.08175C4.32573 3.83795 4.65639 3.70099 5.00117 3.70099C5.34595 3.70099 5.67661 3.83795 5.92041 4.08175C6.16421 4.32555 6.30117 4.65621 6.30117 5.00099C6.30117 5.34577 6.16421 5.67643 5.92041 5.92023C5.67661 6.16402 5.34595 6.30099 5.00117 6.30099C4.65639 6.30099 4.32573 6.16402 4.08193 5.92023Z",fill:"currentColor"})})},block:"KnowledgeEntity"},9:{icon:y.Z,block:"EbookEntity"}},E=function(e,t,n){var o=new URLSearchParams({q:e,search_source:"Entity",hybrid_search_source:"Entity",hybrid_search_extra:JSON.stringify({sourceType:t,sourceId:n})});return"https://www.zhihu.com/search?".concat(o.toString().replace(/\+/g,"%20"))},I=function(e,t,n,o,r){var i=0===t.linkType?"/search/".concat(encodeURIComponent(e)):"/knowledge/".concat(t.topicToken),a=new URLSearchParams({sourceType:n,sourceId:o}),l="https://www.zhihu.com/appview/entity-word".concat(i,"?").concat(a.toString()),c=new URLSearchParams({url:l,show_header:"false",show_drag:"true",enable_close:"true",min_percent:"1",title:e,enable_drag:String(!!r.iOS)});return(0,b.Z)("base/openURL").dispatch({url:"zhihu://popup_container?".concat(c.toString().replace(/\+/g,"%20"))}),l},T=function(e){var t=e.word,n=e.sourceType,o=e.sourceId,r=e.link,i=void 0===r?{linkType:0,linkUrl:"",topicToken:""}:r,a=e.attachedInfoBytes,l=e.onClick,c=(0,Z.F)().colors,s=(0,d.n)(),h=s.Zhihu||s.ZhihuHybrid,f=0===i.linkType,v=1===i.linkType,g=h&&v,b=(0,m.useMemo)(function(){return f?E(t,n,o):i.linkUrl},[i,t,n,o]),y=(0,p.Z)(function(e){g&&(e.preventDefault(),I(t,i,n,o,s)),l(e,i,b)}),_=S[i.linkType],w=_.icon,k=_.block;return(0,u.BX)(C.pl,{className:"RichContent-EntityWord",as:h?"span":"a",shouldTrackShow:!0,zaText:t,zaBlock:k,extra:{attachedInfoBytes:a},"data-za-not-track-link":!0,"data-paste-text":!0,css:{color:c.GBL07A,textDecoration:"none",cursor:"pointer",":active":{padding:"3.5px 0",backgroundColor:c.GBK09A,borderRadius:"4px"}},href:b,target:"_blank",onClick:y,children:[t,(0,u.tZ)(w,{size:"10px",css:{position:"relative",verticalAlign:"top",top:"4px"}})]})},N=[9,1,0],A=function(e,t){if(!e.length)return{};var n=e.reduce(function(e,n,o){var r=((null==n?void 0:n.link)||{}).linkType,i=void 0===r?0:r;return(t||0===i)&&(e[i]=e[i]||{},e[i][o]=n),e},{}),o={};return N.some(function(e){return!!n[e]&&(o=n[e],!0)}),o},B=function(e){var t=Array.from(document.querySelectorAll("span[data-search-entity]"));return t.length?t.reduce(function(t,n){var o,r=n.getAttribute("data-search-entity");if(!e[r])return t;var i=e[r],a=i.mention,l=i.link,c=i.attachedInfoBytes,s=document.createElement("span");return null===(o=n.parentNode)||void 0===o||o.replaceChild(s,n),t.push({data:{word:a,link:l,attachedInfoBytes:c},target:s}),t},[]):[]},R=function(e,t){var n=t.type,o=t.sourceId,r=t.entityWords,a=t.onClick,l=void 0===a?f():a,s=(0,d.n)(),h=s.Zhihu||s.ZhihuHybrid,v=(0,c._)((0,m.useState)(null),2),b=v[0],C=v[1],Z=(0,p.Z)(l);return(0,m.useEffect)(function(){e&&r&&C(B(A(r,h)).map(function(t,r){var a=t.data,l=t.target;return e.contains(l)?(0,g.createPortal)((0,u.tZ)(T,(0,i._)({sourceType:n,sourceId:o,onClick:Z},a),r),l):null}))},[e]),b},P=n(41402),z=function(e){if(!e)return"";var t=e.font;if(!t||!t.base64)return"";var n="\n        @font-face {\n            font-family: 'DynamicFonts".concat(t.fontType,"';\n            font-display: 'swap';\n            font-weight: normal;\n            src: url(").concat(t.base64,");\n        }\n    "),o=t.boldBase64?"\n        @font-face {\n            font-family: 'DynamicFonts".concat(t.fontType,"';\n            font-display: 'swap';\n            font-weight: bold;\n            src: url(").concat(t.boldBase64,");\n        }\n    "):"",r="\n        font-family: 'DynamicFonts".concat(t.fontType,"', -apple-system, BlinkMacSystemFont,\n        'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei',\n        'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei',\n        sans-serif;\n    ");return"\n        ".concat(n,"\n        ").concat(o,"\n        ").concat(r,"\n    ")},L=n(93206),M=n(31252),D=n(76435),U=n(3331),O=n(17103),F=n(64099),q=n(14168),V=n.n(q),H=n(29229),X=n(82083);function G(e){var t=e.id,o=e.parentType,r=e.parentId,i=e.suger,a=e.data,l=e.isEditor,c=void 0!==l&&l,s=(0,H.Z)(function(){return Promise.all([n.e(6229),n.e(8400),n.e(7848)]).then(n.bind(n,43221))},t),u=(0,H.Z)(function(){return n.e(3026).then(n.bind(n,16826))},t);return t.startsWith("fee_")&&u?(0,X.jsx)(u,{id:t,isEditor:c}):s?(0,X.jsx)(s,{id:t,parentType:o,urlToken:r,suger:i,data:a,isEditor:c}):null}G.propTypes={id:V().string.isRequired,parentType:V().oneOf(["answer","article"]),parentId:V().string,suger:V().object,data:V().object,isEditor:V().bool};var K=(0,F.EN)({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:G}),j=n(26257),W=n(37831),Y=n(25628),Q=n.n(Y),$=n(30722),J=n(80565),ee=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];function et(e){var t,n,o=e.className,r=e.isDirectory,i=e.extension,a=(n=void 0!==r&&r?"folder":(t=ee.find(function(e){return e.extensionList.includes(i)}))?t.type:"other","https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(n,".svg"));return(0,X.jsx)("img",{className:Q()("FileExtensionIcon",o),src:a})}var en={baidu:"百度网盘"};function eo(e){var t=e.component,n=void 0===t?"a":t,o=e.className,r=e.href,i=e.type,a=e.name,l=e.extension,c=e.size,s=e.source,u=e.onRef,d=e.onClick,p=e.onMouseDown,h=Number(c);return(0,X.jsxs)(n,{className:Q()("FileLinkCard",o),href:r,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:u,onClick:d,onMouseDown:p,children:[(0,X.jsx)(et,{className:"FileLinkCard-icon",isDirectory:"directory"===(void 0===i?"file":i),extension:l}),(0,X.jsxs)("div",{className:"FileLinkCard-info",children:[(0,X.jsx)("div",{className:"FileLinkCard-name",children:a}),(0,X.jsxs)("div",{className:"FileLinkCard-meta",children:[!!h&&(0,X.jsx)("div",{className:"FileLinkCard-size",children:(0,$.qL)(h)}),!!h&&s&&(0,X.jsx)(m.Fragment,{children:" \xb7 "}),s&&(0,X.jsx)("div",{className:"FileLinkCard-source",children:en[s]||s})]})]})]})}var er=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,ei=function(e){return e?e.replace(er,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=(0,F.fN)(t,{decodeValue:!0}),r=o.href,i=o["data-file-type"],a=o["data-file-extension"],l=o["data-file-size"],c=o["data-file-source"],s=(0,F.p1)(n);return(0,W.renderToStaticMarkup)((0,X.jsx)(eo,{href:void 0===r?"":r,name:s,type:i,extension:a,size:l,source:c}))}):e},ea=n(60927),el=n(87320),ec=n(87641),es=n(75798),eu=n(26115),ed=n(43384),ep=n(88423),eh="https://pic1.zhimg.com/v2-cf70d0759d787c70091857151c1cad4a.jpeg",ef="@supports (backdrop-filterX: blur(0px))",em={"img[data-uncomfortable]":{content:"url(".concat((o=194*(16/9),r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(o," ").concat(194,'">')+'<foreignObject width="'.concat(o,'" height="').concat(194,'">\n      <div xmlns="http://www.w3.org/1999/xhtml" style="font-size: 13px; font-family: -apple-system, BlinkMacSystemFont, Microsoft YaHei, sans-serif; color: #fff; width:100%; height:').concat(194,'px;">\n        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">\n          ').concat('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="currentColor"><path d="M8 3.65a7 7 0 00-1.353.128.65.65 0 11-.25-1.275A8.3 8.3 0 018 2.35c2.387 0 4.172.954 5.357 2.125C14.511 5.615 15.15 7.022 15.15 8c0 .621-.257 1.391-.699 2.134a7.076 7.076 0 01-1.403 1.68l.495.46a.65.65 0 11-.886.951l-.998-.929a.645.645 0 01-.104-.097L9.73 10.501a.647.647 0 01-.29.301 3.15 3.15 0 01-4.313-4.094.647.647 0 01.234-.275L3.908 5.08a5.774 5.774 0 00-1.283 1.522C2.282 7.198 2.15 7.707 2.15 8c0 .522.41 1.616 1.407 2.6.965.954 2.43 1.75 4.443 1.75.468 0 .905-.043 1.311-.12a.65.65 0 01.243 1.277A8.322 8.322 0 018 13.65c-2.387 0-4.172-.954-5.357-2.125C1.49 10.385.85 8.978.85 8c0-.598.238-1.333.648-2.046A7.054 7.054 0 012.95 4.188l-.547-.509a.65.65 0 11.886-.951l8.8 8.194a5.793 5.793 0 001.244-1.453c.372-.624.516-1.163.516-1.469 0-.522-.41-1.616-1.407-2.6-.965-.954-2.43-1.75-4.443-1.75zM6.29 7.296a1.85 1.85 0 002.534 2.36l-2.535-2.36zM8 4.85a.65.65 0 100 1.3 1.85 1.85 0 011.843 1.694.65.65 0 101.296-.11A3.15 3.15 0 008 4.85z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>','\n          <div style="margin: .6em 0 1.2em">该图片有可能会引起不适</div>\n          <button style="padding: 4px 1em; font-size: 1.1em; color: inherit; background: none; border: 1px solid rgba(255,255,255,.5); border-radius: 9999px;">继续查看</button>\n        </div>\n      </div>\n    </foreignObject>')+"</svg>","data:image/svg+xml,".concat(encodeURIComponent(r).replace(/\(/g,"%28").replace(/\)/g,"%29"))),")"),width:"100%",height:194,background:"url(".concat(eh,") no-repeat rgba(191, 191, 191, 0.7)"),backgroundSize:"cover",cursor:"pointer!important"}},ev=function(e){var t=e.node,n=e.onClick,o=t.dataset.original||t.dataset.thumbnail,r=(0,c._)((0,es.Z)({once:!0,rootMargin:"1000px"}),2),i=r[0],a=r[1];return(0,u.BX)("div",{ref:i,css:{position:"relative",width:"100%",height:194,overflow:"hidden",background:"url(".concat(eh,") no-repeat rgba(191, 191, 191, 0.7)"),backgroundSize:"cover"},children:[(0,u.tZ)("img",{src:a?(0,ep.imgUrl)(o,"m"):"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'></svg>",width:"100%",height:"100%",alt:"",css:(0,el._)({position:"absolute",display:"none"},ef,{display:"block"})}),(0,u.BX)(ed.Wi,{as:ec.Flex,zaType:"Image",zaModuleId:"special_picture",zaAction:"Refresh",shouldTrackClick:!0,tabIndex:0,role:"button",onClick:n,onKeyDown:function(e){(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),n(e))},flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"13px",color:"#fff",height:"100%",css:(0,el._)({},ef,{backdropFilter:"blur(50px)"}),children:[(0,u.tZ)(eu.Z,{size:18}),(0,u.tZ)(ec.Text,{m:".6em 0 1.2em",children:"该图片有可能会引起不适"}),(0,u.tZ)(ec.Text,{p:"4px 1em",fontSize:"1.1em",css:{border:"1px solid rgba(255,255,255,.5)",borderRadius:9999},children:"继续查看"})]})]})},eg=n(169),eb=n(30512),eC=(0,F.EN)({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:eg.Z}),eZ=function(e){var t=e.contentType,n=e.token,o=e.root,r=e.mcnLinkCardProps,l=e.isAuthor,s=e.urlOrigin,u=void 0===s?"":s,d=(0,c._)((0,m.useState)(null),2),p=d[0],h=d[1],f=(0,c._)((0,m.useState)(!1),2),v=f[0],g=f[1];return(0,m.useEffect)(function(){var e=o&&o.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&(0,F.As)("".concat(u,"/api/v4/mcn/v2/linkcards?content_type=").concat(t,"&token=").concat(n)).then(function(e){var t=e.data;t&&(h(t),g(!0))}).catch(function(){g(!0)})},[o]),v&&(0,X.jsx)(eb.Z,{children:(0,X.jsx)(eC,(0,a._)((0,i._)({},r),{originalData:p,root:o,isAuthor:l}))})},ey=n(20072),e_=n(74135),ew=n(69383),ek=n(9478),ex=n.n(ek),eS=(0,F.EN)({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,o=(0,m.useRef)(!1),r=(0,c._)((0,m.useState)({}),2),l=r[0],s=r[1],u=(0,c._)((0,m.useState)(!1),2),d=u[0],p=u[1];return(0,m.useEffect)(function(){(0,F.As)("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then(function(e){var n=(0,e_.camelizeKeys)(e)||{},o=n.title,r=n.desc,i=n.cover,a=n.button,l=n.resourceId,c=n.resourceName,u=n.price,d=n.error,h={};!ex()(e)&&ex()(d)&&(h=(0,el._)({},t,{id:t,skuId:l,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:o,subtitle:r,price:{price:u},goodsImg:{imgUrl:i,imgShape:"rectangle",cornerText:c},goodsUrl:{url:null==a?void 0:a.url},btnText:"去查看"}})),s(h),p(!0)}).catch(function(){p(!0)})},[]),d&&!ex()(l)?(0,X.jsx)(eb.Z,{children:(0,X.jsx)(eg.Z,(0,a._)((0,i._)({id:t,ref:function(e){!e||e.classList.contains("GoodsRecommendCard-placeholder")||!1!==o.current||(ew.Z.setModule(e,{module:"Content"},{card:{content:{id:t}}}),(0,ey.y3)(e,function(){ew.Z.trackCardShow(e,{id:7203})}),o.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:l},{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1}),{onClick:function(e){ew.Z.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}}))}):null}}),eE=n(95769),eI=n.n(eE),eT=function(e){var t=e.referenceList,n=e.onClick,o=e.listRef;return(0,X.jsxs)(m.Fragment,{children:[(0,X.jsx)("h2",{children:"参考"}),(0,X.jsx)("ol",{className:"ReferenceList",onClick:n,ref:o,children:eI()(t,"refKey").map(function(e){var n=t.filter(function(t){return t.refKey===e.refKey}),o=n.length>1?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("span",{className:"ReferenceList-backHint","aria-label":"back",children:"^"}),n.map(function(e,t){var n="".concat(e.refKey,"_").concat(t);return(0,X.jsx)("sup",{className:"ReferenceList-backLink",children:(0,X.jsx)("a",{href:"#".concat(n),"data-reference-link":!0,children:"abcdefghijklmnopqrstuvwxyz"[t%26]})},n)})]}):(0,X.jsx)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0,children:"^"});return(0,X.jsxs)("li",{id:e.refKey,tabIndex:0,children:[o,e.text&&(0,X.jsx)("span",{children:e.text}),e.text&&e.url&&"\xa0",e.url&&(0,X.jsx)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer",children:e.url})]},e.refKey)})})]})},eN=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,eA=function(e,t){if(!e)return e;var n=e,o=[];return(n=n.replace(eN,function(e,n){var r=(0,F.fN)(n,{decodeValue:!0}),i=r["data-text"],a=void 0===i?"":i,l=r["data-url"],c=void 0===l?"":l,s=r["data-numero"],u=t?"ref_".concat(t,"_").concat(s):"ref_".concat(s),d=o.filter(function(e){return e.refKey===u}),p="".concat(u,"_").concat(d.length);o.push({refKey:u,text:a,url:c,numero:s});var h=[a,c].filter(Boolean).join(" ");return(0,W.renderToStaticMarkup)((0,X.jsx)("sup",{"data-text":a,"data-url":c,"data-numero":s,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":h,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip",children:(0,X.jsxs)("a",{id:p,href:"#".concat(u),"data-reference-link":!0,"aria-labelledby":u,children:["[",s,"]"]})}))}),o.length)?n=n.concat((0,W.renderToStaticMarkup)((0,X.jsx)(eT,{referenceList:o}))):n},eB=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var o=e.target.getAttribute("href"),r=t.querySelector(o);if(r){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby")){n.onReferenceClick(e);return}r.focus({preventScroll:!0}),(0,F.TS)(r),document.documentElement.setAttribute("data-focus-visible","")}}},eR=function(e,t){var n=(0,p.Z)(function(n){return eB(n,e,t)});(0,m.useEffect)(function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}},[e,n])},eP=n(84632),ez=n(55283),eL=function(e){var t=this;return e.length?function(n,o){for(var r=e.length-1,i=n;r>=0;)i=e[r].call(t,i,o),r--;return i}:f()},eM=/<img\b[^>]*data-rawwidth="([^>"]*)"[^>]*?>/g,eD=function(e){return e?e.replace(eM,function(e,t){if(!(t=parseInt(t)))return e;var n=t>=343?"normal":"small";return e.replace(/data-size="[^">]*"/g,'data-size="'.concat(n,'"'))}):e},eU=n(9669),eO=n(80714),eF=n(35502),eq=function(e){var t=e.root,n=e.parentType,o=e.parentId,r=(0,l._)(e,["root","parentType","parentId"]),s=(0,c._)((0,m.useState)(),2),d=s[0],h=s[1];(0,eF.Z)({videoId:null==d?void 0:d.videoId,iframeRef:null==d?void 0:d.videoIframeRef});var f=(0,p.Z)(function(e){var t="";return[eU.r.zvideo,eU.r.answer].includes(n)&&(t="?".concat(new URLSearchParams([["itemId",o],["itemType",n]]).toString())),"https://".concat(eO.Z.videoHost,"/video/").concat(e).concat(t)}),v=(0,p.Z)(function(e){var t=e.videoId,n=e.videoIframeRef;t&&(null==n?void 0:n.current)&&h({videoId:t,videoIframeRef:n})});return(0,u.tZ)(u.HY,{children:(0,u.tZ)(eP.SM,(0,a._)((0,i._)({onLinkCardPlayerLoaded:v,getVideoUrl:f,useZVideoLinkCard:!1},r),{root:t}))})},eV=function(e){var t=e.onRef,n=e.htmlProcessors,o=e.linkCardInfo,r=e.zvideoLinkCardProps,d=e.adLinkCardProps,p=e.mcnLinkCardProps,h=e.eduCardProps,f=e.mkSkuLinkCardProps,v=e.html,g=e.sourceId,b=e.shouldShowCatalog,C=e.shouldCatalogCollapse,y=e.shouldFoldCatalog,_=e.referenceLinkProps,w=e.useCatalogV2,k=e.isAuthor,x=e.maskGradientColor,S=e.isVideoAnswer,E=(0,l._)(e,["onRef","htmlProcessors","linkCardInfo","zvideoLinkCardProps","adLinkCardProps","mcnLinkCardProps","eduCardProps","mkSkuLinkCardProps","html","sourceId","shouldShowCatalog","shouldCatalogCollapse","shouldFoldCatalog","referenceLinkProps","useCatalogV2","isAuthor","maskGradientColor","isVideoAnswer"]),I=d||{},T=I.parentType,N=I.parentId,A=(0,c._)((0,m.useState)(null),2),B=A[0],R=A[1],P=(0,c._)((0,m.useState)(null),2),z=P[0],L=P[1],M=(0,Z.F)(),D=eL((0,s._)(void 0===n?[]:n).concat([function(e){return eA(e,void 0)},ei,ea.Tw,(0,j.PD)(w),eD]));(0,eP.af)(B,r,o),eR(B,_),(0,j.cy)(B);var q=(0,m.useMemo)(function(){return(0,j.f1)(v,g)},[v,g]).catalog,V=(0,m.useMemo)(function(){if(!B)return{};var e=B.getBoundingClientRect().left-20;return{shouldFold:C||(0,j.b6)(e),width:(0,j.XD)(e)}},[B,C]),H=V.shouldFold,X=V.width;return(0,u.BX)("div",{css:{position:"relative",display:"inline"},children:[(0,ea.fv)(B),b&&y&&(0,u.tZ)(j.$n,{root:B}),(0,u.tZ)(K,(0,a._)((0,i._)({},d),{root:B})),(0,u.tZ)(eS,(0,a._)((0,i._)({},f),{root:B})),(0,u.tZ)(eq,(0,a._)((0,i._)({parentId:N,parentType:T,isVideoAnswer:void 0!==S&&S},r),{root:B})),eZ({root:B,mcnLinkCardProps:p,contentType:T,token:N,isAuthor:k}),(0,ez.cD)({root:B,createLinkCardPortal:F.EN,eduCardProps:h,Popover:U.Z}),b&&w&&(null==q?void 0:q.length)>0&&(0,u.BX)(u.HY,{children:[(0,u.tZ)(ec.Box,{ref:L,css:(0,i._)({position:"absolute",left:H?-20:-X-j.PO-20,top:H?60:0,width:X},H&&{pointerEvents:"none"})}),(0,u.tZ)(j.fo,{catalog:q,inEditor:!1,scrollOffset:52,stickyOffset:H?132:72,contentRoot:B,container:z,shouldShowFoldIcon:H,shouldCollapse:C,maskGradientColor:x})]}),(0,u.tZ)(F.Ho,(0,i._)({ref:(0,O.Z)(t,R),css:function(e){var t;return(0,a._)((0,i._)({},{".FileLinkCard":{alignItems:"center",backgroundColor:(t=e).colorMod(t.colors.GBK10A).alpha(.88),borderRadius:"12px",boxSizing:"border-box",display:"flex",margin:"1em auto",maxWidth:"100%",overflow:"hidden",padding:"12px",position:"relative",width:"390px"},".FileLinkCard-icon":{flexShrink:0,height:"30px",width:"30px"},".FileLinkCard-info":{marginLeft:"12px"},".FileLinkCard-name":(0,i._)({color:t.colors.GBK02A,fontSize:"15px",fontWeight:500,lineHeight:"21px"},(0,J.S)(2)),".FileLinkCard-meta":{color:t.colors.GBK06A,fontSize:"12px",display:"flex",lineHeight:"14px",marginTop:"5px"},".FileLinkCard-source":{whiteSpace:"pre"}},em),{"img.content_image, img.origin_image":{'&[data-size="normal"]':{width:"100%",maxWidth:"100%"},'&[data-size="small"]':{width:"320px",maxWidth:"100%"}}})},html:D(v,{sourceId:g,theme:M,shouldShowCatalog:b,shouldFoldCatalog:y,linkCardInfo:o})},E))]})},eH=n(54231),eX={},eG=function(e,t){var n=t.split("/").reverse()[0],o=(0,c._)(n.split("."),2),r=o[0],i=o[1],a=(0,c._)(r.split("_"),2)[1],l=(0,eH.HP)({appName:"heifetz"})("".concat("webp"===i||"gif"===i?i:"image",".").concat(a,".unknown.RichText"));switch(e){case"loadstart":eX[n]=Date.now();break;case"load":if(eX[n]){var s="".concat(l,".success");eH.ZP.increment({raw:"".concat(s,".count")}),eH.ZP.timing(s,Date.now()-eX[n]),delete eX[n]}break;case"timeout":eX[n]&&(eH.ZP.increment({raw:"".concat(l,".timeout.count")}),delete eX[n]);break;case"error":eX[n]&&(eH.ZP.increment({raw:"".concat(l,".failure.count")}),delete eX[n])}},eK=function(e){return(0,u.tZ)(F.BU,(0,a._)((0,i._)({onLoadStateChange:eG},e),{useMp4:!0}))},ej=function(e){var t=e.node,n=e.index,o=t.dataset.thumbnail,r="uncomfortable"in t.dataset,i=function(){return o?"load-gif":"load-image"},a=(0,c._)((0,m.useState)(r?"uncomfortable":i()),2),l=a[0],s=a[1];return"load-image"===l?(0,u.tZ)(F.RP,{node:t,onLoadStateChange:eG,index:n}):"load-gif"===l?(0,u.tZ)(F.pE,{node:t,Component:eK}):"uncomfortable"===l?(0,u.BX)(u.HY,{children:[(0,u.tZ)(F.rI,{node:t,style:{display:"none"}}),(0,u.tZ)(ev,{node:t,onClick:function(){delete t.dataset.uncomfortable,s(i())}})]}):null},eW=n(36695),eY=n(81897),eQ=n.n(eY),e$=n(82267),eJ=function(){var e=(0,c._)((0,m.useState)(null),2),t=e[0],n=e[1];return[t,(0,p.Z)(function(e){n(e.currentTarget.dataset.mcnId)}),(0,p.Z)(function(){return n(null)})]},e0=function(e){var t=e.goodsCardId,o=e.handleClose,r=(0,eW.useSelector)(function(e){return e.currentUser}),i=(0,H.Z)(function(){return n.e(430).then(n.bind(n,23717))}),a=(0,e$._)(),l=(0,p.Z)(function(e){a({id:e.id,source:e.sourceId,url:e.url,appSchemaIos:e.app_schema_ios,appSchemaAndroid:e.app_schema_android})});return t?(0,u.tZ)(i,{showModal:!!t,id:t,userId:r,clientId:eQ().get("_zap"),onClose:o,onSelectCard:l}):null};function e1(e){var t=e.content,n=e.className,o=(0,d.n)(),r={"KfeCollection-NovelDisplayBlock-Dark":(0,Z.F)().isDarkMode,"KfeCollection-NovelDisplayBlock-Pc":!o.Mobile};return(0,m.useEffect)(function(){var e=Array.from(document.querySelectorAll('img[data-novel="role-image"]')),t=o.Mobile?"openInApp":"zh-lightbox-thumb";e.forEach(function(e){e.className="".concat(e.className," ").concat(t)})},[o.Mobile]),v().createElement("div",{className:Q()("KfeCollection-NovelDisplayBlock",n,r),dangerouslySetInnerHTML:{__html:t}})}e1.propTypes={content:V().string.isRequired};var e2=function(e){var t=e.className,n=e.html,o=e.lazyLoadImageProps,r=(0,c._)((0,m.useState)(null),2),i=r[0],a=r[1];return(0,F.RK)(i,o),(0,u.tZ)("div",{ref:a,children:(0,u.tZ)(e1,{className:t,content:n})})},e4=n(36892),e3=n(85661),e5=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),o=document.createElement("span");return e.parentNode.replaceChild(o,e),{target:o,data:{id:t,name:n}}},e7=function(e){var t=(0,c._)((0,m.useState)(null),2),n=t[0],o=t[1];return(0,m.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));t.length&&o(t.map(e5).map(function(e,t){var n=e.data,o=e.target;return(0,g.createPortal)((0,u.BX)(e3.Z,{user:n,children:["@",n.name]},t),o)}))}},[e]),n},e6=function(e,t){var n=t.root;if(!e.defaultPrevented){var o=e.target;if(!("img"!==o.tagName.toLowerCase()||!o.src.includes("zhimg")&&o.src.includes("equation")||o.classList.contains("ztext-gif")&&!o.parentNode.classList.contains("isPlaying"))){var r=Array.from(n.querySelectorAll(["img"])).filter(function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")}),a=r.indexOf(o);if(-1!==a){e.preventDefault();var l=r.map(function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""}).map(function(e){return(0,ep.imgUrl)(e,(0,i._)({quality:""},e.endsWith("webp")&&{extension:"jpg"}))});(0,b.Z)("base/openImage").dispatch({images:l,index:a})}}}},e8=function(e){var t=(0,d.n)(),n=(0,m.useCallback)(function(n){t.ZhihuHybrid&&e6(n,{root:e})},[e,t.ZhihuHybrid]);(0,m.useEffect)(function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}},[e,n])},e9=n(24340),te=n(32122),tt=function(e){var t=e.getAttribute("data-poster"),n={title:e.getAttribute("data-name"),thumbnail:"data:,"===t?"":t,url:e.getAttribute("href"),src:e.getAttribute("data-src")};n=e.getAttribute("data-lens-id")?(0,a._)((0,i._)({},n),{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):(0,a._)((0,i._)({},n),{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(n=(0,a._)((0,i._)({},n),{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var o=document.createElement("div");return e.parentNode.replaceChild(o,e),{target:o,data:n}},tn=function(e){return e.getAttribute("data-lens-id")||e.getAttribute("data-video-id")},to=function(e,t){var n=t.hideWatermark,o=t.contentType,r=t.contentId,i=(0,c._)((0,m.useState)(null),2),a=i[0],l=i[1];return(0,m.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));t.length&&l(t.filter(tn).map(tt).map(function(e,t){var i=e.data,a=e.target;return(0,g.createPortal)((0,u.tZ)(e9.Z,{ratio:16/9,children:(0,u.tZ)(te.Z,{zaProps:{type:o,token:r},videoId:i.id,contentId:r,contentType:o,hideWatermark:n},t)}),a)}))}},[e,n,o,r]),a},tr=function(e){var t=e.root,o=e.ecommerce,r=e.sourceType,i=e.sourceId,a=e.entityWords,l=e.hideWatermark;return(0,u.BX)(u.HY,{children:[to(t,{hideWatermark:l,contentType:r,contentId:i}),e7(t),(0,u.tZ)(D.SV,{target:"ecommercePortal",replacement:null,children:(0,M.su)(t,{ecommerce:o,getComponent:function(){return Promise.all([n.e(6229),n.e(8400)]).then(n.bind(n,44873))}})}),R(t,{type:r,sourceId:i,entityWords:a})]})},ti=function(e){var t,n,o,r,d,h,f,v,g=e.className,b=e.ecommerce,C=e.html,Z=e.shouldShowCatalog,y=e.sourceId,_=e.sourceType,w=e.isExpanded,k=e.entityWords,S=e.isVideoAnswer,E=e.hideWatermark,I=(0,l._)(e,["className","ecommerce","html","shouldShowCatalog","sourceId","sourceType","isExpanded","entityWords","isVideoAnswer","hideWatermark"]),T=(0,c._)((0,m.useState)(null),2),N=T[0],A=T[1],B=(0,m.useMemo)(function(){return C?L.compose.apply(void 0,(0,s._)([x(k)].filter(Boolean)))(C):""},[C,k]);e8(N),n=(t=(0,c._)((0,m.useState)(!1),2))[0],o=t[1],r=(0,ed.Q4)().trackEvent,d=(0,p.Z)((0,e4.Z)(function(){document.getSelection().toString()&&r({eventType:"Click",elementLocation:{moduleId:"text_select",type:"Text"}})},1e3)),h=(0,p.Z)(function(){document.addEventListener("selectionchange",d)}),f=(0,p.Z)(function(){document.getSelection().toString()&&(r({eventType:"Click",elementLocation:{moduleId:"text_copy",type:"Text",text:n?"快捷键复制":"右键复制"}}),o(!1))}),v=(0,p.Z)(function(e){("c"===e.key||67===e.keyCode)&&(e.ctrlKey||e.metaKey)&&o(!0)}),(0,m.useEffect)(function(){if(N)return N.addEventListener("selectstart",h),N.addEventListener("copy",f),document.addEventListener("keydown",v),function(){N.removeEventListener("selectstart",h),N.removeEventListener("copy",f),document.removeEventListener("keydown",v),document.removeEventListener("selectionchange",d)}},[N,f,v,d,h]);var R=(0,c._)(eJ(),3),P=R[0],z=R[1],M=R[2];return(0,u.BX)(u.HY,{children:[(0,u.tZ)(eV,(0,a._)((0,i._)({},I),{className:g,html:void 0===w||w?B:C,onRef:A,ConditionalImage:ej,adLinkCardProps:{parentId:y,parentType:_},mcnLinkCardProps:{onClick:z},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},eduCardProps:{token:y,contentType:_},zvideoLinkCardProps:{enableInlinePlay:!0},shouldShowCatalog:Z,sourceId:y,useCatalogV2:!0,isVideoAnswer:S})),(0,u.tZ)(tr,{root:N,ecommerce:b,sourceId:y,sourceType:_,entityWords:k,hideWatermark:E}),(0,u.tZ)(e0,{goodsCardId:P,handleClose:M})]})},ta=function(e){var t=e.isNovel,n=e.paidInfo,o=(0,l._)(e,["isNovel","paidInfo"]);if(t){var r=o.className,a=o.html;return(0,u.tZ)(e2,{className:r,html:a,lazyLoadImageProps:{onLoadStateChange:eG,useWebP:!1}})}return n?(0,u.tZ)(ti,(0,i._)({css:(0,P.iv)(z(n))},o)):(0,u.tZ)(ti,(0,i._)({},o))}},40719:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(85626),d=n(85879),p=n(55698),h=n(33773),f=n(14168),m=n.n(f),v=n(87363),g=n(30722),b=n(44169),C=n(80714),Z=n(19495),y=n(99830),_=n(30361),w=n(46829),k=n(38636),x=n(24794),S=n(85661),E=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),(0,a._)((0,o._)(e),"handleCommentsShown",function(t,n){e.setState(n)}),(0,a._)((0,o._)(e),"handleCommentsHide",function(){e.setState({commentsShown:!1})}),e}return(0,i._)(n,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.preset,r=n.roundtable,i=n.lastreadTouchable,a=n.zaInfos.follow,l=r||{},u=l.id,f=l.logo,m=l.type,v=l.guests,E=void 0===v?[]:v,I=l.stopTime,T=l.startTime,N=l.followers,A=l.commentCount,B=l.isFollowing,R=this.state,P=R.commentsShown,z=R.commentsAutoFocus,L=R.commentPattern,M=(0,d.tZ)(k.Z,{roundtable:r,target:"_blank"}),D="/roundtable/".concat(u);if(o!==_.PG.interactive)return(0,d.tZ)(_.ZP,{data:r,link:D,title:M});var U={id:u,type:m};return(0,d.BX)(_.ZP,{data:r,link:D,onRef:function(e){t.contentItem=e},title:(0,d.BX)("div",{className:"RoundtableItem-title",children:[M,(0,d.BX)("div",{className:"RoundtableItem-badge",children:[(0,d.tZ)(h.x8,{text:!0,center:!0})," ",(e=Date.now()/1e3)>I?"已结束":e<T?"".concat((0,b.rL)(T)," 开始"):"".concat((0,b.rL)(I)," 结束")]})]}),image:(0,d.tZ)(p.qE,{url:f,size:60}),meta:(0,d.BX)("div",{className:"RoundtableItem-meta",children:[(0,g.uf)(N)," 人关注",!C.Z.isMobileEntry&&"了该圆桌"]}),lastreadTouchable:i,children:[!C.Z.isMobileEntry&&E.length>0&&(0,d.tZ)(_.n1,{children:(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"嘉宾："}),E.map(function(e,t){return(0,d.BX)("span",{children:[(0,d.tZ)(S.Z,{user:e}),t<E.length-1&&"、"]},t)})]})}),(0,d.BX)(_.eX,{children:[(0,d.tZ)(w.Z,(0,s._)((0,c._)({},U),{isFollowing:B,zaId:a})),(0,d.tZ)(Z.Z,{onClick:this.handleCommentsShown,commentsShown:P,count:A}),(0,d.tZ)(x.Z,(0,s._)((0,c._)({},U),{title:r.name}))]}),(0,d.tZ)(y.Z,{parent:r,commentPattern:L,shown:P,autoFocus:z,onClose:this.handleCommentsHide})]})}}]),n}(v.Component);(0,a._)(E,"propTypes",{preset:m().oneOf(Object.values(_.PG)),zaInfos:m().shape({follow:m().number,options:m().number}),renderOptions:m().func}),(0,a._)(E,"defaultProps",{preset:_.PG.default,zaInfos:{}})},38636:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var o=n(22107),r=n(94707),i=n(86325),a=n(55164),l=n(57477),c=n(71728),s=n(85626),u=n(85879),d=n(14168),p=n.n(d),h=n(87363),f=n(25628),m=n.n(f),v=n(20857),g=n(87320),b=n(77236),C=n(33773),Z=n(81809),y=n(36695),_=n(19076),w=n(69383),k=n(44169),x=n(91770),S=n(37208),E=n(46829),I=n(31142),T=function(e){var t=e.userKey,n=e.isLast,o=(0,c._)(e,["userKey","isLast"]),r=(0,y.useSelector)(function(e){return e.entities.users[t]});if(!r)return null;var i=r.urlToken,s=r.name,d=r.isOrg;return(0,u.BX)(_.Link,(0,l._)((0,a._)({to:"/".concat(d?"org":"people","/").concat(i)},o),{children:[s,!n&&"、"]}))},N=function(e){(0,i._)(n,e);var t=(0,s._)(n);function n(){var e;return(0,o._)(this,n),e=t.apply(this,arguments),(0,g._)((0,v._)(e),"load",function(){var t=e.props,n=t.dispatch,o=t.id;n((0,S.AO)(o))}),(0,g._)((0,v._)(e),"track",function(){var t=e.props.roundtable;e.hoverCardElement&&t&&(w.Z.setModule(e.hoverCardElement,{module:"RoundtableItem"},{card:{content:{type:"Roundtable",token:t.id,item_num:t.questionsCount,follower_num:t.followers,publish_timestamp:1e3*t.stopTime}}}),w.Z.trackCardShow(e.hoverCardElement))}),(0,g._)((0,v._)(e),"handleOpen",function(){e.load(),e.track()}),e}return(0,r._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.roundtable,r=t.id,i=t.isLoading,s=t.onRef,d=(0,c._)(t,["toggler","roundtable","id","isLoading","onRef"]),p=o||{},h=p.name,f=p.type,m=p.description,v=p.guests,g=void 0===v?[]:v,y=p.activitiesCount,_=p.questionsCount,w=p.followers,S=p.logo,N=p.stopTime,A=p.isFollowing,B=g.length,R="/roundtable/".concat(r);return(0,u.BX)(b.Z,(0,l._)((0,a._)({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},d),{ref:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t},children:[(0,u.tZ)(b.O,{title:(0,u.tZ)("a",{target:"_blank",href:"/roundtable/".concat(r),rel:"noopener noreferrer",children:h}),avatarUrl:S,attrInfo:(0,u.BX)("div",{children:[(0,u.tZ)(C.x8,{text:!0,center:!0})," ",(0,k.rL)(N)]})}),m&&(0,u.tZ)("div",{children:(0,u.tZ)("div",{className:"HoverCard-description",children:m})}),(0,u.BX)("div",{children:[(0,u.tZ)(Z.H,{text:!0,center:!0})," 组织机构",(0,u.tZ)("span",{className:"HoverCard-separate",children:" | "}),(0,u.tZ)("a",{href:"/topic/19793502",children:"圆桌"})]}),B>0&&(0,u.BX)("div",{children:["嘉宾",(0,u.tZ)("span",{className:"HoverCard-separate",children:" | "}),g.map(function(e,t){var n=e.member;return(0,u.tZ)(T,{userKey:n,isLast:t===B-1},t)})]}),(0,u.BX)("div",{children:[(0,u.BX)(x.Z,{children:[(0,u.tZ)(x.Z.Item,{tag:I.Z,preset:"plain",a:!0,to:R,name:"动态",value:y}),(0,u.tZ)(x.Z.Item,{tag:I.Z,preset:"plain",a:!0,to:"".concat(R,"/question"),name:"问题",value:_}),(0,u.tZ)(x.Z.Item,{tag:I.Z,preset:"plain",a:!0,to:"".concat(R,"/followers"),name:"关注者",value:w})]}),(0,u.tZ)("div",{className:"HoverCard-buttons",children:(0,u.tZ)(E.Z,{id:r,type:f,isFollowing:A,preset:"primary"})})]})]}))}}]),n}(h.Component),A=(0,y.connect)(function(e,t){var n=t.id,o=e.entities.roundtables,r=e.loading.local;return{roundtable:o[n],isLoading:!!r["roundtable/".concat(n)]}})(N),B=function(e){(0,i._)(n,e);var t=(0,s._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,r._)(n,[{key:"render",value:function(){var e=this.props,t=e.roundtable,n=t.name,o=t.id,r=e.noHoverCard,i=e.style,s=e.className,d=e.children,p=(0,c._)(e,["roundtable","noHoverCard","style","className","children"]),h=d||n;return r||(h=(0,u.tZ)(A,{toggler:h,id:o})),(0,u.tZ)("a",(0,l._)((0,a._)({style:i,className:m()("RoundTableLink",s),href:"/roundtable/".concat(o)},p),{children:h}))}}]),n}(h.Component);B.propTypes={roundtable:p().object.isRequired,noHoverCard:p().bool,style:p().object,className:p().string,children:p().node},B.defaultProps={noHoverCard:!1};var R=B},2174:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o=n(85879),r=n(25628),i=n.n(r);function a(e){var t=e.className;return(0,o.tZ)("span",{className:i()("ActivityItem-StickyMark",t),children:"置顶"})}},91:function(e,t,n){"use strict";var o=n(85879),r=n(36695),i=n(58909),a=n(80714),l=n(67516),c=n.n(l),s=n(31142);t.Z=(0,r.connect)(function(e){var t;return{vipInfo:null===(t=(0,i.ib)(e))||void 0===t?void 0:t.vipInfo}})(function(e){var t=e.widget,n=e.className,r=e.vipInfo,i=t.id,l=t.url;return(0,o.tZ)(s.Z,{className:n,onClick:function(){var e;(null==r?void 0:null===(e=r.widget)||void 0===e?void 0:e.id)!=="".concat(i)&&(c().set("widgetId",i),c().set("widgetUrl",l))},preset:"link",a:!0,to:"https://".concat(a.Z.wwwHost,"/settings/stickers"),children:(0,o.tZ)("img",{src:l,style:{width:"100%"},alt:""})})})},32122:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var o=n(94009),r=n(85879),i=n(10087),a=n(75798),l=n(65733),c=n(58338),s=n(6080),u=n(68159),d=n(87363),p=n.n(d),h=n(9338),f=n(30971),m=n(95951),v=n(80714),g=n(81956),b=n(29229),C=n(43384),Z={width:null},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";if(Z.width)return t?"".concat(Z.width/1920*e).concat(t," "):Z.width/1920*e},_=function(e){var t=e.src;return(0,r.tZ)("div",{css:{margin:"auto 0",width:y(240),height:y(240),borderRadius:y(240),position:"absolute",left:"50%",transform:"translate(-50%,0)",backgroundColor:"#eee",fontSize:0},children:t&&(0,r.tZ)("img",{width:"100%",css:{borderRadius:y(240)},src:t,alt:"头像"})})},w=n(42043),k=function(e){var t=e.showKanShan,n=e.src;return(0,r.tZ)("div",{css:{position:"absolute",top:y(-120),left:y(100),backgroundColor:"#000",width:y(300),height:y(250),overflow:"hidden"},children:n&&(0,r.tZ)(w.Z,{loop:!1,autoPlay:!0,src:n,css:{position:"absolute",top:y(-80),left:y(-250),opacity:t?1:0,width:y(600),height:y(600)}})})},x=n(66980),S=Object.assign,E=function(e){return p().createElement(x.Z,S({width:"318",height:"28",fill:"none",viewBox:"0 0 318 28"},e),p().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M290.976 20.112a.862.862 0 0 0 .61.253l9.471-.043a26.203 26.203 0 0 1-9.802 3.972 1.172 1.172 0 0 0-.536.62c-.098.264-.097.555.004.82a1.337 1.337 0 0 0 1.612.417 25.695 25.695 0 0 0 10.435-5.268v5.599a1.077 1.077 0 0 0 1.079 1.079 1.079 1.079 0 0 0 1.08-1.08v-5.757a24.248 24.248 0 0 0 10.434 5.268 1.21 1.21 0 0 0 1.512-.432c.144-.72-.044-1.223-.547-1.439a27.624 27.624 0 0 1-9.687-3.756h9.471a.976.976 0 0 0 .979-.864c0-.576-.331-.864-.979-.864h-11.183v-1.611a1.078 1.078 0 0 0-1.08-1.08 1.079 1.079 0 0 0-1.079 1.08v1.611h-11.184a.863.863 0 0 0-.61 1.475Zm.144-10.414a.891.891 0 0 0 .567.217l5.901.044c-.193.238-.384.436-.574.634-.234.244-.468.487-.707.805-.432.576-.331.993.317 1.281l5.268 1.295a54.534 54.534 0 0 1-9.572 1.44.78.78 0 0 0-.701.71c-.01.121.008.242.054.355a1.062 1.062 0 0 0 1.18.762 54.98 54.98 0 0 0 12.104-2.475c4.011 1.142 6.847 1.967 8.507 2.475a1.222 1.222 0 0 0 1.439-.546.936.936 0 0 0 .08-.576.916.916 0 0 0-.613-.706c-1.007-.215-2.691-.618-5.066-1.194-.849-.216-1.497-.389-1.929-.533a10.786 10.786 0 0 0 3.656-3.77h4.851c.561-.072.964-.173.964-.749 0-.576-.331-.863-.964-.863h-14.293c.192-.27.409-.52.648-.749.288-.36.504-.619.648-.763a.74.74 0 0 0 .117-.712.741.741 0 0 0-.549-.468 1.44 1.44 0 0 0-1.612.432c-.278.466-.606.9-.979 1.295-.36.432-.604.749-.748.965h-7.427a.937.937 0 0 0-.863.863.888.888 0 0 0 .296.53Zm22.257-2.575c.058.504.418.864 1.065.864.705 0 1.037-.288 1.022-.749V4.763a1.194 1.194 0 0 0-1.194-1.18h-8.924a12 12 0 0 0-.763-2.375c-.187-.504-.647-.648-1.439-.648a1.05 1.05 0 0 0-.864 1.18 2.564 2.564 0 0 0 .216.648c.174.387.318.786.432 1.195h-9.514c-.863 0-1.295.388-1.295 1.18v2.36c.067.5.427.787 1.079.864a.963.963 0 0 0 .965-.864V5.684a.46.46 0 0 1 .532-.533h18.25c.288 0 .432.173.432.533v1.44Zm-11.327 5.268-2.878-.748h.057c-.36-.072-.59-.173-.245-.533a20.893 20.893 0 0 0 1.065-1.195h8.463a8.272 8.272 0 0 1-3.871 3.124l-2.591-.648ZM136.762 5.913c.178.16.41.247.649.246l12.061-.043a.92.92 0 0 0 .849-.864.965.965 0 0 0-.849-.964h-4.635v-.23a.558.558 0 0 0 .059-.11 1.08 1.08 0 0 0 .041-.123.797.797 0 0 0 .016-.084 9.725 9.725 0 0 1-.432-1.828 3.386 3.386 0 0 0-.216-.648 1.124 1.124 0 0 0-1.295-.647.88.88 0 0 0-.759.711.879.879 0 0 0 .01.368c.023.07.049.154.079.252.049.164.107.368.176.612l.062.216c.077.487.187.968.331 1.439v.115h-5.498a1.004 1.004 0 0 0-.964.964.96.96 0 0 0 .315.618Zm.132 17.768c.084.095.187.17.301.224h-.014a.944.944 0 0 0 1.079-.125.947.947 0 0 0 .23-.306 35.592 35.592 0 0 0 2.145-4.635c.144-.432-.029-.82-.533-1.18-.647-.072-1.036.144-1.18.648-.144.33-.36.791-.648 1.439a62.54 62.54 0 0 1-1.511 2.878.947.947 0 0 0-.097.57.931.931 0 0 0 .228.488Zm1.725-7.975c.221.224.521.352.836.355l3.137-.043v7.096c0 1.08-.504 1.511-1.439 1.511h-1.439c-.576 0-.864.317-.864.964a1.183 1.183 0 0 0 1.108 1.008 7.872 7.872 0 0 0 1.713-.101c2.015 0 2.951-1.036 2.807-3.123V16.06h3.008a1.195 1.195 0 0 0 1.18-1.194V9.815a1.186 1.186 0 0 0-.729-1.09 1.177 1.177 0 0 0-.451-.09h-8.031a1.238 1.238 0 0 0-1.181 1.28v4.952c0 .314.124.616.345.84Zm1.598-1.933v-2.879h-.014a.482.482 0 0 1 .133-.414.472.472 0 0 1 .414-.133h5.484a.488.488 0 0 1 .28.048l.028.015a.498.498 0 0 1 .241.39.48.48 0 0 1-.002.095v2.878a.49.49 0 0 1-.304.5l-.015.006-.012.004a.49.49 0 0 1-.216.022h-5.484a.473.473 0 0 1-.511-.318.474.474 0 0 1-.022-.214Zm8.234 7.959a.877.877 0 0 0 .258-.086h-.014a1.036 1.036 0 0 0 .446-1.137c-.144-.331-.389-.792-.748-1.44l-.864-1.295a1.021 1.021 0 0 0-1.295-.317.808.808 0 0 0-.44.45.813.813 0 0 0 .008.63c.288.49.863 1.396 1.727 2.677a.856.856 0 0 0 .735.527.831.831 0 0 0 .187-.01Zm1.371-11.808a.98.98 0 0 0 .614.323l2.274.014c-.076 6.237-1.727 11.15-4.951 14.738a1.207 1.207 0 0 0 .202 1.44 1.193 1.193 0 0 0 1.439-.216c3.234-3.877 4.994-9.221 5.282-16.034h.864a.858.858 0 0 0-.064.146l-.006.02-.016.054a.943.943 0 0 0-.029.212v12.694c0 1.986.906 2.879 2.691 2.879h.979c1.857.1 2.907-.864 3.109-2.879a6.564 6.564 0 0 1 .115-.964c.121-.859.193-1.724.216-2.59a1.034 1.034 0 0 0-.749-1.181.675.675 0 0 0-.863.648c-.015.433-.053.866-.115 1.295a20.009 20.009 0 0 1-.216 2.044c-.087 1.209-.59 1.713-1.44 1.713h-.547c-.791.13-1.18-.375-1.18-1.44V10.463l-.1-.216h4.087a.978.978 0 0 0 0-1.943h-6.678c0-.72.029-1.857.115-3.44V1.625a1.083 1.083 0 0 0-1.08-.964 1.022 1.022 0 0 0-.978.964c0 1.285-.028 2.51-.054 3.674-.024 1.053-.047 2.055-.047 3.005h-2.26a.98.98 0 0 0-.614 1.62Zm7.293-5.391c1.065.935 1.755 1.554 2.043 1.842h-.014c.576.36 1.022.417 1.454.029.431-.389.46-.864.1-1.44a16.122 16.122 0 0 1-1.281-1.065c-.647-.503-1.079-.834-1.295-.978-.619-.36-1.094-.36-1.439 0a.748.748 0 0 0-.246.237.739.739 0 0 0 .131.943 3.539 3.539 0 0 0 .547.432ZM1.629 5.295c0 .648.288.965.85.965l6.462.043a38.14 38.14 0 0 1-7.643 8.938 1.353 1.353 0 0 0-.216 1.612.95.95 0 0 0 .66.482l.018.003a.948.948 0 0 0 .834-.27 33.572 33.572 0 0 0 3.555-3.44v12.48a1.151 1.151 0 0 0 1.18 1.079 1.108 1.108 0 0 0 1.08-1.08V20.94h13.226v1.828c.072 1.296-.561 1.9-1.929 1.828h-3.022c-.49 0-.749.288-.749.864.077.652.51 1.012 1.296 1.08h3.152c2.447 0 3.584-1.109 3.454-3.34V10.722a1.295 1.295 0 0 0-1.295-1.296H9.588a118.968 118.968 0 0 0 1.943-3.123h14.623a.965.965 0 0 0 0-1.929H12.597c.445-.673.807-1.398 1.079-2.159a1.137 1.137 0 0 0-.648-1.439 1.252 1.252 0 0 0-1.612.964l-1.295 2.591H2.478c-.561 0-.849.317-.849.964Zm6.78 8.924v-2.476a.475.475 0 0 1 .532-.532h12.162a.474.474 0 0 1 .331.08l.01.006.007.006.01.008a.496.496 0 0 1 .039.035.475.475 0 0 1 .135.397v2.476H8.408Zm0 4.85v-3.008h13.226v3.008H8.408Zm32.966 7.851c.201.201.471.317.755.324a1.109 1.109 0 0 0 1.08-1.08V7.34a.951.951 0 0 0-1.08-1.08 1.109 1.109 0 0 0-1.079 1.08v18.826c.007.284.123.554.324.755Zm4.992-20.744c.148-.047.284-.127.398-.233h-.029a.993.993 0 0 0 .058-1.511 37.095 37.095 0 0 0-2.792-2.879 1.166 1.166 0 0 0-1.613-.216.993.993 0 0 0-.114 1.44c.523.434 1.004.916 1.439 1.439.508.476.989.98 1.439 1.511a1.05 1.05 0 0 0 1.214.45Zm1.83 13.43.075.005.025.001a1.174 1.174 0 0 0 .18-.01l8.334.072a1.324 1.324 0 0 0 1.44-1.281v-8.046a1.224 1.224 0 0 0-1.44-1.44h-8.333c-.85 0-1.281.505-1.281 1.44v7.974a1.135 1.135 0 0 0 1 1.284Zm7.73 6.583c.236.197.533.306.84.307h.044c1.828 0 3.08-.043 3.757-.086 2.648-.072 3.914-1.396 3.77-3.973V3.928a1.44 1.44 0 0 0-1.439-1.44H49.341a1.022 1.022 0 0 0-.964.98 1.05 1.05 0 0 0 .964 1.065h12.162c.432 0 .648.187.648.546v16.898c.072 1.64-.72 2.36-2.36 2.36h-3.455c-.72.067-1.007.427-.863 1.08.056.302.217.575.453.772Zm.193-9.063c0 .36-.216.547-.647.547h-5.758c-.431 0-.647-.187-.647-.547v-5.584a.763.763 0 0 1 .648-.648h5.757a.763.763 0 0 1 .647.648v5.584Zm22.755-1.713a.892.892 0 0 1-.748-.863c.072-.576.317-.864.748-.864h10.766c.504 0 .749.288.749.864a.892.892 0 0 1-.749.863h-3.555v2.879h3.224c.504 0 .763.288.763.85 0 .56-.26.69-.763.762h-3.224v3.656a11.3 11.3 0 0 0 4.088.647c4.02.144 8.338.144 12.953 0 .777 0 1.18.317 1.18.965a.992.992 0 0 1-.217.586 1.022 1.022 0 0 1-.963.378h-5.383c-3.526.072-6.102.072-7.757 0-4.443-.144-7.322-1.468-8.636-3.972a16.162 16.162 0 0 1-1.44 3.972.874.874 0 0 1-.936.472.879.879 0 0 1-.344-.14.979.979 0 0 1-.331-1.296 15.544 15.544 0 0 0 1.727-7.643.936.936 0 0 1 .863-.863c.648 0 .965.287.965.863a9.196 9.196 0 0 1-.115 1.08c.017.362-.017.726-.101 1.08a9.267 9.267 0 0 0 2.519 3.022v-7.312l-5.283.014Zm2.26-3.871c-.864 0-1.295-.403-1.295-1.195V3.251c0-.791.431-1.194 1.295-1.194h6.678a1.236 1.236 0 0 1 1.281 1.194v7.096c0 .792-.417 1.195-1.28 1.195h-6.679Zm.533-7.326v1.828h5.498V4.216c0-.36-.144-.533-.432-.533h-4.419c-.432 0-.647.173-.647.533Zm5.066 5.757c.288 0 .432-.187.432-.547V7.497h-5.498v1.929c0 .36.215.547.647.547h4.419Zm5.052 13.241a.99.99 0 0 1-1.428-.335.994.994 0 0 1 .463-1.392 7.34 7.34 0 0 0 5.268-8.175v-2.59c0-.576.331-.864.979-.864.648 0 .921.36.864.863v2.591a19.18 19.18 0 0 1-.332 3.757l2.879 2.26c1.079.863 1.871 1.438 2.375 1.827a.89.89 0 0 1 .348 1.105.9.9 0 0 1-.247.334c-.36.432-.821.461-1.44.101-.356-.207-.693-.543-1.121-.969-.315-.314-.68-.677-1.138-1.075-1.08-.935-1.871-1.568-2.375-1.928a10.306 10.306 0 0 1-5.095 4.548v-.058Zm-.502-19.369a.763.763 0 0 1-.678-.867.935.935 0 0 1 .863-.864h11.629a.878.878 0 0 1 0 1.728h-5.282l-.431 3.108h4.044a1.167 1.167 0 0 1 .251.02l.024.005a1.156 1.156 0 0 1 .861.779c.05.159.065.327.044.492v8.635c0 .576-.317.864-.964.864a.765.765 0 0 1-.864-.864V9.138a.46.46 0 0 0-.532-.532h-6.146c-.432 0-.633.172-.633.532v7.815a.863.863 0 1 1-1.727 0V8.246c0-.792.431-1.195 1.295-1.195h2.26l.532-3.109-4.36-.1a.762.762 0 0 1-.186.003Zm85.487 8.459a1.226 1.226 0 0 1-.678.022 1.24 1.24 0 0 1-.772-.583c-.287-.56-.1-1.108.547-1.612a29.074 29.074 0 0 0 10.651-8.074 2.69 2.69 0 0 1 1.612-.964 2.117 2.117 0 0 1 1.612.964 24.714 24.714 0 0 0 10.55 7.758 1.048 1.048 0 0 1 .46.218 1.034 1.034 0 0 1 .188 1.394 1.339 1.339 0 0 1-1.728.431A30.56 30.56 0 0 1 188.462 3.9c-.216-.216-.403-.216-.547 0a34.166 34.166 0 0 1-10.866 8.276 1.264 1.264 0 0 1-.278.129Zm-.039 5.628a1.078 1.078 0 0 1-.979-1.08 1.021 1.021 0 0 1 .979-.963h22.697a1.064 1.064 0 0 1 1.08.964 1.11 1.11 0 0 1-1.08 1.08h-12.162a71.474 71.474 0 0 1-5.397 5.612.292.292 0 0 0-.086.202s0 .1.216.1c3.655-.143 7.527-.32 11.615-.532a30.668 30.668 0 0 0-2.26-2.26 1.065 1.065 0 0 1 0-1.439 1.268 1.268 0 0 1 1.626.1l1.713 1.728c1.25 1.198 2.199 2.17 2.884 2.872.261.268.484.496.671.683a.957.957 0 0 1 .206.344.994.994 0 0 1-.307 1.096 1.122 1.122 0 0 1-1.626-.101 6.447 6.447 0 0 1-.532-.648l-.648-.648c-.648 0-1.684 0-3.123.216-5.095.216-8.996.389-11.731.547-.935 0-1.54-.187-1.827-.763a1.811 1.811 0 0 1 .647-1.928 34.96 34.96 0 0 0 5.052-5.283l-7.628.101Zm5.052-5.599a1.051 1.051 0 0 1-.965-1.065 1.022 1.022 0 0 1 .965-.978h12.594a1.024 1.024 0 0 1 .964.978 1.054 1.054 0 0 1-.964 1.065h-12.594Zm32.499-7.038c0 .648.288.965.849.965l6.549.043a37.813 37.813 0 0 1-7.643 8.938 1.353 1.353 0 0 0-.216 1.612.955.955 0 0 0 1.08.415.95.95 0 0 0 .36-.2 33.584 33.584 0 0 0 3.555-3.44v12.48a1.15 1.15 0 0 0 1.18 1.079 1.107 1.107 0 0 0 1.079-1.08V20.94h13.242v1.828c.057 1.296-.504 1.9-1.943 1.828h-3.009c-.503 0-.762.288-.762.864.067.652.499 1.012 1.295 1.08h3.224c2.447 0 3.584-1.109 3.454-3.34V10.722a1.294 1.294 0 0 0-1.295-1.296h-13.097a118.765 118.765 0 0 0 1.942-3.123h14.696a.962.962 0 0 0 .964-.964.964.964 0 0 0-.964-.965H225.25a10.08 10.08 0 0 0 1.08-2.159 1.138 1.138 0 0 0-.648-1.439 1.252 1.252 0 0 0-1.612.964l-1.295 2.591h-7.643c-.561 0-.849.317-.849.964Zm6.779 8.924v-2.476h-.058a.484.484 0 0 1 .151-.425.481.481 0 0 1 .206-.11l.016-.003a.51.51 0 0 1 .132-.008.46.46 0 0 1 .085.014h12.162a.489.489 0 0 1 .547.532v2.476h-13.241Zm0 4.85v-3.008h13.241v3.008h-13.241Zm32.599-2.26c-.863.145-1.439 0-1.626-.532a1.22 1.22 0 0 1 .763-1.44 26.994 26.994 0 0 0 10.651-6.03 1.175 1.175 0 0 1 .316-.216 2.166 2.166 0 0 1 1.627-.748c.489 0 1.108.288 1.827 1.065a24.738 24.738 0 0 0 10.335 5.498 1.146 1.146 0 0 1 .682.662 1.157 1.157 0 0 1-.049.95c-.144.504-.677.69-1.612.532a35.98 35.98 0 0 1-10.867-6.232.518.518 0 0 0-.748 0 35.353 35.353 0 0 1-5.464 3.838.868.868 0 0 1 .254-.038h10.866a.864.864 0 0 1 0 1.727H259.75a.865.865 0 0 1-.574-1.509 35.332 35.332 0 0 1-5.515 2.474Zm-1.079-7.642a1.037 1.037 0 0 1 0-1.511 18.427 18.427 0 0 0 4.519-6.347 1.183 1.183 0 0 1 1.512-.533c.561.144.748.533.532 1.18a8.214 8.214 0 0 1-.748 1.44h6.664a.961.961 0 0 1 .863.964.94.94 0 0 1-.863.863h-7.744a20.168 20.168 0 0 1-3.238 3.872 1.44 1.44 0 0 1-1.526.072h.029Zm5.383 16.681c-.864 0-1.339-.46-1.439-1.439v-4.85a1.302 1.302 0 0 1 .376-1.063 1.309 1.309 0 0 1 1.063-.377h14.637a1.342 1.342 0 0 1 1.215.91c.058.17.08.35.066.53v4.85a1.316 1.316 0 0 1-.566 1.205 1.327 1.327 0 0 1-.715.234h-14.637Zm3.224-16.364a1.037 1.037 0 0 1-1.439-.216 10.083 10.083 0 0 1-1.44-1.929c-.359-.504-.331-.892.101-1.18a1.108 1.108 0 0 1 1.439.1c.395.453.756.934 1.08 1.44.094.152.2.296.316.432a1.126 1.126 0 0 1-.057 1.353Zm10.075 14.536a.5.5 0 0 0 .343-.086.48.48 0 0 0 .204-.446v-2.879a.497.497 0 0 0-.14-.407.486.486 0 0 0-.407-.14h-11.831c-.432 0-.648.188-.648.547v2.879c0 .345.216.532.648.532h11.831Zm-5.167-16.364a1.092 1.092 0 0 1-.115-1.44 15.455 15.455 0 0 0 3.022-4.85 1.14 1.14 0 0 1 1.439-.648.936.936 0 0 1 .533 1.296 7.425 7.425 0 0 1-.748 1.44h7.326a1.009 1.009 0 0 1 .964.963.981.981 0 0 1-.964.864h-8.291c-.1.184-.211.361-.331.533l-1.18 1.51a1.28 1.28 0 0 1-1.612.332h-.043Zm7.743 1.943a1.02 1.02 0 0 1-1.439-.331 81.324 81.324 0 0 1-.222-.284l-.006-.007c-.282-.36-.741-.95-1.384-1.753a.905.905 0 0 1 .216-1.18 1.121 1.121 0 0 1 1.439.115l.439.54c.619.761 1.032 1.268 1.173 1.504a1.05 1.05 0 0 1-.173 1.396h-.043Z",clipRule:"evenodd"}))},I=function(e){var t=e.showSlogn;return(0,r.tZ)(E,{css:{position:"absolute",left:"50%",bottom:"8%",transform:"translate(-50%,0%)",opacity:t?1:0,transition:"opacity 0.3s linear",width:"30%"}})},T=Object.assign,N=function(e){return p().createElement(x.Z,T({fill:"none",viewBox:"0 0 40 40"},e),p().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M18.194 28.016a9.844 9.844 0 1 1 0-19.688 9.844 9.844 0 0 1 0 19.688Zm10.362-1.813a13.069 13.069 0 1 0-2.317 2.331l6.045 6.045a1.684 1.684 0 0 0 2.317-2.331l-6.045-6.045Z",clipRule:"evenodd"}))},A=Object.assign,B=function(e){return p().createElement(x.Z,A({fill:"none",viewBox:"0 0 124 64"},e),p().createElement("path",{fill:"#fff",d:"M0 6a6 6 0 0 1 6-6h117v64H6a6 6 0 0 1-6-6V6Z"}),p().createElement("path",{fill:"#0767FB",fillRule:"evenodd",d:"M35.274 31.36h5.729A1.642 1.642 0 0 1 42.629 33v1.813h-7.657a37.718 37.718 0 0 1-1.44 6.794 19.258 19.258 0 0 1-4.159 7.412 7.082 7.082 0 0 1-6.966 1.238 41.498 41.498 0 0 0 4.016-3.872 21.589 21.589 0 0 0 3.872-6.836 23.184 23.184 0 0 0 1.021-4.736h-8.39a3.44 3.44 0 0 1 3.44-3.44h5.281c.058-.623.087-1.256.087-1.9v-7.196h-2.98c-.115.144-.115.274-.115.389a5.413 5.413 0 0 1-2.62 3.756 7.542 7.542 0 0 1-3.266.778s1.51-3.052 2.13-4.779l.059-.172c.378-1.106.968-2.831 1.61-4.635a4.174 4.174 0 0 1 1.77-2.519 5.455 5.455 0 0 1 3.11-.92s-1.094 3.252-1.44 4.317l-.033.073a.628.628 0 0 0-.082.258h10.19a1.77 1.77 0 0 1 1.77 1.756v1.684h-6.563v9.096Zm8.694-12.48H59.8l.043 27.707h-6.189l-5.282 3.368-.518-3.368h-3.886V18.88Zm6.045 26.224 3.094-1.957h3.109V22.321h-8.708v20.826h2.202l.303 1.957ZM88.6 32.712V20.58l12.133-.633h1.094c.679-1.193.99-2.56.892-3.93l-.001-.002c-.101-.317-.274-.86-.819-.732a41.76 41.76 0 0 1-5.498.936c-3.364.407-4.925.52-9.248.832l-.827.06c-8.636.634-16.336.936-16.336.936a3.282 3.282 0 0 0 3.44 3.296c2.878-.115 7.196-.317 11.514-.533v11.903H68.579a3.44 3.44 0 0 0 3.44 3.44h12.954v9.197c0 1.152-.59 1.54-1.57 1.569h-5.037a5.412 5.412 0 0 0 2.879 3.397c1.12.374 2.31.497 3.483.36 1.756-.087 3.814-1.08 3.814-4.635v-9.888h14.508a1.638 1.638 0 0 0 1.52-1.023c.082-.2.123-.415.121-.632v-1.785H88.6Zm-12.207-9.054c.333.206.622.475.85.793l3.7 5.181-2.879 2.087-5.47-7.585.49-.36a2.979 2.979 0 0 1 3.31-.116Zm19.792.548-4.016 5.31 2.879 2.16 5.757-7.7-.49-.36a2.941 2.941 0 0 0-2.203-.575 2.95 2.95 0 0 0-1.956 1.165h.029ZM33.92 40.398l3.023-1.929 3.972 5.93c.45.863.577 1.858.36 2.807a9.04 9.04 0 0 1-.863 2.878l-6.492-9.686Z",clipRule:"evenodd"}))},R=Object.assign,P=function(e){return p().createElement(x.Z,R({width:"31",height:"17",fill:"none",viewBox:"0 0 31 17"},e),p().createElement("path",{fill:"#fff",d:"M2.928 14.638 0 0h31L5.962 15.933a2 2 0 0 1-3.034-1.295Z"}))},z=function(e){var t=e.currentUser;return(0,r.BX)("div",{css:{display:"flex",alignItems:"center",border:"".concat(y(3)," solid #fff"),backgroundColor:"#fff",position:"relative",height:y(70),boxSizing:"border-box",borderRadius:y(3),width:y(400)},children:[(0,r.tZ)(P,{css:{position:"absolute",bottom:parseInt(y(-18)),right:y(30),width:y(31),height:y(17.5)}}),(0,r.tZ)(B,{css:{width:y(123),height:"100%"}}),(0,r.BX)("div",{css:{backgroundColor:"#000",display:"inline-flex",alignItems:"center",position:"relative",height:"100%",paddingRight:y(10),paddingLeft:y(20),borderTopRightRadius:y(3),borderBottomRightRadius:y(3),flex:1},children:[(0,r.tZ)("span",{css:{fontSize:y(34),color:"#fff",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:y(180),WebkitLineClamp:1},children:t.name}),(0,r.tZ)(N,{css:{position:"absolute",right:y(10),width:y(40),height:y(40)}})]})]})},L=function(e){var t=e.setShowEndVideo,i=e.handleOpacityChange,a=e.subscribeEvent,c=e.hasEndVideo,s=e.currentUser,p=e.itemType,h=e.itemId,f=(0,o._)((0,d.useState)(!1),2),m=f[0],v=f[1],g=(0,o._)((0,d.useState)(!1),2),Z=g[0],w=g[1],x=(0,o._)((0,d.useState)(!1),2),S=x[0],E=x[1],T=(0,o._)((0,d.useState)(!1),2),N=T[0],A=T[1],B=(0,d.useRef)(!1),R=(0,d.useRef)(!1),P=(0,d.useRef)([]),L=(0,d.useRef)(new Audio),M=(0,b.Z)(function(){return n.e(6018).then(n.t.bind(n,83476,23))}),D=(0,l.Z)(function(e){if(e){var t=P.current.findIndex(function(t){return t[e]});P.current[t]&&clearTimeout(P.current[t][e]),P.current.splice(t,1)}else P.current.forEach(function(e){"object"==typeof e?clearTimeout(Object.values(e)[0]):clearTimeout(e)}),P.current=[]}),U=(0,l.Z)(function(){t(!1),w(!1),A(!1),E(!1)}),O=(0,l.Z)(function(){w(!0),P.current.push({author:setTimeout(function(){A(!0),P.current.push({content:setTimeout(function(){v(!0),E(!0),L.current.play()},200)})})}),P.current.push({exit:setTimeout(function(){i({value:0}),P.current.push({destroy:setTimeout(function(){U(),D()},500)})},2300)})});(0,d.useEffect)(function(){R.current&&!B.current&&c&&(D("timeout"),O()),c&&R.current&&!B.current&&(D("timeout"),O());var e=function(){if(t(!0),i({value:1,time:0}),R.current=!0,!1===c){U();return}B.current?U():c?O():P.current.push({timeout:setTimeout(function(){B.current=!0,w(!1),t(!1)},3e3)})};if(a){var n=a(u.FP.ENDED,e).unsubscribe;return function(){n(e),D()}}},[c,a]);var F={type:p?p.charAt(0).toUpperCase()+p.slice(1):""};return"answer"===p?F.token=h:F.id=h,(0,d.useEffect)(function(){L.current.src="https://zhstatic.zhihu.com/heifetz_static/1632738186715.wav"},[]),Z&&M&&(0,r.tZ)(C.eV,{content:F,children:(0,r.BX)(C.Wi,{zaType:"Video",zaBlock:"EndVideo",children:[(0,r.BX)("div",{css:{position:"absolute",left:"50%",top:y(250),transform:"translate(-50%,0)",textAlign:"center",opacity:N?1:0,transition:"opacity 0.2s linear"},children:[(0,r.BX)("div",{css:{position:"relative",height:y(250),width:y(300),margin:"0 auto ".concat(y(53))},children:[m&&(0,r.tZ)(k,{src:"https://zhstatic.zhihu.com/heifetz_static/kanshan.json",showKanShan:m}),(0,r.tZ)(_,{src:s.avatarUrl})]}),(0,r.tZ)(z,{currentUser:s})]}),(0,r.tZ)(I,{showSlogn:S})]})})},M=function(e){var t=e.id,n=e.itemId,i=e.itemType,a=(0,d.useRef)((0,u.Wn)(t,"*",!0)).current.subscribeMessage,c=(0,o._)((0,d.useState)(!1),2),s=c[0],p=c[1],b=(0,o._)((0,d.useState)({value:1,time:.5}),2),C=b[0],_=b[1],w=(0,o._)((0,d.useState)(null),2),k=w[0],x=w[1],S=(0,o._)((0,d.useState)({}),2),E=S[0],I=S[1],T=(0,d.useRef)(!0),N=(0,o._)((0,d.useState)(!1),2),A=N[0],B=N[1],R=(0,g.Z)(),P=(0,d.useRef)(),z=(0,o._)((0,m.Z)(0),2),M=z[0],D=z[1],U=(0,l.Z)(function(e){var t=e.value,n=e.time;_({value:t,time:void 0===n?.5:n})}),O=(0,l.Z)(function(){var e;R("".concat(v.Z.fetchRoot.www,"/api/v4/video/tail?object_id=").concat(n,"&object_type=").concat(i),{headers:{"X-Referer":document.referrer,"Content-Type":"application/json","X-App-Za.OS":"webplayer"},credentials:"include"}).then((e=(0,h._)(function(e){var t;return(0,f.__generator)(this,function(n){switch(n.label){case 0:if(!(t=e.payload).displayAnimation)return[3,5];n.label=1;case 1:var o;return n.trys.push([1,3,,4]),[4,(o=t.author.avatarUrl,new Promise(function(e,t){var n=new Image;n.onload=e,n.onerror=t,n.src=o}))];case 2:return n.sent(),x(!0),I({name:t.author.name,avatarUrl:t.author.avatarUrl}),[3,4];case 3:return n.sent(),x(!1),[3,4];case 4:return[3,6];case 5:x(!1),n.label=6;case 6:return[2]}})}),function(t){return e.apply(this,arguments)})).catch(function(){x(!1)})}),F=(0,l.Z)(function(){T.current&&(B(!0),T.current=!1)});return(0,d.useEffect)(function(){if(n&&i&&A&&R&&O(),a){var e=a(u.FP.PLAY,F).unsubscribe;return function(){e(F)}}},[O,A,R,a]),(0,d.useEffect)(function(){if(P.current&&(Z.width=P.current.clientWidth,M(P.current)),a){var e=function(){setTimeout(function(){Z.width=P.current.clientWidth})},t=[a(u.FP.ENTER_FULLSCREEN,e).unsubscribe,a(u.FP.EXIT_FULLSCREEN,e).unsubscribe,a(u.FP.ENTER_PAGE_FULLSCREEN,e).unsubscribe,a(u.FP.EXIT_PAGE_FULLSCREEN,e).unsubscribe];return function(){t.forEach(function(e){return e()})}}},[P.current,a]),(0,d.useEffect)(function(){D&&(Z.width=D&&D.width)},[D]),(0,r.tZ)("div",{ref:P,children:(0,r.tZ)("div",{css:{position:"absolute",height:"100%",width:y(1920),left:0,top:0,backgroundColor:"black",visibility:s?"visible":"hidden"},children:(0,r.tZ)("div",{css:{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",opacity:C.value,transition:"opacity ".concat(C.time,"s linear"),backgroundColor:"black",height:9*y(1920,null)/16,width:"100%"},children:P.current&&(0,r.tZ)(L,{itemId:n,itemType:i,currentUser:E,hasEndVideo:k,handleOpacityChange:U,subscribeEvent:a,setShowEndVideo:p})})})})},D=n(76976),U=n(89774),O=n(83821),F=(0,d.memo)(function(e){var t=e.videoId,n=e.contentId,p=e.contentType,h=e.zaProps,f=e.cover,m=e.muted,v=e.standalone,g=e.useSingle,b=void 0!==g&&g,C=e.hideWatermark,Z=(0,U.Z)(),y="1"===(0,s.c)("use_hevc")||Z,_="1"===(0,s.c)("use_backdrop_blur")||Z,w="1"===(0,s.c)("play_station")||Z,k=(0,d.useRef)({isPlaying:!1,isPip:!1}).current,x=(0,d.useRef)((0,u.Wn)(t,"*",!0)).current,S=(0,o._)((0,a.Z)({threshold:.5},b),2),E=S[0],I=S[1],T="1"===(0,s.c)("use_new_player")?"ks":"zhihu",N=(0,D.Hg)(),A=(0,l.Z)(function(){I||!k.isPlaying||k.isPip||x.dispatchMessage(window,u.aO.PAUSE,{dontApplyOnFullScreen:!0})}),B=(0,l.Z)(function(){k.isPlaying=!0,x.dispatchMessage(window,u.aO.EXIT_PIP)}),R=(0,l.Z)(function(){k.isPlaying=!1}),P=(0,l.Z)(function(){k.isPip=!0}),z=(0,l.Z)(function(){k.isPip=!1}),L=(0,c.Z)((0,l.Z)(function(){A()}),200);return(0,d.useEffect)(function(){if(b){var e=[x.subscribeMessage(u.FP.PLAY,B).unsubscribe,x.subscribeMessage(u.FP.PAUSE,R).unsubscribe,x.subscribeMessage(u.FP.ENTER_PIP,P).unsubscribe,x.subscribeMessage(u.FP.EXIT_PIP,z).unsubscribe];return window.addEventListener("scroll",L),function(){window.removeEventListener("scroll",L),e.forEach(function(e){return e()})}}},[b,R,B,L,x,P,z]),(0,r.tZ)("div",{ref:E,css:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,r.tZ)(O.Z,{children:(0,r.tZ)(i.ZP,{hideWatermark:void 0!==C&&C,identify:T,id:t,zaProps:h,pageName:p,muted:void 0!==m&&m,useHEVC:y,standalone:void 0!==v&&v,shouldShowPageFullScreenButton:!0,cover:f,backdropBlur:_,usePlayStation:w,scene:N,contentId:"".concat(n),contentType:p,children:n&&p&&(0,r.tZ)(M,{id:t,itemId:n,itemType:p})})})})})},65939:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(94009),u=n(85626),d=n(85879),p=n(76280),h=n(10421),f=n(25628),m=n.n(f),v=n(14168),g=n.n(v),b=n(87363),C=n(93206),Z=n(69383),y=n(43384),_=n(30722),w=n(38889),k=n(83215),x=n(80714),S=n(66263),E=n(85576),I=n(16850),T=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"voteUpButtonRef",(0,b.createRef)()),(0,a._)((0,o._)(e),"voteDownButtonRef",(0,b.createRef)()),(0,a._)((0,o._)(e),"onVote",e.props.authRequired(function(t){e.props.onVote(t)},S.q0.vote)),(0,a._)((0,o._)(e),"voteUp",function(t){var n=e.props.voting,o=(0,s._)(1===n?["UnUpvote","neutral"]:["Upvote","up"],2),r=o[0],i=o[1];e.vote(t,r,i),e.voteUpButtonRef.current.focus()}),(0,a._)((0,o._)(e),"voteDown",function(t){var n=e.props.voting,o=(0,s._)(-1===n?["UnDownvote","neutral"]:["Downvote","down"],2),r=o[0],i=o[1];e.vote(t,r,i),e.voteDownButtonRef.current.focus()}),(0,a._)((0,o._)(e),"vote",function(t,n,o){var r=e.props,i=r.disableAuth,a=r.handleToggleGuide,l=r.onClick,s=r.type,u=r.zaIds,d=u.voteUp,p=u.voteDown,h=n.includes("Upvote")?d:p;if("article"===s&&"down"===o&&Z.Z.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),Z.Z.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,(0,c._)({action:n,element:"Button"},h&&{id:h})),l){l(t,o);return}if(i){a(t,o);return}e.onVote(o)}),(0,a._)((0,o._)(e),"handleTogglerClick",function(t){e.shouldShowMenu()||t.preventDefault(),e.voteDown(t)}),(0,a._)((0,o._)(e),"renderVoteUpButton",function(){var t=e.props,n=t.isOwner,o=t.count,r=t.voting,i=t.disabled,a=t.hideDesc,l=1===r,c=l?"已赞同":"赞同",s=[c,(0,_.Zh)(o)].join(" "),u=[!a&&c,0!==o&&(0,_.Zh)(o).trim()].filter(Boolean).join(" ");return(0,d.BX)(y.$U,{as:w.ZP,zaText:l?"取消赞同":"赞同",zaType:"Button",zaModuleId:"upvote_btn",zaAction:l?"UnUpvote":"Upvote",className:m()("VoteButton VoteButton--up",{"is-active":1===r}),disabled:n||i,onClick:e.voteUp,"aria-label":s,"aria-live":"polite",onRef:e.voteUpButtonRef,children:[(0,d.tZ)(p.Ex,{center:!0,size:10,className:"VoteButton-TriangleUp"}),u]})}),(0,a._)((0,o._)(e),"renderVoteDownButton",function(){var t=e.props,n=t.voting,o=t.disabled,r=t.isMobile,i=-1===n;return(0,d.tZ)(y.$U,{as:w.ZP,zaText:i?"取消反对":"反对",zaType:"Button",zaModuleId:"downvote_btn",zaAction:i?"UnDownvote":"Downvote",className:m()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":x.Z.isMobileEntry||r}),disabled:o,onClick:e.voteDown,"aria-label":i?"已反对":"反对","aria-live":"polite",onRef:e.voteDownButtonRef,children:(0,d.tZ)(h.y,{center:!0,size:10})})}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this.props.isOwner;return(0,d.BX)("span",{ref:this.voteButtonRef,children:[(0,d.tZ)(k.bY,{input:"v",action:this.voteUp}),(0,d.tZ)(k.bY,{input:"d",action:this.voteDown}),this.renderVoteUpButton(),!e&&this.renderVoteDownButton()]})}}]),n}(b.Component);(0,a._)(T,"propTypes",{voting:g().oneOf([-1,0,1]).isRequired,disabled:g().bool,type:g().string,hideDesc:g().bool,zaIds:g().shape({voteUp:g().number,voteDown:g().number})}),(0,a._)(T,"defaultProps",{voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}}),t.Z=(0,C.compose)((0,I.$)(),E.Z)(T)},97285:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(85626),u=n(85879),d=n(87363),p=n(36695),h=n(8866),f=n(89250),m=n(10886),v=n(62618),g=n(24405),b=n(14168),C=n.n(b),Z=n(41613),y=function(e){var t=e.voteupCount,n=e.type,o=e.isFetching,r=e.isDrained,i=e.items,a=e.onLoad,l=e.handleListHide,c=e.modalShown,s=(0,g.F)().colors;return t<=0?null:(0,u.tZ)("span",{css:{color:s.GBL05A},children:(0,u.tZ)(v.Z,{size:"fullPage",onClose:l,styles:{root:{height:520}},children:c&&(0,u.tZ)(Z.Z,{isFetching:o,isDrained:r,text:"column"===n?"关注了":"赞同了",items:i,voteupCount:t,onLoad:a})})})};y.propTypes={openable:C().bool,id:C().oneOfType([C().number,C().string]),type:C().oneOf(["pin","answer","article","column"]).isRequired,modalShown:C().bool,handleListHide:C().func},y.defaultProps={openable:!0};var _={answer:"answers",article:"articles",pin:"pins",column:"columns"},w=function(e){(0,l._)(n,e);var t=(0,s._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"handleLoad",function(){var t=e.props,n=t.type,o=t.id,r=t.loadAnswerVoters,i=t.loadArticleVoters,a=t.loadColumnsFollowers;switch(n){case"answer":return r(o);case"article":return i(o);case"column":return a(o);default:return null}}),e}return(0,i._)(n,[{key:"render",value:function(){return(0,u.tZ)(y,(0,c._)({onLoad:this.handleLoad},this.props))}}]),n}(d.Component);(0,a._)(w,"propsTypes",(0,c._)({},y.propsTypes)),(0,a._)(w,"defaultProps",(0,c._)({},y.defaultProps));var k=(0,p.connect)(function(e,t){var n=t.id,o=t.type,r=e.entities.users,i=(e[_[o]]||{}).upvoters,a=(void 0===i?{}:i)[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]};return{isFetching:a.isFetching,isDrained:a.isDrained,order:a.order,items:a.ids.map(function(e){return r[e]})}},{loadAnswerVoters:h.Yu,loadArticleVoters:f.Id,loadColumnsFollowers:m.bK})(w)},41613:function(e,t,n){"use strict";var o=n(22107),r=n(94707),i=n(87320),a=n(86325),l=n(55164),c=n(57477),s=n(85626),u=n(85879),d=n(99178),p=n(14168),h=n.n(p),f=n(87363),m=n(22715),v=n(30722),g=n(80714),b=n(13427),C=n(67992),Z=function(e){(0,a._)(n,e);var t=(0,s._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,r._)(n,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,o=e.items,r=e.voteupCount,i=e.onLoad,a=e.text,s=e.isRewardList,p=e.notice,h=e.type,f=e.currentUser,Z=g.Z.isMobileEntry?{}:{getContainer:function(e){return e}};return(0,u.BX)("div",{className:"VoterList",children:[(0,u.tZ)(b.Z,{header:"".concat((0,v.uf)(r)," 人").concat(a||"赞同了")}),s&&p&&(0,u.tZ)("div",{className:"VoterList-description",children:(0,u.tZ)("p",{children:p})}),(0,u.tZ)(d.ZP,(0,c._)((0,l._)({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:i,placeholder:(0,u.tZ)(d.i,{className:"List-item",withAvatar:!0})},Z),{children:o&&o.map(function(e,t){return(0,u.tZ)(m.HC,{children:(0,u.tZ)(C.Z,{currentUser:f,user:e,isRewardList:s,meta:null,type:h,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))})}))]})}}]),n}(f.Component);(0,i._)(Z,"propTypes",{isFetching:h().bool.isRequired,isDrained:h().bool.isRequired,items:h().array.isRequired,voteupCount:h().number.isRequired,text:h().string.isRequired,onLoad:h().func.isRequired,isRewardList:h().bool,type:h().string,currentUser:h().object}),t.Z=Z},55342:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var o=n(55164),r=n(57477),i=n(94009),a=n(85879),l=n(72111),c=n(30037),s=n(10087),u=n(26115),d=n(86057),p=n.n(d),h=n(87363),f=n(36695),m=n(87641),v=n(93206),g=n(6307),b=n(66223),C=n(61255),Z=n(99830),y=n(30361),_=n(45588),w=n(9070),k=n(32122),x=n(80714),S=n(60736),E=n(93547),I=n(58909),T=n(1606),N=function(e){var t=e.expanded,n=e.isVideoCoverFullSize;return e.renderFlag?(0,a.tZ)(C.xJ,{mb:t?"8px":n?"8px":"4px"}):null},A=n(6716);function B(e){var t,n,d=e.zvideo,v=e.zvideo,S=v.id,T=v.type,B=v.description,R=void 0===B?"":B,P=v.title,z=v.author,L=v.isVisible,M=v.creationRelationship,D=v.attachedInfoBytes,U=e.lastreadTouchable,O=e.preset,F=void 0===O?"primary":O,q=e.onToggleExpand,V=e.renderOptions,H=e.couldShowHiddenSign,X=e.renderActionButtons,G=e.shouldAlwaysShowPlayer,K=e.truncateDisabled,j=e.limit,W=e.showMetaAfterPlayer,Y=e.adHint;d.thumbnailExtraInfo&&(t=d.thumbnailExtraInfo.videoId,n=d.thumbnailExtraInfo.url),d.video&&(t=d.video.videoId,n=d.video.thumbnail);var Q=(0,f.useSelector)(function(e){return p()(z)?e.entities.users[z]:z}),$=(0,I.xw)(Q),J=(0,i._)((0,h.useState)(!1),2),ee=J[0],et=J[1],en=(0,i._)((0,h.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),2),eo=en[0],er=en[1],ei=(0,i._)((0,A.Z)(F,ee,Q,M),1)[0],ea="https://".concat(x.Z.wwwHost,"/zvideo/").concat(S),el=t&&(G||ee),ec=(0,C.HE)(M),es=N({expanded:ee,isVideoCoverFullSize:G&&W,renderFlag:ec});return(0,a.tZ)(c.xM,{data:d,children:(0,a.BX)(y.ZP,{className:"ZVideoItem",data:d,title:(0,a.BX)(a.HY,{children:[$&&!L&&H&&(0,a.BX)("span",{className:"ZVideoItem-hiddenSign",children:[(0,a.tZ)(u.Z,{}),"隐藏"]}),(0,a.tZ)(l._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,a.tZ)("a",{href:ea,target:"_blank",rel:"noopener noreferrer",children:P})})]}),link:ea,meta:W?null:ei,lastreadTouchable:U,"data-zop":JSON.stringify({authorName:null==Q?void 0:Q.name,itemId:S,title:P,type:"zvideo"}),children:[$&&(d.isReviewing||d.isUpdateReviewing)&&(0,a.tZ)(_.Z,{}),el&&(0,a.BX)(m.Box,{my:"16px",children:[(0,a.tZ)("div",{className:"ZVideoItem-video",css:{margin:"0px"},children:(0,a.tZ)(s.eb,{data:d.thumbnailExtraInfo||d.video,children:(0,a.tZ)(k.Z,{videoId:t,contentId:S,contentType:T,zaProps:{type:"Zvideo",token:d.id,attachedInfo:D}})})}),ee&&(0,a.tZ)(C._N,{id:S,creationRelationship:M})]}),W&&ei,(0,a.BX)(w.Z,(0,r._)((0,o._)({excerpt:(0,E.NJ)(R,ec?140:200),html:R,cover:G?null:n,hasVideo:!G},j?{limit:j}:{}),{truncateDisabled:K,allowCollapseWithEmptyExcerpt:!0,expanded:ee,onToggleExpend:function(e){et(e),q&&q(e)},data:(0,r._)((0,o._)({},d),{id:S}),prefix:es,children:[(0,a.tZ)(g.Z,{className:"ZVideoItem-toolbar",zvideo:d,author:Q,commentsShown:eo.commentsShown,onCommentButtonClick:function(e,t){return er(t)},renderOptions:V,renderActionButtons:X}),Y&&(0,a.tZ)(b.Z,{tag:Y})]})),(0,a.tZ)(Z.Z,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:d,shown:eo.commentsShown,commentPattern:eo.commentPattern,autoFocus:eo.autoFocus,onClose:function(){return er((0,r._)((0,o._)({},eo),{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}B.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var R=(0,v.compose)((0,T.Ib)(function(e){var t=e.zvideo;return{content:{type:"Zvideo",token:String(t.id),id:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:t.id}}}}}),(0,f.connect)(function(e,t){return(0,r._)((0,o._)({},t),{zvideo:(0,r._)((0,o._)({},t.zvideo),{creationRelationship:(0,S.ze)(t.zvideo)})})}))(B)},6716:function(e,t,n){"use strict";var o=n(55164),r=n(57477),i=n(94009),a=n(85879),l=n(87363),c=n(98151),s=n(61255),u=function(e){return"plain"===e||"special-plain"===e},d=function(e){return"special-plain"===e};t.Z=function(e,t,n){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=(0,i._)((0,l.useMemo)(function(){var t;if((0,s.HE)(p)){var i=!d(e);t=(0,s.SF)(e,n,p,i)}else t=!d(e)&&(0,a.tZ)(c.Z,(0,r._)((0,o._)({},u(e)&&{preset:"plain"}),{author:n,userLinkV2:!0}),"authorInfo");return u(e)?[t,null]:[[t,null],null]},[p,e,n]),2);return[h[0],h[1]]}},65033:function(e,t,n){"use strict";n.d(t,{zc:function(){return d}});var o=n(9338),r=n(94009),i=n(30971),a=n(85879),l=n(65733);n(84871);var c=n(87363),s=n(29404),u=n(49048),d=function(){return(0,c.useContext)(s.Z)};t.ZP=function(e){var t=e.type,n=e.id,d=e.extra,p=e.children,h=(0,r._)((0,c.useState)(d),2),f=h[0],m=h[1],v=(0,l.Z)((0,o._)(function(){var e;return(0,i.__generator)(this,function(o){switch(o.label){case 0:if(!t||!n)return[2];return[4,(0,u.a)(t,n)];case 1:return(e=o.sent())&&m(e),[2]}})}));return(0,c.useEffect)(function(){d||v()},[d,v,n,t]),(0,a.tZ)(s.Z.Provider,{value:f,children:p})}},76976:function(e,t,n){"use strict";n.d(t,{Hg:function(){return l},g_:function(){return a},ks:function(){return c}});var o=n(85879),r=n(87363),i=(0,r.createContext)({scene:null}),a=function(e){var t=e.scene,n=e.children,a=(0,r.useMemo)(function(){return{scene:t}},[t]);return(0,o.tZ)(i.Provider,{value:a,children:n})},l=function(){return(0,r.useContext)(i).scene},c={recommend:"recommend",follow:"follow",search:"search",people:"my",answer:"answer_detail",question:"question_detail",article:"article_detail",zvideo:"zvideo_detail",pin:"pin_detail",topic:"topic"}},5330:function(e,t,n){"use strict";function o(e){return new Promise(function(t,n){var o=new Image;o.addEventListener("load",t),o.addEventListener("error",n),o.src=e})}n.d(t,{WY:function(){return o}}),n(57045)},53159:function(e,t,n){"use strict";n.d(t,{a:function(){return i},t:function(){return r}});var o=n(41283),r=function(e,t){var n;return(null==e?void 0:null===(n=e.mergedBadges)||void 0===n?void 0:n.length)?e:t},i=function(e,t){return(0,o.TE)(r(e,t))}},60736:function(e,t,n){"use strict";n.d(t,{AU:function(){return a},JP:function(){return c},ze:function(){return l}});var o=n(74135),r=n(6148);function i(e){var t,n,i;return(null==e?void 0:null===(t=e.bizExt)||void 0===t?void 0:t.creationRelationship)?e.bizExt.creationRelationship:"string"==typeof(null==e?void 0:null===(n=e.creationRelationship)||void 0===n?void 0:n.renderJson)?(0,o.camelizeKeys)(null!==(i=(0,r.dj)(e.creationRelationship.renderJson))&&void 0!==i?i:{}):e.creationRelationship}var a=i,l=i,c=i},4802:function(e,t){"use strict";t.Z=function(e,t){return t.every(function(t){return e.includes(t)})}},1785:function(e,t,n){"use strict";function o(e,t){return!!e&&!!t&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,{Z:function(){return o}})},95876:function(e,t,n){"use strict";function o(e){return e?"\xa5".concat(e/100):"免费"}n.d(t,{u:function(){return o}})},12421:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var o=n(53159);function r(e){var t,n=e.isOrg,r=e.badgeV2,i=e.badge;return!!n&&!!(null===(t=(0,o.a)(r,i).identity)||void 0===t?void 0:t.length)}},81567:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var o=n(98211),r={"-1":o.Ad.VOTED_DOWN,0:o.Ad.NEUTRAL,1:o.Ad.VOTED_UP,2:o.Ad.VOTED_DOWN},i=function(e){return r[e]||o.Ad.NEUTRAL}},30256:function(e,t,n){"use strict";var o=n(55164),r=n(85879),i=n(43384),a=n(84871),l=n.n(a);t.Z=function(e){return l()(function(t){var n=(0,i.Q4)().trackEvent;return(0,r.tZ)(e,(0,o._)({trackEvent:n},t))},e)}},78970:function(e,t,n){"use strict";var o=n(94009),r=n(91850),i=n(65733);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,o._)((0,r.Z)(t),2),a=n[0],l=n[1];return{modalShown:a,openVotersModal:(0,i.Z)(function(){e(function(){l.on()})()}),closeVotersModal:(0,i.Z)(function(){l.off()})}}},49048:function(e,t,n){"use strict";n.d(t,{a:function(){return u},w:function(){return s}});var o,r=n(9338),i=n(30971),a=n(80714),l={AD_PROMOTION_EXTRA_GET:"ad/getAdPromotionExtra/get",AD_PROMOTION_EXTRA_GIVE:"ad/getAdPromotionExtra/give"},c=function(e){return["https://".concat(a.Z.wwwHost),"https://".concat(a.Z.zhuanlanHost)].includes(e)},s=function(e,t,n){var o=function(r){var i=r.data,a=r.origin,s=r.source;if(c(a)&&i.type===l.AD_PROMOTION_EXTRA_GET){var u=i.data,d=u.type,p=u.id;d===e&&p===t&&(null==s||s.postMessage({type:l.AD_PROMOTION_EXTRA_GIVE,data:{type:e,id:t,promotionExtra:n}},a),window.removeEventListener("message",o))}};window.addEventListener("message",o,!1);var r=setTimeout(function(){window.removeEventListener("message",o),clearTimeout(r)},6e4)},u=(o=(0,r._)(function(e,t){return(0,i.__generator)(this,function(n){return"undefined"!=typeof window&&(null==window?void 0:window.opener)?[2,new Promise(function(n){var o=function(r){var i=r.data;if(c(r.origin)&&i.type===l.AD_PROMOTION_EXTRA_GIVE){var a=i.data,s=a.type,u=a.id,d=a.promotionExtra;s===e&&u===t&&(n(d),window.removeEventListener("message",o))}};window.addEventListener("message",o,!1),window.opener.postMessage({type:l.AD_PROMOTION_EXTRA_GET,data:{type:e,id:t}},"https://".concat(a.Z.wwwHost))})]:[2,void 0]})}),function(e,t){return o.apply(this,arguments)})},81552:function(e,t,n){"use strict";n.d(t,{m:function(){return k},w:function(){return x}});var o=n(9338),r=n(55164),i=n(57477),a=n(30971),l=n(85879),c=n(61763),s=n(65733),u=n(84871),d=n.n(u),p=n(74135),h=n(92769),f=n.n(h),m=n(36695),v=n(6148),g=n(8866),b=n(58909),C=n(67927),Z=n(9435),y=n(28814),_=n(27521),w=n(62250);function k(e){var t=(0,m.useStore)(),n=(0,m.useDispatch)(),r=(0,w.u)("answer",e);return{update:(0,s.Z)(function(e,i){var l,s,u,d=t.getState(),p=(0,g.ae)(d,{id:e}),h=d.entities.drafts,f=(l=(0,o._)(function(){return(0,a.__generator)(this,function(t){return[2,n((0,g.JA)({id:e,data:i},{answer:p}))]})}),function(){return l.apply(this,arguments)}),m=(s=(0,o._)(function(t){var o;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return o=null==t?void 0:t.publish,[4,n((0,g._o)({id:e},o,{answer:p}))];case 1:return r.sent(),[2,{payload:o}]}})}),function(e){return s.apply(this,arguments)}),v=(u=(0,o._)(function(t){return(0,a.__generator)(this,function(o){switch(o.label){case 0:return n((0,C.c0)((0,c.n$)(t),"red")),[4,n((0,g.Ly)({id:e},{answer:p,drafts:h}))];case 1:throw o.sent(),t}})}),function(e){return u.apply(this,arguments)});return f().then(function(){return r.update(S(i,{answerId:e})).then(m,v)})}),publish:(0,s.Z)(function(e,i){var l,s,u=t.getState(),d=(0,Z.Md)(u,{id:e}),p=(0,b.wY)(u),h=(0,y.np)(u,{urlToken:p}),f=(l=(0,o._)(function(t){var o;return(0,a.__generator)(this,function(r){switch(r.label){case 0:return o=null==t?void 0:t.publish,[4,n((0,g.QX)(o,{questionId:e,urlToken:p,user:h,question:d}))];case 1:return r.sent(),[2,{payload:o}]}})}),function(e){return l.apply(this,arguments)}),m=(s=(0,o._)(function(e){return(0,a.__generator)(this,function(t){throw n((0,C.c0)((0,c.n$)(e),"red")),e})}),function(e){return s.apply(this,arguments)});return r.publish(S(i,{questionId:e})).then(f,m)}),scheduledPublish:(0,s.Z)(function(e,t){var i,l=(i=(0,o._)(function(e){return(0,a.__generator)(this,function(t){throw n((0,C.c0)((0,c.n$)(e),"red")),e})}),function(e){return i.apply(this,arguments)});return r.scheduledPublish(S(t,{questionId:e})).catch(l)})}}var x=function(e){return function(t){var n=function(n){var o=k(e);return(0,l.tZ)(t,(0,i._)((0,r._)({},n),{answerContentPublish:o}))};return d()(n,t),n}};function S(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.questionId,r=n.answerId,i=new _.y;r&&i.setDraft("contentId",String(r)),i.setDraft("isPublished",!!r),i.setDraft("disabled",1),o&&i.setExtraInfo("question_id",String(o)),e.publishAt&&i.set("schedule",{publishAt:e.publishAt}),i.setExtraInfo("publisher","pc"),i.setExtraInfo("include",g.EI);var a=(0,v.hZ)((0,p.decamelizeKeys)(f()(e,["content"])));if(a&&i.setExtraInfo("pc_business_params",a),i.set("hybrid",{html:e.content}),i.set("reprint",{reshipment_settings:e.reshipmentSettings}),i.set("commentsPermission",{comment_permission:e.commentPermission}),i.set("appreciate",{can_reward:e.rewardSetting.canReward,tagline:e.rewardSetting.tagline}),-1!==["zvideo","video"].indexOf(null===(t=e.attachment)||void 0===t?void 0:t.type)){var l=e.attachment;return i.set("publishSwitch",{draft_type:"zvideo"===l.type?"video_answer":"video_answer_v2"}),i.set("originalReprint",{originalReprint:l.isOriginal?"original":"reprint"}),i.addMedia({video:{cover:{originalUrl:l.imageUrl,width:1920,height:1080},videoId:l.videoId}}),i.build()}return i.set("publishSwitch",{draft_type:"normal"}),i.set("creationStatement",{disclaimer_status:e.disclaimerStatus,disclaimer_type:e.disclaimerType}),i.set("commercialReportInfo",{isReport:e.isReport?1:0}),e.commercialZhitaskBindInfo&&i.set("commercialZhitaskBindInfo",{bindOperate:e.commercialZhitaskBindInfo.bind_operate,taskId:String(e.commercialZhitaskBindInfo.task_id),taskType:e.commercialZhitaskBindInfo.task_type}),i.set("toFollower",{push_activity:e.pushActivity}),i.setExtraInfo("bizExt",(0,p.decamelizeKeys)(e.bizExt)),i.set("contentsTables",{table_of_contents_enabled:e.tableOfContentsEnabled}),i.set("thanksInvitation",{thank_inviter_status:e.thankInviterStatus,thank_inviter:e.thankInviter}),i.build()}},65379:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o=n(49899),r=n(85456),i=n.n(r);function a(e,t,n){var r=!1,a=i()(function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];r=!1,e.apply(void 0,(0,o._)(n))},t,n);return Object.assign(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r=!0,a.apply(void 0,(0,o._)(t))},{cancel:a.cancel,flush:a.flush,pending:function(){return r}})}},98852:function(e,t,n){"use strict";var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(85626),s=n(85879),u=n(14168),d=n.n(u),p=n(87363),h=n(36695),f=n(74128),m=n(38889),v=n(80714),g=n(58909),b=n(9435),C=function(e){(0,l._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"handleToggleAnonymousConfirm",function(){var t=e.props,n=t.question.id,o=t.updateQuestionAnonymous;(0,t.onClose)(),o(n)}),e}return(0,i._)(n,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,o=e.shown,r=e.isMCNUser,i=n.relationship.isAnonymous;return(0,s.tZ)(f.Z,{title:i?"确认取消匿名身份？":"启用匿名后",onClose:t,size:v.Z.isMobileEntry?"small":"default",children:o&&(0,s.BX)("div",{children:[i?(0,s.tZ)("div",{className:"Anonymous-confirm",children:(0,s.tZ)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):(0,s.tZ)("div",{className:"Anonymous-confirm",children:(0,s.BX)("ul",{children:[(0,s.tZ)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),(0,s.tZ)("li",{children:"支持匿名邀请别人回答问题"}),(0,s.tZ)("li",{children:"除提问者本人，不能匿名编辑问题"}),(0,s.tZ)("li",{children:"匿名身份不能使用视频功能"}),(0,s.tZ)("li",{children:"不能被视频引用和联合创作"}),(0,s.tZ)("li",{children:"启用匿名将自动取消所有已获得的「专业认可」"}),(0,s.tZ)("li",{children:"匿名身份不能参与芝士任务"}),r&&(0,s.tZ)("li",{children:"不能使用商品信息发布功能"})]})}),(0,s.BX)(f.w,{direction:"horizontal",children:[(0,s.tZ)(m.ZP,{onClick:t,color:"grey",children:"取消"}),(0,s.tZ)(m.ZP,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})}}]),n}(p.Component);(0,a._)(C,"propTypes",{question:d().object.isRequired}),t.Z=(0,h.connect)(function(e){var t,n=(0,g.ib)(e);return{isMCNUser:(null==n?void 0:null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status)===2}},{updateQuestionAnonymous:b.po,fillCurrentUserIfNeeded:g.sF})(C)},9669:function(e,t,n){"use strict";n.d(t,{r:function(){return tA},Z:function(){return tR}});var o=n(20857),r=n(22107),i=n(94707),a=n(87320),l=n(86325),c=n(55164),s=n(57477),u=n(85626),d=n(85879),p=n(87363),h=n.n(p),f=n(14168),m=n.n(f),v=n(25628),g=n.n(v),b=n(43384),C=n(78322),Z=n(62146),y=function(e){var t=e.className,n=void 0===t?"":t,o=e.extra,r=void 0===o?{}:o,i=r.ua,a=void 0===i?{}:i,l=r.isVip,c=void 0!==l&&l,s="https://www.zhihu.com/settings/filter";return h().createElement(b.eV,{block:"KfeCollection-FeedBlockEntry"},h().createElement(b.$U,{zaType:"Button",extra:{link:{url:s}},onClick:function(){c?(0,Z.t)(s,a):C.Z.show()},zaText:"设置屏蔽关键词",shouldTrackShow:!0},h().createElement("div",{className:g()("KfeCollection-FeedBlockEntry-root",n)},h().createElement("div",{className:"KfeCollection-FeedBlockEntry-title"},"设置屏蔽关键词"),h().createElement("img",{className:"KfeCollection-FeedBlockEntry-img",src:"https://pic3.zhimg.com/v2-e5f10c5bc3593ca097cb7bfc5502d9b9.png"}))))};y.propTypes={className:m().string,extra:m().shape({ua:m().object,isVip:m().bool}).isRequired};var _=n(58216),w=n(36695),k=n(93206),x=n(99447),S=n(1733),E=n(38889),I=n(63068),T=n(30361),N=n(41402),A=n(69383),B=function(e,t){A.Z.trackEvent(e,(0,c._)({action:"Click",element_name:"MoreAction"},t&&{id:t}))},R=n(75789),P=n(94009),z=n(10087),L=n(86057),M=n.n(L),D=n(99830),U=n(9070),O=n(93547),F=n(1606),q=n(72111),V=n(87641),H=n(98151),X=n(32122),G=function(e){var t,n;return(null==e?void 0:null===(t=e.thumbnailExtraInfo)||void 0===t?void 0:t.videoId)||(null==e?void 0:null===(n=e.video)||void 0===n?void 0:n.videoId)},K=n(30722),j=n(7753),W=n(80565),Y=function(e){var t=e.className,n=e.imgSrc,o=e.href,r=e.title,i=e.children,a=e.imgStyle,l=void 0===a?{}:a,s=e.zaBlockText;return(0,d.tZ)(q.pl,{href:o,shouldTrackShow:!0,zaType:"Card",zaAction:"OpenUrl",view:{elementLocation:{block:{blockText:void 0===s?"":s}}},extra:{link:{url:o}},target:"_blank",children:(0,d.BX)(V.Flex,{height:"72px",className:t,bg:"GBK10A",p:"0 20px 0 16px",alignItems:"center",justifyContent:"space-between",children:[(0,d.BX)(V.Flex,{children:[n&&(0,d.tZ)(V.Image,{mr:"16px",src:n,css:(0,c._)({width:"64px",height:"40px",borderRadius:"4px",objectFit:"cover"},l)}),(0,d.BX)(V.Box,{children:[(0,d.tZ)(V.Text,{fontWeight:500,fontSize:"15px",lineHeight:"18px",mb:"4px",color:"GBK02A",maxWidth:"400px",css:(0,W.S)(1),children:r}),(0,d.tZ)(V.Text,{fontSize:"13px",lineHeight:"18px",color:"GBK06A",children:i})]})]}),(0,d.tZ)(j.ZP,{fill:"#999999"})]})})},Q=function(e){var t=e.eduSection,n=t.routeUrl,o=t.playCount,r=t.courseNum,i=t.courseTitle,a=t.courseImageInfo,l=(void 0===a?{}:a).url;return(0,d.BX)(Y,{imgSrc:void 0===l?"":l,href:n,title:"来自视频课：".concat(i),zaBlockText:"视频课卡片",children:[r?"共 ".concat(r," 集"):""," ",r&&o?"\xb7":""," ",o?"".concat((0,K.Zh)(o),"次学习"):""]})},$=function(e){var t=e.eduSection,n=void 0===t?{}:t,o=e.author,r=e.expanded,i=n.title,a=n.routeUrl,l=n.id,c=n.attachedInfoBytes,s=G(n);return(0,d.BX)(T.ZP,{className:"EduSectionItem",data:n,title:(0,d.tZ)(d.HY,{children:(0,d.tZ)(q._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,d.tZ)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:i})})}),link:a,lastreadTouchable:!0,"data-zop":JSON.stringify({authorName:null==o?void 0:o.name,itemId:l,title:i,type:"edu_section"}),children:[(0,d.BX)(V.Box,{my:"16px",children:[(0,d.tZ)("div",{className:"EduSectionItem-video",css:{margin:"0px"},children:(0,d.tZ)(X.Z,{videoId:s,contentId:l,contentType:"edu_section",zaProps:{type:"EduSection",token:n.id,attachedInfo:c}})}),r&&(0,d.tZ)(Q,{eduSection:n})]}),r&&(0,d.tZ)(H.Z,{preset:"plain",author:o,userLinkV2:!0},"authorInfo")]})},J=n(65733),ee=n(88329),et=n.n(ee),en=n(19495),eo=n(74045),er=n(7237),ei=n(102),ea=n(24794),el=n(63362),ec=n(7407),es=n(58909),eu=n(81567),ed=n(20765),ep=function(e){var t=e.commentsShown,n=void 0!==t&&t,o=e.onCommentButtonClick,r=void 0===o?et():o,i=e.eduSection,a=e.author,l=e.renderOptions,c=i.commentCount,s=i.isLiked,u=i.id,h=i.voting,f=i.voteCount,m=i.title,v=i.type,g=i.routeUrl,b=(0,es.xw)(a),C=(0,ec.dD)(),Z=(0,P._)((0,p.useState)(!1),2),y=Z[0],_=Z[1],k=(0,p.useCallback)(function(){_(!0)},[]),x=(0,p.useCallback)(function(){_(!1)},[]),S=(0,w.useDispatch)(),E=(0,J.Z)(function(e){S((0,ed.jY)(u,e))}),I=(0,J.Z)(function(e,t){S((0,ed.Qm)(u,e,t))});return(0,d.BX)(d.HY,{children:[(0,d.tZ)(er.Z,{renderChildren:function(e){return[{name:e.Vote,component:(0,d.tZ)(eo.XD,{defaultStatus:(0,eu.j)(h),defaultVoteUpCount:f,onChange:I})},{name:e.Comment,component:(0,d.tZ)(en.Z,{onClick:r,commentsShown:n,count:c,positionStatus:"normal"})},{name:e.Share,component:(0,d.tZ)(ea.Z,{id:u,type:v,url:g,title:m,authorName:a.name,css:{marginLeft:"24px"}})},{name:e.Favlist,component:(0,d.tZ)(el.Z,{onClick:k,label:"收藏",showIcon:!C},"favlist")},{name:e.Like,component:(0,d.tZ)(eo.sF,{currentIsLiked:!!s,css:{marginLeft:"24px"},onClick:E})},{name:e.Unknown,component:b?null:l()}]}}),(0,d.tZ)(ei.E,{id:u,type:"edu_section",shown:y,onClose:x,zaEnabled:!0})]})};ep.defaultProps={renderOptions:function(){return null}};var eh=n(56520);function ef(e){var t=e.eduSection,n=e.eduSection,o=n.id,r=n.description,i=void 0===r?"":r,a=n.author,l=e.onToggleExpand,u=e.renderOptions,h=e.truncateDisabled,f=e.limit,m=(0,w.useSelector)(function(e){return M()(a)?e.entities.users[a]:a}),v=(0,P._)((0,p.useState)(!1),2),g=v[0],b=v[1],C=(0,P._)((0,p.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),2),Z=C[0],y=C[1],_=function(e){b(e),l&&l(e)};return(0,d.BX)("div",{children:[(0,d.tZ)(eh.Z,{eduSection:t,renderContent:function(){return(0,d.tZ)(z.eb,{data:(null==t?void 0:t.thumbnailExtraInfo)||(null==t?void 0:t.video),children:(0,d.tZ)($,{eduSection:t,author:m,expanded:g})})},renderActions:function(){return(0,d.tZ)(U.Z,(0,s._)((0,c._)({excerpt:(0,O.NJ)(i,200),html:i,cover:null,hasVideo:!1},f?{limit:f}:{}),{truncateDisabled:h,allowCollapseWithEmptyExcerpt:!0,expanded:g,onToggleExpend:_,data:(0,s._)((0,c._)({},t),{id:o}),children:(0,d.tZ)(ep,{className:"EduSectionItem-toolbar",eduSection:t,author:m,commentsShown:Z.commentsShown,onCommentButtonClick:function(e,t){return y(t)},renderOptions:u})}))}}),(0,d.tZ)(D.Z,{className:"EduSectionItem-comment",containerClassName:"EduSectionItem-commentContainer",parent:t,shown:Z.commentsShown,commentPattern:Z.commentPattern,autoFocus:Z.autoFocus,onClose:function(){return y((0,s._)((0,c._)({},Z),{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})}ef.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var em=(0,k.compose)((0,F.Ib)(function(e){var t=e.eduSection;return{content:{type:"EduSection",id:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:G(t)}}}}}))(ef),ev=n(46102),eg=n(88423),eb=n(80714),eC=n(95876),eZ=n(28355),ey=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,o=t.liveCourse,r=t.liveCourse,i=r.id,a=r.type,l=r.subject,u=r.courseMemberCount,p=r.liveCount,h=r.price,f=r.promotionPrice,m=r.headImageMobile,v=r.likedNum,g=r.isLiked,b=r.description,C=r.speakers,Z=void 0===C?[]:C,y=t.lastreadTouchable,_=t.renderOptions,w=t.zaIds.options,k="/lives/courses/".concat(i);if(n!==T.PG.interactive)return(0,d.tZ)(T.ZP,{data:o,link:k,title:(0,d.tZ)("a",{href:k,target:"_blank",rel:"noopener noreferrer",children:l})});var x=!!Z.length&&"".concat(Z[0].member.name).concat(Z.length>1?"等":"","的私家课 \xb7 ").concat(p," 节课"),S={id:i,type:a};return(0,d.BX)("div",{className:"LiveCourseItem",children:[m&&(0,d.tZ)("a",{className:"LiveCourseItem-cover",href:k,target:"_blank",rel:"noopener noreferrer",children:(0,d.tZ)("img",{src:(0,eg.imgUrl)(m,"640w"),srcSet:"".concat((0,eg.imgUrl)(m,"r")," 2x"),alt:l})}),(0,d.tZ)(T.ZP,{data:o,link:k,title:(0,d.tZ)("a",{href:k,target:"_blank",rel:"noopener noreferrer",children:l}),lastreadTouchable:y,children:(0,d.BX)(U.Z,{excerpt:"",limit:60,limitWithImage:60,html:eb.Z.isMobileEntry?x:b||"",data:o,extra:!eb.Z.isMobileEntry&&(0,d.BX)(T.n1,{children:[(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"参与人数："}),(0,K.uf)(u)]}),(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"课程节数："}),(0,K.uf)(p)]}),(0,d.BX)("div",{children:[(0,d.tZ)("span",{children:"特价："}),"number"==typeof f?(0,d.BX)("span",{className:"LiveItem-price",children:[(0,eC.u)(f),(0,d.tZ)("del",{children:(0,eC.u)(h)})]}):(0,eC.u)(h)]})]}),children:[(0,d.tZ)(eZ.Z,(0,s._)((0,c._)({},S),{liked:g,count:v,icon:"thank"})),(0,d.tZ)(ea.Z,(0,s._)((0,c._)({},S),{url:k,title:l})),_&&_(function(){return e.contentItem},w)]})})]})}}]),n}(p.Component);(0,a._)(ey,"propTypes",{preset:m().oneOf(Object.values(T.PG)),renderOptions:m().func,zaIds:m().object}),(0,a._)(ey,"defaultProps",{zaIds:{}});var e_=(0,x.a)(function(e){var t=e.liveCourse,n=e.trackCardShow;return{module:"LiveCourseItem",card:{content:{type:"LiveCourse",id:t.id}},trackCardShow:void 0===n||n}})(ey),ew=n(6126),ek=n(7233),ex=n(14904),eS=n(40719),eE=n(30037),eI=n(6307),eT=n(81168),eN=n(66223),eA=n(45588),eB=n(6716);function eR(e){var t=e.target,n=e.target,o=n.id,r=n.attachment.url,i=n.description,a=n.title,l=n.author,u=n.thumbnailExtraInfo,h=n.isReviewing,f=n.isUpdateReviewing,m=e.lastreadTouchable,v=e.preset,g=e.onToggleExpand,b=e.renderOptions,C=e.renderActionButtons,Z=e.adHint,y=u||{},_=y.videoId,k=y.url,x=(0,w.useSelector)(function(e){return M()(l)?e.entities.users[l]:l}),S=(0,es.xw)(x),E=(0,P._)((0,p.useState)(!1),2),I=E[0],N=E[1],A=(0,P._)((0,p.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),2),B=A[0],R=A[1],L=(0,P._)((0,eB.Z)(void 0===v?"primary":v,I,x),1)[0];return(0,d.tZ)(eE.xM,{data:t,children:(0,d.BX)(T.ZP,{className:"ZVideoItem",data:t,title:(0,d.tZ)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:a}),link:r,meta:L,lastreadTouchable:m,"data-zop":JSON.stringify({authorName:null==x?void 0:x.name,itemId:o,title:a,type:"zvideo"}),children:[S&&(h||f)&&(0,d.tZ)(eA.Z,{}),I&&_&&(0,d.tZ)("div",{className:"ZVideoItem-video",children:(0,d.tZ)(z.eb,{data:u,children:(0,d.tZ)(X.Z,{videoId:_,contentId:o,contentType:"zvideo",zaProps:{token:o}})})}),I&&(0,d.tZ)(eT.Z,{}),(0,d.BX)(U.Z,{excerpt:(0,O.NJ)(i),html:i,cover:k,hasVideo:!0,truncateDisabled:!0,allowCollapseWithEmptyExcerpt:!0,expanded:I,onToggleExpend:function(e){N(e),g&&g(e)},children:[(0,d.tZ)(eI.Z,{className:"ZVideoItem-toolbar",zvideo:t,author:x,commentsShown:B.commentsShown,onCommentButtonClick:function(e,t){return R(t)},renderOptions:b,renderActionButtons:C}),Z&&(0,d.tZ)(eN.Z,{tag:Z})]}),(0,d.tZ)(D.Z,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:t,shown:B.commentsShown,commentPattern:B.commentPattern,autoFocus:B.autoFocus,onClose:function(){return R((0,s._)((0,c._)({},B),{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}eR.defaultProps={renderOptions:function(){return[null]}};var eP=(0,k.compose)((0,F.Ib)(function(e){var t,n=e.target;return{content:{type:"Answer",token:String(n.id)},extra:{mediaInfo:{videoInfo:{videoId:null===(t=n.thumbnailExtraInfo)||void 0===t?void 0:t.videoId}}}}}))(eR),ez=n(55342),eL=n(66263),eM=n(45732),eD=n(85576),eU=n(63475),eO=n(83355),eF=n(31142),eq=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.eventcard,o=n.linkTitle,r=n.linkUrl,i=n.title,a=n.eventUrl,l=n.extraInfo,c=n.content,s=n.bannerUrl,u=t.eventcard,p=t.lastreadTouchable,h=t.renderOptions,f=t.zaIds.options;return(0,d.BX)("div",{className:"EventcardItem",children:[s&&(0,d.tZ)("a",{className:"EventcardItem-cover",href:a,target:"_blank",rel:"noopener noreferrer",children:(0,d.tZ)("img",{src:s,srcSet:"".concat(s," 2x"),alt:i})}),(0,d.BX)(T.ZP,{data:u,link:a,onRef:function(t){e.contentItem=t},title:(0,d.tZ)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:i}),lastreadTouchable:p,children:[(0,d.tZ)("div",{className:"EventcardItem-content",children:c}),(0,d.BX)(T.eX,{children:[!!o&&(0,d.tZ)(eF.Z,{a:!0,color:"blue",to:r,children:o}),(0,d.tZ)("span",{children:l}),h&&h(function(){return e.contentItem},f)]})]})]})}}]),n}(p.Component);(0,a._)(eq,"propTypes",{preset:m().oneOf(Object.values(T.PG)),zaIds:m().object,renderOptions:m().func});var eV=(0,x.a)(function(e){var t=e.trackCardShow;return{module:"EventItem",trackCardShow:void 0===t||t}})(eq),eH=n(97345),eX=n(44169),eG=n(53558),eK=n(51397),ej=n(85661),eW=n(45842),eY=n(66980),eQ=Object.assign,e$=function(e){return h().createElement(eY.Z,eQ({width:"40",height:"40",viewBox:"0 0 40 40"},e),h().createElement("path",{d:"M20 12c6.904 0 12.5 5.596 12.5 12.5S26.904 37 20 37c-6.903 0-12.5-5.596-12.5-12.5S13.097 12 20 12zm0 16.826 3.222 2.061c.76.486 1.218.165 1.016-.72l-.886-3.892 2.867-2.572c.677-.608.494-1.165-.413-1.241l-3.734-.314-1.467-3.693c-.334-.841-.876-.841-1.21 0l-1.467 3.693-3.734.314c-.917.077-1.092.631-.413 1.24l2.867 2.573-.886 3.891c-.202.886.253 1.209 1.016.721L20 28.826zM29.525 3a1 1 0 0 1 .79 1.612l-4.336 5.6a1 1 0 0 1-.79.388h-.446a1 1 0 0 1-.853-.479l-3.792-6.208A.6.6 0 0 1 20.61 3h8.915zm-8.692 6.043a1 1 0 0 1-.83 1.557h-5.468a1 1 0 0 1-.81-.413l-4.06-5.6A1 1 0 0 1 10.476 3h5.772a1 1 0 0 1 .83.443l3.756 5.6z"}))},eJ=n(17736),e0=n(51448),e1=n(38636),e2=n(57177),e4=/({})/,e3={people:{Component:ej.Z,type:"user"},topic:{Component:e2.Z},column:{Component:e0.Z},roundtable:{Component:e1.Z}},e5=function(e){var t=e.actors,n=e.template,o=t.slice(0,5);return(0,d.tZ)(eH.CJKSpace,{children:n.split(e4).map(function(e){return"{}"===e?o.map(function(e,t){if(!e3[e.type])return(0,d.BX)("span",{children:[e.title,t<o.length-1&&"、"]},e.id);var n=e3[e.type],r=n.Component,i=n.type,l=void 0===i?e.type:i,u=(0,c._)((0,a._)({},l,e),"people"===e.type&&{noBadge:!0});return(0,d.BX)("span",{children:[(0,d.tZ)(r,(0,s._)((0,c._)({},u),{children:e.name||e.title})),t<o.length-1&&"、"]},e.id)}):e})})},e7=/{}/,e6=["pin","answer","article"],e8=["FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"],e9=(0,eW.Z)(function(e){var t=e.feed,n=e.currentUser,o=t.actionTextTpl,r=void 0===o?"":o,i=t.createdTime,a=t.actors,l=void 0===a?[]:a,u=t.verb,h=void 0===u?"":u,f=h.includes("MEMBER"),m=(0,p.useMemo)(function(){return f&&1e3*i<=Date.now()&&(0,eX.rL)(i)},[f,i]);if((0,eJ.D)(t)){var v=l[0],g=r.replace(e7,"");return(0,d.tZ)("div",{className:"FeedSource",children:(0,d.BX)("div",{className:"FeedSource-firstline",children:[(0,d.BX)(eH.CJKSpace,{children:[(0,d.tZ)(ej.Z,{user:v,noHoverCard:eb.Z.isMobileEntry,badgeProps:{css:{margin:"0 .3em"}},children:v.name}),g]}),m&&[(0,d.tZ)(eG.Z,{},"bull"),m]]})})}return(0,d.BX)("div",{className:"FeedSource",children:[(0,d.BX)("div",{className:"FeedSource-firstline",children:[(0,d.tZ)(e5,{actors:l,template:r}),e8.includes(h)&&(0,d.tZ)(eK.Z,(0,s._)((0,c._)({},"FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"===h?{labelInfo:{foregroundColor:{alpha:1,group:"GYL02A"},backgroundColor:{alpha:.08,group:"GYL02A"},text:"专业",type:"recognition"},extra:{customIcon:e$,customIconClassName:"FeedSource-recognizeIcon"}}:null),{className:"FeedSource-labelIcon"})),m&&[(0,d.tZ)(eG.Z,{},"bull"),m]]}),t.target&&e6.includes(t.target.type)&&(0,d.tZ)(H.Z,{className:"FeedSource-byline",author:t.target.author,preset:"plain",extra:eb.Z.isMobileEntry&&!n})]})}),te=n(28753),tt=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"handleUninterest",function(){var t=e.props,n=t.item,o=n.id,r=n.type,i=n.ad,a=t.uninterest,l=t.type;return"feed_advert"===r&&(0,eM.WY)(i.closeTrack),a(o,l)}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.ua,o=t.isVip,r=!eb.Z.isMobileEntry&&(0,d.tZ)(b.$U,{as:S.sN,zaAction:"Ignore",zaType:"Button",className:this.props.itemClassName,onClick:this.handleUninterest,onRef:function(t){e.el=t},children:"不感兴趣"}),i=!eb.Z.isMobileEntry&&(0,d.tZ)(S.sN,{className:"TopstoryItem-menuItem",onClick:this.props.authRequired(function(){}),children:(0,d.tZ)(y,{extra:{ua:n,isVip:o}})});return"feed_advert"===this.props.item.type?(0,d.BX)(S.ZP,{className:"TopstoryItem-rightButton",toggler:(0,d.BX)(E.ZP,{onRef:function(t){e.el=t},className:"TopstoryItem-advertButton",preset:"plain",children:["广告",(0,d.tZ)(te.f,{center:!0})]}),children:[(0,d.tZ)(S.sN,{className:"TopstoryItem-menuItem",onClick:this.handleUninterest,children:"不感兴趣"}),(0,d.tZ)(S.sN,{className:"TopstoryItem-menuItem",tag:"a",target:"_blank",href:"/promotion-intro",children:"知乎广告介绍"}),i]}):(0,d.BX)(p.Fragment,{children:[r,i]})}}]),n}(p.Component),tn=(0,w.connect)(null,{uninterest:eU.Tl})(tt),to=n(35597),tr=n(51695),ti=(0,k.compose)((0,F.Ib)(function(e){return{content:{type:"Question",token:String(e.question.id)},block:"写回答卡片"}}))(function(e){var t=e.question,n=e.lastreadTouchable,o=e.renderOptions,r=e.zaInfos,i=t.id,a=t.title,l=t.content,u=t.excerpt,h=t.viewCount,f=t.answerCount,m=t.recReason,v=r.options,g=r.title,b=r.expand,C=(0,P._)((0,p.useState)(!0),2),Z=C[0],y=C[1],_=(0,P._)((0,p.useState)(null),2),w=_[0],k=_[1];return(0,d.BX)("div",{className:"TopstoryQuestionAskItem",children:[(0,d.BX)("div",{className:"TopstoryQuestionAskItem-hint",children:[(0,d.tZ)(to.Z,{center:!0}),m]}),(0,d.tZ)(T.ZP,{data:t,title:(0,d.tZ)("a",(0,s._)((0,c._)({href:"/question/".concat(i),target:"_blank",rel:"noopener noreferrer"},g&&{"data-za-detail-view-id":g}),{children:a})),lastreadTouchable:n,onRef:k,children:(0,d.BX)(U.Z,{html:l,excerpt:u,limit:60,limitWithImage:60,zaIds:{expand:b},onToggleExpend:function(){return y(!Z)},children:[(0,d.BX)(eF.Z,{className:"TopstoryQuestionAskItem-writeAnswerButton",preset:"outline",color:"blue",to:"/question/".concat(i,"?write"),target:"_blank","data-za-detail-view-id":5121,"data-za-detail-view-action":"Answer",children:[(0,d.tZ)(tr.yc,{}),"写回答"]}),(0,d.BX)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[(0,K.uf)(h)," 次浏览"]}),(0,d.BX)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[(0,K.uf)(f)," 个回答"]}),o&&o(function(){return w},v)]})})]})}),ta=n(78233),tl=n(6360),tc=n(65033),ts=n(49048),tu=n(35139),td=n(49899),tp=n(18837),th=n.n(tp),tf=n(4059),tm=th()(function(e){return e.findIndex(function(e){return"annotation"===e.name})},function(e){return e.map(function(e){return e.name}).join("-")}),tv=(0,d.tZ)(tf.Z,{annotationDetail:{showOuter:!0,reasonDescription:"品牌提问"}},"BrandQuestion"),tg=[function(e,t){var n=e.componentList,o=t.item.target,r=t.tabType;if(!(!eb.Z.isMobileEntry&&"recommend"===r&&o.question&&"commercial"===o.question.questionType))return e;var i=tm(n);if(n[i].component){var a=(0,td._)(n);return a[i]={name:"annotation",component:tv},(0,s._)((0,c._)({},e),{componentList:a})}return e}],tb=n(74135),tC=n(28100),tZ=function(e){var t=e.node,n=e.data,o=void 0===n?{}:n;return(0,p.useEffect)(function(){if(t&&o){var e=(0,tb.camelizeKeys)(o).viewXTracks,n=void 0===e?[]:e;(0,tC.Cn)(t,n)}},[t,o]),null},ty=n(20072),t_=n(76435),tw=n(5330),tk=n(6148),tx=function(e){return null==e?void 0:e.forEach(function(e){return(0,tw.WY)(e)})};function tS(e){var t=e.promotionExtra,n=e.children,o=(0,p.useRef)(null),r=(0,p.useMemo)(function(){return(0,tk.dj)(t)},[t]);(0,p.useEffect)(function(){r&&(tx(r.impression_tracks),(0,ty.y3)(o.current,function(){return tx(r.view_tracks)}))},[r]);var i=(0,p.useCallback)(function(){r&&tx(r.click_tracks)},[r]);return(0,d.BX)("div",{ref:o,children:[(0,d.tZ)(t_.SV,{children:(0,d.tZ)(tZ,{data:r,node:o.current})}),"function"==typeof n?n(i):n]})}tS.propTypes={promotionExtra:m().string.isRequired,children:m().oneOfType([m().func,m().any]).isRequired};var tE=function(e){var t;if((null===(t=e.attachment)||void 0===t?void 0:t.type)==="video"){var n,o=e.attachment,r=o.parentTitle,i=o.isComplete,a=o.parentContentToken,l=o.parentPlayCount,u=o.parentVoteupCount,d=o.splitStart,p=e.thumbnailExtraInfo;if(!p)return"undefined"!=typeof window&&(null===(n=window.Raven)||void 0===n||n.captureMessage("Empty thumbnailExtraInfo",{extra:{target:e}})),e;var h={videoId:p.videoId,zvideoId:a,title:r,playCount:l,voteupCount:u,isComplete:i,startTime:d};return(0,s._)((0,c._)({},e),{videoAnswerData:h})}return e};function tI(e){var t,n=e.item,o=e.tabType,r=e.isFollowTab,i=e.preset,a=e.hasAuthorBeforeContent,l=e.handleExpand,u=e.renderIgnoreButton,h=e.adHint,f=e.index,m=n.actionTextTpl,v=n.actors,g=n.target,b=n.promotionExtra,C=n.offset,Z=(0,p.useMemo)(function(){return tE(g)},[g]),y="recommend"===o,_=(0,p.useMemo)(function(){return null==v?void 0:v.find(function(e){return"people"===e.type})},[v]),w=(0,J.Z)(function(e){b&&(0,ts.w)("answer",e,b)}),k=(0,d.tZ)(tl.Z,(0,s._)((0,c._)({answer:Z},a&&{formatContent:eJ.g}),{action:r&&"{}赞同了回答"===m&&"voted",actor:_,preset:i,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,renderExtraOptions:u,onToggleExpand:l,zaInfos:(0,s._)((0,c._)({},eO.AR),{index:C}),renderActionButtons:(t={tabType:o,item:n},function(e){var n=tg.reduce(function(e,n){return n(e,t)},e);return(0,tu.W9)(n)}),hideCommercialInviteLabel:!0,shouldAlwaysShowPlayer:y,isRecommend:y,shouldTrackReadDuration:y,adHint:h,shouldHidePaidIntroWhenCollapsed:!0,index:f}));return b?(0,d.BX)(tc.ZP,{extra:b,children:[(0,d.tZ)(ta.Z,{type:"answer",id:Z.id,index:f}),(0,d.tZ)(tS,{promotionExtra:b,children:function(e){return(0,p.cloneElement)(k,{trackPromotionClick:e,onClickTitle:w})}})]}):k}tI.propTypes={item:m().object.isRequired,tabType:m().oneOf(["recommend","follow"]),isFollowTab:m().bool,preset:m().string,hasAuthorBeforeContent:m().bool,handleExpand:m().func,renderIgnoreButton:m().func};var tT=n(15377);function tN(e){var t=e.item,n=e.isFollowTab,o=e.preset,r=e.hasAuthorBeforeContent,i=e.handleExpand,a=e.renderOptions,l=e.tabType,u=e.adHint,h=e.index,f=t.actionTextTpl,m=t.actors,v=t.target,g=t.promotionExtra,b=t.offset,C=(0,p.useMemo)(function(){return null==m?void 0:m.find(function(e){return"people"===e.type})},[m]),Z=(0,J.Z)(function(e){g&&(0,ts.w)("article",e,g)}),y=(0,d.tZ)(tT.Z,(0,s._)((0,c._)({article:v},r&&{formatContent:eJ.g}),{action:n&&("{}赞了文章"===f||"{}赞同了文章"===f)&&"voted",actor:C,preset:o,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,zaInfos:(0,s._)((0,c._)({},eO.AR),{index:b}),shouldTrackReadDuration:"recommend"===l,onToggleExpand:i,renderOptions:a,adHint:u,index:h}));return g?(0,d.BX)(tc.ZP,{extra:g,children:[(0,d.tZ)(ta.Z,{type:"article",id:v.id,index:h}),(0,d.tZ)(tS,{promotionExtra:g,children:function(e){return(0,p.cloneElement)(y,{trackPromotionClick:e,onClickTitle:Z})}})]}):y}tN.propTypes={item:m().object.isRequired,isFollowTab:m().bool,preset:m().string,hasAuthorBeforeContent:m().bool,handleExpand:m().func,renderOptions:m().func};var tA={question:"question",answer:"answer",question_ask:"question_ask",article:"article",column:"column",collection:"collection",roundtable:"roundtable",live_course:"live_course",live:"live",ebook:"ebook",pin:"pin",eventcard:"eventcard",zvideo:"zvideo",edu_section:"edu_section"},tB=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),(0,a._)((0,o._)(e),"state",{preset:"special-plain",hasAuthorBeforeContent:"recommend"===e.props.type,limitProps:{}}),(0,a._)((0,o._)(e),"handleExpand",function(t){var n=e.props.type;e.setState({preset:"recommend"===n&&t?"plain":"special-plain",hasAuthorBeforeContent:"recommend"===n&&!t})}),(0,a._)((0,o._)(e),"handleUninterest",function(){var t=e.props,n=t.item.id;return(0,t.uninterest)(n,t.type)}),(0,a._)((0,o._)(e),"renderZVideoOptions",function(t,n){return[(0,d.BX)(S.ZP,{toggler:(0,d.tZ)(E.ZP,{preset:"plain",className:"OptionsButton",icon:_.AZ,"aria-label":"更多"}),children:[(0,d.tZ)(b.$U,{zaType:"Button",zaAction:"Ignore",as:S.sN,className:"ZVideoToolbar-menuItem",onClick:e.handleUninterest,children:"不感兴趣"}),(0,d.tZ)(S.sN,{className:"TopstoryItem-menuItem",onClick:e.props.authRequired(function(){}),children:(0,d.tZ)(y,{extra:{ua:t,isVip:n}})})]},"options")]}),(0,a._)((0,o._)(e),"renderItem",function(t,n,o){var r,i=e.props,a=i.ua,l=i.currentUser,u=((null==l?void 0:l.vipInfo)||{}).isVip,p=t.target,h=t.actor,f=t.adHint,m=e.state,v=m.preset,g=m.hasAuthorBeforeContent,b="follow"===n,C="recommend"===n,Z=C?function(o){return(0,d.tZ)(tn,(0,c._)({type:n,item:t,ua:a,isVip:u,authRequired:e.props.authRequired},o))}:void 0,y=Z?l&&Z?function(e,t){var n=p.relationship,o=(void 0===n?{}:n).isAuthor,r={toggler:(0,d.tZ)(E.ZP,{preset:"plain",className:"OptionsButton",icon:_.AZ,"aria-label":"更多"}),reversed:!0,onOpen:function(){return B(e(),t)},menuClassName:"ItemOptions-selfMenu",itemClassName:"ItemOptions-selfMenuItem"};if(!o)return(0,N.az)(S.ZP,(0,s._)((0,c._)({},r),{key:"options"}),Z({itemClassName:"ItemOptions-selfMenuItem",getContainer:e}))}:null:void 0;switch(p.type){case tA.question:return(0,d.tZ)(ex.Z,{preset:T.PG.interactive,question:p,trackCardShow:!1,lastreadTouchable:!0,zaInfos:eO.AR,renderOptions:y});case tA.question_ask:return(0,d.tZ)(ti,{question:p,lastreadTouchable:!0,zaInfos:eO.AR,renderOptions:y});case tA.answer:return(0,d.tZ)(tI,{item:t,tabType:n,isFollowTab:b,preset:v,hasAuthorBeforeContent:g,handleExpand:e.handleExpand,renderIgnoreButton:Z,adHint:f,index:o});case tA.article:return(0,d.tZ)(tN,{item:t,tabType:n,isFollowTab:b,preset:v,hasAuthorBeforeContent:g,handleExpand:e.handleExpand,renderOptions:y,adHint:f,index:o});case tA.column:return(0,d.tZ)(I.Z,{preset:T.PG.interactive,column:p,trackCardShow:!1,lastreadTouchable:!0,zaInfos:eO.AR,renderOptions:y});case tA.collection:return(0,d.tZ)(ev.Z,{preset:T.PG.interactive,favlist:p,trackCardShow:!1,lastreadTouchable:!0,zaInfos:eO.AR,renderOptions:y});case tA.roundtable:return(0,d.tZ)(eS.Z,{preset:T.PG.interactive,roundtable:p,trackCardShow:!1,lastreadTouchable:!0,zaInfos:eO.AR});case tA.live_course:return(0,d.tZ)(e_,{liveCourse:p,preset:T.PG.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:y,zaIds:eO.AR});case tA.live:return(0,d.tZ)(ew.Z,{live:p,preset:T.PG.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:y,zaIds:eO.AR});case tA.ebook:return(0,d.tZ)(R.Z,{ebook:p,preset:T.PG.interactive,trackCardShow:!1,lastreadTouchable:!0});case tA.pin:return(0,d.tZ)(ek.Z,{action:!0,isFollowTab:b,actor:h,pin:p,preset:v,hasAuthorBeforeContent:g,onToggleExpand:e.handleExpand,commentsPosition:"bottom",trackCardShow:!1,shouldTrackReadDuration:C,lastreadTouchable:!0});case tA.zvideo:return(null===(r=p.attachment)||void 0===r?void 0:r.type)===1?(0,d.tZ)(eP,{target:p,preset:v,adHint:f,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(a,u)},lastreadTouchable:!0}):(0,d.tZ)(ez.Z,{zvideo:p,preset:v,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(a,u)},lastreadTouchable:!0,shouldAlwaysShowPlayer:C,showMetaAfterPlayer:C,adHint:f});case tA.eventcard:return(0,d.tZ)(eV,{trackCardShow:!1,eventcard:p,lastreadTouchable:!0,renderOptions:y,zaIds:eO.AR});case tA.edu_section:return(0,d.tZ)(em,{eduSection:p,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(a,u)},lastreadTouchable:!0});default:return null}}),e}return(0,i._)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.type,o=e.className,r=e.index;return t.target.isDelete?null:(0,d.BX)("div",{className:g()("Feed",o),children:["follow"===n&&(0,d.tZ)(e9,{feed:t}),this.renderItem(t,n,r)]})}}]),n}(p.PureComponent);(0,a._)(tB,"propTypes",{item:m().object.isRequired,type:m().oneOf(["recommend","follow"]),className:m().string});var tR=(0,k.compose)(eD.Z,(0,w.connect)(function(e){return{ua:e.env.userAgent}},{uninterest:eU.Tl}),(0,x.a)(function(e){var t=e.item,n=t.id,o=t.attachedInfo,r=t.target,i=t.target,a=i.id,l=i.type,u=t.dataZaIndex;return{module:"FeedItem",index:String(void 0===u?0:u),isAd:!1,attachedInfoBytes:o,card:{card_type:"Feed",feed_id:n,has_image:!!(r.thumbnailExtraInfo&&"image"===r.thumbnailExtraInfo.type),has_video:!!(r.thumbnailExtraInfo&&"video"===r.thumbnailExtraInfo.type),content:(0,s._)((0,c._)({type:eL.LA[l]},(0,eM.A$)(l,a)),{video_id:r.thumbnailExtraInfo&&r.thumbnailExtraInfo.videoId})},view:{id:2743},trackCardShow:!0}}))(tB)},83355:function(e,t,n){"use strict";n.d(t,{AR:function(){return i},UX:function(){return a},uK:function(){return r}});var o=n(66263),r=50,i={expand:2765,title:2812,voteUp:2756,voteDown:2761,toggleComment:2757,share:2758,favlists:2759,thank:2767,options:2760,report:2796,follow:2797,getCommentAction:function(e){return e?"Expand":"Collapse"}},a=o.BR+10},17736:function(e,t,n){"use strict";n.d(t,{D:function(){return r},g:function(){return i}});var o=["MEMBER_ANSWER_QUESTION","MEMBER_PUBLISH_EBOOK","MEMBER_CREATE_ARTICLE","MEMBER_ASK_QUESTION","MEMBER_CREATE_PIN","MEMBER_PUBLISH_LIVE_COURSE"],r=function(e){return o.includes(e.verb)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.author.name;return n?"".concat(n,"：").concat(e):e}},82335:function(e,t,n){"use strict";n.d(t,{e:function(){return h},u:function(){return p}});var o=n(87320),r=n(55164),i=n(57477),a=n(74135),l=n(4785),c=n(39288),s=n(66263),u=(0,r._)({},(0,c.FH)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),d=function(e){return e===s.R8?"answers":e===s.oP?"pins":e===s.zs?"articles":null},p=function(e,t,n,r){return{API:{types:u.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:(0,l.z)((0,a.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=d(e);return r?(0,o._)({},r,(0,o._)({},t,n)):null}}}},h=function(e,t,n,c){return{API:{types:u.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:(0,l.z)((0,a.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:c}))},UPDATE:{success:function(n){var a=d(e);return a?(0,o._)({},a,(0,o._)({},t,(0,i._)((0,r._)({},n),{annotationDetail:null}))):null}}}}},5349:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var o=n(87320),r=n(67927),i=(0,n(39288).FH)("promotion",["LIKE"]);function a(e){return function(t,n){var a=n().entities.promotions[e]||{},l=a.voteupCount,c=a.voting,s=c?0:1;return t({API:{types:i.LIKE,endpoint:"v3/promotions/".concat(e,"/voters"),query:{voting:s},method:"POST"},UPDATE:{request:{promotions:(0,o._)({},e,{voteupCount:l+(c?-1:1),voting:s})},success:function(t){return{promotions:(0,o._)({},e,t)}},failure:{promotions:(0,o._)({},e,a)}},NOTIFICATION:{failure:r.XR}})}}},79852:function(e,t,n){"use strict";var o,r=n(9338),i=n(22107),a=n(94707),l=n(55164),c=n(57477),s=n(94009),u=n(49899),d=n(30971),p=n(85879),h=n(50495),f=n(65733),m=n(83537),v=n(19706),g=n(87363),b=n(61533),C={backdrop:{type:"spring",bounce:0,duration:.5},image:{type:"spring",bounce:.2,duration:.5}},Z=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i._)(this,e),this.x=t,this.y=n,this.x=t,this.y=n},y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,i._)(this,e),this.x=t,this.y=n,this.width=o,this.height=r,this.x=t,this.y=n,this.width=o,this.height=r}return(0,a._)(e,[{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}}]),e}(),_=function(e){return new Z(e.left+e.width/2,e.top+e.height/2)},w=function(e){var t=!1;return function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];t||(t=!0,requestAnimationFrame(function(){t=!1,e.apply(void 0,(0,u._)(o))}))}},k=function(e,t){var n=e.width,o=e.height,r=Math.min(Math.min(t.width,n)/n,Math.min(t.height,o)/o),i=n*r,a=o*r;return new y((t.width-i)/2,(t.height-a)/2,i,a)},x=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e.addEventListener.apply(e,(0,u._)(n)),function(){e.removeEventListener.apply(e,(0,u._)(n))}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=(0,f.Z)(t);(0,g.useEffect)(function(){if(e)return x(window,"resize",w(n))},[e,n])},E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=(0,f.Z)(t);(0,g.useEffect)(function(){if(e)return x(window,"scroll",w(n))},[e,n])},I=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=(0,f.Z)(n);(0,g.useEffect)(function(){if(e)return x(document,t,o)},[e,t,o])},T=(o=(0,r._)(function(e){var t;return(0,d.__generator)(this,function(n){return(t=new Image).decode?(t.src=e,[2,t.decode().then(function(){return t})]):[2,new Promise(function(n,o){t.onload=function(){return n(t)},t.onerror=o,t.src=e})]})}),function(e){return o.apply(this,arguments)});t.Z=function(e){var t=e.img,n=e.onClose,o=(0,s._)((0,g.useState)(null),2),r=o[0],i=o[1],a=(0,g.useRef)(null),u=function(){n()},d=(0,g.useRef)(0),w=(0,f.Z)(function(e){if(t){d.current=window.scrollY;var n,o,r,c,s,u,p,h,f=t.getBoundingClientRect(),m=k((n=t.naturalWidth,o=t.naturalHeight,r=t.width,c=t.height,s=Number(t.dataset.rawwidth),u=Number(t.dataset.rawheight),s>0&&u>0&&.01>Math.abs(s/u-n/o)?{width:s,height:u}:n>0&&o>0?{width:n,height:o}:{width:r,height:c}),new y(0,0,window.innerWidth,window.innerHeight)),v=m.width/f.width,g=document.scrollingElement.getBoundingClientRect(),b=new y(f.left-g.left,f.top-g.top,f.width,f.height),C={width:b.width,height:b.height,left:b.left,top:b.top};t.style.visibility="hidden";var w=(p=_(m),h=_(f),new Z(p.x-h.x,p.y-h.y));i({src:t.currentSrc||t.src,style:(0,l._)({},C),animate:{x:w.x,y:w.y,scale:v,name:"animate"},exit:{x:0,y:0,scale:1,name:"exit"},onAnimationStart:function(){a.current&&(a.current.style.willChange="transform")},onAnimationComplete:function(n){a.current&&(a.current.style.willChange="auto"),"exit"===n.name?t.style.visibility="":"animate"===n.name&&(null==e||e())}})}});(0,g.useEffect)(function(){if(t){var e=t.currentSrc||t.src,n=t.dataset.original,o=n&&n!==e?T(n):void 0,r=!1;return w(function(){null==o||o.then(function(e){!r&&a.current&&(a.current.src=e.src)})}),function(){r=!0,i(null)}}},[t,w]);var x=(0,s._)((0,g.useState)(!1),2),N=x[0],A=x[1];if((0,m.Z)(function(){return A(!1)},N?300:null),S(!!r,function(){w(),A(!0)}),E(!!r,function(){var e=window.scrollY;!N&&Math.abs(d.current-e)>=40&&u()}),I(!!r,"keydown",function(e){"Escape"===e.key&&u()}),"undefined"==typeof document)return null;var B=r&&(0,p.BX)(p.HY,{children:[(0,p.tZ)(h.d7.div,{css:{position:"fixed",zIndex:999,inset:0,cursor:"zoom-out",background:"rgba(18,18,18,.65)",opacity:0,willChange:"opacity"},animate:{opacity:1},exit:{opacity:0},transition:C.backdrop,onClick:u}),(0,p.tZ)(h.d7.img,(0,c._)((0,l._)({ref:a,css:{position:"absolute",zIndex:999,inset:0,cursor:"zoom-out",background:"#fff",backgroundClip:"content-box",padding:.5}},r),{transition:C.image,onClick:u}))]});return(0,b.createPortal)((0,p.tZ)(v.M,{children:B}),document.body)}},29564:function(e,t,n){"use strict";n.d(t,{BM:function(){return W},Fi:function(){return $},Gh:function(){return eC},Lh:function(){return et},Lr:function(){return H},PE:function(){return eZ},Rz:function(){return ea},UC:function(){return en},ZV:function(){return Q},__:function(){return V},m7:function(){return J},mQ:function(){return el},q6:function(){return G},qJ:function(){return eg},yk:function(){return X},zi:function(){return er}});var o=n(55164),r=n(57477),i=n(71728),a=n(94009),l=n(85879),c=n(82644),s=n(64137),u=n(28753),d=n(99878),p=n(64011),h=n(46906),f=n(25195),m=n(53237),v=n(38003),g=n(64884),b=n(42951),C=n(27834),Z=n(30577),y=n(6788),_=n(37986),w=n(17924),k=n(41884),x=n(86481),S=n(87363),E=n(87641),I=n(43384),T=n(83697),N=n(24405),A=n(72111),B=n(88423),R=n(65733),P=n(3331),z=n(14168),L=n.n(z),M=n(32516),D=n(60203),U=n(31650),O=n(65162),F={GOLDEN:{bg:"GYL02A",color:"GYL02A",bgAlpha:.08},BLUE:{bg:"GBL07A",color:"GBL07A",bgAlpha:.08},PURPLE:{bg:"GRD07A",color:"GRD07A",bgAlpha:.08},GREY:{bg:"GBK10A",color:"GBK06A",bgAlpha:1}},q=function(e){var t=e.bg,n=e.bgAlpha,o=void 0===n?1:n,r=e.textAlpha,i=void 0===r?1:r,a=(0,N.F)(),l=a.colors,c=a.colorMod,s=l[t],u=l[e.color];return{bg:1===o?s:c(s).alpha(o),color:1===i?u:c(u).alpha(i)}},V=(0,S.forwardRef)(function(e,t){var n=e.zaBlock,a=e.color,p=void 0===a?F.BLUE:a,h=e.iconUrl,f=e.icon,m=e.name,v=e.subText,g=e.linkText,b=e.link,C=e.expandable,Z=e.isExpanded,y=e.showDeleteButton,_=e.onDelete,w=e.onClick,k=e.style,x=e.className,S=(0,i._)(e,["zaBlock","color","iconUrl","icon","name","subText","linkText","link","expandable","isExpanded","showDeleteButton","onDelete","onClick","style","className"]),R=(0,T.n)().Mobile,P=(0,N.F)().fontWeights,z=q(p),L=z.bg,M=z.color,D=b&&!C?A.pl:n?I.Wi:"div",U=null,O=null;return y?O=c.HN:C?U=Z?s.v:u.f:b&&(U=d.N),(0,l.BX)(D,(0,r._)((0,o._)((0,r._)((0,o._)({ref:t,className:x,css:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-start",background:L,padding:"0 8px",height:R?28:30,borderRadius:R?14:15,textDecoration:"none",fontSize:R?13:14,lineHeight:R?"16px":"18px",color:M,overflow:"hidden"}},b&&{href:b},n&&{zaText:!0,zaBlock:n,shouldTrackShow:!0,zaType:"Text"}),{style:(0,o._)({cursor:U?"pointer":"default"},k),onClick:w}),S),{children:[h?(0,l.tZ)("img",{src:(0,B.imgUrl)(h,"m"),height:R?16:19,width:R?16:19,alt:"",css:{flex:"0 0 auto"}}):!!f&&f&&(0,l.tZ)(f,{fill:M,size:R?17:20,css:{flex:"0 0 auto"},viewBox:"0 0 24 24"}),(0,l.tZ)(E.Flex,{overflow:"hidden",flex:"0 0 auto",mx:"4px",children:(0,l.tZ)(E.Text,{flexShrink:0,fontWeight:P.bold,mt:R?"1px":0,children:m})}),!!(v||g)&&(0,l.tZ)(E.Text,{mt:R?"1px":0,mr:"4px",css:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:v||g}),!!O&&(0,l.tZ)(O,{fill:M,size:18,onClick:_,css:{flex:"0 0 auto",cursor:"pointer"}}),!!U&&(0,l.tZ)(U,{fill:M,size:R?23:26,css:{margin:"0 -4px",flex:"0 0 auto"}})]}))});V.displayName="Label";var H=(0,S.forwardRef)(function(e,t){var n=e.children,c=e.placement,s=e.onClick,u=e.onPopoverClosed,d=e.zaBlock,p=(0,i._)(e,["children","placement","onClick","onPopoverClosed","zaBlock"]),h=(0,N.F)(),f=(0,S.useRef)(),m=(0,a._)((0,S.useState)(!1),2),v=m[0],g=m[1],b=(0,S.useRef)(),C=(0,T.n)().Mobile,Z=!!n,y=(0,R.Z)(function(e){f.current=(t&&("function"==typeof t?t(e):t.current=e),e)}),_=(0,R.Z)(function(e){s&&s(e),Z&&g(!v)}),w=(0,R.Z)(function(){b.current&&clearTimeout(b.current),Z&&!v&&g(!0)}),k=(0,R.Z)(function(){b.current=setTimeout(function(){g(!1)},100)});return(0,l.BX)(l.HY,{children:[(0,l.tZ)(V,(0,o._)((0,r._)((0,o._)({},p),{ref:y,expandable:Z,isExpanded:v,onClick:_,zaBlock:d}),!C&&{onMouseOver:w,onMouseLeave:k})),Z&&(0,l.tZ)(P.Z,{isOpen:v,arrowed:!0,globalClose:!0,listenResize:!0,target:f.current,placement:void 0===c?"bottom":c,boundary:{padding:16},customStyle:{borderRadius:"8px",boxShadow:"0 -3px 10px 0 rgba(0, 0, 0, 0.1)",backgroundColor:h.colors.GBK99C},onClose:k,onAfterLeave:u,children:(0,l.tZ)("div",{onMouseOver:w,onMouseLeave:k,children:n})})]})});H.displayName="ExpandableLabel";var X=function(e){var t=e.color,n=void 0===t?F.GREY:t,o=e.icon,r=e.name,i=e.subText,a=e.moreLink,c=e.renderMoreIcon,s=e.description,u=e.hideName,d=(0,T.n)().Mobile,p=q(n).color,h=null;return h=a&&c?(0,l.BX)(l.HY,{children:[i,(0,l.tZ)(A.pl,{href:a,css:{marginLeft:i?4:0,textDecoration:"none",color:"inherit"},children:c})]}):i,(0,l.BX)(E.Box,{py:"8px",maxWidth:d?"calc(100vw - 34px)":"400px",children:[!u&&(0,l.tZ)(V,{color:n,icon:o,name:r,subText:h,css:{height:d?32:36,borderRadius:0,background:"none"}}),!!s&&(0,l.tZ)(E.Text,{lineHeight:d?"16px":"18px",fontSize:d?"13px":"14px",color:p,mx:"12px",mb:"8px",mt:u?"8px":0,children:s})]})},G=function(e){var t=e.annotationDetail;if(!t)return null;var n=t.detail,o=t.member,r=t.reasonDescription,i=t.type,a=r||"该内容已被标记",c="strong"===i?p.G:void 0,s=o?"".concat(o.name,"："):"";return(0,l.tZ)(H,{color:F.GREY,icon:c,name:a,zaBlock:"Annotation",children:(0,l.tZ)(X,{icon:c,name:a,description:(n||s)&&(0,l.tZ)("span",{dangerouslySetInnerHTML:{__html:"".concat(s).concat(n||"未填写原因")}})})})},K=function(e){var t=e.fill,n=(0,N.F)().colors.GBL05A;return(0,l.tZ)(h.x,{fill:t||n,size:18,css:{verticalAlign:"bottom"}})},j={color:"inherit",textDecoration:"underline"},W=function(e){var t=e.abnormalDetail,n=void 0===t?{description:"回答建议修改",reason:""}:t,o=n.description,r=n.reasonId,i=n.reason,a=r&&[10015,30005].includes(r)?(0,l.BX)(l.HY,{children:["不规范转载",(0,l.tZ)(A.pl,{zaBlock:"AnswerCollapsedClick-Nonstandard",href:"https://www.zhihu.com/question/20258015",css:j,onClick:function(e){return e.stopPropagation()},children:i})]}):i,c=10027===r?(0,l.BX)(l.HY,{children:["作者修改内容或举证后，回答会重新展示。如果一周内未得到有效修改，回答会自动折叠。",(0,l.tZ)("br",{}),"知乎严格按照公开的流程处理各类投诉，不收任何费用也不与任何中介机构合作。",(0,l.tZ)(A.pl,{zaBlock:"AnswerCollapsedClick",href:"https://www.zhihu.com/term/zhihu-terms#sec-report",css:j,children:"投诉流程"})]}):"作者修改内容通过后，回答会重新显示。如果一周内未得到有效修改，回答会自动折叠。";return(0,l.tZ)(H,{color:F.GREY,name:o,subText:a,zaBlock:"AnswerCollapsedLabel",children:(0,l.tZ)(X,{name:o,renderMoreIcon:(0,l.tZ)(K,{}),moreLink:"https://www.zhihu.com/question/24752645",description:c})})},Y="该回答已被折叠",Q=function(e){var t=e.collapseReason;return(0,l.tZ)(H,{color:F.GREY,name:Y,zaBlock:"AnswerCollapsed",children:(0,l.tZ)(X,{name:Y,renderMoreIcon:(0,l.tZ)(K,{}),moreLink:"/question/20120168/answer/35704072",description:"折叠原因：".concat(t)})})},$=function(e){var t=e.data,n=(0,i._)(e,["data"]),a=t.url,c=t.title;return(0,l.tZ)(V,(0,r._)((0,o._)({},n),{name:"知乎蓝宝书收录",icon:f.q,subText:c,link:a,zaBlock:"BlueBookLabel"}))};function J(e){var t=e.data,n=(0,i._)(e,["data"]),a=t.name,c=t.iconUrl,s=t.linkText,u=t.link;return(0,l.tZ)(V,(0,r._)((0,o._)({},n),{color:F.PURPLE,name:a,subText:s,iconUrl:c,icon:m.d,link:u,zaBlock:"CampaignLabel"}))}var ee={answer:"品牌特邀",article:"特邀文章"};function et(e){var t=e.data,n=e.type,o=!!(null==t?void 0:t.subText),r=t.name,i=t.iconUrl;return(0,l.tZ)(V,{iconUrl:i,icon:v.T,name:o?void 0===r?"谢邀":r:ee[void 0===n?"answer":n],subText:(null==t?void 0:t.subText)||"本文由品牌邀请撰写",zaBlock:"CommercialLabel"})}var en=function(e){var t=e.disclaimerInfo,n=t.excerpt,o=t.description,r=t.subDescription,i=n?"创作声明":o,a=n&&"内容".concat(n);return(0,l.tZ)(H,{name:i,subText:a,zaBlock:"DisclaimerLabel",children:(0,l.tZ)(X,{color:F.BLUE,name:i,subText:a,description:r})})},eo=function(e){var t=e.data,n=e.onLinkClick,i=t.color,a=t.type,c=t.icon,s=t.title,u=t.description,d=t.link,p=(0,T.n)().Mobile,h=(0,N.F)(),f=(0,S.useRef)(null),m=(0,R.Z)(function(e){d&&n&&n(e,d,a)});return(0,l.tZ)(V,(0,r._)((0,o._)({ref:f,color:i,icon:c,name:s},d&&{zaText:!0,shouldTrackShow:!0,zaBlock:a}),{subText:u,link:d,onClick:m,css:{height:p?34:36,borderRadius:0,background:"none","&:hover":{background:d?h.colors.GBK10A:"none"}}}))},er=function(e){var t=e.data,n=e.onLinkClick,o=(0,T.n)().Mobile;return(0,l.tZ)(E.Box,{py:"8px",maxWidth:o?"calc(100vw - 34px)":"400px",children:t.map(function(e){return(0,l.tZ)(eo,{data:e,onLinkClick:n},e.type)})})},ei=function(e){var t=e.answerCollapsed,n=e.answerAbnormal,a=e.commercial,c=e.thanksForInviting,s=e.positive,u=e.bluebook,d=e.annotation,p=e.disclaimer,h=e.adPromotion,f=e.campaign,m=e.limit,v=void 0===m?2:m,g=(0,i._)(e,["answerCollapsed","answerAbnormal","commercial","thanksForInviting","positive","bluebook","annotation","disclaimer","adPromotion","campaign","limit"]);if(!t&&!n&&!a&&!c&&!s&&!u&&!d&&!p&&!h&&!f)return null;var b=[t||n,a||c||h||u,s,d||p,f].filter(Boolean).slice(0,v);return(0,l.tZ)(E.Flex,(0,r._)((0,o._)({flexDirection:"row",flexWrap:"wrap",pt:"8px",css:{"& > div, & > a":{marginRight:"8px",marginBottom:"8px"}}},g),{children:b.map(function(e,t){return(0,l.tZ)("div",{children:e},t)})}))};ei.propTypes={answerCollapsed:L().node,answerAbnormal:L().node,commercial:L().node,thanksForInviting:L().node,bluebook:L().node,positive:L().node,annotation:L().node,disclaimer:L().node,adPromotion:L().node,campaign:L().node};var ea=(0,S.memo)(ei),el=function(){return(0,l.tZ)(V,{color:F.GOLDEN,icon:g.o,name:"亲自答",subText:"此回答由问题相关方亲自撰写",zaBlock:"LegacyPositiveLabel"})},ec=["relevant","editor_recommendation","answered_by_related","answered_by_official","answered_for_refute","zhizhi_plan_rumour_deny","zhizhi_plan_recommend","zhizhi_plan_edu_recommend","zhizhi_plan_baby_recommend","zhizhi_plan_acg_recommend","zhizhi_plan_outing_recommend","zhizhi_plan","zhizhi_reward","online_roundtable","roundtable","topic","special","raise_hand","weekly","daily"],es={online_roundtable:b.T,relevant:g.o,editor_recommendation:C.N,answered_by_related:g.o,answered_by_official:g.o,answered_for_refute:M.G,roundtable:b.T,special:Z.xl,topic:D.Z,raise_hand:Z.xl,weekly:y.S,daily:_.N,zhizhi_plan_recommend:w.z,zhizhi_plan_edu_recommend:w.z,zhizhi_plan_baby_recommend:w.z,zhizhi_plan_acg_recommend:w.z,zhizhi_plan_outing_recommend:w.z,zhizhi_plan_rumour_deny:k.E,zhizhi_plan:w.z,zhizhi_reward:U.Z},eu={online_roundtable:"圆桌收录",relevant:"亲自答",editor_recommendation:"编辑推荐",answered_by_related:"相关方答",answered_by_official:"官方回应",answered_for_refute:"知友辟谣",roundtable:"圆桌收录",topic:"话题收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划",zhizhi_plan_baby_recommend:"致知计划",zhizhi_plan_acg_recommend:"致知计划",zhizhi_plan_outing_recommend:"致知计划",zhizhi_plan_rumour_deny:"专业辟谣",zhizhi_plan:"致知计划",zhizhi_reward:"致知计划",science_seeking_truth_recommend:"科学求真"},ed=(0,r._)((0,o._)({},eu),{weekly:"知乎周刊收录",daily:"知乎日报收录"}),ep={relevant:"此回答由问题相关方亲自撰写",answered_by_related:"本回答由问题相关方撰写",answered_by_official:"本回答由国家官方权威机构撰写",answered_for_refute:"本回答由专业知友对内容辟谣"},eh={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",answered_by_related:"相关方答",answered_by_official:"官方回应",answered_for_refute:"知友辟谣",roundtable:"圆桌",topic:"话题收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",zhizhi_plan:"致知计划",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划之教育季",zhizhi_plan_baby_recommend:"致知计划之母婴季",zhizhi_plan_acg_recommend:"致知计划之动漫游戏季",zhizhi_plan_outing_recommend:"致知计划之未来出行季",zhizhi_plan_rumour_deny:"辟谣标识",zhizhi_reward:"致知计划"},ef=function(e){return{icon:es[e],title:ed[e],shortTitle:eu[e],description:ep[e],zaName:eh[e]}},em=function(e,t){return e.includedInfos?e.includedInfos.find(function(e){return e.type===t}):null},ev=function(e,t){switch(t){case"online_roundtable":if(!e.onlineRoundtable)return null;return(0,r._)((0,o._)({},ef(t)),{description:e.onlineRoundtable.name,link:"https://www.zhihu.com/roundtable/".concat(e.onlineRoundtable.urlToken)});case"relevant":if(!e.relevantInfo||!e.relevantInfo.isRelevant)return null;return ef(t);case"answered_by_related":if(!em(e,"answered_by_related"))return null;return ef(t);case"answered_by_official":if(!em(e,"answered_by_official"))return null;return ef(t);case"answered_for_refute":if(!em(e,"answered_for_refute"))return null;return ef(t);case"zhizhi_plan":var n=e.includedInfos?e.includedInfos.find(function(e){return e.commonType===t&&!ec.includes(e.type)}):null;if(!n)return null;return{icon:es[n.type]||es[t],title:n.name||ed[n.type]||ed[t],shortTitle:n.name||eu[n.type]||eu[t],description:n.title,link:n.url,zaName:eh[n.type]||n.type};case"zhizhi_reward":var i=e.includedInfos?e.includedInfos.find(function(e){return e.type===t}):null;if(!i)return null;return{icon:es[i.type]||es[t],title:i.name||ed[i.type]||ed[t],shortTitle:i.name||eu[i.type]||eu[t],description:i.title,link:i.url,zaName:i.name||eh[i.type]};case"special":case"raise_hand":var a=em(e,t);if(!a)return null;var l=ef(t);return(0,r._)((0,o._)({},l),{title:a.subtitle||l.title,shortTitle:a.subtitle||l.shortTitle,description:a.title,link:a.url});default:var c=em(e,t);if(!c)return null;return(0,r._)((0,o._)({},ef(t)),{description:c.title,link:c.url})}},eg=function(e){var t=e.placement,n=e.data,i=e.onExpand,c=e.onLinkClick,s=e.className,u=(0,S.useMemo)(function(){var e=[];if(ec.forEach(function(t){var r=ev(n,t);r&&e.push((0,o._)({type:t,color:F.GOLDEN},r))}),!e.length)return null;var t=e.length>1&&"online_roundtable"!==e[0].type,r=(0,a._)(e,1)[0];return t&&(r.meta="relevant"===r.type?"及 ".concat(e.length-1," 项收录"):"等 ".concat(e.length," 项收录")),{items:e,label:r,expandable:t}},[n]),d=(0,S.useRef)(null),p=(0,S.useRef)(!1);if(!u)return null;var h=u.label,f=u.items,m=u.expandable,v=h.type,g=h.icon,b=h.title,C=h.shortTitle,Z=h.meta,y=h.description,_=h.link,w=!!(_&&!m),k=w?H:I.Wi,x=(0,R.Z)(function(){p.current=!1}),E=(0,R.Z)(function(e){m&&!p.current&&(p.current=!p.current,i&&i(u)),!m&&w&&c&&c(e,_,v)}),T={as:H,zaType:"Block"};return w?T={zaText:!0,zaBlock:v,shouldTrackShow:!0}:m&&(T=(0,r._)((0,o._)({},T),{zaText:!0,onPopoverClosed:x})),(0,l.tZ)(k,(0,r._)((0,o._)({},T),{ref:d,color:F.GOLDEN,icon:g,name:Z&&C||b,subText:Z||y,link:_,placement:void 0===t?"bottom":t,onClick:E,className:s,children:m&&(0,l.tZ)(er,{data:f,onLinkClick:c})}))},eb={zhicon_icon_24_chat_bubble_idea_fill:O.Z},eC=function(e){var t=e.theme,n=e.text,i=e.iconName,a=e.detail,c=i?eb[i]:void 0,s={color:F[t],icon:c,name:n,css:{display:"inline-flex"}};return a?(0,l.tZ)(H,(0,r._)((0,o._)({},s),{children:(0,l.tZ)(X,{color:F[t],description:a,hideName:!0,name:n})})):(0,l.tZ)(V,(0,o._)({},s))},eZ=function(e){var t=e.inviter,n=(0,i._)(e,["inviter"]),a=t.name,c=t.urlToken,s=(0,l.BX)(l.HY,{children:["谢邀",(0,l.tZ)(A.pl,{"data-za-detail-view-id":8126,href:"https://www.zhihu.com/people/".concat(c),css:{marginLeft:4,textDecoration:"none",color:"inherit"},zaBlock:"ThanksForInvitingClick",children:"@".concat(a)})]});return(0,l.tZ)(V,(0,r._)((0,o._)({icon:x.E,name:s},n),{zaBlock:"ThanksForInvitingLabel"}))}},30037:function(e,t,n){"use strict";n.d(t,{$_:function(){return Z},OW:function(){return y},qC:function(){return C},xM:function(){return b}});var o=n(87320),r=n(55164),i=n(57477),a=n(94009),l=n(82083),c=n(87363),s=n(84871),u=n.n(s),d=n(76931),p=n.n(d),h=n(74135),f=[["REACTION_AGREE_DISAGREE","isBlockingVote"],["REACTION_ATTENTION_QUESTION","isBlockingFollowQuestion"],["REACTION_BIND_TOPIC","isBlockingBindTopic"],["REACTION_COLLECT","isBlockingCollect"],["REACTION_COMMENT","isBlockingComment"],["REACTION_GOOD_QUESTION","isBlockingLikeQuestion"],["REACTION_GRATITUDE","isBlockingLike"],["REACTION_REWARD","isBlockingReward"],["REACTION_SHARE","isBlockingShare"],["REACTION_VOTE","isBlockingPoll"],["REACTION_FORWARD","isBlockingForward"],["REACTION_ANSWER_NEWEST_LIST","isBlockingAnswerNewestList"]],m={isBlockingVote:!1,isBlockingLike:!1,isBlockingCollect:!1,isBlockingComment:!1,isBlockingShare:!1,isBlockingFollowQuestion:!1,isBlockingLikeQuestion:!1,isBlockingBindTopic:!1,isBlockingPoll:!1,isBlockingReward:!1,isBlockingForward:!1,isBlockingAnswerNewestList:!1};function v(e){return null!=e&&!!e.reactionInstruction}var g=(0,c.createContext)({getBlockStrategies:function(){return m}}),b=function(e){var t=e.data,n=e.dataPath,s=e.passThrough;return(0,l.jsx)(g.Provider,{value:(0,c.useState)({getBlockStrategies:function(){var e=(0,a._)(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).dataPath,n=function(e,t){if(v(e))return e.reactionInstruction;if("string"==typeof t){var n=p()(e,t);if(v(n))return n.reactionInstruction}if(Array.isArray(t))for(var o=0;o<t.length;o++){var r=p()(e,t[o],null);if(v(r))return r.reactionInstruction}}(e,t),l=(0,r._)({},m);return n?[Object.keys(n).reduce(function(e,t){return"HIDE"===n[t]?(0,i._)((0,r._)({},e),(0,o._)({},f.map(function(e){var n=(0,a._)(e,2),o=n[0],r=n[1];return t===o||t===(0,h.camelize)(o)?r:""}).filter(Boolean)[0],!0)):e},l),e]:[l,e]}(t,{dataPath:n}),2),l=e[0],c=e[1];return s?s(l,c):l}})[0],children:e.children})},C=function(){return{blockStrategies:(0,(0,c.useContext)(g).getBlockStrategies)()}};function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return u()(function(n){var o=e.dataPath,i=e.passThrough;return(0,l.jsx)(b,{data:n,dataPath:o,passThrough:i,children:(0,l.jsx)(t,(0,r._)({},n))})},t)}}var y=function(e){return u()(function(t){var n=C().blockStrategies;return(0,l.jsx)(e,(0,i._)((0,r._)({},t),{blockStrategies:n}))},e)}},62146:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var o=n(87804);function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.ZhihuHybrid?o.Z.dispatch("base/openURL",{url:e}):n?window.open(e,"_blank"):window.location.href=e}},82267:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var o=n(9338),r=n(30971),i=n(87363),a=n(43384),l=n(20330),c=n(35829),s=function(){var e,t=(0,a.Q4)().trackEvent;return(0,i.useCallback)((e=(0,o._)(function(e){var n,o,i,a,s,u,d,p,h,f,m,v,g,b,C,Z;return(0,r.__generator)(this,function(r){return n=e.element,o=e.id,i=e.url,a=e.source,u=void 0===(s=e.scenes)?l.eQ.Content:s,p=void 0===(d=e.utmInfo)?{}:d,h=e.appSchemaIos,f=e.appSchemaAndroid,v=void 0!==(m=e.isOpenPopup)&&m,b=void 0===(g=e.extraInfo)?{}:g,C=e.onClick,Z=e.isAlertPage,(0,c.R)({element:n,id:o,url:i,source:a,scenes:u,utmInfo:p,appSchemaIos:h,appSchemaAndroid:f,isOpenPopup:v,extraInfo:b,trackEvent:t,onClick:C,isAlertPage:Z}),[2]})}),function(t){return e.apply(this,arguments)}),[t])}},47631:function(e,t,n){"use strict";n.d(t,{a:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--AlarmFill24"+(t?" "+t:"")}),r().createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},r().createElement("path",{d:"M12 22.486a9 9 0 1 0 0-18 9 9 0 0 0 0 18ZM11 10.5v2.97a.75.75 0 0 0 .374.68l2.598 1.5a.75.75 0 0 0 .75-1.3L12.5 13.067V10.5a.75.75 0 0 0-1.5 0ZM7.374 3.584a.75.75 0 0 1-.208 1.04l-3 2a.75.75 0 0 1-.832-1.248l3-2a.75.75 0 0 1 1.04.208ZM16.376 3.584a.75.75 0 0 0 .208 1.04l3 2a.75.75 0 0 0 .832-1.248l-3-2a.75.75 0 0 0-1.04.208Z"})))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Clock"+(e.className?" "+e.className:"")}}))}},59078:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"16",height:"16",viewBox:"0 0 16 16"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ArrowDownSmall16"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M8 9.748 4.22 5.723a.684.684 0 0 0-1.01 0 .796.796 0 0 0 0 1.075l4.15 4.42a.867.867 0 0 0 1.28 0l4.15-4.42a.796.796 0 0 0 0-1.075.684.684 0 0 0-1.01 0L8 9.748Z",clipRule:"evenodd"}))}},8512:function(e,t,n){"use strict";n.d(t,{R:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ArrowExpand24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M20 3.25h-6.5a.75.75 0 0 0 0 1.5h4.69l-5.22 5.22a.75.75 0 1 0 1.06 1.06l5.22-5.22v4.69a.75.75 0 0 0 1.5 0V4a.747.747 0 0 0-.75-.75ZM9.97 12.97l-5.22 5.22V13.5a.75.75 0 0 0-1.5 0V20a.748.748 0 0 0 .75.75h6.5a.75.75 0 0 0 0-1.5H5.81l5.22-5.22a.75.75 0 1 0-1.06-1.06Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--FullscreenEnter"+(e.className?" "+e.className:"")}}))}},31458:function(e,t,n){"use strict";n.d(t,{W:function(){return c},Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--BadgeProFill24"+(t?" "+t:"")}),r().createElement("path",{d:"m15.712 4.011 2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029c-.144.206-.24.44-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.739 1.739 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.739 1.739 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029c.144-.206.24-.44.285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285ZM11.875 8.84a4.21 4.21 0 1 0 0 8.42 4.21 4.21 0 0 0 0-8.42Zm2.086 4.044-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598Zm2.066-6.143h-2.65a.298.298 0 0 0-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 0 0 .062-.164c0-.158-.137-.286-.306-.286ZM11.73 8.46l-.816-1.503a.298.298 0 0 0-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 0 0 .062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027V8.46Z"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--LabelProfessional"+(e.className?" "+e.className:"")}}))}},27834:function(e,t,n){"use strict";n.d(t,{N:function(){return c},Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--BadgeRecommendationFill24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"m12.868 2.899 6.597 3.8c.538.31.868.882.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 0 1-.868-1.5V8.199c0-.618.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 0 1 1.736 0Zm-2.614 11.85a.29.29 0 0 1 .255.148l1.239 2.207a.289.289 0 0 0 .505 0l1.238-2.207a.29.29 0 0 1 .255-.148l2.52.023a.29.29 0 0 0 .253-.434l-1.284-2.192a.288.288 0 0 1 0-.292l1.284-2.192a.288.288 0 0 0-.253-.434l-2.52.023a.29.29 0 0 1-.255-.148l-1.239-2.207a.289.289 0 0 0-.505 0L10.51 9.103a.29.29 0 0 1-.255.148l-2.52-.023a.29.29 0 0 0-.253.434l1.284 2.192a.288.288 0 0 1 0 .292L7.48 14.338a.288.288 0 0 0 .253.434l2.52-.023Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--LabelEditorRecommendation"+(e.className?" "+e.className:"")}}))}},64884:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},o:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--BadgeRelevantFill24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"m15.465 4.544 2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 0 1 0 1.857l-1.32 1.893a1.626 1.626 0 0 0-.266.643l-.406 2.272a1.624 1.624 0 0 1-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.267l-1.894 1.319a1.624 1.624 0 0 1-1.856 0l-1.894-1.32a1.624 1.624 0 0 0-.643-.266l-2.272-.406a1.624 1.624 0 0 1-1.313-1.313l-.406-2.272a1.625 1.625 0 0 0-.266-.643l-1.32-1.893a1.624 1.624 0 0 1 0-1.857l1.32-1.894c.134-.193.224-.412.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.041.45-.132.643-.266l1.894-1.32a1.624 1.624 0 0 1 1.856 0l1.894 1.32.643.266ZM12 14.187c.526 0 .977-.208 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.977.209-1.352.625a2.166 2.166 0 0 0-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.417.825.625 1.351.625Zm3.436-3.159a.373.373 0 0 0-.278-.121c-.106 0-.199.04-.277.121a.402.402 0 0 0-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 0 1-.81-2.027v-.82a.402.402 0 0 0-.118-.289.372.372 0 0 0-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 0 0-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 0 0-.117-.289Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--LabelRelevant"+(e.className?" "+e.className:"")}}))}},38003:function(e,t,n){"use strict";n.d(t,{T:function(){return c},Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--BadgeWriteFill24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"m15.712 4.011 2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285ZM7.874 14.585l-.551 1.838a.204.204 0 0 0 .255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 0 0 0-.385l-1.524-1.524a.273.273 0 0 0-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916Zm8.581-6.317-.723-.723a.786.786 0 0 0-1.111 0l-.882.88a.262.262 0 0 0 0 .371l1.465 1.465a.262.262 0 0 0 .37 0l.881-.881a.786.786 0 0 0 0-1.112Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--BadgeWrite"+(e.className?" "+e.className:"")}}))}},25195:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},q:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--BlueBook24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"m15.333 19.333-2.764 2.765a.333.333 0 0 1-.569-.236v-2.529h3.333Zm0-13.333c.737 0 1.334.597 1.334 1.333V16A2.667 2.667 0 0 1 14 18.666H7.333A1.333 1.333 0 0 1 6 17.334v-10C6 6.597 6.597 6 7.333 6h8Zm.394-1.987a2.933 2.933 0 0 1 2.93 2.79l.004.143v8.838c0 .693-.53 1.262-1.205 1.327l-.129.006V6.946a1.6 1.6 0 0 0-1.49-1.596l-.11-.004H7.333c0-.736.597-1.333 1.334-1.333h7.06Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--BlueBook"+(e.className?" "+e.className:"")}}))}},97725:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"16",height:"16",viewBox:"0 0 16 16"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ChatBubble16"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M7.988 2.65c-3.034 0-5.338 2.487-5.338 5.341 0 3.3 2.682 5.359 5.35 5.359.878 0 1.852-.239 2.618-.689l.004-.002c.291-.178.785-.48 1.417-.277l.746.221-.256-.856a1.28 1.28 0 0 1 .096-1.062c.469-.866.725-1.794.725-2.676 0-2.825-2.257-5.359-5.362-5.359ZM1.35 7.991c0-3.541 2.856-6.641 6.638-6.641 3.867 0 6.662 3.161 6.662 6.659 0 1.133-.329 2.278-.889 3.308l-.003.006.003.009a.77.77 0 0 1 .01.03l.406 1.359c.106.383.002.78-.284 1.043-.277.255-.665.33-1.024.22l-1.208-.358-.018-.006a.083.083 0 0 0-.027-.006c-.004 0-.014 0-.035.007a1.449 1.449 0 0 0-.29.153l-.009.005c-.986.58-2.194.871-3.282.871-3.283 0-6.65-2.543-6.65-6.659Z",clipRule:"evenodd"}))}},73108:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},b:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ChatBubbleFill24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M12 2.75a9.25 9.25 0 1 0 4.737 17.197l2.643.817a1 1 0 0 0 1.25-1.25l-.8-2.588A9.25 9.25 0 0 0 12 2.75Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Comment"+(e.className?" "+e.className:"")}}))}},60203:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ChatBubbleHashFill24"+(t?" "+t:"")}),r().createElement("path",{d:"m13.373 10.856-.588 2.068h-2.02l.59-2.068h2.018Z"}),r().createElement("path",{fillRule:"evenodd",d:"M21.25 12a9.25 9.25 0 1 0-17.08 4.926l-.8 2.588a1 1 0 0 0 1.25 1.25l2.643-.817A9.25 9.25 0 0 0 21.25 12Zm-9.764-4.678a.841.841 0 0 1 .578 1.04l-.23.812h2.018l.362-1.273a.841.841 0 0 1 1.618.46l-.23.813h.42a.841.841 0 1 1 0 1.682h-.9l-.588 2.068h.952a.841.841 0 1 1 0 1.682h-1.431l-.425 1.493a.841.841 0 0 1-1.618-.46l.294-1.033h-2.02l-.424 1.493a.841.841 0 0 1-1.618-.46l.294-1.033H7.98a.841.841 0 1 1 0-1.682h1.036l.588-2.068H8.517a.841.841 0 1 1 0-1.682h1.567l.362-1.273a.841.841 0 0 1 1.04-.579Z",clipRule:"evenodd"}))}},86481:function(e,t,n){"use strict";n.d(t,{E:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Crab24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M17.526 5.497a.75.75 0 0 1 .657-.744 4.621 4.621 0 0 1 3.644 1.113c.893.78 1.479 1.892 1.479 2.993a3.807 3.807 0 0 1-3.807 3.807c-1.46 0-2.618-.65-3.298-1.671-.67-1.005-.839-2.307-.48-3.564a.75.75 0 0 1 .959-.506l.846.283v-1.71Zm1.5.729v2.022a.75.75 0 0 1-.987.712l-1-.334c-.02.585.13 1.119.41 1.537.389.583 1.066 1.003 2.05 1.003a2.307 2.307 0 0 0 2.307-2.307c0-.586-.331-1.309-.966-1.864a3.124 3.124 0 0 0-1.814-.77ZM6.436 4.737a.75.75 0 0 1 .657.744v1.725l.856-.286a.75.75 0 0 1 .958.506c.361 1.262.192 2.57-.48 3.579-.684 1.025-1.846 1.678-3.313 1.678A3.822 3.822 0 0 1 1.29 8.86c0-1.106.589-2.222 1.486-3.006a4.641 4.641 0 0 1 3.659-1.117ZM3.764 6.984c-.64.558-.973 1.286-.973 1.876a2.322 2.322 0 0 0 2.323 2.323c.99 0 1.672-.423 2.064-1.01.281-.423.434-.962.413-1.552l-1.011.337a.75.75 0 0 1-.987-.712V6.21a3.144 3.144 0 0 0-1.83.775ZM16.75 18.405c0-2.014-1.864-3.906-4.5-3.906s-4.5 1.892-4.5 3.906c0 .316.114.513.28.655.19.16.518.302.976.302h6.488c.458 0 .787-.142.975-.302.167-.142.281-.34.281-.655Zm1.5 0c0 1.517-1.239 2.457-2.756 2.457H9.006c-1.517 0-2.756-.94-2.756-2.457 0-2.985 2.686-5.406 6-5.406s6 2.42 6 5.406Z",clipRule:"evenodd"}),r().createElement("path",{d:"M11.25 12.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM15.25 12.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),r().createElement("path",{fillRule:"evenodd",d:"M5.848 17.446a.6.6 0 0 1-.544.65l-1.979.18a.6.6 0 0 1-.107-1.196l1.978-.178a.6.6 0 0 1 .652.544ZM5.83 19.432a.6.6 0 0 1-.336.78l-1.444.573a.6.6 0 1 1-.443-1.115l1.444-.574a.6.6 0 0 1 .779.336ZM5.963 15.247a.6.6 0 0 1-.6.6h-1.72a.6.6 0 1 1 0-1.2h1.72a.6.6 0 0 1 .6.6ZM18.765 17.446a.6.6 0 0 0 .544.65l1.979.18a.6.6 0 0 0 .107-1.196l-1.978-.178a.6.6 0 0 0-.652.544ZM18.783 19.432a.6.6 0 0 0 .336.78l1.444.573a.6.6 0 1 0 .443-1.115l-1.444-.574a.6.6 0 0 0-.779.336ZM18.65 15.247a.6.6 0 0 0 .6.6h1.721a.6.6 0 0 0 0-1.2h-1.72a.6.6 0 0 0-.6.6Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Crab"+(e.className?" "+e.className:"")}}))}},5537:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},t:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Ebook24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M16 17.649V2.931a.92.92 0 0 0-.044-.283.943.943 0 0 0-1.183-.604L4.655 5.235A.932.932 0 0 0 4 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 0 0-.941-.931h-.773v12.834a.935.935 0 0 1-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 0 0 .653-.886Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Ebook"+(e.className?" "+e.className:"")}}))}},26115:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--EyeSlash24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M7.517 4.474c1.206-.453 2.608-.724 4.234-.724 6.036 0 8.834 3.715 9.985 6.161a5.255 5.255 0 0 1-.393 5.219 11.207 11.207 0 0 1-3.027 3.036.75.75 0 1 1-.835-1.245c.058-.04.115-.078.171-.118a9.704 9.704 0 0 0 2.447-2.511 3.755 3.755 0 0 0 .28-3.742c-1.003-2.131-3.374-5.3-8.628-5.3-1.456 0-2.679.242-3.706.628a.75.75 0 1 1-.528-1.404ZM5.498 6.382a.75.75 0 0 1-.07 1.059c-1.126.987-1.854 2.148-2.306 3.105a3.756 3.756 0 0 0 .281 3.749c1.206 1.787 3.71 4.26 8.348 4.26 1.237 0 2.315-.175 3.253-.462a.75.75 0 1 1 .438 1.435c-1.084.33-2.31.527-3.69.527-5.28 0-8.198-2.855-9.592-4.921a5.256 5.256 0 0 1-.394-5.228c.513-1.09 1.353-2.435 2.674-3.593a.75.75 0 0 1 1.058.07Z",clipRule:"evenodd"}),r().createElement("path",{fillRule:"evenodd",d:"M20.048 20.012a.75.75 0 0 1-1.06.036l-15.5-14.5a.75.75 0 0 1 1.025-1.096l15.5 14.5a.75.75 0 0 1 .035 1.06Z",clipRule:"evenodd"}),r().createElement("path",{fillRule:"evenodd",d:"M9.559 11.535c-.203 1.067.554 2.164 1.808 2.374a2.36 2.36 0 0 0 1.707-.36.75.75 0 0 1 1.043.191.75.75 0 0 1-.215 1.04 3.893 3.893 0 0 1-2.816.602c-1.984-.331-3.381-2.13-3.007-4.094.06-.311.16-.607.297-.881a.768.768 0 0 1 1.01-.358.733.733 0 0 1 .338.995 1.908 1.908 0 0 0-.165.491Zm1.219-2.362a.769.769 0 0 1 .716-.797c.302-.02.61-.007.92.045 1.784.299 3.086 1.775 3.066 3.501a.77.77 0 0 1-.762.754.73.73 0 0 1-.744-.74c.011-.948-.72-1.854-1.842-2.041a2.427 2.427 0 0 0-.566-.028.732.732 0 0 1-.788-.694Z",clipRule:"evenodd"}))}},53237:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},d:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--HashBubbleFill24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M6.24 1.924c-.432 0-.829 0-1.152.044-.355.047-.73.16-1.04.469-.309.309-.421.685-.47 1.04-.042.323-.042.72-.042 1.153v13.232c0 .433 0 .83.043 1.152.048.356.16.732.47 1.04.308.31.684.422 1.04.47.322.043.72.043 1.152.043h1.39l.478 2.13c.03.14.07.315.125.459.064.167.214.464.573.6.36.135.669.011.827-.072.136-.07.282-.177.397-.26l3.932-2.857h3.796c.433 0 .83 0 1.152-.043.356-.048.732-.16 1.04-.47.31-.308.422-.684.47-1.04.043-.322.043-.72.043-1.152V4.63c0-.433 0-.83-.043-1.153-.048-.355-.16-.731-.47-1.04-.308-.31-.684-.422-1.04-.47-.322-.043-.72-.043-1.152-.043H6.241Zm5.267 5.384a.75.75 0 0 1 .517.927l-.226.795h1.94l.343-1.205a.75.75 0 1 1 1.443.41l-.226.795h.452a.75.75 0 0 1 0 1.5h-.88l-.568 2h.948a.75.75 0 0 1 0 1.5h-1.375l-.404 1.42a.75.75 0 1 1-1.442-.41l.287-1.01h-1.94l-.405 1.42a.75.75 0 1 1-1.442-.41l.287-1.01H8.25a.75.75 0 0 1 0-1.5h.992l.57-2H8.75a.75.75 0 0 1 0-1.5h1.488l.343-1.205a.75.75 0 0 1 .926-.517Zm-.136 3.222-.57 2h1.941l.57-2H11.37Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Hashtag"+(e.className?" "+e.className:"")}}))}},23322:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"16",height:"16",viewBox:"0 0 16 16"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Heart16"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M5.626 3.236c-.758-.106-1.647.092-2.458 1.066-.708.849-.914 1.743-.805 2.638.11.919.558 1.87 1.216 2.77a11.45 11.45 0 0 0 2.328 2.331c.79.593 1.54.995 2.095 1.17.554-.175 1.304-.577 2.094-1.17a11.453 11.453 0 0 0 2.328-2.33c.658-.9 1.105-1.852 1.216-2.77.109-.896-.097-1.79-.805-2.64-.78-.937-1.667-1.14-2.442-1.039-.821.107-1.512.559-1.797.912a.765.765 0 0 1-1.19-.003c-.29-.362-.972-.823-1.78-.935Zm2.38-.301a4.396 4.396 0 0 0-2.201-.987c-1.187-.165-2.527.19-3.636 1.521C1.222 4.606.923 5.862 1.072 7.097c.147 1.212.72 2.371 1.458 3.38a12.748 12.748 0 0 0 2.597 2.604c.914.686 1.863 1.205 2.647 1.417.15.04.305.04.456 0 .783-.212 1.732-.73 2.646-1.417a12.748 12.748 0 0 0 2.598-2.604c.737-1.009 1.31-2.168 1.457-3.38.15-1.235-.15-2.491-1.097-3.628-1.086-1.303-2.426-1.65-3.609-1.496a4.448 4.448 0 0 0-2.22.962Z",clipRule:"evenodd"}))}},37986:function(e,t,n){"use strict";n.d(t,{N:function(){return c},Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--LabelDaily24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.713a4.846 4.846 0 0 1 2.016 2.016c.464.869.712 1.73.712 4.108v3.926c0 2.378-.248 3.24-.712 4.109a4.846 4.846 0 0 1-2.017 2.016c-.869.465-1.73.712-4.108.712h-3.926c-2.377 0-3.24-.247-4.109-.712a4.846 4.846 0 0 1-2.016-2.016c-.465-.87-.712-1.731-.712-4.109v-3.926c0-2.377.247-3.24.712-4.108a4.846 4.846 0 0 1 2.016-2.016c.87-.465 1.732-.713 4.109-.713ZM12 17.61a1.027 1.027 0 0 0 0-2.053A3.557 3.557 0 1 1 15.557 12a1.027 1.027 0 0 0 2.053 0A5.61 5.61 0 1 0 12 17.61Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--LabelDaily"+(e.className?" "+e.className:"")}}))}},6788:function(e,t,n){"use strict";n.d(t,{S:function(){return c},Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--LabelWeekly24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 0 1 .346.543v10.309a.24.24 0 0 1-.342.217c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.603.737a.6.6 0 0 1-.825-.556V6.957a1.8 1.8 0 0 1 1.182-1.691Zm9.045.339c1.335-.626 2.672-.939 4.01-.939 1.07 0 2.152.2 3.246.6a1.8 1.8 0 0 1 1.182 1.69v8.96a.6.6 0 0 1-.824.555c-1.216-.49-2.418-.736-3.604-.736-1.339 0-2.677.313-4.014.94a.24.24 0 0 1-.342-.218V6.148a.6.6 0 0 1 .346-.543Zm4.01 11.282c1.311 0 2.619.27 3.918.805.419.173.62.657.45 1.082a.813.813 0 0 1-1.065.456c-1.107-.456-2.207-.683-3.303-.683-1.08 0-2.162.22-3.254.664-.207.08-.426.12-.648.12l-2.079.002c-.195 0-.389-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.683a.813.813 0 0 1-1.065-.456.834.834 0 0 1 .45-1.082c1.3-.535 2.607-.805 3.918-.805a10.007 10.007 0 0 1 3.391.604 3 3 0 0 0 1.025.18l.974.001a3 3 0 0 0 1.027-.18 10.012 10.012 0 0 1 3.393-.604Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--LabelWeekly"+(e.className?" "+e.className:"")}}))}},81809:function(e,t,n){"use strict";n.d(t,{H:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Org24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M6.326 6.58a4.007 4.007 0 0 1 7.456-2.405c.106.182.2.367.284.553a4.007 4.007 0 0 1 5.716 5.322l-.012.021a4.006 4.006 0 0 1-1.877 7.547c-.091 0-.182-.002-.272-.006a4.008 4.008 0 0 1-7.59 1.984A4.008 4.008 0 0 1 4.39 14.09a4.008 4.008 0 0 1 1.937-7.51Zm1.888.428a2.257 2.257 0 0 1 4.053-1.958c.666 1.154.75 2.465.49 3.601-.203.893-.591 1.573-.967 1.965a6.99 6.99 0 0 0-.495-.94c-.676-1.075-1.712-2.085-3.08-2.668Zm7.595 10.259a7.024 7.024 0 0 1-3.649-2.925c-.693 1.051-1.125 2.545-.72 4.052a2.256 2.256 0 0 0 4.369-1.127Zm-2.193-3.9c.21.365.513.755.912 1.126.854.792 2.032 1.375 3.365 1.375a2.256 2.256 0 0 0 .756-4.383 6.985 6.985 0 0 1-2.74 1.588 6.547 6.547 0 0 1-2.293.294Zm.848-4.327c.173-.76.233-1.598.126-2.451a2.257 2.257 0 0 1 3.677 2.586c-.667 1.154-1.76 1.882-2.874 2.225-.833.257-1.581.273-2.106.162.55-.676.961-1.577 1.177-2.522ZM9.55 17.681c-.12-1.6.373-3.107 1.125-4.262a5.037 5.037 0 0 0-1.204-.095c-1.164.044-2.41.464-3.352 1.407a2.256 2.256 0 0 0 3.19 3.19l.241-.24Zm.263-7.074c.213.34.373.676.486.992a7.02 7.02 0 0 0-.894-.023c-1.2.044-2.51.397-3.654 1.19a2.256 2.256 0 0 1 1.168-4.358c1.287.345 2.274 1.213 2.894 2.2Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Org"+(e.className?" "+e.className:"")}}))}},32516:function(e,t,n){"use strict";n.d(t,{G:function(){return c},Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--SearchCircleFill24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Zm-.778-7.617c1.79 0 3.222-1.438 3.222-3.192C14.444 9.438 13.011 8 11.222 8S8 9.438 8 11.191c0 1.754 1.433 3.192 3.222 3.192Zm0 1.5c.947 0 1.83-.277 2.569-.754l1.9 1.901a.75.75 0 0 0 1.062-1.06l-1.845-1.845a4.652 4.652 0 0 0 1.036-2.934c0-2.59-2.114-4.691-4.722-4.691C8.614 6.5 6.5 8.6 6.5 11.191c0 2.591 2.114 4.692 4.722 4.692Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"ZDI ZDI--Circlesearch24"+(e.className?" "+e.className:"")}}))}},41884:function(e,t,n){"use strict";n.d(t,{E:function(){return c},Z:function(){return l}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Stamp24"+(t?" "+t:"")}),r().createElement("path",{fillRule:"evenodd",d:"M12.3 3a9.3 9.3 0 1 1 0 18.6 9.3 9.3 0 0 1 0-18.6Zm4.5 15H7.2v.6h9.6V18Zm-9.99-5.785-.394 1.082c-.028.079.008.167.084.213l.04.02.678.247-.162.443 8.989 3.272.161-.444.678.247c.087.032.18.004.226-.063l.019-.036.393-1.082L6.81 12.215Zm.25-.673-.045.11 10.713 3.899c.326-.897-.163-1.906-1.097-2.311l-.119-.047-7.05-2.566c-.971-.354-2.02.055-2.403.915Zm6.467-5.502-1.462 4.895 2.255.821 2.026-4.69a1.5 1.5 0 1 0-2.82-1.026Z",clipRule:"evenodd"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Stamp"+(e.className?" "+e.className:"")}}))}},63722:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},g:function(){return c}});var o=n(87363),r=n.n(o),i=n(30851),a=Object.assign;function l(e){var t;return r().createElement(i.Z,a(a({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ThumbFill24"+(t?" "+t:"")}),r().createElement("path",{d:"M10.02 1.15c-.794-.076-1.366.534-1.459 1.174-.4 2.764-1.968 4.968-4.473 6.306-.884.472-1.563 1.391-1.562 2.5 0 .762.002 1.523.004 2.284.003 1.658.007 3.315.003 4.972a2.882 2.882 0 0 0 2.88 2.889h10.742a3.875 3.875 0 0 0 3.757-2.926l1.807-7.154a2.875 2.875 0 0 0-2.787-3.58h-5.444c.187-1.277.225-2.715-.194-3.922-.224-.643-.586-1.247-1.147-1.71-.565-.468-1.278-.751-2.127-.833Z"}))}function c(e){return r().createElement(l,a(a({},e),{className:function(){return"Zi Zi--Like"+(e.className?" "+e.className:"")}}))}},42069:function(e,t,n){"use strict";var o=n(87363),r=n(2903),i={Element:"element",Text:"text",Empty:"empty",Fragment:"fragment"},a=function e(t,n){var o;return[t].concat(null==(o=n(t))?[]:e(o,n))},l=function(e,t){var n=a(e,function(e){return e.parent}),o=a(t,function(e){return e.parent}),r=n.findIndex(function(e){return o.includes(e)});return[n[r],n[r-1]]},c=function(e,t){e.children.splice(e.children.indexOf(t)+1,0,{node:" "})},s=function(e){var t=!1;return e.reduce(function(e,n){if(e&&n&&r(String(e.node),String(n.node))){var o=l(e,n);c(o[0],o[1]),t=!0}return n}),t},u=function(e){if(!e)return null;var t,n=[],r=function e(n){var r,a=n.node;return n.type=(r=a,o.isValidElement(r)?i.Element:"string"==typeof r||"number"==typeof r?i.Text:null==r||"boolean"==typeof r?i.Empty:Array.isArray(r)?i.Fragment:void 0),n.type===i.Element?n.children=o.Children.map(a.props.children,function(o){return e({node:o,parent:n},t)}):n.type===i.Fragment&&(n.children=o.Children.map(a,function(o){return e({node:o,parent:n},t)})),t(n),n}({node:e,parent:null},t=function(e){e.type===i.Text&&""!==e.node&&n.push(e)});return n.length&&s(n)?function e(t){return Array.isArray(t.children)?t.type===i.Fragment?o.Children.map(t.children.map(e),function(e){return e}):o.createElement(t.node.type,t.node.props,o.Children.map(t.children.map(e),function(e){return e})):t.node}(r):e},d=function(e){var t=e.component,n=e.children;return o.createElement(t,{children:u(n)})};d.defaultProps={component:o.Fragment||"span"},t.CJKSpace=d},97345:function(e,t,n){e.exports=n(82806),e.exports.CJKSpace=n(42069).CJKSpace},79445:function(e,t,n){var o=n(47402),r=n(31511),i=n(17535),a=Math.max;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return -1;var c=null==n?0:i(n);return c<0&&(c=a(l+c,0)),o(e,r(t,3),c)}},11017:function(e,t,n){"use strict";var o,r=n(15934),i=n(74185),a=function(e,t){var n={};for(var o in e)!(t.indexOf(o)>=0)&&Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},l=function(e,t){if(!r._(e,t))throw TypeError("Cannot call a class as a function")},c=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e},s=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i._(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=(o=function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}},function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(87363)),h=n(8372),f=function(e){function t(){l(this,t);for(var e,n,o,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={inView:!1},o.node=null,o.handleNode=function(e){o.node&&(0,h.unobserve)(o.node),o.node=e,o.observeNode(),o.props.innerRef&&o.props.innerRef(e)},o.handleChange=function(e){o.setState({inView:e}),o.props.onChange&&o.props.onChange(e)},c(o,n)}return s(t,e),d(t,[{key:"componentDidUpdate",value:function(e,t){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold)&&((0,h.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,h.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,h.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,o=e.rootMargin,r=e.rootId;(0,h.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:o},r)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,o=e.tag,r=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,a(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),i=this.state.inView;return p.createElement(o,u({},r,{ref:this.handleNode}),"function"==typeof n?n(i):null,"function"==typeof t?t(i):t)}}]),t}(p.Component);f.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.Z=f},8372:function(e,t){"use strict";var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},o=arguments[3],r=n.root,c=n.rootMargin,s=n.threshold||0;if(e&&t){var u=c?s.toString()+"_"+c:""+s.toString();r&&(u=o?o+"_"+u:null);var d=u?l.get(u):null;!d&&(d=new IntersectionObserver(i,n),u&&l.set(u,d));var p={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return a.set(e,p),d.observe(e),p}},o=function(e){if(e){var t=a.get(e);if(t){var n=t.observerId,o=t.observer,r=n?l.get(n):o;r&&r.unobserve(e);var i=!1;n&&a.forEach(function(t,o){t&&t.observerId===n&&o!==e&&(i=!0)}),r&&!i&&(r.disconnect(),l.delete(n)),a.delete(e)}}},r=function(){l.forEach(function(e){e.disconnect()}),l.clear(),a.clear()},i=function(e){e.forEach(function(e){var t=e.isIntersecting,n=e.intersectionRatio,o=e.target,r=a.get(o);if(r&&n>=0){var i=r.options,l=!1;Array.isArray(i.threshold)?l=i.threshold.some(function(e){return r.visible?n>e:n>=e}):void 0!==i.threshold&&(l=r.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(l=l&&t),r.callback&&r.callback(l)}})};Object.defineProperty(t,"__esModule",{value:!0}),t.observe=n,t.unobserve=o,t.destroy=r;var a=new Map,l=new Map;t.default={observe:n,unobserve:o,destroy:r}},58714:function(e,t,n){"use strict";var o=n(75827),r=function(e){var t={};if((e=e.trim()).length)for(var n,r=RegExp(s.source,"g");n=r.exec(e);){var i=o._(n.slice(1),2),a=i[0],l=i[1];t[a]=l}return t},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o._(e,5),i=n[0],a=n[1],l=n[2],s=n[3],u=n[4],d="open";return"/"===a?d="close":(c.includes(l)||"/"===u)&&(d="self-close"),{tagHTML:i,tagName:l,tagType:d,attrs:t.parseAttrs?r(s):s}},a=function(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t},l=function(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"sup":return{type:"replace-self",content:""};case"invisible":return{type:"hide"};default:return null}};Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var c=["img","br"],s=/([\w|-]+)(?:="([^"]*)")?/;t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=r,t.parseTagGroup=i,t.parseTag=function(e,n){var o=t.TAG_RE.exec(e);if(o)return i(o,n)},t.getBlockType=a,t.truncateHTML=function(e){for(var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r.endsWith,u=void 0===s?"…":s,d=r.placeholders,p=void 0===d?{}:d,h=[],f=[],m=[],v={},g={},b=RegExp(t.TAG_RE.source,"g"),C=0,Z=0,y=0,_=0,w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.push(e),t||(C+=e.length),Z+=e.length};n=b.exec(e);){var k=i(n,{parseAttrs:!0}),x=k.tagHTML,S=k.tagType,E=k.tagName,I="close"===S&&c.includes(E)?"invalid":a("close"!==S?k:f[f.length-1]),T=p[I]?{type:"replace",content:p[I]}:l(I);"close"!==S&&(v[I]=(v[I]||0)+1);var N=e.slice(Z,n.index);if(C+N.length>=o&&0===y&&0===_){for(w(N.slice(0,o-C));m.length;){var A=m.pop();h.push("</".concat(A.tagName,">"))}break}0===y&&w(N,0!==_),"invalid"!==I&&("open"===S?f.push(k):"close"===S&&f.pop(),T?("replace"===T.type&&(0===y&&"close"!==S&&h.push(T.content),"open"===S?y++:"close"===S&&y--),0===y&&"replace-self"===T.type&&h.push(T.content),0===y&&"hide"===T.type&&("open"===S?_++:"close"===S&&_--,h.push(x))):0===y&&(h.push(x),"open"===S?m.push(k):"close"===S&&m.pop())),"video-box"!==I||g.type||"string"==typeof k.attrs||(g.type="video",g.url=k.attrs["data-poster"],g.id=k.attrs["data-lens-id"]),Z=b.lastIndex}C<o&&w(e.slice(Z).slice(0,o-C));var B=C>o||C===o&&Z<e.length||!!v.h1||!!v.h2||!!v.h3||!!v.h4||!!v.h5||!!v.h6||!!v.blockquote||!!v.pre||!!v.img||!!v.sup||!!v["video-box"]||!!v["link-card"]||(v.br||0)+(v.p||0)+(v.li||0)>1;return{isTruncated:B,thumbnailInfo:g,content:"".concat(h.join("").trim().replace(/\s{2,}/g," ")).concat(B?u:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},36480:function(e,t,n){"use strict";t.Cb=t.tK=void 0;var o=n(58714);Object.defineProperty(t,"tK",{enumerable:!0,get:function(){return o.truncateHTML}}),Object.defineProperty(t,"Cb",{enumerable:!0,get:function(){return o.stripHTML}})},71702:function(e,t,n){"use strict";e.exports=n.p+"assets/logo.e049e9b9.png"},82694:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var o=n(30971),r=n(95728),i=n(13649),a=n(71254);function l(){var e=!1,t=[],n=new Set,l={subscribe:function(e){return n.add(e),function(){n.delete(e)}},start:function(o,r){if(!e)return new Promise(function(e){t.push({animation:[o,r],resolve:e})});var a=[];return n.forEach(function(e){a.push((0,i.d5)(e,o,{transitionOverride:r}))}),Promise.all(a)},set:function(t){return(0,r.k)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),n.forEach(function(e){(0,a.gg)(e,t)})},stop:function(){n.forEach(function(e){(0,i.p_)(e)})},mount:function(){return e=!0,t.forEach(function(e){var t=e.animation,n=e.resolve;l.start.apply(l,(0,o.ev)([],(0,o.CR)(t),!1)).then(n)}),function(){e=!1,l.stop()}}};return l}var c=n(87363),s=n(83619);function u(){var e=(0,s.h)(l);return(0,c.useEffect)(e.mount,[]),e}}}]);
//# sourceMappingURL=shared-7df56d9846d5f71fc0428c60463f36496d768b20.0c300b2d89b58c9a609e.js.map